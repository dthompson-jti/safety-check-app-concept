/* src/features/Shell/AppFooter.module.css */

.footer {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 50;
  /* Glassmorphism base */
  background-color: var(--surface-bg-header-translucent);
  backdrop-filter: blur(var(--blur-glass));
  -webkit-backdrop-filter: blur(var(--blur-glass));
  border-top: 1px solid var(--surface-border-secondary);
  padding: var(--spacing-4);
  /* Safe area handling for modern mobile devices (iPhone Home Indicator) */
  padding-bottom: calc(var(--spacing-4) + env(safe-area-inset-bottom));
  transition: padding 200ms ease-out;
}

.footer[data-view-only="true"] {
  padding: var(--spacing-3);
  padding-bottom: calc(var(--spacing-3) + env(safe-area-inset-bottom));
}

/* Drop shadow only when enabled */
.footer[data-shadow="true"] {
  box-shadow:
    0 -3px 6px -3px rgba(0, 0, 0, 0.1),
    0 -6px 12px -4px rgba(0, 0, 0, 0.08);
}

.footer[data-footer-style='tertiary'] {
  background-color: var(--surface-bg-tertiary-translucent);
}

.footer[data-footer-style='quaternary'] {
  background-color: var(--surface-bg-quaternary-translucent);
}

/* =========================================
   Glass Pulse Effects - Late Check Warning
   ========================================= */

/* Basic Pulse - Opacity breathing effect (1.2s cycle) */
/* Moved to ::before to layer ON TOP of glass background */
body[data-glass-pulse="basic"] .footer::before,
body[data-glass-tint="active"] .footer::before {
  content: '';
  position: absolute;
  inset: 0;
  z-index: -1;
  /* Behind content (footer text is direct descendent usually, need to check stacking) */
  /* Note: Gradient used z-index -1, we'll match it. 
     If footer children don't have z-index, they might be below -1? 
     No, stacking context is footer. -1 is behind background of footer? 
     Wait, footer has background. -1 goes BEHIND footer background? 
     Actually, standard CSS: negative z-index children go behind parent background 
     IF parent doesn't have a background-color? 
     Footer DOES have background. 
     So ::before with -1 might be hidden! 
     
     BUT Gradient pulse is using z-index: -1 and worked? 
     Let's check code. 
     Line 10 says background-color set on .footer. 
     Line 60 (Step 399) sets z-index: -1 on Gradient ::before. 
     If User saw Gradient, then -1 works? 
     Maybe because .footer establishes a stacking context (via fixed pos or backdrop-filter)?
     Backdrop-filter establishes stacking context!
     In that context, negative z-index is behind content but... 
     Actually, "If an element with a background establishes a stacking context, the background is painted at the bottom of the stack."
     Negative z-index children are painted BEFORE the background? No, above background, below 0?
     "The background of the stacking context element is painted first."
     "Then negative z-index descendants."
     So ::before (z-1) should be ON TOP of Footer Background.
     
     So z-index: -1 is correct for "On top of bg, behind text". */
  pointer-events: none;
  animation: pulse-basic-footer 1.2s ease-in-out infinite;
  animation-delay: var(--glass-sync-delay, 0ms);
}

@keyframes pulse-basic-footer {

  0%,
  100% {
    /* Light Mode Min: 5% (Tuned additive) */
    background-color: var(--surface-bg-pulse-min, rgba(255, 59, 48, 0.05));
  }

  50% {
    /* Light Mode Max: 12% (Tuned additive) */
    background-color: var(--surface-bg-pulse-max, rgba(255, 59, 48, 0.12));
  }
}

/* Dark Mode Overrides for Basic Pulse */
body[data-theme^='dark'] .footer {
  /* Dark Mode Min: 8% (Tuned additive) */
  --surface-bg-pulse-min: rgba(255, 59, 48, 0.08);
  /* Dark Mode Max: 15% (Tuned additive) */
  --surface-bg-pulse-max: rgba(255, 59, 48, 0.15);
}

/* Gradient Pulse - Flowing magma effect (4.8s cycle, 4x sync base) */
/* Uses ::before pseudo-element to avoid conflicts with safe-area padding */
body[data-glass-pulse="gradient"] .footer::before {
  content: '';
  position: absolute;
  inset: 0;
  z-index: -1;
  /* Emulate Card Magma Colors (+ Boost) */
  /* Phase Shift: Flip Stops to Mid-Start-Mid */
  /* Light: Mid 0.15, Start 0.04 */
  --magma-start: rgba(255, 80, 40, 0.15);
  --magma-mid: rgba(255, 59, 48, 0.04);
  --magma-end: rgba(255, 80, 40, 0.15);

  /* Add Red Tint Base (Base layer of the Pulse stack, not the glass bg) */
  --magma-base: rgba(255, 59, 48, 0.10);

  background:
    linear-gradient(135deg,
      var(--magma-start) 0%,
      var(--magma-mid) 50%,
      var(--magma-end) 100%),
    var(--magma-base);
  background-size: 200% 200%;
  /* Fix: Sync with Header/Card (ease-in-out + ping-pong) */
  animation: pulse-gradient-footer 4.8s ease-in-out infinite;
}

/* Dark Mode Overrides for Gradient Pulse */
body[data-theme^='dark'][data-glass-pulse="gradient"] .footer::before {
  /* Emulate Dark Mode + Min 13% opacity request */
  /* Phase Shift: Flip Stops to Mid-Start-Mid */
  /* Dark: Mid 0.64, Start 0.23 */
  --magma-start: rgba(255, 59, 48, 0.64);
  --magma-mid: rgba(255, 59, 48, 0.23);
  --magma-end: rgba(255, 59, 48, 0.64);

  /* 
     Fix for "faintness": Inject Red Base Tint (0.25 now) 
  */
  background:
    linear-gradient(135deg,
      var(--magma-start) 0%,
      var(--magma-mid) 50%,
      var(--magma-end) 100%),
    linear-gradient(rgba(255, 59, 48, 0.25), rgba(255, 59, 48, 0.25));
}

@keyframes pulse-gradient-footer {

  0%,
  100% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 50%;
  }
}

/* Accessibility: Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {

  body[data-glass-pulse="basic"] .footer,
  body[data-glass-pulse="gradient"] .footer,
  body[data-glass-tint="active"] .footer {
    animation: none;
    background-color: var(--surface-bg-pulse-static, rgba(255, 59, 48, 0.1));
  }

  body[data-glass-pulse="gradient"] .footer::before {
    animation: none;
  }
}

.scanButton {
  width: 100%;
  height: var(--footer-action-height);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-2);
  font-size: 1rem;
  font-weight: 600;
}

/* NFC Specific Styles */
.nfcContainer {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-3);
  color: var(--surface-fg-secondary);
  width: 100%;
  height: var(--footer-action-height);
  /* Enforce height match with button to prevent layout shift */

  /* Interaction Polish: Prevent selection of status text */
  user-select: none;
  -webkit-user-select: none;
  /* Cursor indicates interactivity for the prototype shortcut */
  cursor: pointer;
}

.nfcIcon {
  font-size: var(--font-size-4xl);
  color: var(--surface-fg-primary);
  font-variation-settings: 'FILL' 1;
  line-height: 1;
}

.nfcText {
  font-weight: 600;
  font-size: 1.25rem;

  color: var(--surface-fg-primary);
}

.viewOnlyBar {
  width: 100%;
  height: 2.5rem;
  /* Reduced from 3rem (var(--footer-action-height)) */
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--spacing-1h);

  /* Text Styling - Matching NFC Label */
  font-size: var(--font-size-xl);
  font-weight: var(--font-weight-semibold);
  letter-spacing: -0.01em;
  color: var(--surface-fg-secondary);

  /* User Interaction */
  user-select: none;
  cursor: help;

  /* Reset box model - No longer a button */
  background-color: transparent;
  border: none;
  border-radius: 0;
  outline: none;
  box-shadow: none;
}