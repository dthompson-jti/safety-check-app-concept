/* src/styles/toast.css */

.toast-viewport {
  position: fixed;

  /* 
    Dynamic Positioning Contract:
    Floats above the footer (if present) + standard spacing.
  */
  bottom: calc(var(--footer-height, 0px) + var(--spacing-4));
  left: 0;
  right: 0;

  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;

  margin: 0;
  padding: 0;
  list-style: none;
  z-index: 2147483647;
  outline: none;

  /* Clicks should pass through the viewport to the content underneath. */
  pointer-events: none;
}

.toast-root {
  /* Re-enable pointer events for the toast itself. */
  pointer-events: auto;

  /* Metrics Spec */
  width: auto;
  max-width: calc(100vw - 32px);
  padding: 16px;
  border-radius: var(--radius-xl);
  gap: 16px;

  display: flex;
  align-items: center;
  /* justify-content removed to allow natural flow with close button */

  /* Typography */
  font-family: var(--font-family-sans);
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--surface-fg-secondary);

  /* Depth */
  box-shadow: var(--surface-shadow-md);

  /* Interaction */
  /* CRITICAL: touch-action: none is required for Radix Swipe to work on mobile */
  touch-action: none;
  user-select: none;
}

.toast-root .material-symbols-rounded {
  font-size: var(--icon-size-md);
  flex-shrink: 0;
}

.toast-description {
  white-space: pre-line;
  /* Support \n for multi-line error messages */
  margin: 0;
  /* Allow text to grow but not shrink below content size */
  flex-grow: 1;
}

/* --- Action Button --- */

.toast-action {
  all: unset;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0 12px;
  height: 32px;
  border-radius: var(--radius-sm);
  font-size: 0.875rem;
  font-weight: 600;
  cursor: pointer;

  /* Semantic Colors */
  background-color: var(--surface-bg-primary);
  color: var(--surface-fg-primary);
  border: 1px solid var(--surface-border-primary);
  box-shadow: var(--surface-shadow-sm);

  transition: transform 0.1s, background-color 0.2s;

  /* Separate from text and close button */
  margin-left: 8px;
  margin-right: 4px;
  white-space: nowrap;
}

.toast-action:active {
  transform: scale(0.96);
  background-color: var(--surface-bg-secondary);
}

/* --- Close Button --- */

.toast-close-button {
  all: unset;
  box-sizing: border-box;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--control-height-sm);
  height: var(--control-height-sm);
  border-radius: var(--radius-md);
  flex-shrink: 0;
  cursor: pointer;
  background: none;
  color: var(--surface-fg-tertiary);
  transition: background-color 0.2s, opacity 0.2s;
  margin-left: auto;
  /* Push to right if container expands */
}

.toast-close-button:hover {
  background-color: var(--utility-alpha-black-10);
}

.toast-close-button .material-symbols-rounded {
  font-size: var(--icon-size-md);
}

/* --- Semantic Variants --- */

/* Neutral (Default) */
.toast-root[data-variant='neutral'] {
  background-color: var(--surface-bg-primary);
  border: 1px solid var(--surface-border-secondary);
}

.toast-root[data-variant='neutral'] .toast-icon {
  color: var(--surface-fg-secondary);
}

/* Success */
.toast-root[data-variant='success'] {
  background-color: var(--surface-bg-success);
  border: 1px solid var(--surface-border-success);
}

.toast-root[data-variant='success'] .toast-icon {
  color: var(--surface-fg-success-primary);
  font-variation-settings: 'FILL' 0;
}

/* Alert / Error */
.toast-root[data-variant='alert'] {
  background-color: var(--surface-bg-error-primary);
  border: 1px solid var(--surface-border-alert);
}

.toast-root[data-variant='alert'] .toast-icon {
  color: var(--surface-fg-alert-primary);
  font-variation-settings: 'FILL' 0;
}

/* Warning */
.toast-root[data-variant='warning'] {
  background-color: var(--surface-bg-warning-primary);
  border: 1px solid var(--surface-border-warning);
}

.toast-root[data-variant='warning'] .toast-icon {
  color: var(--surface-fg-warning-primary);
  font-variation-settings: 'FILL' 0;
}

/* Info */
.toast-root[data-variant='info'] {
  background-color: var(--surface-bg-info);
  border: 1px solid var(--surface-border-info);
}

.toast-root[data-variant='info'] .toast-icon {
  color: var(--surface-fg-info-primary);
  font-variation-settings: 'FILL' 0;
}

/* Radix Swipe Transformations */
.toast-root[data-swipe='move'] {
  transform: translateX(var(--radix-toast-swipe-move-x));
}

.toast-root[data-swipe='cancel'] {
  transform: translateX(0);
  transition: transform 200ms ease-out;
}

.toast-root[data-swipe='end'] {
  animation: fadeOut 100ms ease-out forwards;
}