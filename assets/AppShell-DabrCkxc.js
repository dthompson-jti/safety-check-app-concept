import{j as n,e as Va,f as Ga,g as Ua,h as qa,i as Ya,A as Ka,k as Xa,l as Qa,m as Ja,n as Za,o as er,I as tr,p as nr,R as sr,a as or,O as ar,C as rr,q as ir,r as lr}from"./vendor-ui-XHIu5Avx.js";import{u as F,a as T,R as j,d as ee,e as te,c as Qt}from"./vendor-react-CrVhbQmT.js";import{s as So,f as cr,t as dr,a as Vt,w as xt,r as jo,b as $e,c as xs,d as ur,i as To,e as Vs,g as mr,h as hr,p as fr,j as is,k as ko,l as Io,m as No,n as bs,o as Ft,q as ys,u as ws,v as pr,x as gr,y as _s,z as Ro,A as Cs,B as Eo,C as pn,D as vr,E as xr,F as gn,G as br,H as Ao,I as yr,J as Ss,K as Oo,L as Ho,M as Bo,N as wr,O as _r,P as Cr,Q as Lo,R as Mo,S as Sr,T as jr,U as Tr,V as kr,W as Ir,X as Nr,Y as Do,Z as zo,_ as Rr,$ as Er}from"./main-GJKX4ihQ.js";import{m as Q,A as Je,M as Ar,u as Or,a as Gs,b as Xn,c as Nn}from"./vendor-heavy-DffLnaxe.js";import{B as ae,A as Hr,g as js,a as Br,u as Lr}from"./useScrollToFocused-DufegZnO.js";import{a as Vn,t as Mr}from"./Toast-DLrd6fiO.js";const Dr=(e,t)=>{const s=(e.getTime()-t)/1e3;if(s<0){const i=Math.abs(s)/60,c=Math.floor(i/60),m=Math.floor(i%60);if(i<1)return"Overdue";const h=[];return c>0&&h.push(`${c}h`),m>0&&h.push(`${m}m`),`Overdue ${h.join(" ")}`}if(s<60)return`${Math.max(0,s).toFixed(1)}s`;if(s<300){const i=Math.floor(s/60),c=Math.floor(s%60);return`${i}m ${String(c).padStart(2,"0")}s`}if(s<3600)return`${Math.ceil(s/60)}m`;const o=s/60,a=Math.floor(o/60),r=Math.round(o%60),l=[];return a>0&&l.push(`${a}h`),r>0&&l.push(`${r}m`),l.join(" ")},zr=(e,t)=>{const s=t==="early"||t==="pending"||t==="due"||t==="missed",o=Date.now(),a=(e.getTime()-o)/1e3;let r=So;t!=="missed"&&(a<60&&a>-60?r=cr:a<300&&(r=dr));const l=F(r);if(!s)return"";if(t==="missed"){const i=(l-e.getTime())/1e3,c=Math.floor(i/60),m=Math.floor(c/60),h=c%60;if(c<1)return"Overdue";const u=[];return m>0&&u.push(`${m}h`),h>0&&u.push(`${h}m`),`Overdue ${u.join(" ")}`}return Dr(e,l)},Pr=["pulse-basic","pulse-gradient","magma-flow","border-pulse","hazard-fade","card-pulse-basic","card-pulse-gradient","indicator-pulse","badge-pulse","glass-tint-pulse","pulseRingExpand","shimmerOpacity"];function vn(e,t){const{isEnabled:s,animationNames:o=Pr}=t,a=T.useRef(!1);typeof window<"u"&&(a.current=window.matchMedia("(prefers-reduced-motion: reduce)").matches),T.useLayoutEffect(()=>{if(!s||!e.current||a.current)return;const r=e.current,l=m=>{if("animationName"in m){const h=m.animationName;o.some(u=>h.includes(u))&&(m.startTime=0,console.log(`[useWaapiSync] Synced '${h}' to startTime=0`))}};r.getAnimations({subtree:!0}).forEach(l);const c=m=>{if(o.some(h=>m.animationName.includes(h))){const u=r.getAnimations({subtree:!0}).find(d=>d.animationName===m.animationName);u&&l(u)}};return r.addEventListener("animationstart",c),()=>{r.removeEventListener("animationstart",c)}},[s,e,o])}const $r="_badge_sy3c1_5",Fr="_badgeIcon_sy3c1_37",Wr="_badgePulse_sy3c1_161",Vr="_badgeInvert_sy3c1_197",Gr="_badgeInvertForCard_sy3c1_219",en={badge:$r,badgeIcon:Fr,badgePulse:Wr,badgeInvert:Vr,badgeInvertForCard:Gr},Ur=e=>{switch(e){case"due":return{label:"Due",icon:"schedule"};case"missed":return{label:"Missed",icon:"notifications_active"};case"completing":return{label:"Completed",icon:"check_circle"};case"complete":return{label:"Completed",icon:"check_circle"};case"queued":return{label:"Queued",icon:"cloud_off"};default:return{label:"",icon:null}}},qr=(e,t)=>{const s=new Date(e).getTime(),o=(t-s)/(60*1e3),a=Math.max(1,Math.ceil(o/15));return a===1?"Missed":`${a} Missed`},Yr=({status:e,type:t,dueDate:s})=>{const o=F(So),{feat_badge_mode:a,feat_invert_badge:r,feat_invert_card:l}=F(Vt),i=j.useRef(null),c=a==="pulse"&&e==="missed";if(vn(i,{isEnabled:c}),e==="pending"||e==="early")return null;const m=Ur(e);let h=m.label,u=e;t==="supplemental"&&(h="Supplemental",u="supplemental"),e==="missed"&&s&&(h=qr(s,o));const d=e==="missed"&&r&&!l,x=e==="missed"&&l,w=[en.badge,c?en.badgePulse:"",d?en.badgeInvert:"",x?en.badgeInvertForCard:""].filter(Boolean).join(" ");return n.jsxs("div",{className:w,"data-status":u,ref:i,children:[m.icon&&n.jsx("span",{className:`material-symbols-rounded ${en.badgeIcon}`,children:m.icon}),h]})},Kr="_checkCard_1jx0x_117",Xr="_statusIndicator_1jx0x_273",Qr="_mainContent_1jx0x_353",Jr="_topRow_1jx0x_369",Zr="_bottomRow_1jx0x_383",ei="_locationInfo_1jx0x_397",ti="_locationText_1jx0x_411",ni="_residentList_1jx0x_429",si="_residentListItem_1jx0x_453",oi="_warningIcon_1jx0x_475",ai="_timeDisplay_1jx0x_487",ri="_cardGradient_1jx0x_561",ii="_cardBorder_1jx0x_643",li="_cardHazard_1jx0x_683",ci="_cardPulseBasic_1jx0x_749",di="_cardInvert_1jx0x_949",Oe={checkCard:Kr,statusIndicator:Xr,mainContent:Qr,topRow:Jr,bottomRow:Zr,locationInfo:ei,locationText:ti,residentList:ni,residentListItem:si,warningIcon:oi,timeDisplay:ai,cardGradient:ri,cardBorder:ii,cardHazard:li,cardPulseBasic:ci,cardInvert:di},ui=({resident:e,check:t})=>{const s=t.specialClassifications?.some(o=>o.residentId===e.id);return n.jsxs("li",{className:Oe.residentListItem,children:[s&&n.jsx("span",{className:`material-symbols-rounded ${Oe.warningIcon}`,children:"warning"}),e.name]})},mi=({check:e,transition:t})=>{const s=ee(xt),o=F(jo),{showStatusIndicators:a}=F($e),{feat_card_pulse:r,feat_card_gradient:l,feat_card_border:i,feat_hazard_texture:c,feat_invert_card:m}=F(Vt),h=o===e.id,u=e.status==="missed",d=T.useRef(null);vn(d,{isEnabled:u&&(r!=="none"||l||i||c)});const w=T.useMemo(()=>new Date(e.dueDate),[e.dueDate]),g=zr(w,e.status),f=!["complete","supplemental","completing","queued"].includes(e.status),p=()=>{f&&s({view:"form",type:"scheduled",method:"manual",checkId:e.id,roomName:e.residents[0].location,residents:e.residents,specialClassifications:e.specialClassifications})},{residents:v}=e,S=v[0]?.location||"N/A",C=!["complete","supplemental","completing","queued"].includes(e.status),y=u&&r==="basic"?Oe.cardPulseBasic:u&&r==="gradient"?Oe.cardGradient:"",b=u&&r==="none"&&l?Oe.cardGradient:"",_=[Oe.checkCard,h?Oe.isCompleting:"",y,b,u&&i?Oe.cardBorder:"",u&&c?Oe.cardHazard:"",u&&m?Oe.cardInvert:""].filter(Boolean).join(" ");return n.jsx(Q.div,{initial:{height:"auto",marginBottom:"var(--space-3)"},animate:{height:"auto",marginBottom:"var(--space-3)"},exit:{height:0,marginBottom:0,overflow:"hidden",transition:{delay:.1,duration:.2,ease:"linear"}},children:n.jsxs(Q.div,{ref:d,transition:t,initial:{opacity:0,x:0},animate:{opacity:1,x:0},exit:{x:"100%",opacity:0,transition:{x:{duration:.2,ease:[.25,1,.5,1]},opacity:{duration:.2,ease:"easeOut"}}},className:_,"data-status":e.status,"data-check-id":e.id,"data-indicators-visible":a,onClick:p,"aria-disabled":!f,whileTap:f?{scale:.98}:{},children:[a&&C&&n.jsx("div",{className:Oe.statusIndicator,"data-status":e.status}),n.jsxs("div",{className:Oe.mainContent,children:[n.jsxs("div",{className:Oe.topRow,children:[n.jsx("div",{className:Oe.locationInfo,children:n.jsx("span",{className:Oe.locationText,children:S})}),n.jsx(Yr,{status:e.status,type:e.type,dueDate:e.dueDate})]}),n.jsxs("div",{className:Oe.bottomRow,children:[n.jsx("ul",{className:Oe.residentList,children:v.map(k=>n.jsx(ui,{resident:k,check:e},k.id))}),n.jsx("div",{className:Oe.timeDisplay,children:f?g:null})]})]})]})})},hi="_shimmer_1m0k7_23",fi="_cardWrapper_1m0k7_49",pi="_indicator_1m0k7_89",gi="_mainContent_1m0k7_109",vi="_topRow_1m0k7_123",xi="_bottomRow_1m0k7_125",bi="_location_1m0k7_153",yi="_badge_1m0k7_155",wi="_resident_1m0k7_157",_i="_residentShort_1m0k7_159",pt={shimmer:hi,cardWrapper:fi,indicator:pi,mainContent:gi,topRow:vi,bottomRow:xi,location:bi,badge:yi,resident:wi,residentShort:_i},Ci=()=>n.jsxs("div",{className:pt.cardWrapper,children:[n.jsx("div",{className:pt.shimmer}),n.jsx("div",{className:pt.indicator}),n.jsxs("div",{className:pt.mainContent,children:[n.jsxs("div",{className:pt.topRow,children:[n.jsx("div",{className:pt.location}),n.jsx("div",{className:pt.badge})]}),n.jsxs("div",{className:pt.bottomRow,children:[n.jsx("div",{className:pt.resident}),n.jsx("div",{className:pt.residentShort})]})]})]}),Si="_emptyStateContainer_11y9y_3",ji="_emptyStateMessage_11y9y_47",Rn={emptyStateContainer:Si,emptyStateMessage:ji},ls=({icon:e="search_off",title:t,message:s,action:o})=>n.jsxs("div",{className:Rn.emptyStateContainer,children:[n.jsx("span",{className:"material-symbols-rounded large-feature-icon",children:e}),n.jsx("h3",{className:Rn.emptyStateTitle,children:t}),s&&n.jsx("p",{className:Rn.emptyStateMessage,children:s}),o&&n.jsx("div",{className:Rn.actionContainer,children:o})]}),Ti="_chipContainer_5af65_5",ki="_chipContent_5af65_19",Ii="_chipText_5af65_43",Ni="_clearButton_5af65_63",En={chipContainer:Ti,chipContent:ki,chipText:Ii,clearButton:Ni},Ri=({filterLabel:e,onClear:t})=>n.jsx(Q.div,{layout:!0,className:En.chipContainer,initial:{y:-20,opacity:0,height:0},animate:{y:0,opacity:1,height:"auto"},exit:{y:-20,opacity:0,height:0},transition:{type:"tween",duration:.25,ease:"easeInOut"},children:n.jsxs("div",{className:En.chipContent,children:[n.jsxs("span",{className:En.chipText,children:["Showing: ",n.jsx("strong",{children:e})]}),n.jsx(ae,{variant:"quaternary",size:"xs",iconOnly:!0,onClick:t,"aria-label":"Clear filter",className:En.clearButton,children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})}),Ei="_emptyStateContainer_1yck0_3",An={emptyStateContainer:Ei},Ai=({filterLabel:e,onClear:t})=>n.jsxs("div",{className:An.emptyStateContainer,children:[n.jsx("div",{className:An.iconWrapper,children:n.jsx("span",{className:"material-symbols-rounded",children:"filter_list_off"})}),n.jsxs("h3",{className:An.title,children:['No "',e,'" checks']}),n.jsx("p",{className:An.message,children:"There are no checks that match the current filter. Try clearing the filter to see all upcoming checks."}),n.jsx(ae,{variant:"secondary",size:"m",onClick:t,children:"Clear Filter"})]}),Oi="_scrollContainer_1khaw_5",Hi="_headerWrapper_1khaw_49",Bi="_priorityGroupHeader_1khaw_57",tn={scrollContainer:Oi,headerWrapper:Hi,priorityGroupHeader:Bi},Us={type:"tween",duration:.25,ease:[.25,1,.5,1]},Li=8,qs={missed:"Missed",due:"Due",queued:"Queued"},Mi=e=>{const t={Missed:[],Due:[],Upcoming:[]};return e.forEach(s=>{if(["complete","supplemental","queued"].includes(s.status))return;let o=s.status;if(s.status==="completing"){const a=s.baseInterval*60*1e3,l=new Date(s.dueDate).getTime()-a,c=(Date.now()-l)/(60*1e3);c<13?o="pending":c<15?o="due":o="missed"}switch(o){case"missed":t.Missed.push(s);break;case"due":t.Due.push(s);break;case"early":case"pending":default:t.Upcoming.push(s);break}}),Object.entries(t).map(([s,o])=>({title:s,checks:o})).filter(s=>s.checks.length>0)},Di=e=>{const t=e.filter(o=>!["complete","supplemental","missed","queued"].includes(o.status)),s=[];return t.length>0&&s.push({title:"Walking Order",checks:t}),s},zi=({viewType:e})=>{const t=F(e==="time"?xs:ur),{isSlowLoadEnabled:s}=F($e),[o,a]=te(To),r=F(Vs),l=F(mr),[i,c]=te(hr),m=ee(Vs);T.useEffect(()=>{if(o){const w=setTimeout(()=>a(!1),s?3e3:750);return()=>clearTimeout(w)}},[o,a,s]);const h=()=>{m(!0),c("all"),setTimeout(()=>m(!1),500)},u=o,d=i!=="all",x=()=>{if(u)return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:tn.headerWrapper,children:n.jsx("div",{className:tn.priorityGroupHeader,style:{width:"100px",height:"1.5rem",backgroundColor:"transparent",marginBottom:"var(--spacing-2)"},children:n.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"var(--surface-bg-tertiary)",borderRadius:"var(--radius-sm)",opacity:.3}})})}),Array.from({length:Li}).map((g,f)=>n.jsx(Ci,{},f))]});if(t.length===0)return l?n.jsx(ls,{title:"No Results Found",message:`Your search for "${l}" did not return any results.`}):d?n.jsx(Ai,{filterLabel:qs[i],onClear:h}):n.jsx(ls,{title:"All Checks Complete",message:"There are no checks due at this time."});const w=e==="time"?Mi(t):Di(t);return n.jsxs(n.Fragment,{children:[n.jsx(Je,{children:w.flatMap(g=>[n.jsx(Q.div,{className:tn.headerWrapper,layout:!0,transition:Us,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n.jsx("h2",{className:tn.priorityGroupHeader,children:g.title})},g.title),...g.checks.map(f=>n.jsx(mi,{check:f,transition:Us},f.id))])}),n.jsx("div",{style:{height:"calc(var(--footer-height, 96px) + var(--spacing-4))"}})]})};return n.jsxs("div",{className:tn.scrollContainer,"data-refreshing":r,children:[n.jsx("div",{style:{height:"var(--header-height)"}}),n.jsx(Je,{mode:"wait",children:d&&n.jsx(Ri,{filterLabel:qs[i],onClear:h},i)}),x()]})},Pi="_container_r0gas_5",$i={container:Pi},Fi=()=>n.jsx("div",{className:$i.container,children:n.jsx(zi,{viewType:"time"})}),Wi={light:[50],medium:[100],heavy:[150]},Vi={simple:[200],double:[300,100,300],grind:[50,50,50,50,50,50],stutter:[50,100,50,100,200]},Gi={warning:[100,50,100],light:10,medium:40,heavy:60,selection:5},Ui=150,Fe=()=>{const e=F($e),t=T.useRef(0);return{trigger:T.useCallback(o=>{if(e.hapticsEnabled&&window.navigator&&"vibrate"in window.navigator){const a=Date.now();if(a-t.current<Ui)return;try{let r;o==="success"?r=Wi[e.hapticPatternSuccess]:o==="error"?r=Vi[e.hapticPatternError]:r=Gi[o],window.navigator.vibrate(r),t.current=a}catch{}}},[e.hapticsEnabled,e.hapticPatternSuccess,e.hapticPatternError])}},Ts=()=>{const{audioEnabled:e}=F($e),t=F(fr);return{play:T.useCallback((o,a)=>{!e||!t||t(o,a)},[e,t])}},qi=(e,t=7,s=3e3)=>{const o=T.useRef(0),a=T.useRef(0),r=T.useRef(e);return r.current=e,{onTap:T.useCallback(()=>{const i=Date.now();i-a.current>s&&(o.current=0,a.current=i),o.current+=1,o.current===1&&(a.current=i),o.current>=t&&(o.current=0,r.current())},[t,s]),currentCount:o.current}},Yi="_contextCard_17t6w_5",Ki="_stackedContainer_17t6w_43",Xi="_stackItem_17t6w_57",Qi="_label_17t6w_69",Ji="_value_17t6w_85",Zi="_actionIcon_17t6w_97",yt={contextCard:Yi,stackedContainer:Ki,stackItem:Xi,label:Qi,value:Ji,actionIcon:Zi},Po=({groupId:e,unitId:t,onClick:s})=>{const o=is.find(i=>i.id===e),a=o?.units.find(i=>i.id===t),r=o?.name||"Select Group",l=a?.name||"Select Unit";return n.jsxs("button",{className:yt.contextCard,onClick:s,type:"button",children:[n.jsxs("div",{className:yt.stackedContainer,children:[n.jsxs("div",{className:yt.stackItem,children:[n.jsx("span",{className:yt.label,children:"Group"}),n.jsx("span",{className:yt.value,children:r})]}),n.jsxs("div",{className:yt.stackItem,children:[n.jsx("span",{className:yt.label,children:"Unit"}),n.jsx("span",{className:yt.value,children:l})]})]}),n.jsx("div",{className:yt.actionIcon,children:n.jsx("span",{className:"material-symbols-rounded",children:"swap_horiz"})})]})},wt=({label:e,subLabel:t,leadingIcon:s,leadingElement:o,trailingIcon:a,trailingElement:r,isSelected:l,disabled:i,onClick:c,indent:m=!1,showChevron:h=!0})=>{let u=o;!u&&s?u=n.jsx("span",{className:"material-symbols-rounded",children:s}):!u&&l&&(u=n.jsx("span",{className:"material-symbols-rounded",children:"check"}));let d=r;return!d&&a?d=n.jsx("span",{className:"material-symbols-rounded",children:a}):!d&&c&&h&&!l&&(d=n.jsx("span",{className:"material-symbols-rounded",children:"chevron_right"})),n.jsxs("button",{className:"list-item-root",onClick:c,disabled:i,"aria-selected":l,"data-has-leading":!!u||m,type:"button",children:[(u||m)&&n.jsx("div",{className:"list-item-leading",children:u}),n.jsxs("div",{className:"list-item-content",children:[n.jsxs("div",{className:"list-item-text-group",children:[n.jsx("span",{className:"list-item-label",children:e}),t&&n.jsx("span",{className:"list-item-sublabel",children:t})]}),d&&n.jsx("div",{className:"list-item-trailing",children:d})]})]})},el="_sideMenu_15qma_5",tl="_header_15qma_29",nl="_titleRow_15qma_49",sl="_title_15qma_49",ol="_version_15qma_83",al="_headerSeparator_15qma_113",rl="_content_15qma_125",il="_separator_15qma_143",ll="_menuList_15qma_253",cl="_footer_15qma_273",dl="_userProfileCard_15qma_289",ul="_userName_15qma_361",Ge={sideMenu:el,header:tl,titleRow:nl,title:sl,version:ol,headerSeparator:al,content:rl,separator:il,menuList:ll,footer:cl,userProfileCard:dl,userName:ul},ml=()=>{const e=ee(ko),t=ee(Io),s=ee(No),o=ee(xt),a=ee(bs),r=ee(Ft),l=F(Ft),i=F(ys),c=F(ws),{toggle:m,isUnlocked:h}=pr(),u=ee(Vn),{trigger:d}=Fe(),{play:x}=Ts(),w=T.useCallback(()=>{const p=!h;m(),d(p?"success":"light"),p&&x("success"),u({message:p?"Future Ideas Unlocked":"Future Ideas Hidden",icon:p?"lightbulb":"lightbulb_outline",variant:"neutral"})},[m,h,u,d,x]),{onTap:g}=qi(w,7,3e3),f=()=>{r({isAuthenticated:!1,user:null})};return n.jsxs("aside",{className:Ge.sideMenu,children:[n.jsxs("header",{className:Ge.header,children:[n.jsxs("div",{className:Ge.titleRow,children:[n.jsx("h1",{className:Ge.title,onClick:g,children:"Safeguard"}),n.jsx("span",{className:Ge.version,children:Hr})]}),n.jsx("div",{className:Ge.headerSeparator})]}),n.jsxs("main",{className:Ge.content,children:[n.jsx(Po,{groupId:i,unitId:c,onClick:()=>a(!0)}),n.jsx("div",{className:Ge.separator}),n.jsxs("div",{className:Ge.menuList,children:[n.jsx(wt,{label:"Write NFC tags",leadingIcon:"nfc",onClick:()=>o({view:"provisioning"}),showChevron:!1}),n.jsx(wt,{label:"Developer tools",leadingIcon:"code",onClick:()=>t(!0),showChevron:!1}),h&&n.jsx(wt,{label:"Future Ideas",leadingIcon:"lightbulb",onClick:()=>s(!0),showChevron:!1})]})]}),n.jsxs("footer",{className:Ge.footer,children:[n.jsx("div",{className:Ge.menuList,children:n.jsx(wt,{label:"Log out",leadingIcon:"logout",onClick:f,showChevron:!1})}),n.jsx("div",{className:Ge.separator}),n.jsxs("button",{className:Ge.userProfileCard,onClick:()=>e(!0),"aria-label":"Settings",children:[n.jsx("span",{className:Ge.userName,children:l.user?.displayName||"Unknown User"}),n.jsx("span",{className:"material-symbols-rounded",children:"settings"})]})]})]})},hl=e=>{const t=ee(e),s=T.useRef(null),o=T.useRef(0),a=T.useRef(0);return T.useLayoutEffect(()=>{const r=()=>{if(s.current){const i=s.current.offsetHeight;o.current!==i&&(cancelAnimationFrame(a.current),a.current=requestAnimationFrame(()=>{o.current=i,t(i)}))}};r();const l=new ResizeObserver(r);return s.current&&l.observe(s.current),()=>{l.disconnect(),cancelAnimationFrame(a.current)}},[t]),s},fl=({children:e,content:t,delay:s=300,side:o="top"})=>t?n.jsx(Va,{children:n.jsxs(Ga,{delayDuration:s,children:[n.jsx(Ua,{asChild:!0,children:e}),n.jsx(qa,{children:n.jsxs(Ya,{className:"tooltip-content",side:o,sideOffset:5,children:[t,n.jsx(Ka,{className:"tooltip-arrow"})]})})]})}):e,$o=({trigger:e,children:t,open:s,onOpenChange:o,variant:a="default"})=>{const r=a==="tooltip"?"popover-content-tooltip":"popover-content";return n.jsxs(Xa,{open:s,onOpenChange:o,children:[n.jsx(Qa,{asChild:!0,children:e}),n.jsx(Ja,{children:n.jsx(Za,{className:r,sideOffset:5,collisionPadding:8,children:t})})]})},pl="_statusBar_99qv7_7",gl="_contentContainer_99qv7_19",vl="_statusPill_99qv7_29",xl="_icon_99qv7_99",bl="_count_99qv7_109",yl="_popoverContent_99qv7_123",Pt={statusBar:pl,contentContainer:gl,statusPill:vl,icon:xl,count:bl,popoverContent:yl},Ys=({count:e,icon:t,status:s,variant:o,tooltipContent:a})=>{const r=e===0,l=n.jsxs("div",{className:Pt.statusPill,"data-status":s,"data-variant":o,"data-active":"false","data-empty":r?"true":void 0,children:[n.jsx("span",{className:`material-symbols-rounded ${Pt.icon}`,children:t}),n.jsx("span",{className:Pt.count,children:e})]});return a?n.jsx($o,{trigger:l,variant:"tooltip",children:a}):l},wl=({variant:e="default"})=>{const t=F(gr),s=n.jsx("div",{className:Pt.popoverContent,children:n.jsxs("span",{children:[t.missed," Missed"]})}),o=n.jsx("div",{className:Pt.popoverContent,children:n.jsxs("span",{children:[t.due," Due"]})});return n.jsx(Q.div,{className:Pt.statusBar,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",duration:.2,ease:[.32,.72,0,1]},"data-variant":e,children:n.jsxs("div",{className:Pt.contentContainer,"data-variant":e,children:[n.jsx(Ys,{count:t.missed,icon:"notifications_active",status:"missed",variant:e,tooltipContent:s}),n.jsx(Ys,{count:t.due,icon:"schedule",status:"due",variant:e,tooltipContent:o})]})})},_l="_avatar_pc746_5",Cl="_popoverContent_pc746_67",Ks={avatar:_l,popoverContent:Cl},Sl=({className:e})=>{const t=F(Ft),s=F(_s),o=F(Vt),a=ee(Ro);if(!t.user)return null;const{initials:r,displayName:l,username:i}=t.user;let c;if(o.enableEnhancedAvatarDropdown){const u=s[i]?.avatarHue,d=u!==void 0?u:js(i);c=Br(d)}const m=n.jsx("div",{className:`${Ks.avatar} ${e||""}`,"aria-label":`User: ${l}`,style:c?{backgroundColor:c}:void 0,onClick:o.enableEnhancedAvatarDropdown?()=>a(!0):void 0,role:o.enableEnhancedAvatarDropdown?"button":void 0,children:r});if(o.enableEnhancedAvatarDropdown)return m;const h=n.jsx("div",{className:Ks.popoverContent,children:l});return n.jsx($o,{trigger:m,variant:"tooltip",children:h})},jl="_header_7gmeb_5",Tl="_offlineBar_7gmeb_273",kl="_spinning_7gmeb_281",Il="_headerContent_7gmeb_291",Nl="_leftActions_7gmeb_319",Rl="_centerContent_7gmeb_347",El="_statusBadgesWrapper_7gmeb_383",Al="_offlinePillWrapper_7gmeb_397",Ol="_rightActions_7gmeb_413",Hl="_offlineBarContent_7gmeb_605",Bl="_offlineContentRow_7gmeb_629",Ll="_offlineTimer_7gmeb_653",Ml="_queuedText_7gmeb_671",Dl="_divider_7gmeb_715",zl="_offlineAvatar_7gmeb_725",Pl="_offlineButton_7gmeb_739",je={header:jl,offlineBar:Tl,spinning:kl,headerContent:Il,leftActions:Nl,centerContent:Rl,statusBadgesWrapper:El,offlinePillWrapper:Al,rightActions:Ol,offlineBarContent:Hl,offlineContentRow:Bl,offlineTimer:Ll,queuedText:Ml,divider:Dl,offlineAvatar:zl,offlineButton:Pl},$l=e=>{const t=Math.floor(e/1e3),s=Math.floor(t/60),o=t%60;return`${s}:${o.toString().padStart(2,"0")}`},Fl=()=>{const[e,t]=te(Cs),s=F(Eo),[o,a]=te(pn),r=F(vr),l=F(xr),i=ee(gn),{trigger:c}=Fe(),[m,h]=T.useState("0:00"),u=hl(br),d=T.useRef(null),x=T.useCallback(p=>{u.current=p,d.current=p},[u]);vn(d,{isEnabled:s>0&&o==="online"}),T.useEffect(()=>{if(o!=="offline"||!r){h("0:00");return}const p=()=>{h($l(Date.now()-r))};p();const v=setInterval(p,1e3);return()=>clearInterval(v)},[o,r]);const w=()=>{t(e==="sideMenu"?"dashboardTime":"sideMenu")},g=()=>{a("syncing"),c("medium"),setTimeout(()=>{i({type:"SYNC_QUEUED_CHECKS",payload:{syncTime:new Date().toISOString()}}),c("success"),a("connected"),setTimeout(()=>a("online"),1e3)},2e3)},f=o!=="online";return n.jsx("header",{className:je.header,ref:x,"data-offline":f,"data-status":o,"aria-live":"polite",children:n.jsxs("div",{className:je.headerContent,children:[n.jsx("div",{className:je.leftActions,children:n.jsx(fl,{content:"Open navigation",children:n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:w,"aria-label":"Open navigation menu",className:f?je.offlineButton:"",children:n.jsx("span",{className:"material-symbols-rounded",children:"menu"})})})}),n.jsxs("div",{className:je.centerContent,children:[n.jsx(Q.div,{className:je.statusBadgesWrapper,animate:{y:f?-2:0},transition:{duration:.5,ease:[.16,1,.3,1]},children:n.jsx(wl,{variant:f?"solid":"default"})}),n.jsx(Je,{children:f&&n.jsx(Q.div,{className:je.offlinePillWrapper,initial:{y:12,opacity:0,height:0},animate:{y:-6,opacity:1,height:"auto"},exit:{y:12,opacity:0,height:0},transition:{duration:.5,ease:[.16,1,.3,1]},children:n.jsx("button",{className:je.offlineBar,onClick:o==="offline"?g:void 0,"aria-label":o==="offline"?"Offline: Click to sync":"Back online","data-status":o,children:n.jsx("div",{className:je.offlineBarContent,children:n.jsx(Je,{mode:"wait",children:o==="syncing"?n.jsxs(Q.div,{className:je.offlineContentRow,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.4,ease:[.16,1,.3,1]}},exit:{opacity:0,transition:{duration:.05}},children:[n.jsx("span",{className:`material-symbols-rounded ${je.spinning}`,style:{color:"var(--surface-fg-on-solid)",marginRight:"2px"},children:"sync"}),n.jsx("span",{className:je.offlineTimer,children:"Connecting..."})]},"syncing"):o==="connected"?n.jsxs(Q.div,{className:je.offlineContentRow,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.4,ease:[.16,1,.3,1]}},exit:{opacity:0,transition:{duration:.05}},children:[n.jsx("span",{className:"material-symbols-rounded",style:{color:"var(--surface-fg-on-solid)",marginRight:"2px"},children:"check"}),n.jsx("span",{className:je.offlineTimer,children:"Connected"})]},"connected"):n.jsxs(Q.div,{className:je.offlineContentRow,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.4,ease:[.16,1,.3,1]}},exit:{opacity:0,transition:{duration:.05}},children:[n.jsxs("span",{className:je.offlineTimer,children:["Offline: ",m]}),n.jsx("svg",{width:"12",height:"1",viewBox:"0 0 12 1",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:je.divider,children:n.jsx("rect",{width:"12",height:"1",fill:"currentColor"})}),n.jsxs("span",{className:je.queuedText,children:[l," Queued"]})]},"offline-content")})})})},"offline-pill")})]}),n.jsx("div",{className:je.rightActions,children:n.jsx(Sl,{className:f?je.offlineAvatar:""})})]})})},ks=()=>{const e=ee(gn),t=ee(jo),s=ee(Ao),o=F(pn),a=F($e),{trigger:r}=Fe(),{play:l}=Ts();return{completeCheck:({checkId:c,statuses:m,notes:h,onSuccess:u})=>{const d=a.scanMode==="nfc"&&a.simpleSubmitEnabled;r("success"),l("success"),e({type:"CHECK_SET_COMPLETING",payload:{checkId:c}}),t(c);const x=d?0:1e3;a.scanMode==="nfc"&&!a.simpleSubmitEnabled&&s("scanning"),setTimeout(()=>{const w={checkId:c,statuses:m,notes:h,completionTime:new Date().toISOString()};e(o==="offline"?{type:"CHECK_SET_QUEUED",payload:w}:{type:"CHECK_COMPLETE",payload:w}),t(null),u?.()},x)}}},Is=()=>{const[e,t]=te(Ao),[s,o]=te(yr),a=F($e),r=F(Ss),l=F(xs),i=F(xt),c=ee(xt),{trigger:m}=Fe(),{completeCheck:h}=ks(),u=T.useRef(null);T.useEffect(()=>()=>{u.current&&clearTimeout(u.current)},[]),T.useEffect(()=>{r.nfcBlocked?e!=="blocked"&&(m("warning"),t("blocked"),u.current&&clearTimeout(u.current)):r.nfcTurnedOff?e!=="hardwareOff"&&(m("warning"),t("hardwareOff"),u.current&&clearTimeout(u.current)):(e==="blocked"||e==="hardwareOff")&&t("idle")},[r.nfcBlocked,r.nfcTurnedOff,e,t,m]);const d=T.useCallback(()=>{e!=="idle"&&(u.current&&(clearTimeout(u.current),u.current=null),m("light"),t("idle"),o(null))},[e,t,o,m]),x=T.useCallback(()=>{if(e!=="scanning")return;if(r.nfcFails){m("warning"),t("readError");return}const b=l.find(_=>_.status!=="complete"&&_.type!=="supplemental");if(b&&a.simpleSubmitEnabled){const _=b.residents.reduce((k,N)=>(k[N.id]="Awake",k),{});h({checkId:b.id,statuses:_,notes:"",onSuccess:()=>{}})}t("success"),o(null),m("success")},[e,r.nfcFails,t,o,m,l,a.simpleSubmitEnabled,h]),w=T.useCallback(()=>{if(!(e!=="idle"&&e!=="readError"&&e!=="timeout"&&e!=="blocked"&&e!=="hardwareOff"&&e!=="success")){if(r.nfcBlocked){m("warning"),t("blocked");return}if(r.nfcTurnedOff){m("warning"),t("hardwareOff");return}m("light"),t("scanning"),o(Date.now()),a.nfcTimeoutEnabled&&(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{t("timeout"),o(null),m("warning")},a.nfcScanTimeout))}},[e,r,a.nfcScanTimeout,a.nfcTimeoutEnabled,t,o,m]),g=T.useCallback(()=>{if(r.nfcBlocked){m("warning"),t("blocked");return}if(r.nfcTurnedOff){m("warning"),t("hardwareOff");return}m("light"),t("scanning"),o(Date.now()),a.nfcTimeoutEnabled&&(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{t("timeout"),o(null),m("warning")},a.nfcScanTimeout))},[r,a.nfcTimeoutEnabled,a.nfcScanTimeout,t,o,m]),f=T.useCallback(()=>{e==="timeout"&&t("idle")},[e,t]),p=T.useCallback(()=>{x()},[x]),v=T.useCallback(()=>{if(e==="formComplete"){g();return}if(e==="success")if(a.simpleSubmitEnabled)g();else{if(i.view==="form"){t("idle");return}const b=l.find(_=>_.status!=="complete"&&_.type!=="supplemental");t("idle"),b&&c({view:"form",type:"scheduled",method:"scan",checkId:b.id,roomName:b.residents[0].location,residents:b.residents,specialClassifications:b.specialClassifications})}},[e,a.simpleSubmitEnabled,t,g,l,c,i.view]),S=T.useCallback(()=>{if(!s||e!=="scanning")return a.nfcScanTimeout;const b=Date.now()-s;return Math.max(0,a.nfcScanTimeout-b)},[e,s,a.nfcScanTimeout]),y=l.find(b=>b.status!=="complete"&&b.type!=="supplemental")?.residents[0]?.location||"Room";return{scanState:e,startScan:w,stopScan:d,resetFromTimeout:f,simulateTagRead:p,finalizeSuccess:v,getRemainingTime:S,targetRoom:y,config:{timeout:a.nfcScanTimeout,timeoutEnabled:a.nfcTimeoutEnabled,showCountdown:a.nfcShowCountdown}}},cs={ringCount:15,conveyorDuration:40,minRadius:8,maxRadius:80,baseOpacity:.3,fadeInPercent:.2,fadeOutPercent:.3,baseStrokeWidth:2,shimmerPeriod:4,shimmerDuration:1,shimmerOpacityBoost:.55,shimmerStrokeBoost:1};function Wl(e){const{minRadius:t,maxRadius:s,baseOpacity:o,fadeInPercent:a,fadeOutPercent:r,baseStrokeWidth:l}=e,i=o*.3;return[{r:t,opacity:0,strokeWidth:l,offset:0},{r:t+(s-t)*a,opacity:o,strokeWidth:l,offset:a},{r:t+(s-t)*(1-r),opacity:i,strokeWidth:l,offset:1-r},{r:s,opacity:0,strokeWidth:l,offset:1}]}function Vl(e){return[{opacity:0,offset:0},{opacity:e,offset:.3},{opacity:0,offset:1}]}function Gl(e){return[{strokeWidth:0,offset:0},{strokeWidth:e,offset:.3},{strokeWidth:0,offset:1}]}function Ul(e,t,s){const o=T.useRef([]),a=T.useRef(null),r=T.useRef(0),l=T.useCallback(()=>{if(!e.current)return;const i=e.current.querySelectorAll("circle.ring"),m=performance.now()-r.current,h=t.conveyorDuration*1e3;i.forEach((u,d)=>{const x=o.current[d];x?.shimmerOpacityAnim&&x.shimmerOpacityAnim.cancel(),x?.shimmerStrokeAnim&&x.shimmerStrokeAnim.cancel();const w=d/t.ringCount,g=(m/h+w)%1,f=g*t.shimmerDuration*1e3,p=1-t.fadeOutPercent;let v=1;g>p&&(v=1-(g-p)/t.fadeOutPercent),g<t.fadeInPercent&&(v=g/t.fadeInPercent);const S=t.shimmerOpacityBoost*v,C=t.shimmerStrokeBoost*v,y=u.animate(Vl(S),{duration:800,easing:"ease-in-out",delay:f,fill:"forwards",composite:"add"}),b=u.animate(Gl(C),{duration:800,easing:"ease-in-out",delay:f,fill:"forwards",composite:"add"});o.current[d]&&(o.current[d].shimmerOpacityAnim=y,o.current[d].shimmerStrokeAnim=b)}),console.log("[RingAnimation] Shimmer wave triggered at elapsed:",m)},[e,t]);T.useLayoutEffect(()=>{if(!e.current||!s)return;const c=e.current.querySelectorAll("circle.ring");return r.current=Number(document.timeline?.currentTime??performance.now()),console.log("[RingAnimation] Mount time:",r.current),o.current=[],c.forEach((m,h)=>{const u=h/t.ringCount,d=-u*t.conveyorDuration*1e3,x=m.animate(Wl(t),{duration:t.conveyorDuration*1e3,iterations:1/0,easing:"linear"});x.currentTime=-d,o.current.push({conveyorAnim:x,shimmerOpacityAnim:null,shimmerStrokeAnim:null}),console.log(`[RingAnimation] Ring ${h} conveyor started, phase offset: ${u}`)}),a.current=setInterval(()=>{l()},t.shimmerPeriod*1e3),l(),()=>{o.current.forEach(m=>{m.conveyorAnim?.cancel(),m.shimmerOpacityAnim?.cancel(),m.shimmerStrokeAnim?.cancel()}),o.current=[],a.current&&(clearInterval(a.current),a.current=null),console.log("[RingAnimation] Cleanup complete")}},[e,s,t,l])}function ql(e){const t=[],{ringCount:s,minRadius:o,maxRadius:a}=e;for(let r=0;r<s;r++){const l=r/s;t.push(o+(a-o)*l)}return t}const Yl="_nfcWrapper_frkb2_5",Kl="_buttonContainer_frkb2_27",Xl="_startButton_frkb2_49",Ql="_timeoutButton_frkb2_51",Jl="_visualizerWrapper_frkb2_137",Zl="_visualizerContainer_frkb2_179",ec="_feedbackWrapper_frkb2_195",tc="_feedbackBackground_frkb2_217",nc="_feedbackBackgroundSuccess_frkb2_231",sc="_feedbackBackgroundError_frkb2_239",oc="_errorToast_frkb2_249",ac="_errorToastIcon_frkb2_275",rc="_errorToastContent_frkb2_287",ic="_errorToastPrimary_frkb2_301",lc="_errorToastSecondary_frkb2_315",cc="_feedbackTextContainer_frkb2_333",dc="_primaryText_frkb2_351",uc="_secondaryText_frkb2_367",mc="_ringsSvg_frkb2_383",hc="_scanningLabel_frkb2_407",ge={nfcWrapper:Yl,buttonContainer:Kl,startButton:Xl,timeoutButton:Ql,visualizerWrapper:Jl,visualizerContainer:Zl,feedbackWrapper:ec,feedbackBackground:tc,feedbackBackgroundSuccess:nc,feedbackBackgroundError:sc,errorToast:oc,errorToastIcon:ac,errorToastContent:rc,errorToastPrimary:ic,errorToastSecondary:lc,feedbackTextContainer:cc,primaryText:dc,secondaryText:uc,ringsSvg:mc,scanningLabel:hc},Fo=({isEnabled:e,params:t})=>{const s=T.useRef(null),o=T.useMemo(()=>({...cs,...t}),[t]),a=T.useMemo(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches,[]),r=ql(o);Ul(s,o,e&&!a);const l="var(--surface-border-info)";return n.jsx("svg",{ref:s,className:ge.ringsSvg,viewBox:"0 0 200 200",children:a?r.map((i,c)=>n.jsx("circle",{cx:"100",cy:"100",r:i,fill:"none",stroke:l,strokeWidth:o.baseStrokeWidth,opacity:o.baseOpacity,vectorEffect:"non-scaling-stroke"},`static-ring-${c}`)):Array.from({length:o.ringCount},(i,c)=>n.jsx("circle",{className:"ring",cx:"100",cy:"100",r:o.minRadius,fill:"none",stroke:l,strokeWidth:o.baseStrokeWidth,opacity:0,vectorEffect:"non-scaling-stroke"},`ring-${c}`))})},fc=({onClick:e})=>n.jsxs("button",{className:ge.startButton,onClick:e,children:[n.jsx("span",{className:"material-symbols-rounded",children:"sensors"}),n.jsx("span",{children:"Scan"})]}),pc=({type:e})=>{const t={success:"var(--surface-fg-success-primary)",alert:"var(--surface-fg-alert-primary)",warning:"var(--surface-fg-warning-primary)",info:"var(--surface-fg-info-primary)"}[e],s={success:"M 97 100 L 99 102 L 103 98",alert:"M 100 96.9 L 100 100.1 M 100 103 L 100 103.1",warning:"M 100 96.9 L 100 100.1 M 100 103 L 100 103.1",info:"M 100 104 L 100 99 M 100 96 L 100 96.1"}[e];return n.jsx("svg",{className:ge.ringsSvg,viewBox:"0 0 200 200",children:n.jsxs(Q.g,{children:[n.jsx(Q.circle,{cx:"100",cy:"100",initial:{r:20,stroke:"var(--surface-border-primary)",opacity:.5},animate:{r:5.5,stroke:t,opacity:1,strokeWidth:3},transition:{duration:.4,ease:[.16,1,.3,1]},fill:"none",style:{vectorEffect:"non-scaling-stroke"}}),n.jsx(Q.path,{d:s,fill:"none",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.4,delay:.1,ease:"easeOut"}})]})})},Xs=({primary:e,secondary:t})=>n.jsxs("div",{className:ge.feedbackTextContainer,children:[n.jsx(Q.div,{className:ge.primaryText,initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.25,delay:.7},children:e}),t&&n.jsx(Q.div,{className:ge.secondaryText,initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.25,delay:.7},children:t})]}),gc=()=>{const{scanState:e,finalizeSuccess:t,targetRoom:s,startScan:o}=Is(),a=F(Vt),r=F($e),l=T.useRef(s);T.useEffect(()=>{e==="success"&&(l.current=s)},[e,s]);const i=!r.simpleSubmitEnabled,c=T.useRef(t);T.useEffect(()=>{c.current=t},[t]),T.useEffect(()=>{if(e==="success"){const g=setTimeout(()=>c.current(),i?800:2e3);return()=>clearTimeout(g)}if(e==="formComplete"){const w=setTimeout(()=>c.current(),1700);return()=>clearTimeout(w)}},[e]);const m=e==="scanning",h=a.feat_ring_animation&&m,u=(w,g,f="success")=>{const p=f==="success"?ge.feedbackBackgroundSuccess:ge.feedbackBackgroundError;return n.jsxs(Q.div,{className:ge.feedbackWrapper,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.98,y:-4,transition:{duration:i?0:.2,ease:"easeIn"}},children:[n.jsx("div",{className:`${ge.feedbackBackground} ${p}`}),n.jsx(Q.div,{animate:i&&!w?{opacity:1}:{opacity:[1,1,0]},transition:i&&!w?{}:{times:[0,.6,1],duration:1,ease:"easeInOut"},children:n.jsx(pc,{type:f})}),n.jsx(Xs,{primary:w,secondary:g})]},`feedback-${f}`)},d=()=>n.jsxs(Q.div,{className:ge.feedbackWrapper,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.98,y:-4,transition:{duration:.2,ease:"easeIn"}},children:[n.jsx("div",{className:`${ge.feedbackBackground} ${ge.feedbackBackgroundSuccess}`}),n.jsx(Xs,{primary:`${l.current} Complete`})]},"formComplete"),x=(w,g,f)=>n.jsxs(Q.div,{className:ge.errorToast,initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-4,transition:{duration:.2,ease:"easeIn"}},children:[n.jsx("span",{className:`material-symbols-rounded ${ge.errorToastIcon}`,children:w}),n.jsxs("div",{className:ge.errorToastContent,children:[n.jsx("span",{className:ge.errorToastPrimary,children:g}),n.jsx("span",{className:ge.errorToastSecondary,children:f})]})]},`errorToast-${w}`);return n.jsxs("div",{className:ge.visualizerContainer,onClick:e==="readError"?o:void 0,style:{cursor:e==="readError"?"pointer":"default"},children:[h&&n.jsx(Fo,{isEnabled:!0}),n.jsxs(Je,{mode:"wait",children:[e==="scanning"&&n.jsx(Q.div,{className:ge.scanningLabel,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},children:"Ready to Scan"},"scanning"),e==="success"&&u(i?"":`${l.current} Complete`,void 0,"success"),e==="formComplete"&&d(),e==="readError"&&u("Tag not read","Tap to retry","alert"),e==="blocked"&&x("block","NFC Blocked","Allow in app settings"),e==="hardwareOff"&&x("sensors_off","NFC is turned off","Open NFC Settings to turn on")]})]})},vc=()=>{const{scanState:e,startScan:t,stopScan:s,simulateTagRead:o}=Is();return n.jsx("div",{className:ge.nfcWrapper,children:n.jsx(Ar,{transition:{type:"tween",ease:[.16,1,.3,1],duration:.4},children:n.jsxs(Je,{mode:"wait",children:[e==="idle"&&n.jsx(Q.div,{className:ge.buttonContainer,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:n.jsx(fc,{onClick:t})},"idle"),e!=="idle"&&e!=="timeout"&&n.jsx(Q.div,{className:ge.visualizerWrapper,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e==="scanning"?o:void 0,style:{cursor:e==="scanning"?"pointer":"default",pointerEvents:"auto"},children:n.jsx(gc,{})},"visualizer"),e==="timeout"&&n.jsx(Q.div,{className:ge.buttonContainer,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:n.jsxs("button",{className:ge.timeoutButton,onClick:()=>{s(),t()},children:[n.jsx("span",{className:"material-symbols-rounded",children:"timer_off"}),n.jsx("span",{children:"Timed out â€” Tap to retry"})]})},"timeout")]})})})},xc="_footer_19icv_5",bc="_scanButton_19icv_343",Qs={footer:xc,scanButton:bc},yc=()=>{const e=ee(xt),t=F($e),s=F(Eo),o=T.useRef(null),{trigger:a}=Fe();vn(o,{isEnabled:s>0}),T.useLayoutEffect(()=>{const l=()=>{if(o.current){const c=o.current.offsetHeight;document.documentElement.style.setProperty("--footer-height",`${c}px`)}};l();const i=new ResizeObserver(l);return o.current&&i.observe(o.current),()=>{i.disconnect(),document.documentElement.style.removeProperty("--footer-height")}},[t.scanMode]);const r=()=>{a("heavy"),e({view:"scanning",isManualSelectionOpen:!1})};return n.jsx("footer",{className:Qs.footer,ref:o,children:t.scanMode==="nfc"?n.jsx(vc,{}):n.jsxs(ae,{variant:"primary",className:Qs.scanButton,onClick:r,children:[n.jsx("span",{className:"material-symbols-rounded",children:"qr_code_scanner"}),n.jsx("span",{children:"Scan"})]})})},wc="_fab_1h0bl_5",_c={fab:wc},Cc=()=>{const e=F(Oo),[t,s]=te(pn),o=ee(gn),{trigger:a}=Fe(),r=()=>{a("selection"),t==="online"?s("offline"):(o({type:"SYNC_QUEUED_CHECKS",payload:{syncTime:new Date().toISOString()}}),a("success"),s("connected"),setTimeout(()=>s("online"),1e3))};return n.jsx(Je,{children:e&&n.jsx(Q.button,{className:_c.fab,"data-status":t,onClick:r,initial:{scale:0,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:0,opacity:0,y:20},transition:{type:"spring",stiffness:400,damping:25},"aria-label":`Toggle connectivity: currently ${t}`,children:n.jsx("span",{className:"material-symbols-rounded",children:t==="online"?"cloud":"cloud_off"})})})},Sc="_scanView_ax5b5_65",jc="_header_ax5b5_87",Tc="_preScanAlert_ax5b5_127",kc="_alertSeparator_ax5b5_197",Ic="_cameraContainer_ax5b5_211",Nc="_viewfinder_ax5b5_233",Rc="_statusOverlay_ax5b5_291",Ec="_processingState_ax5b5_325",Ac="_spinner_ax5b5_333",Oc="_successState_ax5b5_345",Hc="_failState_ax5b5_353",Bc="_helperText_ax5b5_363",Lc="_footer_ax5b5_373",Mc="_devControlsContainer_ax5b5_421",Dc="_devControlsHeader_ax5b5_441",zc="_devControls_ax5b5_421",Te={scanView:Sc,header:jc,preScanAlert:Tc,alertSeparator:kc,cameraContainer:Ic,viewfinder:Nc,statusOverlay:Rc,processingState:Ec,spinner:Ac,successState:Oc,failState:Hc,helperText:Bc,footer:Lc,devControlsContainer:Mc,devControlsHeader:Dc,devControls:zc},Pc=()=>{const[e,t]=te(xt),s=F(Ho),o=F($e),a=F(xs),r=F(Ss),l=ee(Vn),{trigger:i}=Fe(),{play:c}=Ts(),{completeCheck:m}=ks(),[h,u]=T.useState("scanning"),[d,x]=T.useState(null),w=T.useRef(null),g=T.useRef(0);T.useEffect(()=>{if(e.view==="scanning"&&u("scanning"),e.view==="scanning"&&e.targetCheckId){const k=s.find(N=>N.id===e.targetCheckId)?.specialClassifications?.[0];if(k){const N=Bo.find(H=>H.id===k.residentId);N&&x({residentName:N.name,classificationType:k.type})}}else x(null)},[e,s]);const f=T.useCallback(()=>{i("error"),c("error"),u("fail"),setTimeout(()=>{u("scanning")},1500)},[i,c]),p=_=>{h==="scanning"&&(w.current===_&&Date.now()-g.current<2e3||(w.current=_,g.current=Date.now(),u("processing"),setTimeout(()=>{const k=_.startsWith("room:")?_.split(":")[1]:_,N=s.find(H=>H.id===k&&H.status!=="complete");if(N){if(i("success"),c("success"),u("success"),o.simpleSubmitEnabled){const H=N.residents.reduce((A,P)=>(A[P.id]="Awake",A),{});t({view:"none"}),m({checkId:N.id,statuses:H,notes:"",onSuccess:()=>{l({message:"Check completed",icon:"check_circle",variant:"success"})}});return}setTimeout(()=>{t({view:"form",type:"scheduled",method:"scan",checkId:N.id,roomName:N.residents[0].location,residents:N.residents,specialClassifications:N.specialClassifications})},800)}else f()},300)))},v=_=>{_ instanceof Error?console.log("QR Scanner Error:",_.message):console.log("An unknown QR scanner error occurred:",_)},S=()=>t({view:"none"}),C=()=>{if(e.view==="scanning"&&e.targetCheckId){p(e.targetCheckId);return}const _=a.find(k=>k.status!=="complete"&&k.type!=="supplemental");if(_)p(_.id);else{const k=s.find(N=>N.status!=="complete");k?p(k.id):l({message:"No incomplete checks found to simulate.",icon:"info",variant:"neutral"})}},y=()=>p("invalid-qr-code-id"),b=()=>{if(r.cameraFails)return n.jsxs("div",{className:`${Te.statusOverlay} ${Te.failState}`,children:[n.jsx("span",{className:"material-symbols-rounded",children:"no_photography"}),"Camera Error"]});switch(h){case"scanning":return n.jsx(Or,{onScan:_=>{_&&_.length>0&&p(_[0].rawValue)},onError:v,constraints:{facingMode:"environment"},scanDelay:500});case"processing":return n.jsxs("div",{className:`${Te.statusOverlay} ${Te.processingState}`,children:[n.jsx("span",{className:`material-symbols-rounded ${Te.spinner}`,children:"progress_activity"}),"Processing..."]});case"success":return n.jsxs("div",{className:`${Te.statusOverlay} ${Te.successState}`,children:[n.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),"Success!"]});case"fail":return n.jsxs("div",{className:`${Te.statusOverlay} ${Te.failState}`,children:[n.jsx("span",{className:"material-symbols-rounded",children:"error"}),"Scan Failed"]});default:return null}};return n.jsxs(Q.div,{className:Te.scanView,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsxs("header",{className:Te.header,children:[n.jsx("h3",{children:"Scan Room QR Code"}),n.jsx(ae,{variant:"on-solid",size:"lg",iconOnly:!0,onClick:S,"aria-label":"Close scanner",children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),n.jsx(Je,{children:d&&n.jsxs(Q.div,{className:Te.preScanAlert,initial:{y:"-100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"-100%",opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.35},children:[n.jsx("span",{className:"material-symbols-rounded",children:"warning"}),n.jsxs("p",{children:[n.jsx("span",{children:d.residentName}),n.jsx("span",{className:Te.alertSeparator,children:"|"}),n.jsx("span",{children:d.classificationType})]})]})}),n.jsxs("main",{className:Te.cameraContainer,children:[n.jsx("div",{className:Te.viewfinder,"data-scan-state":h,children:b()}),n.jsx("p",{className:Te.helperText,children:r.cameraFails?"Camera hardware is not responding.":"Point your camera at the room's QR code"})]}),n.jsx("footer",{className:Te.footer,children:n.jsxs("div",{className:Te.devControlsContainer,children:[n.jsx("p",{className:Te.devControlsHeader,children:"Dev controls"}),n.jsxs("div",{className:Te.devControls,children:[n.jsxs(ae,{variant:"on-solid",size:"s",onClick:C,disabled:r.cameraFails,children:[n.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),"Simulate success"]}),n.jsxs(ae,{variant:"on-solid",size:"s",onClick:y,disabled:r.cameraFails,children:[n.jsx("span",{className:"material-symbols-rounded",children:"error"}),"Simulate fail"]})]})]})})]})},$c="_segmentedControlItem_1kcz1_9",Fc="_itemColumn_1kcz1_69",Wc="_segmentedControl_1kcz1_9",Vc="_columnContainer_1kcz1_203",Gc="_gridContainer_1kcz1_259",Uc="_deadCell_1kcz1_357",Lt={segmentedControlItem:$c,itemColumn:Fc,segmentedControl:Wc,columnContainer:Vc,gridContainer:Gc,deadCell:Uc},Ue=({options:e,value:t,onValueChange:s,id:o,layout:a="row",itemDirection:r="row"})=>{const l=h=>{h&&s(h)};let i=Lt.segmentedControl;a==="column"?i=Lt.columnContainer:a==="grid"&&(i=Lt.gridContainer);const c=r==="column"?`${Lt.segmentedControlItem} ${Lt.itemColumn}`:Lt.segmentedControlItem,m=a==="grid"&&e.length%2!==0;return n.jsxs(er,{type:"single",className:i,value:t,onValueChange:l,"aria-label":o,id:o,children:[e.map(h=>n.jsxs(tr,{value:h.value,"aria-label":h.label,className:c,children:[h.icon&&n.jsx("span",{className:"material-symbols-rounded",children:h.icon}),n.jsx("span",{children:h.label})]},h.value)),m&&n.jsx("div",{className:Lt.deadCell,"aria-hidden":"true"})]})},qc=(e,t)=>{T.useLayoutEffect(()=>{if(e){e.style.height="0px";const s=e.scrollHeight;e.style.height=s+"px"}},[e,t])},Yc="_container_tigow_5",Kc="_header_tigow_27",Xc="_residentName_tigow_39",Qc="_warningIcon_tigow_59",Jc="_controlSection_tigow_69",Zc="_classificationDetails_tigow_99",ed="_notesInput_tigow_125",Mt={container:Yc,header:Kc,residentName:Xc,warningIcon:Qc,controlSection:Jc,classificationDetails:Zc,notesInput:ed},td=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"}],nd=[{value:"Refused",label:"Refused"},{value:"Sleeping",label:"Sleeping"},{value:"Awake",label:"Awake"}],sd=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"}],od=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"}],ad=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"}],rd=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"},{value:"Chilling",label:"Chilling"}],id=({resident:e,status:t,notes:s,onStatusChange:o,onNotesChange:a,classification:r})=>{const l=!!r,i=T.useRef(null),{residentStatusSet:c,markMultipleLayout:m}=F($e);qc(i.current,s);let h;const u=m;switch(c){case"set-2":h=td;break;case"set-4":h=sd;break;case"set-5":h=od;break;case"set-6":h=ad;break;case"set-7":h=rd;break;case"set-3":default:h=nd;break}return n.jsxs("div",{className:Mt.container,"data-classified":l,children:[n.jsx("div",{className:Mt.header,children:n.jsxs("h4",{className:Mt.residentName,children:[l&&n.jsx("span",{className:`material-symbols-rounded ${Mt.warningIcon}`,"aria-label":"Special Classification",children:"warning"}),e.name]})}),l&&n.jsx("div",{className:Mt.classificationDetails,children:n.jsxs("p",{children:[n.jsxs("strong",{children:[r.type,":"]})," ",r.details]})}),n.jsx("div",{className:Mt.controlSection,children:n.jsx(Ue,{id:`status-group-${e.id}`,options:h,value:t,onValueChange:d=>o(e.id,d),layout:u})}),n.jsx("textarea",{ref:i,id:`notes-${e.id}`,value:s,onChange:d=>a(e.id,d.target.value),placeholder:"Enter optional notes","aria-label":`Notes for ${e.name}`,rows:1,className:Mt.notesInput})]})},ld="_overlay_2b95s_5",cd="_content_2b95s_19",dd="_handleContainer_2b95s_51",ud="_handle_2b95s_51",md="_header_2b95s_81",hd="_headerTitle_2b95s_93",fd="_listContainer_2b95s_107",pd="_columnList_2b95s_125",gd="_rowContainer_2b95s_137",vd="_gridButton_2b95s_153",xd="_gridContainer_2b95s_163",bd="_deadCell_2b95s_233",nt={overlay:ld,content:cd,handleContainer:dd,handle:ud,header:md,headerTitle:hd,listContainer:fd,columnList:pd,rowContainer:gd,gridButton:vd,gridContainer:xd,deadCell:bd},yd=({isOpen:e,onClose:t,onSelect:s,options:o,layout:a})=>{const{trigger:r}=Fe(),l=T.useRef(null),i=T.useRef(null),c=d=>{r("selection"),s(d),t()},m=()=>{t()};T.useEffect(()=>{if(e){const d=setTimeout(()=>{i.current?.focus()},50),x=w=>{w.key==="Escape"&&(w.preventDefault(),t())};return document.addEventListener("keydown",x),()=>{clearTimeout(d),document.removeEventListener("keydown",x)}}},[e,t]);const h=a==="grid"&&o.length%2!==0,u=()=>{switch(a){case"row":return nt.rowContainer;case"column":return nt.columnList;case"grid":return nt.gridContainer}};return n.jsx(Je,{children:e&&n.jsxs(n.Fragment,{children:[n.jsx(Q.div,{className:nt.overlay,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:m,"aria-hidden":"true"}),n.jsxs(Q.div,{ref:l,className:nt.content,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},role:"dialog","aria-modal":"true","aria-labelledby":"status-sheet-title",children:[n.jsx("div",{className:nt.handleContainer,children:n.jsx("div",{className:nt.handle})}),n.jsx("div",{className:nt.header,children:n.jsx("h3",{id:"status-sheet-title",className:nt.headerTitle,children:"Select Status"})}),n.jsx("div",{className:nt.listContainer,children:a==="column"?n.jsx("div",{className:u(),children:o.map(d=>n.jsx(wt,{label:d.label,onClick:()=>c(d.value)},d.value))}):n.jsxs("div",{className:u(),children:[o.map((d,x)=>n.jsx("button",{ref:x===0?i:void 0,className:nt.gridButton,onClick:()=>c(d.value),children:d.label},d.value)),h&&n.jsx("div",{className:nt.deadCell})]})})]})]})})},wd="_checkFormView_tpp19_5",_d="_header_tpp19_27",Cd="_headerTitle_tpp19_291",Sd="_formContent_tpp19_319",jd="_roomHeader_tpp19_341",Td="_badgeWrapper_tpp19_371",kd="_statusLabel_tpp19_389",Id="_warningBlock_tpp19_455",Nd="_sectionHeader_tpp19_509",Rd="_checkTypeSection_tpp19_527",Ed="_markMultipleContainer_tpp19_547",Ad="_residentListContainer_tpp19_561",Od="_footer_tpp19_691",He={checkFormView:wd,header:_d,headerTitle:Cd,formContent:Sd,roomHeader:jd,badgeWrapper:Td,statusLabel:kd,warningBlock:Id,sectionHeader:Nd,checkTypeSection:Rd,markMultipleContainer:Ed,residentListContainer:Ad,footer:Od},Hd=[{value:"Locked down",label:"Locked down"},{value:"Random",label:"Random"}],Bd=[{value:"Noise Complaint",label:"Noise Complaint"},{value:"Resident Request",label:"Resident Request"},{value:"Medical Alert",label:"Medical Alert"},{value:"Security Concern",label:"Security Concern"},{value:"Other",label:"Other"}],Ld=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"}],Md=[{value:"Refused",label:"Refused"},{value:"Sleeping",label:"Sleeping"},{value:"Awake",label:"Awake"}],Dd=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"}],zd=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"}],Pd=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"}],$d=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"},{value:"Chilling",label:"Chilling"}],Fd=({checkData:e})=>{const t=ee(xt),s=ee(gn),o=ee(Vn),a=F(wr),r=ee(_r),l=ee(Cr),i=F(Ho),c=F(pn),{isCheckTypeEnabled:m,markMultipleEnabled:h,residentStatusSet:u,markMultipleLayout:d}=F($e),{trigger:x}=Fe(),{completeCheck:w}=ks(),{startScan:g}=Is(),[f,p]=T.useState(!1);let v;switch(u){case"set-2":v=Ld;break;case"set-4":v=Dd;break;case"set-5":v=zd;break;case"set-6":v=Pd;break;case"set-7":v=$d;break;case"set-3":default:v=Md;break}const S=T.useRef(null),C=T.useRef(null),y=T.useRef(null),[b,_]=T.useState(!1);vn(y,{isEnabled:!0}),Lr({containerRef:C,footerOffsetVar:"--form-footer-height"});const k=e.type==="scheduled"?a[e.checkId]:void 0,[N,H]=T.useState(()=>k?.statuses||e.residents.reduce((I,M)=>({...I,[M.id]:""}),{})),[A,P]=T.useState(()=>k?.notes||e.residents.reduce((I,M)=>({...I,[M.id]:""}),{})),[B,L]=T.useState(k?.checkType||""),[$,W]=T.useState(""),K=e.type==="scheduled"&&e.method==="manual",ne=e.type==="supplemental",ie=T.useMemo(()=>ne?"supplemental":e.type==="scheduled"&&i.find(M=>M.id===e.checkId)?.status||"pending",[i,e,ne]),le=T.useRef(!1);T.useEffect(()=>()=>{!le.current&&e.type==="scheduled"&&r({checkId:e.checkId,draft:{statuses:N,notes:A,checkType:B}})},[e,N,A,B,r]),T.useLayoutEffect(()=>{const I=S.current;if(I){const M=I.offsetHeight;document.documentElement.style.setProperty("--form-footer-height",`${M}px`)}return()=>{document.documentElement.style.removeProperty("--form-footer-height")}},[]),T.useLayoutEffect(()=>{const I=C.current;if(!I)return;const M=()=>{const{scrollTop:he,scrollHeight:ue,clientHeight:Ke}=I,V=ue-he<=Ke+1,at=ue>Ke;_(at&&!V)},J=new ResizeObserver(M);return J.observe(I),I.addEventListener("scroll",M,{passive:!0}),M(),()=>{J.disconnect(),I.removeEventListener("scroll",M)}},[]);const Ne=()=>{e.type==="scheduled"&&e.method==="scan"&&g(),t({view:"none"})},Ze=(I,M)=>{H(J=>({...J,[I]:M}))},Se=(I,M)=>{P(J=>({...J,[I]:M}))},et=I=>{if(!I)return;const M={...N};e.residents.forEach(J=>{M[J.id]=I}),H(M)},Ye=T.useMemo(()=>!(!e.residents.every(M=>N[M.id])||m&&!B||ne&&!$),[N,e.residents,m,B,ne,$]),Le=()=>{if(!Ye)return;le.current=!0,e.type==="scheduled"&&l(e.checkId),x("success");const I=Object.values(A).filter(M=>M.trim()!=="").join(`
---
`);e.type==="scheduled"?(w({checkId:e.checkId,statuses:N,notes:I}),t({view:"none"})):e.type==="supplemental"&&(s({type:"CHECK_SUPPLEMENTAL_ADD",payload:{roomId:e.roomId,statuses:N,notes:I,incidentType:$}}),t({view:"none"}),c!=="offline"&&o({message:`Supplemental check for ${e.roomName} saved.`,icon:"task_alt",variant:"success"})),e.type==="scheduled"&&e.method==="scan"&&g()};return n.jsxs(Q.div,{className:He.checkFormView,style:{height:"var(--visual-viewport-height, 100dvh)"},initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsxs("header",{className:He.header,ref:y,children:[n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:Ne,"aria-label":"Back",children:n.jsx("span",{className:"material-symbols-rounded",children:"arrow_back"})}),n.jsx("h3",{className:He.headerTitle,children:"Record Check"})]}),n.jsxs("main",{className:He.formContent,ref:C,children:[n.jsxs("h2",{className:He.roomHeader,children:[e.roomName,n.jsxs("div",{className:He.badgeWrapper,children:[K&&n.jsx("span",{className:He.statusLabel,"data-variant":"info",children:"Manual"}),ne&&n.jsx("span",{className:He.statusLabel,"data-variant":"info",children:"Supplemental"})]})]}),!ne&&ie==="early"&&n.jsxs("div",{className:He.warningBlock,role:"status",children:[n.jsx("span",{className:"material-symbols-rounded","aria-hidden":"true",children:"info"}),n.jsx("span",{children:"This room was checked recently. Are you sure you want to check now?"})]}),ne&&n.jsxs("div",{className:He.incidentTypeSection,children:[n.jsx("label",{htmlFor:"incident-type-select",className:He.sectionLabel,children:"Reason for Check"}),n.jsxs("select",{id:"incident-type-select",className:He.selectInput,value:$,onChange:I=>W(I.target.value),children:[n.jsx("option",{value:"",disabled:!0,children:"Select a reason..."}),Bd.map(I=>n.jsx("option",{value:I.value,children:I.label},I.value))]})]}),m&&n.jsxs("div",{className:He.checkTypeSection,children:[n.jsx("label",{htmlFor:"check-type-control",className:He.sectionHeader,children:"Check type"}),n.jsx(Ue,{id:"check-type-control",options:Hd,value:B,onValueChange:L})]}),h&&e.residents.length>1&&n.jsx("div",{className:He.markMultipleContainer,children:n.jsx(ae,{variant:"secondary",size:"m",onClick:()=>p(!0),children:"Mark all"})}),n.jsx(yd,{isOpen:f,onClose:()=>p(!1),onSelect:et,options:v,layout:d}),n.jsx("div",{className:He.residentListContainer,children:e.residents.map(I=>{const M=e.type==="scheduled"?e.specialClassifications?.find(J=>J.residentId===I.id):void 0;return n.jsx(id,{resident:I,status:N[I.id],notes:A[I.id],onStatusChange:Ze,onNotesChange:Se,classification:M},I.id)})})]}),n.jsx("footer",{className:He.footer,ref:S,"data-scrolled":b,children:n.jsx(ae,{variant:"primary",size:"m",onClick:Le,disabled:!Ye,children:"Save"})})]})},Gn=0,It=1,Jt=2,Wo=4;function Js(e){return()=>e}function Wd(e){e()}function Vo(e,t){return s=>e(t(s))}function Zs(e,t){return()=>e(t)}function Vd(e,t){return s=>e(t,s)}function Ns(e){return e!==void 0}function Gd(...e){return()=>{e.map(Wd)}}function Zt(){}function Un(e,t){return t(e),e}function Ud(e,t){return t(e)}function xe(...e){return e}function ce(e,t){return e(It,t)}function X(e,t){e(Gn,t)}function Rs(e){e(Jt)}function Ce(e){return e(Wo)}function z(e,t){return ce(e,Vd(t,Gn))}function ct(e,t){const s=e(It,o=>{s(),t(o)});return s}function eo(e){let t,s;return o=>a=>{t=a,s&&clearTimeout(s),s=setTimeout(()=>{o(t)},e)}}function Go(e,t){return e===t}function ve(e=Go){let t;return s=>o=>{e(t,o)||(t=o,s(o))}}function q(e){return t=>s=>{e(s)&&t(s)}}function D(e){return t=>Vo(t,e)}function gt(e){return t=>()=>{t(e)}}function E(e,...t){const s=qd(...t);return(o,a)=>{switch(o){case Jt:Rs(e);return;case It:return ce(e,s(a))}}}function vt(e,t){return s=>o=>{s(t=e(t,o))}}function Wt(e){return t=>s=>{e>0?e--:t(s)}}function _t(e){let t=null,s;return o=>a=>{t=a,!s&&(s=setTimeout(()=>{s=void 0,o(t)},e))}}function Z(...e){const t=new Array(e.length);let s=0,o=null;const a=Math.pow(2,e.length)-1;return e.forEach((r,l)=>{const i=Math.pow(2,l);ce(r,c=>{const m=s;s=s|i,t[l]=c,m!==a&&s===a&&o&&(o(),o=null)})}),r=>l=>{const i=()=>{r([l].concat(t))};s===a?i():o=i}}function qd(...e){return t=>e.reduceRight(Ud,t)}function Yd(e){let t,s;const o=()=>t?.();return function(a,r){switch(a){case It:return r?s===r?void 0:(o(),s=r,t=ce(e,r),t):(o(),Zt);case Jt:o(),s=null;return}}}function O(e){let t=e;const s=se();return(o,a)=>{switch(o){case Gn:t=a;break;case It:{a(t);break}case Wo:return t}return s(o,a)}}function ze(e,t){return Un(O(t),s=>z(e,s))}function se(){const e=[];return(t,s)=>{switch(t){case Gn:e.slice().forEach(o=>{o(s)});return;case Jt:e.splice(0,e.length);return;case It:return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}}}function Qe(e){return Un(se(),t=>z(e,t))}function re(e,t=[],{singleton:s}={singleton:!0}){return{constructor:e,dependencies:t,id:Kd(),singleton:s}}const Kd=()=>Symbol();function Xd(e){const t=new Map,s=({constructor:o,dependencies:a,id:r,singleton:l})=>{if(l&&t.has(r))return t.get(r);const i=o(a.map(c=>s(c)));return l&&t.set(r,i),i};return s(e)}function Ie(...e){const t=se(),s=new Array(e.length);let o=0;const a=Math.pow(2,e.length)-1;return e.forEach((r,l)=>{const i=Math.pow(2,l);ce(r,c=>{s[l]=c,o=o|i,o===a&&X(t,s)})}),function(r,l){switch(r){case Jt:{Rs(t);return}case It:return o===a&&l(s),ce(t,l)}}}function G(e,t=Go){return E(e,ve(t))}function ds(...e){return function(t,s){switch(t){case Jt:return;case It:return Gd(...e.map(o=>ce(o,s)))}}}var qe=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(qe||{});const Qd={0:"debug",3:"error",1:"log",2:"warn"},Jd=()=>typeof globalThis>"u"?window:globalThis,Nt=re(()=>{const e=O(3);return{log:O((t,s,o=1)=>{var a;const r=(a=Jd().VIRTUOSO_LOG_LEVEL)!=null?a:Ce(e);o>=r&&console[Qd[o]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,s)}),logLevel:e}},[],{singleton:!0});function Gt(e,t,s){return Es(e,t,s).callbackRef}function Es(e,t,s){const o=j.useRef(null);let a=l=>{};const r=j.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(l=>{const i=()=>{const c=l[0].target;c.offsetParent!==null&&e(c)};s?i():requestAnimationFrame(i)}):null,[e,s]);return a=l=>{l&&t?(r?.observe(l),o.current=l):(o.current&&r?.unobserve(o.current),o.current=null)},{callbackRef:a,ref:o}}function Zd(e,t,s,o,a,r,l,i,c){const m=j.useCallback(h=>{const u=eu(h.children,t,i?"offsetWidth":"offsetHeight",a);let d=h.parentElement;for(;!d.dataset.virtuosoScroller;)d=d.parentElement;const x=d.lastElementChild.dataset.viewportType==="window";let w;x&&(w=d.ownerDocument.defaultView);const g=l?i?l.scrollLeft:l.scrollTop:x?i?w.scrollX||w.document.documentElement.scrollLeft:w.scrollY||w.document.documentElement.scrollTop:i?d.scrollLeft:d.scrollTop,f=l?i?l.scrollWidth:l.scrollHeight:x?i?w.document.documentElement.scrollWidth:w.document.documentElement.scrollHeight:i?d.scrollWidth:d.scrollHeight,p=l?i?l.offsetWidth:l.offsetHeight:x?i?w.innerWidth:w.innerHeight:i?d.offsetWidth:d.offsetHeight;o({scrollHeight:f,scrollTop:Math.max(g,0),viewportHeight:p}),r?.(i?to("column-gap",getComputedStyle(h).columnGap,a):to("row-gap",getComputedStyle(h).rowGap,a)),u!==null&&e(u)},[e,t,a,r,l,o,i]);return Es(m,s,c)}function eu(e,t,s,o){const a=e.length;if(a===0)return null;const r=[];for(let l=0;l<a;l++){const i=e.item(l);if(i.dataset.index===void 0)continue;const c=parseInt(i.dataset.index),m=parseFloat(i.dataset.knownSize),h=t(i,s);if(h===0&&o("Zero-sized element, this should not happen",{child:i},qe.ERROR),h===m)continue;const u=r[r.length-1];r.length===0||u.size!==h||u.endIndex!==c-1?r.push({endIndex:c,size:h,startIndex:c}):r[r.length-1].endIndex++}return r}function to(e,t,s){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&s(`${e} was not resolved to pixel value correctly`,t,qe.WARN),t==="normal"?0:parseInt(t??"0",10)}function Uo(e,t,s){const o=j.useRef(null),a=j.useCallback(c=>{if(!(c!=null&&c.offsetParent))return;const m=c.getBoundingClientRect(),h=m.width;let u,d;if(t){const x=t.getBoundingClientRect(),w=m.top-x.top;d=x.height-Math.max(0,w),u=w+t.scrollTop}else{const x=l.current.ownerDocument.defaultView;d=x.innerHeight-Math.max(0,m.top),u=m.top+x.scrollY}o.current={offsetTop:u,visibleHeight:d,visibleWidth:h},e(o.current)},[e,t]),{callbackRef:r,ref:l}=Es(a,!0,s),i=j.useCallback(()=>{a(l.current)},[a,l]);return j.useEffect(()=>{var c;if(t){t.addEventListener("scroll",i);const m=new ResizeObserver(()=>{requestAnimationFrame(i)});return m.observe(t),()=>{t.removeEventListener("scroll",i),m.unobserve(t)}}else{const m=(c=l.current)==null?void 0:c.ownerDocument.defaultView;return m?.addEventListener("scroll",i),m?.addEventListener("resize",i),()=>{m?.removeEventListener("scroll",i),m?.removeEventListener("resize",i)}}},[i,t,l]),r}const We=re(()=>{const e=se(),t=se(),s=O(0),o=se(),a=O(0),r=se(),l=se(),i=O(0),c=O(0),m=O(0),h=O(0),u=se(),d=se(),x=O(!1),w=O(!1),g=O(!1);return z(E(e,D(({scrollTop:f})=>f)),t),z(E(e,D(({scrollHeight:f})=>f)),l),z(t,a),{deviation:s,fixedFooterHeight:m,fixedHeaderHeight:c,footerHeight:h,headerHeight:i,horizontalDirection:w,scrollBy:d,scrollContainerState:e,scrollHeight:l,scrollingInProgress:x,scrollTo:u,scrollTop:t,skipAnimationFrameInResizeObserver:g,smoothScrollTargetReached:o,statefulScrollTop:a,viewportHeight:r}},[],{singleton:!0}),dn={lvl:0};function qo(e,t){const s=e.length;if(s===0)return[];let{index:o,value:a}=t(e[0]);const r=[];for(let l=1;l<s;l++){const{index:i,value:c}=t(e[l]);r.push({end:i-1,start:o,value:a}),o=i,a=c}return r.push({end:1/0,start:o,value:a}),r}function me(e){return e===dn}function un(e,t){if(!me(e))return t===e.k?e.v:t<e.k?un(e.l,t):un(e.r,t)}function dt(e,t,s="k"){if(me(e))return[-1/0,void 0];if(Number(e[s])===t)return[e.k,e.v];if(Number(e[s])<t){const o=dt(e.r,t,s);return o[0]===-1/0?[e.k,e.v]:o}return dt(e.l,t,s)}function Xe(e,t,s){return me(e)?Xo(t,s,1):t===e.k?Ae(e,{k:t,v:s}):t<e.k?no(Ae(e,{l:Xe(e.l,t,s)})):no(Ae(e,{r:Xe(e.r,t,s)}))}function Xt(){return dn}function qn(e,t,s){if(me(e))return[];const o=dt(e,t)[0];return tu(ms(e,o,s))}function us(e,t){if(me(e))return dn;const{k:s,l:o,r:a}=e;if(t===s){if(me(o))return a;if(me(a))return o;{const[r,l]=Ko(o);return Dn(Ae(e,{k:r,l:Yo(o),v:l}))}}else return t<s?Dn(Ae(e,{l:us(o,t)})):Dn(Ae(e,{r:us(a,t)}))}function $t(e){return me(e)?[]:[...$t(e.l),{k:e.k,v:e.v},...$t(e.r)]}function ms(e,t,s){if(me(e))return[];const{k:o,l:a,r,v:l}=e;let i=[];return o>t&&(i=i.concat(ms(a,t,s))),o>=t&&o<=s&&i.push({k:o,v:l}),o<=s&&(i=i.concat(ms(r,t,s))),i}function Dn(e){const{l:t,lvl:s,r:o}=e;if(o.lvl>=s-1&&t.lvl>=s-1)return e;if(s>o.lvl+1){if(Qn(t))return Qo(Ae(e,{lvl:s-1}));if(!me(t)&&!me(t.r))return Ae(t.r,{l:Ae(t,{r:t.r.l}),lvl:s,r:Ae(e,{l:t.r.r,lvl:s-1})});throw new Error("Unexpected empty nodes")}else{if(Qn(e))return hs(Ae(e,{lvl:s-1}));if(!me(o)&&!me(o.l)){const a=o.l,r=Qn(a)?o.lvl-1:o.lvl;return Ae(a,{l:Ae(e,{lvl:s-1,r:a.l}),lvl:a.lvl+1,r:hs(Ae(o,{l:a.r,lvl:r}))})}else throw new Error("Unexpected empty nodes")}}function Ae(e,t){return Xo(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function Yo(e){return me(e.r)?e.l:Dn(Ae(e,{r:Yo(e.r)}))}function Qn(e){return me(e)||e.lvl>e.r.lvl}function Ko(e){return me(e.r)?[e.k,e.v]:Ko(e.r)}function Xo(e,t,s,o=dn,a=dn){return{k:e,l:o,lvl:s,r:a,v:t}}function no(e){return hs(Qo(e))}function Qo(e){const{l:t}=e;return!me(t)&&t.lvl===e.lvl?Ae(t,{r:Ae(e,{l:t.r})}):e}function hs(e){const{lvl:t,r:s}=e;return!me(s)&&!me(s.r)&&s.lvl===t&&s.r.lvl===t?Ae(s,{l:Ae(e,{r:s.l}),lvl:t+1}):e}function tu(e){return qo(e,({k:t,v:s})=>({index:t,value:s}))}function Jo(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function mn(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const As=re(()=>({recalcInProgress:O(!1)}),[],{singleton:!0});function Zo(e,t,s){return e[Pn(e,t,s)]}function Pn(e,t,s,o=0){let a=e.length-1;for(;o<=a;){const r=Math.floor((o+a)/2),l=e[r],i=s(l,t);if(i===0)return r;if(i===-1){if(a-o<2)return r-1;a=r-1}else{if(a===o)return r;o=r+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function nu(e,t,s,o){const a=Pn(e,t,o),r=Pn(e,s,o,a);return e.slice(a,r+1)}function kt(e,t){return Math.round(e.getBoundingClientRect()[t])}function Yn(e){return!me(e.groupOffsetTree)}function Os({index:e},t){return t===e?0:t<e?-1:1}function su(){return{groupIndices:[],groupOffsetTree:Xt(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Xt()}}function ou(e,t){let s=me(e)?0:1/0;for(const o of t){const{endIndex:a,size:r,startIndex:l}=o;if(s=Math.min(s,l),me(e)){e=Xe(e,0,r);continue}const i=qn(e,l-1,a+1);if(i.some(uu(o)))continue;let c=!1,m=!1;for(const{end:h,start:u,value:d}of i)c?(a>=u||r===d)&&(e=us(e,u)):(m=d!==r,c=!0),h>a&&a>=u&&d!==r&&(e=Xe(e,a+1,d));m&&(e=Xe(e,l,r))}return[e,s]}function au(e){return typeof e.groupIndex<"u"}function ru({offset:e},t){return t===e?0:t<e?-1:1}function hn(e,t,s){if(t.length===0)return 0;const{index:o,offset:a,size:r}=Zo(t,e,Os),l=e-o,i=r*l+(l-1)*s+a;return i>0?i+s:i}function ea(e,t){if(!Yn(t))return e;let s=0;for(;t.groupIndices[s]<=e+s;)s++;return e+s}function ta(e,t,s){if(au(e))return t.groupIndices[e.groupIndex]+1;{const o=e.index==="LAST"?s:e.index;let a=ea(o,t);return a=Math.max(0,a,Math.min(s,a)),a}}function iu(e,t,s,o=0){return o>0&&(t=Math.max(t,Zo(e,o,Os).offset)),qo(nu(e,t,s,ru),du)}function lu(e,[t,s,o,a]){t.length>0&&o("received item sizes",t,qe.DEBUG);const r=e.sizeTree;let l=r,i=0;if(s.length>0&&me(r)&&t.length===2){const d=t[0].size,x=t[1].size;l=s.reduce((w,g)=>Xe(Xe(w,g,d),g+1,x),l)}else[l,i]=ou(l,t);if(l===r)return e;const{lastIndex:c,lastOffset:m,lastSize:h,offsetTree:u}=fs(e.offsetTree,i,l,a);return{groupIndices:s,groupOffsetTree:s.reduce((d,x)=>Xe(d,x,hn(x,u,a)),Xt()),lastIndex:c,lastOffset:m,lastSize:h,offsetTree:u,sizeTree:l}}function cu(e){return $t(e).map(({k:t,v:s},o,a)=>{const r=a[o+1];return{endIndex:r?r.k-1:1/0,size:s,startIndex:t}})}function so(e,t){let s=0,o=0;for(;s<e;)s+=t[o+1]-t[o]-1,o++;return o-(s===e?0:1)}function fs(e,t,s,o){let a=e,r=0,l=0,i=0,c=0;if(t!==0){c=Pn(a,t-1,Os),i=a[c].offset;const m=dt(s,t-1);r=m[0],l=m[1],a.length&&a[c].size===dt(s,t)[1]&&(c-=1),a=a.slice(0,c+1)}else a=[];for(const{start:m,value:h}of qn(s,t,1/0)){const u=m-r,d=u*l+i+u*o;a.push({index:m,offset:d,size:h}),r=m,i=d,l=h}return{lastIndex:r,lastOffset:i,lastSize:l,offsetTree:a}}function du(e){return{index:e.index,value:e}}function uu(e){const{endIndex:t,size:s,startIndex:o}=e;return a=>a.start===o&&(a.end===t||a.end===1/0)&&a.value===s}const mu={offsetHeight:"height",offsetWidth:"width"},bt=re(([{log:e},{recalcInProgress:t}])=>{const s=se(),o=se(),a=ze(o,0),r=se(),l=se(),i=O(0),c=O([]),m=O(void 0),h=O(void 0),u=O((y,b)=>kt(y,mu[b])),d=O(void 0),x=O(0),w=su(),g=ze(E(s,Z(c,e,x),vt(lu,w),ve()),w),f=ze(E(c,ve(),vt((y,b)=>({current:b,prev:y.current}),{current:[],prev:[]}),D(({prev:y})=>y)),[]);z(E(c,q(y=>y.length>0),Z(g,x),D(([y,b,_])=>{const k=y.reduce((N,H,A)=>Xe(N,H,hn(H,b.offsetTree,_)||A),Xt());return{...b,groupIndices:y,groupOffsetTree:k}})),g),z(E(o,Z(g),q(([y,{lastIndex:b}])=>y<b),D(([y,{lastIndex:b,lastSize:_}])=>[{endIndex:b,size:_,startIndex:y}])),s),z(m,h);const p=ze(E(m,D(y=>y===void 0)),!0);z(E(h,q(y=>y!==void 0&&me(Ce(g).sizeTree)),D(y=>[{endIndex:0,size:y,startIndex:0}])),s);const v=Qe(E(s,Z(g),vt(({sizes:y},[b,_])=>({changed:_!==y,sizes:_}),{changed:!1,sizes:w}),D(y=>y.changed)));ce(E(i,vt((y,b)=>({diff:y.prev-b,prev:b}),{diff:0,prev:0}),D(y=>y.diff)),y=>{const{groupIndices:b}=Ce(g);if(y>0)X(t,!0),X(r,y+so(y,b));else if(y<0){const _=Ce(f);_.length>0&&(y-=so(-y,_)),X(l,y)}}),ce(E(i,Z(e)),([y,b])=>{y<0&&b("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:i},qe.ERROR)});const S=Qe(r);z(E(r,Z(g),D(([y,b])=>{const _=b.groupIndices.length>0,k=[],N=b.lastSize;if(_){const H=un(b.sizeTree,0);let A=0,P=0;for(;A<y;){const L=b.groupIndices[P],$=b.groupIndices.length===P+1?1/0:b.groupIndices[P+1]-L-1;k.push({endIndex:L,size:H,startIndex:L}),k.push({endIndex:L+1+$-1,size:N,startIndex:L+1}),P++,A+=$+1}const B=$t(b.sizeTree);return A!==y&&B.shift(),B.reduce((L,{k:$,v:W})=>{let K=L.ranges;return L.prevSize!==0&&(K=[...L.ranges,{endIndex:$+y-1,size:L.prevSize,startIndex:L.prevIndex}]),{prevIndex:$+y,prevSize:W,ranges:K}},{prevIndex:y,prevSize:0,ranges:k}).ranges}return $t(b.sizeTree).reduce((H,{k:A,v:P})=>({prevIndex:A+y,prevSize:P,ranges:[...H.ranges,{endIndex:A+y-1,size:H.prevSize,startIndex:H.prevIndex}]}),{prevIndex:0,prevSize:N,ranges:[]}).ranges})),s);const C=Qe(E(l,Z(g,x),D(([y,{offsetTree:b},_])=>{const k=-y;return hn(k,b,_)})));return z(E(l,Z(g,x),D(([y,b,_])=>{if(b.groupIndices.length>0){if(me(b.sizeTree))return b;let k=Xt();const N=Ce(f);let H=0,A=0,P=0;for(;H<-y;){P=N[A];const B=N[A+1]-P-1;A++,H+=B+1}if(k=$t(b.sizeTree).reduce((B,{k:L,v:$})=>Xe(B,Math.max(0,L+y),$),k),H!==-y){const B=un(b.sizeTree,P);k=Xe(k,0,B);const L=dt(b.sizeTree,-y+1)[1];k=Xe(k,1,L)}return{...b,sizeTree:k,...fs(b.offsetTree,0,k,_)}}else{const k=$t(b.sizeTree).reduce((N,{k:H,v:A})=>Xe(N,Math.max(0,H+y),A),Xt());return{...b,sizeTree:k,...fs(b.offsetTree,0,k,_)}}})),g),{beforeUnshiftWith:S,data:d,defaultItemSize:h,firstItemIndex:i,fixedItemSize:m,gap:x,groupIndices:c,itemSize:u,listRefresh:v,shiftWith:l,shiftWithOffset:C,sizeRanges:s,sizes:g,statefulTotalCount:a,totalCount:o,trackItemSizes:p,unshiftWith:r}},xe(Nt,As),{singleton:!0});function hu(e){return e.reduce((t,s)=>(t.groupIndices.push(t.totalCount),t.totalCount+=s+1,t),{groupIndices:[],totalCount:0})}const na=re(([{groupIndices:e,sizes:t,totalCount:s},{headerHeight:o,scrollTop:a}])=>{const r=se(),l=se(),i=Qe(E(r,D(hu)));return z(E(i,D(c=>c.totalCount)),s),z(E(i,D(c=>c.groupIndices)),e),z(E(Ie(a,t,o),q(([c,m])=>Yn(m)),D(([c,m,h])=>dt(m.groupOffsetTree,Math.max(c-h,0),"v")[0]),ve(),D(c=>[c])),l),{groupCounts:r,topItemsIndexes:l}},xe(bt,We)),Rt=re(([{log:e}])=>{const t=O(!1),s=Qe(E(t,q(o=>o),ve()));return ce(t,o=>{o&&Ce(e)("props updated",{},qe.DEBUG)}),{didMount:s,propsReady:t}},xe(Nt),{singleton:!0}),fu=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function sa(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!fu)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const xn=re(([{gap:e,listRefresh:t,sizes:s,totalCount:o},{fixedFooterHeight:a,fixedHeaderHeight:r,footerHeight:l,headerHeight:i,scrollingInProgress:c,scrollTo:m,smoothScrollTargetReached:h,viewportHeight:u},{log:d}])=>{const x=se(),w=se(),g=O(0);let f=null,p=null,v=null;function S(){f&&(f(),f=null),v&&(v(),v=null),p&&(clearTimeout(p),p=null),X(c,!1)}return z(E(x,Z(s,u,o,g,i,l,d),Z(e,r,a),D(([[C,y,b,_,k,N,H,A],P,B,L])=>{const $=sa(C),{align:W,behavior:K,offset:ne}=$,ie=_-1,le=ta($,y,ie);let Ne=hn(le,y.offsetTree,P)+N;W==="end"?(Ne+=B+dt(y.sizeTree,le)[1]-b+L,le===ie&&(Ne+=H)):W==="center"?Ne+=(B+dt(y.sizeTree,le)[1]-b+L)/2:Ne-=k,ne&&(Ne+=ne);const Ze=Se=>{S(),Se?(A("retrying to scroll to",{location:C},qe.DEBUG),X(x,C)):(X(w,!0),A("list did not change, scroll successful",{},qe.DEBUG))};if(S(),K==="smooth"){let Se=!1;v=ce(t,et=>{Se=Se||et}),f=ct(h,()=>{Ze(Se)})}else f=ct(E(t,pu(150)),Ze);return p=setTimeout(()=>{S()},1200),X(c,!0),A("scrolling from index to",{behavior:K,index:le,top:Ne},qe.DEBUG),{behavior:K,top:Ne}})),m),{scrollTargetReached:w,scrollToIndex:x,topListHeight:g}},xe(bt,We,Nt),{singleton:!0});function pu(e){return t=>{const s=setTimeout(()=>{t(!1)},e);return o=>{o&&(t(!0),clearTimeout(s))}}}function Hs(e,t){e==0?t():requestAnimationFrame(()=>{Hs(e-1,t)})}function Bs(e,t){const s=t-1;return typeof e=="number"?e:e.index==="LAST"?s:e.index}const bn=re(([{defaultItemSize:e,listRefresh:t,sizes:s},{scrollTop:o},{scrollTargetReached:a,scrollToIndex:r},{didMount:l}])=>{const i=O(!0),c=O(0),m=O(!0);return z(E(l,Z(c),q(([h,u])=>!!u),gt(!1)),i),z(E(l,Z(c),q(([h,u])=>!!u),gt(!1)),m),ce(E(Ie(t,l),Z(i,s,e,m),q(([[,h],u,{sizeTree:d},x,w])=>h&&(!me(d)||Ns(x))&&!u&&!w),Z(c)),([,h])=>{ct(a,()=>{X(m,!0)}),Hs(4,()=>{ct(o,()=>{X(i,!0)}),X(r,h)})}),{initialItemFinalLocationReached:m,initialTopMostItemIndex:c,scrolledToInitialItem:i}},xe(bt,We,xn,Rt),{singleton:!0});function oa(e,t){return Math.abs(e-t)<1.01}const fn="up",ln="down",gu="none",vu={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},xu=0,yn=re(([{footerHeight:e,headerHeight:t,scrollBy:s,scrollContainerState:o,scrollTop:a,viewportHeight:r}])=>{const l=O(!1),i=O(!0),c=se(),m=se(),h=O(4),u=O(xu),d=ze(E(ds(E(G(a),Wt(1),gt(!0)),E(G(a),Wt(1),gt(!1),eo(100))),ve()),!1),x=ze(E(ds(E(s,gt(!0)),E(s,gt(!1),eo(200))),ve()),!1);z(E(Ie(G(a),G(u)),D(([v,S])=>v<=S),ve()),i),z(E(i,_t(50)),m);const w=Qe(E(Ie(o,G(r),G(t),G(e),G(h)),vt((v,[{scrollHeight:S,scrollTop:C},y,b,_,k])=>{const N=C+y-S>-k,H={scrollHeight:S,scrollTop:C,viewportHeight:y};if(N){let P,B;return C>v.state.scrollTop?(P="SCROLLED_DOWN",B=v.state.scrollTop-C):(P="SIZE_DECREASED",B=v.state.scrollTop-C||v.scrollTopDelta),{atBottom:!0,atBottomBecause:P,scrollTopDelta:B,state:H}}let A;return H.scrollHeight>v.state.scrollHeight?A="SIZE_INCREASED":y<v.state.viewportHeight?A="VIEWPORT_HEIGHT_DECREASING":C<v.state.scrollTop?A="SCROLLING_UPWARDS":A="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:A,state:H}},vu),ve((v,S)=>v&&v.atBottom===S.atBottom))),g=ze(E(o,vt((v,{scrollHeight:S,scrollTop:C,viewportHeight:y})=>{if(oa(v.scrollHeight,S))return{changed:!1,jump:0,scrollHeight:S,scrollTop:C};{const b=S-(C+y)<1;return v.scrollTop!==C&&b?{changed:!0,jump:v.scrollTop-C,scrollHeight:S,scrollTop:C}:{changed:!0,jump:0,scrollHeight:S,scrollTop:C}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),q(v=>v.changed),D(v=>v.jump)),0);z(E(w,D(v=>v.atBottom)),l),z(E(l,_t(50)),c);const f=O(ln);z(E(o,D(({scrollTop:v})=>v),ve(),vt((v,S)=>Ce(x)?{direction:v.direction,prevScrollTop:S}:{direction:S<v.prevScrollTop?fn:ln,prevScrollTop:S},{direction:ln,prevScrollTop:0}),D(v=>v.direction)),f),z(E(o,_t(50),gt(gu)),f);const p=O(0);return z(E(d,q(v=>!v),gt(0)),p),z(E(a,_t(100),Z(d),q(([v,S])=>!!S),vt(([v,S],[C])=>[S,C],[0,0]),D(([v,S])=>S-v)),p),{atBottomState:w,atBottomStateChange:c,atBottomThreshold:h,atTopStateChange:m,atTopThreshold:u,isAtBottom:l,isAtTop:i,isScrolling:d,lastJumpDueToItemResize:g,scrollDirection:f,scrollVelocity:p}},xe(We)),$n="top",Fn="bottom",oo="none";function ao(e,t,s){return typeof e=="number"?s===fn&&t===$n||s===ln&&t===Fn?e:0:s===fn?t===$n?e.main:e.reverse:t===Fn?e.main:e.reverse}function ro(e,t){var s;return typeof e=="number"?e:(s=e[t])!=null?s:0}const Ls=re(([{deviation:e,fixedHeaderHeight:t,headerHeight:s,scrollTop:o,viewportHeight:a}])=>{const r=se(),l=O(0),i=O(0),c=O(0),m=ze(E(Ie(G(o),G(a),G(s),G(r,mn),G(c),G(l),G(t),G(e),G(i)),D(([h,u,d,[x,w],g,f,p,v,S])=>{const C=h-v,y=f+p,b=Math.max(d-C,0);let _=oo;const k=ro(S,$n),N=ro(S,Fn);return x-=v,x+=d+p,w+=d+p,w-=v,x>h+y-k&&(_=fn),w<h-b+u+N&&(_=ln),_!==oo?[Math.max(C-d-ao(g,$n,_)-k,0),C-b-p+u+ao(g,Fn,_)+N]:null}),q(h=>h!=null),ve(mn)),[0,0]);return{increaseViewportBy:i,listBoundary:r,overscan:c,topListHeight:l,visibleRange:m}},xe(We),{singleton:!0});function bu(e,t,s){if(Yn(t)){const o=ea(e,t);return[{index:dt(t.groupOffsetTree,o)[0],offset:0,size:0},{data:s?.[0],index:o,offset:0,size:0}]}return[{data:s?.[0],index:e,offset:0,size:0}]}const Jn={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function zn(e,t,s,o,a,r){const{lastIndex:l,lastOffset:i,lastSize:c}=a;let m=0,h=0;if(e.length>0){m=e[0].offset;const g=e[e.length-1];h=g.offset+g.size}const u=s-l,d=i+u*c+(u-1)*o,x=m,w=d-h;return{bottom:h,firstItemIndex:r,items:io(e,a,r),offsetBottom:w,offsetTop:m,top:x,topItems:io(t,a,r),topListHeight:t.reduce((g,f)=>f.size+g,0),totalCount:s}}function aa(e,t,s,o,a,r){let l=0;if(s.groupIndices.length>0)for(const h of s.groupIndices){if(h-l>=e)break;l++}const i=e+l,c=Bs(t,i),m=Array.from({length:i}).map((h,u)=>({data:r[u+c],index:u+c,offset:0,size:0}));return zn(m,[],i,a,s,o)}function io(e,t,s){if(e.length===0)return[];if(!Yn(t))return e.map(m=>({...m,index:m.index+s,originalIndex:m.index}));const o=e[0].index,a=e[e.length-1].index,r=[],l=qn(t.groupOffsetTree,o,a);let i,c=0;for(const m of e){(!i||i.end<m.index)&&(i=l.shift(),c=t.groupIndices.indexOf(i.start));let h;m.index===i.start?h={index:c,type:"group"}:h={groupIndex:c,index:m.index-(c+1)+s},r.push({...h,data:m.data,offset:m.offset,originalIndex:m.index,size:m.size})}return r}const Ut=re(([{data:e,firstItemIndex:t,gap:s,sizes:o,totalCount:a},r,{listBoundary:l,topListHeight:i,visibleRange:c},{initialTopMostItemIndex:m,scrolledToInitialItem:h},{topListHeight:u},d,{didMount:x},{recalcInProgress:w}])=>{const g=O([]),f=O(0),p=se();z(r.topItemsIndexes,g);const v=ze(E(Ie(x,w,G(c,mn),G(a),G(o),G(m),h,G(g),G(t),G(s),e),q(([b,_,,k,,,,,,,N])=>{const H=N&&N.length!==k;return b&&!_&&!H}),D(([,,[b,_],k,N,H,A,P,B,L,$])=>{const W=N,{offsetTree:K,sizeTree:ne}=W,ie=Ce(f);if(k===0)return{...Jn,totalCount:k};if(b===0&&_===0)return ie===0?{...Jn,totalCount:k}:aa(ie,H,N,B,L,$||[]);if(me(ne))return ie>0?null:zn(bu(Bs(H,k),W,$),[],k,L,W,B);const le=[];if(P.length>0){const Ye=P[0],Le=P[P.length-1];let Me=0;for(const I of qn(ne,Ye,Le)){const M=I.value,J=Math.max(I.start,Ye),he=Math.min(I.end,Le);for(let ue=J;ue<=he;ue++)le.push({data:$?.[ue],index:ue,offset:Me,size:M}),Me+=M}}if(!A)return zn([],le,k,L,W,B);const Ne=P.length>0?P[P.length-1]+1:0,Ze=iu(K,b,_,Ne);if(Ze.length===0)return null;const Se=k-1,et=Un([],Ye=>{for(const Le of Ze){const Me=Le.value;let I=Me.offset,M=Le.start;const J=Me.size;if(Me.offset<b){M+=Math.floor((b-Me.offset+L)/(J+L));const ue=M-Le.start;I+=ue*J+ue*L}M<Ne&&(I+=(Ne-M)*J,M=Ne);const he=Math.min(Le.end,Se);for(let ue=M;ue<=he&&!(I>=_);ue++)Ye.push({data:$?.[ue],index:ue,offset:I,size:J}),I+=J+L}});return zn(et,le,k,L,W,B)}),q(b=>b!==null),ve()),Jn);z(E(e,q(Ns),D(b=>b?.length)),a),z(E(v,D(b=>b.topListHeight)),u),z(u,i),z(E(v,D(b=>[b.top,b.bottom])),l),z(E(v,D(b=>b.items)),p);const S=Qe(E(v,q(({items:b})=>b.length>0),Z(a,e),q(([{items:b},_])=>b[b.length-1].originalIndex===_-1),D(([,b,_])=>[b-1,_]),ve(mn),D(([b])=>b))),C=Qe(E(v,_t(200),q(({items:b,topItems:_})=>b.length>0&&b[0].originalIndex===_.length),D(({items:b})=>b[0].index),ve())),y=Qe(E(v,q(({items:b})=>b.length>0),D(({items:b})=>{let _=0,k=b.length-1;for(;b[_].type==="group"&&_<k;)_++;for(;b[k].type==="group"&&k>_;)k--;return{endIndex:b[k].index,startIndex:b[_].index}}),ve(Jo)));return{endReached:S,initialItemCount:f,itemsRendered:p,listState:v,rangeChanged:y,startReached:C,topItemsIndexes:g,...d}},xe(bt,na,Ls,bn,xn,yn,Rt,As),{singleton:!0}),ra=re(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:s,headerHeight:o},{listState:a}])=>{const r=se(),l=ze(E(Ie(s,e,o,t,a),D(([i,c,m,h,u])=>i+c+m+h+u.offsetBottom+u.bottom)),0);return z(G(l),r),{totalListHeight:l,totalListHeightChanged:r}},xe(We,Ut),{singleton:!0}),yu=re(([{viewportHeight:e},{totalListHeight:t}])=>{const s=O(!1),o=ze(E(Ie(s,e,t),q(([a])=>a),D(([,a,r])=>Math.max(0,a-r)),_t(0),ve()),0);return{alignToBottom:s,paddingTopAddition:o}},xe(We,ra),{singleton:!0}),ia=re(()=>({context:O(null)})),wu=({itemBottom:e,itemTop:t,locationParams:{align:s,behavior:o,...a},viewportBottom:r,viewportTop:l})=>t<l?{...a,align:s??"start",behavior:o}:e>r?{...a,align:s??"end",behavior:o}:null,la=re(([{gap:e,sizes:t,totalCount:s},{fixedFooterHeight:o,fixedHeaderHeight:a,headerHeight:r,scrollingInProgress:l,scrollTop:i,viewportHeight:c},{scrollToIndex:m}])=>{const h=se();return z(E(h,Z(t,c,s,r,a,o,i),Z(e),D(([[u,d,x,w,g,f,p,v],S])=>{const{align:C,behavior:y,calculateViewLocation:b=wu,done:_,...k}=u,N=ta(u,d,w-1),H=hn(N,d.offsetTree,S)+g+f,A=H+dt(d.sizeTree,N)[1],P=v+f,B=v+x-p,L=b({itemBottom:A,itemTop:H,locationParams:{align:C,behavior:y,...k},viewportBottom:B,viewportTop:P});return L?_&&ct(E(l,q($=>!$),Wt(Ce(l)?1:2)),_):_&&_(),L}),q(u=>u!==null)),m),{scrollIntoView:h}},xe(bt,We,xn,Ut,Nt),{singleton:!0});function lo(e){return e?e==="smooth"?"smooth":"auto":!1}const _u=(e,t)=>typeof e=="function"?lo(e(t)):t&&lo(e),Cu=re(([{listRefresh:e,totalCount:t,fixedItemSize:s,data:o},{atBottomState:a,isAtBottom:r},{scrollToIndex:l},{scrolledToInitialItem:i},{didMount:c,propsReady:m},{log:h},{scrollingInProgress:u},{context:d},{scrollIntoView:x}])=>{const w=O(!1),g=se();let f=null;function p(y){X(l,{align:"end",behavior:y,index:"LAST"})}ce(E(Ie(E(G(t),Wt(1)),c),Z(G(w),r,i,u),D(([[y,b],_,k,N,H])=>{let A=b&&N,P="auto";return A&&(P=_u(_,k||H),A=A&&!!P),{followOutputBehavior:P,shouldFollow:A,totalCount:y}}),q(({shouldFollow:y})=>y)),({followOutputBehavior:y,totalCount:b})=>{f&&(f(),f=null),Ce(s)?requestAnimationFrame(()=>{Ce(h)("following output to ",{totalCount:b},qe.DEBUG),p(y)}):f=ct(e,()=>{Ce(h)("following output to ",{totalCount:b},qe.DEBUG),p(y),f=null})});function v(y){const b=ct(a,_=>{y&&!_.atBottom&&_.notAtBottomBecause==="SIZE_INCREASED"&&!f&&(Ce(h)("scrolling to bottom due to increased size",{},qe.DEBUG),p("auto"))});setTimeout(b,100)}ce(E(Ie(G(w),t,m),q(([y,,b])=>y&&b),vt(({value:y},[,b])=>({refreshed:y===b,value:b}),{refreshed:!1,value:0}),q(({refreshed:y})=>y),Z(w,t)),([,y])=>{Ce(i)&&v(y!==!1)}),ce(g,()=>{v(Ce(w)!==!1)}),ce(Ie(G(w),a),([y,b])=>{y&&!b.atBottom&&b.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&p("auto")});const S=O(null),C=se();return z(ds(E(G(o),D(y=>{var b;return(b=y?.length)!=null?b:0})),E(G(t))),C),ce(E(Ie(E(C,Wt(1)),c),Z(G(S),i,u,d),D(([[y,b],_,k,N,H])=>b&&k&&_?.({context:H,totalCount:y,scrollingInProgress:N})),q(y=>!!y),_t(0)),y=>{f&&(f(),f=null),Ce(s)?requestAnimationFrame(()=>{Ce(h)("scrolling into view",{}),X(x,y)}):f=ct(e,()=>{Ce(h)("scrolling into view",{}),X(x,y),f=null})}),{autoscrollToBottom:g,followOutput:w,scrollIntoViewOnChange:S}},xe(bt,yn,xn,bn,Rt,Nt,We,ia,la)),Su=re(([{data:e,firstItemIndex:t,gap:s,sizes:o},{initialTopMostItemIndex:a},{initialItemCount:r,listState:l},{didMount:i}])=>(z(E(i,Z(r),q(([,c])=>c!==0),Z(a,o,t,s,e),D(([[,c],m,h,u,d,x=[]])=>aa(c,m,h,u,d,x))),l),{}),xe(bt,bn,Ut,Rt),{singleton:!0}),ju=re(([{didMount:e},{scrollTo:t},{listState:s}])=>{const o=O(0);return ce(E(e,Z(o),q(([,a])=>a!==0),D(([,a])=>({top:a}))),a=>{ct(E(s,Wt(1),q(r=>r.items.length>1)),()=>{requestAnimationFrame(()=>{X(t,a)})})}),{initialScrollTop:o}},xe(Rt,We,Ut),{singleton:!0}),ca=re(([{scrollVelocity:e}])=>{const t=O(!1),s=se(),o=O(!1);return z(E(e,Z(o,t,s),q(([a,r])=>!!r),D(([a,r,l,i])=>{const{enter:c,exit:m}=r;if(l){if(m(a,i))return!1}else if(c(a,i))return!0;return l}),ve()),t),ce(E(Ie(t,e,s),Z(o)),([[a,r,l],i])=>{a&&i&&i.change&&i.change(r,l)}),{isSeeking:t,scrollSeekConfiguration:o,scrollSeekRangeChanged:s,scrollVelocity:e}},xe(yn),{singleton:!0}),Ms=re(([{scrollContainerState:e,scrollTo:t}])=>{const s=se(),o=se(),a=se(),r=O(!1),l=O(void 0);return z(E(Ie(s,o),D(([{scrollHeight:i,scrollTop:c,viewportHeight:m},{offsetTop:h}])=>({scrollHeight:i,scrollTop:Math.max(0,c-h),viewportHeight:m}))),e),z(E(t,Z(o),D(([i,{offsetTop:c}])=>({...i,top:i.top+c}))),a),{customScrollParent:l,useWindowScroll:r,windowScrollContainerState:s,windowScrollTo:a,windowViewportRect:o}},xe(We)),Tu=re(([{sizeRanges:e,sizes:t},{headerHeight:s,scrollTop:o},{initialTopMostItemIndex:a},{didMount:r},{useWindowScroll:l,windowScrollContainerState:i,windowViewportRect:c}])=>{const m=se(),h=O(void 0),u=O(null),d=O(null);return z(i,u),z(c,d),ce(E(m,Z(t,o,l,u,d,s)),([x,w,g,f,p,v,S])=>{const C=cu(w.sizeTree);f&&p!==null&&v!==null&&(g=p.scrollTop-v.offsetTop),g-=S,x({ranges:C,scrollTop:g})}),z(E(h,q(Ns),D(ku)),a),z(E(r,Z(h),q(([,x])=>x!==void 0),ve(),D(([,x])=>x.ranges)),e),{getState:m,restoreStateFrom:h}},xe(bt,We,bn,Rt,Ms));function ku(e){return{align:"start",index:0,offset:e.scrollTop}}const Iu=re(([{topItemsIndexes:e}])=>{const t=O(0);return z(E(t,q(s=>s>=0),D(s=>Array.from({length:s}).map((o,a)=>a))),e),{topItemCount:t}},xe(Ut));function da(e){let t=!1,s;return()=>(t||(t=!0,s=e()),s)}const Nu=da(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),Ru=re(([{deviation:e,scrollBy:t,scrollingInProgress:s,scrollTop:o},{isAtBottom:a,isScrolling:r,lastJumpDueToItemResize:l,scrollDirection:i},{listState:c},{beforeUnshiftWith:m,gap:h,shiftWithOffset:u,sizes:d},{log:x},{recalcInProgress:w}])=>{const g=Qe(E(c,Z(l),vt(([,p,v,S],[{bottom:C,items:y,offsetBottom:b,totalCount:_},k])=>{const N=C+b;let H=0;return v===_&&p.length>0&&y.length>0&&(y[0].originalIndex===0&&p[0].originalIndex===0||(H=N-S,H!==0&&(H+=k))),[H,y,_,N]},[0,[],0,0]),q(([p])=>p!==0),Z(o,i,s,a,x,w),q(([,p,v,S,,,C])=>!C&&!S&&p!==0&&v===fn),D(([[p],,,,,v])=>(v("Upward scrolling compensation",{amount:p},qe.DEBUG),p))));function f(p){p>0?(X(t,{behavior:"auto",top:-p}),X(e,0)):(X(e,0),X(t,{behavior:"auto",top:-p}))}return ce(E(g,Z(e,r)),([p,v,S])=>{S&&Nu()?X(e,v-p):f(-p)}),ce(E(Ie(ze(r,!1),e,w),q(([p,v,S])=>!p&&!S&&v!==0),D(([p,v])=>v),_t(1)),f),z(E(u,D(p=>({top:-p}))),t),ce(E(m,Z(d,h),D(([p,{groupIndices:v,lastSize:S,sizeTree:C},y])=>{function b(_){return _*(S+y)}if(v.length===0)return b(p);{let _=0;const k=un(C,0);let N=0,H=0;for(;N<p;){N++,_+=k;let A=v.length===H+1?1/0:v[H+1]-v[H]-1;N+A>p&&(_-=k,A=p-N+1),N+=A,_+=b(A),H++}return _}})),p=>{X(e,p),requestAnimationFrame(()=>{X(t,{top:p}),requestAnimationFrame(()=>{X(e,0),X(w,!1)})})}),{deviation:e}},xe(We,yn,Ut,bt,Nt,As)),Eu=re(([e,t,s,o,a,r,l,i,c,m,h])=>({...e,...t,...s,...o,...a,...r,...l,...i,...c,...m,...h}),xe(Ls,Su,Rt,ca,ra,ju,yu,Ms,la,Nt,ia)),ua=re(([{data:e,defaultItemSize:t,firstItemIndex:s,fixedItemSize:o,gap:a,groupIndices:r,itemSize:l,sizeRanges:i,sizes:c,statefulTotalCount:m,totalCount:h,trackItemSizes:u},{initialItemFinalLocationReached:d,initialTopMostItemIndex:x,scrolledToInitialItem:w},g,f,p,{listState:v,topItemsIndexes:S,...C},{scrollToIndex:y},b,{topItemCount:_},{groupCounts:k},N])=>(z(C.rangeChanged,N.scrollSeekRangeChanged),z(E(N.windowViewportRect,D(H=>H.visibleHeight)),g.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:s,fixedItemHeight:o,gap:a,groupCounts:k,initialItemFinalLocationReached:d,initialTopMostItemIndex:x,scrolledToInitialItem:w,sizeRanges:i,topItemCount:_,topItemsIndexes:S,totalCount:h,...p,groupIndices:r,itemSize:l,listState:v,scrollToIndex:y,statefulTotalCount:m,trackItemSizes:u,...C,...N,...g,sizes:c,...f}),xe(bt,bn,We,Tu,Cu,Ut,xn,Ru,Iu,na,Eu));function Au(e,t){const s={},o={};let a=0;const r=e.length;for(;a<r;)o[e[a]]=1,a+=1;for(const l in t)Object.hasOwn(o,l)||(s[l]=t[l]);return s}const On=typeof document<"u"?j.useLayoutEffect:j.useEffect;function ma(e,t,s){const o=Object.keys(t.required||{}),a=Object.keys(t.optional||{}),r=Object.keys(t.methods||{}),l=Object.keys(t.events||{}),i=j.createContext({});function c(f,p){f.propsReady&&X(f.propsReady,!1);for(const v of o){const S=f[t.required[v]];X(S,p[v])}for(const v of a)if(v in p){const S=f[t.optional[v]];X(S,p[v])}f.propsReady&&X(f.propsReady,!0)}function m(f){return r.reduce((p,v)=>(p[v]=S=>{const C=f[t.methods[v]];X(C,S)},p),{})}function h(f){return l.reduce((p,v)=>(p[v]=Yd(f[t.events[v]]),p),{})}const u=j.forwardRef((f,p)=>{const{children:v,...S}=f,[C]=j.useState(()=>Un(Xd(e),_=>{c(_,S)})),[y]=j.useState(Zs(h,C));On(()=>{for(const _ of l)_ in S&&ce(y[_],S[_]);return()=>{Object.values(y).map(Rs)}},[S,y,C]),On(()=>{c(C,S)}),j.useImperativeHandle(p,Js(m(C)));const b=s;return n.jsx(i.Provider,{value:C,children:s?n.jsx(b,{...Au([...o,...a,...l],S),children:v}):v})}),d=f=>{const p=j.useContext(i);return j.useCallback(v=>{X(p[f],v)},[p,f])},x=f=>{const p=j.useContext(i)[f],v=j.useCallback(S=>ce(p,S),[p]);return j.useSyncExternalStore(v,()=>Ce(p),()=>Ce(p))},w=f=>{const p=j.useContext(i)[f],[v,S]=j.useState(Zs(Ce,p));return On(()=>ce(p,C=>{C!==v&&S(Js(C))}),[p,v]),v},g=j.version.startsWith("18")?x:w;return{Component:u,useEmitter:(f,p)=>{const v=j.useContext(i)[f];On(()=>ce(v,p),[p,v])},useEmitterValue:g,usePublisher:d}}const ha=j.createContext(void 0),fa=j.createContext(void 0),pa=typeof document<"u"?j.useLayoutEffect:j.useEffect;function Zn(e){return"self"in e}function Ou(e){return"body"in e}function ga(e,t,s,o=Zt,a,r){const l=j.useRef(null),i=j.useRef(null),c=j.useRef(null),m=j.useCallback(d=>{let x,w,g;const f=d.target;if(Ou(f)||Zn(f)){const v=Zn(f)?f:f.defaultView;g=r?v.scrollX:v.scrollY,x=r?v.document.documentElement.scrollWidth:v.document.documentElement.scrollHeight,w=r?v.innerWidth:v.innerHeight}else g=r?f.scrollLeft:f.scrollTop,x=r?f.scrollWidth:f.scrollHeight,w=r?f.offsetWidth:f.offsetHeight;const p=()=>{e({scrollHeight:x,scrollTop:Math.max(g,0),viewportHeight:w})};d.suppressFlushSync?p():nr.flushSync(p),i.current!==null&&(g===i.current||g<=0||g===x-w)&&(i.current=null,t(!0),c.current&&(clearTimeout(c.current),c.current=null))},[e,t,r]);j.useEffect(()=>{const d=a||l.current;return o(a||l.current),m({suppressFlushSync:!0,target:d}),d.addEventListener("scroll",m,{passive:!0}),()=>{o(null),d.removeEventListener("scroll",m)}},[l,m,s,o,a]);function h(d){const x=l.current;if(!x||(r?"offsetWidth"in x&&x.offsetWidth===0:"offsetHeight"in x&&x.offsetHeight===0))return;const w=d.behavior==="smooth";let g,f,p;Zn(x)?(f=Math.max(kt(x.document.documentElement,r?"width":"height"),r?x.document.documentElement.scrollWidth:x.document.documentElement.scrollHeight),g=r?x.innerWidth:x.innerHeight,p=r?window.scrollX:window.scrollY):(f=x[r?"scrollWidth":"scrollHeight"],g=kt(x,r?"width":"height"),p=x[r?"scrollLeft":"scrollTop"]);const v=f-g;if(d.top=Math.ceil(Math.max(Math.min(v,d.top),0)),oa(g,f)||d.top===p){e({scrollHeight:f,scrollTop:p,viewportHeight:g}),w&&t(!0);return}w?(i.current=d.top,c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{c.current=null,i.current=null,t(!0)},1e3)):i.current=null,r&&(d={behavior:d.behavior,left:d.top}),x.scrollTo(d)}function u(d){r&&(d={behavior:d.behavior,left:d.top}),l.current.scrollBy(d)}return{scrollByCallback:u,scrollerRef:l,scrollToCallback:h}}const es="-webkit-sticky",co="sticky",Ds=da(()=>{if(typeof document>"u")return co;const e=document.createElement("div");return e.style.position=es,e.style.position===es?es:co});function zs(e){return e}const Hu=re(()=>{const e=O(i=>`Item ${i}`),t=O(i=>`Group ${i}`),s=O({}),o=O(zs),a=O("div"),r=O(Zt),l=(i,c=null)=>ze(E(s,D(m=>m[i]),ve()),c);return{components:s,computeItemKey:o,EmptyPlaceholder:l("EmptyPlaceholder"),FooterComponent:l("Footer"),GroupComponent:l("Group","div"),groupContent:t,HeaderComponent:l("Header"),HeaderFooterTag:a,ItemComponent:l("Item","div"),itemContent:e,ListComponent:l("List","div"),ScrollerComponent:l("Scroller","div"),scrollerRef:r,ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),TopItemListComponent:l("TopItemList")}}),Bu=re(([e,t])=>({...e,...t}),xe(ua,Hu)),Lu=({height:e})=>n.jsx("div",{style:{height:e}}),Mu={overflowAnchor:"none",position:Ds(),zIndex:1},va={overflowAnchor:"none"},Du={...va,display:"inline-block",height:"100%"},uo=j.memo(function({showTopList:e=!1}){const t=Y("listState"),s=st("sizeRanges"),o=Y("useWindowScroll"),a=Y("customScrollParent"),r=st("windowScrollContainerState"),l=st("scrollContainerState"),i=a||o?r:l,c=Y("itemContent"),m=Y("context"),h=Y("groupContent"),u=Y("trackItemSizes"),d=Y("itemSize"),x=Y("log"),w=st("gap"),g=Y("horizontalDirection"),{callbackRef:f}=Zd(s,d,u,e?Zt:i,x,w,a,g,Y("skipAnimationFrameInResizeObserver")),[p,v]=j.useState(0);Ps("deviation",L=>{p!==L&&v(L)});const S=Y("EmptyPlaceholder"),C=Y("ScrollSeekPlaceholder")||Lu,y=Y("ListComponent"),b=Y("ItemComponent"),_=Y("GroupComponent"),k=Y("computeItemKey"),N=Y("isSeeking"),H=Y("groupIndices").length>0,A=Y("alignToBottom"),P=Y("initialItemFinalLocationReached"),B=e?{}:{boxSizing:"border-box",...g?{display:"inline-block",height:"100%",marginLeft:p!==0?p:A?"auto":0,paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,whiteSpace:"nowrap"}:{marginTop:p!==0?p:A?"auto":0,paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},...P?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&S?n.jsx(S,{...De(S,m)}):n.jsx(y,{...De(y,m),"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",ref:f,style:B,children:(e?t.topItems:t.items).map(L=>{const $=L.originalIndex,W=k($+t.firstItemIndex,L.data,m);return N?T.createElement(C,{...De(C,m),height:L.size,index:L.index,key:W,type:L.type||"item",...L.type==="group"?{}:{groupIndex:L.groupIndex}}):L.type==="group"?T.createElement(_,{...De(_,m),"data-index":$,"data-item-index":L.index,"data-known-size":L.size,key:W,style:Mu},h(L.index,m)):T.createElement(b,{...De(b,m),...Fu(b,L.data),"data-index":$,"data-item-group-index":L.groupIndex,"data-item-index":L.index,"data-known-size":L.size,key:W,style:g?Du:va},H?c(L.index,L.groupIndex,L.data,m):c(L.index,L.data,m))})})}),zu={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Pu={outline:"none",overflowX:"auto",position:"relative"},Kn=e=>({height:"100%",position:"absolute",top:0,width:"100%",...e?{display:"flex",flexDirection:"column"}:{}}),$u={position:Ds(),top:0,width:"100%",zIndex:1};function De(e,t){if(typeof e!="string")return{context:t}}function Fu(e,t){return{item:typeof e=="string"?void 0:t}}const Wu=j.memo(function(){const e=Y("HeaderComponent"),t=st("headerHeight"),s=Y("HeaderFooterTag"),o=Gt(j.useMemo(()=>r=>{t(kt(r,"height"))},[t]),!0,Y("skipAnimationFrameInResizeObserver")),a=Y("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...De(e,a)})}):null}),Vu=j.memo(function(){const e=Y("FooterComponent"),t=st("footerHeight"),s=Y("HeaderFooterTag"),o=Gt(j.useMemo(()=>r=>{t(kt(r,"height"))},[t]),!0,Y("skipAnimationFrameInResizeObserver")),a=Y("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...De(e,a)})}):null});function xa({useEmitter:e,useEmitterValue:t,usePublisher:s}){return j.memo(function({children:o,style:a,context:r,...l}){const i=s("scrollContainerState"),c=t("ScrollerComponent"),m=s("smoothScrollTargetReached"),h=t("scrollerRef"),u=t("horizontalDirection")||!1,{scrollByCallback:d,scrollerRef:x,scrollToCallback:w}=ga(i,m,c,h,void 0,u);return e("scrollTo",w),e("scrollBy",d),n.jsx(c,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:x,style:{...u?Pu:zu,...a},tabIndex:0,...l,...De(c,r),children:o})})}function ba({useEmitter:e,useEmitterValue:t,usePublisher:s}){return j.memo(function({children:o,style:a,context:r,...l}){const i=s("windowScrollContainerState"),c=t("ScrollerComponent"),m=s("smoothScrollTargetReached"),h=t("totalListHeight"),u=t("deviation"),d=t("customScrollParent"),x=j.useRef(null),w=t("scrollerRef"),{scrollByCallback:g,scrollerRef:f,scrollToCallback:p}=ga(i,m,c,w,d);return pa(()=>{var v;return f.current=d||((v=x.current)==null?void 0:v.ownerDocument.defaultView),()=>{f.current=null}},[f,d]),e("windowScrollTo",p),e("scrollBy",g),n.jsx(c,{ref:x,"data-virtuoso-scroller":!0,style:{position:"relative",...a,...h!==0?{height:h+u}:{}},...l,...De(c,r),children:o})})}const Gu=({children:e})=>{const t=j.useContext(ha),s=st("viewportHeight"),o=st("fixedItemHeight"),a=Y("alignToBottom"),r=Y("horizontalDirection"),l=j.useMemo(()=>Vo(s,c=>kt(c,r?"width":"height")),[s,r]),i=Gt(l,!0,Y("skipAnimationFrameInResizeObserver"));return j.useEffect(()=>{t&&(s(t.viewportHeight),o(t.itemHeight))},[t,s,o]),n.jsx("div",{"data-viewport-type":"element",ref:i,style:Kn(a),children:e})},Uu=({children:e})=>{const t=j.useContext(ha),s=st("windowViewportRect"),o=st("fixedItemHeight"),a=Y("customScrollParent"),r=Uo(s,a,Y("skipAnimationFrameInResizeObserver")),l=Y("alignToBottom");return j.useEffect(()=>{t&&(o(t.itemHeight),s({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))},[t,s,o]),n.jsx("div",{"data-viewport-type":"window",ref:r,style:Kn(l),children:e})},qu=({children:e})=>{const t=Y("TopItemListComponent")||"div",s=Y("headerHeight"),o={...$u,marginTop:`${s}px`},a=Y("context");return n.jsx(t,{style:o,...De(t,a),children:e})},Yu=j.memo(function(e){const t=Y("useWindowScroll"),s=Y("topItemsIndexes").length>0,o=Y("customScrollParent"),a=Y("context");return n.jsxs(o||t?Qu:Xu,{...e,context:a,children:[s&&n.jsx(qu,{children:n.jsx(uo,{showTopList:!0})}),n.jsxs(o||t?Uu:Gu,{children:[n.jsx(Wu,{}),n.jsx(uo,{}),n.jsx(Vu,{})]})]})}),{Component:Ku,useEmitter:Ps,useEmitterValue:Y,usePublisher:st}=ma(Bu,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",scrollIntoViewOnChange:"scrollIntoViewOnChange",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Yu),Xu=xa({useEmitter:Ps,useEmitterValue:Y,usePublisher:st}),Qu=ba({useEmitter:Ps,useEmitterValue:Y,usePublisher:st}),Ju=Ku,Zu=re(()=>{const e=O(m=>n.jsxs("td",{children:["Item $",m]})),t=O(null),s=O(m=>n.jsxs("td",{colSpan:1e3,children:["Group ",m]})),o=O(null),a=O(null),r=O({}),l=O(zs),i=O(Zt),c=(m,h=null)=>ze(E(r,D(u=>u[m]),ve()),h);return{components:r,computeItemKey:l,context:t,EmptyPlaceholder:c("EmptyPlaceholder"),FillerRow:c("FillerRow"),fixedFooterContent:a,fixedHeaderContent:o,itemContent:e,groupContent:s,ScrollerComponent:c("Scroller","div"),scrollerRef:i,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder"),TableBodyComponent:c("TableBody","tbody"),TableComponent:c("Table","table"),TableFooterComponent:c("TableFoot","tfoot"),TableHeadComponent:c("TableHead","thead"),TableRowComponent:c("TableRow","tr"),GroupComponent:c("Group","tr")}});xe(ua,Zu);Ds();const mo={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},em={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:ho,floor:Wn,max:cn,min:ts,round:fo}=Math;function po(e,t,s){return Array.from({length:t-e+1}).map((o,a)=>({data:s===null?null:s[a+e],index:a+e}))}function tm(e){return{...em,items:e}}function Hn(e,t){return e&&e.width===t.width&&e.height===t.height}function nm(e,t){return e&&e.column===t.column&&e.row===t.row}const sm=re(([{increaseViewportBy:e,listBoundary:t,overscan:s,visibleRange:o},{footerHeight:a,headerHeight:r,scrollBy:l,scrollContainerState:i,scrollTo:c,scrollTop:m,smoothScrollTargetReached:h,viewportHeight:u},d,x,{didMount:w,propsReady:g},{customScrollParent:f,useWindowScroll:p,windowScrollContainerState:v,windowScrollTo:S,windowViewportRect:C},y])=>{const b=O(0),_=O(0),k=O(mo),N=O({height:0,width:0}),H=O({height:0,width:0}),A=se(),P=se(),B=O(0),L=O(null),$=O({column:0,row:0}),W=se(),K=se(),ne=O(!1),ie=O(0),le=O(!0),Ne=O(!1),Ze=O(!1);ce(E(w,Z(ie),q(([I,M])=>!!M)),()=>{X(le,!1)}),ce(E(Ie(w,le,H,N,ie,Ne),q(([I,M,J,he,,ue])=>I&&!M&&J.height!==0&&he.height!==0&&!ue)),([,,,,I])=>{X(Ne,!0),Hs(1,()=>{X(A,I)}),ct(E(m),()=>{X(t,[0,0]),X(le,!0)})}),z(E(K,q(I=>I!=null&&I.scrollTop>0),gt(0)),_),ce(E(w,Z(K),q(([,I])=>I!=null)),([,I])=>{I&&(X(N,I.viewport),X(H,I.item),X($,I.gap),I.scrollTop>0&&(X(ne,!0),ct(E(m,Wt(1)),M=>{X(ne,!1)}),X(c,{top:I.scrollTop})))}),z(E(N,D(({height:I})=>I)),u),z(E(Ie(G(N,Hn),G(H,Hn),G($,(I,M)=>I&&I.column===M.column&&I.row===M.row),G(m)),D(([I,M,J,he])=>({gap:J,item:M,scrollTop:he,viewport:I}))),W),z(E(Ie(G(b),o,G($,nm),G(H,Hn),G(N,Hn),G(L),G(_),G(ne),G(le),G(ie)),q(([,,,,,,,I])=>!I),D(([I,[M,J],he,ue,Ke,V,at,,Et,tt])=>{const{column:ut,row:At}=he,{height:rt,width:qt}=ue,{width:_n}=Ke;if(at===0&&(I===0||_n===0))return mo;if(qt===0){const kn=Bs(tt,I),Ht=kn+Math.max(at-1,0);return tm(po(kn,Ht,V))}const mt=ya(_n,qt,ut);let Ct,ht;Et?M===0&&J===0&&at>0?(Ct=0,ht=at-1):(Ct=mt*Wn((M+At)/(rt+At)),ht=mt*ho((J+At)/(rt+At))-1,ht=ts(I-1,cn(ht,mt-1)),Ct=ts(ht,cn(0,Ct))):(Ct=0,ht=-1);const Cn=po(Ct,ht,V),{bottom:Sn,top:Ot}=go(Ke,he,ue,Cn),jn=ho(I/mt),Tn=jn*rt+(jn-1)*At-Sn;return{bottom:Sn,itemHeight:rt,items:Cn,itemWidth:qt,offsetBottom:Tn,offsetTop:Ot,top:Ot}})),k),z(E(L,q(I=>I!==null),D(I=>I.length)),b),z(E(Ie(N,H,k,$),q(([I,M,{items:J}])=>J.length>0&&M.height!==0&&I.height!==0),D(([I,M,{items:J},he])=>{const{bottom:ue,top:Ke}=go(I,he,M,J);return[Ke,ue]}),ve(mn)),t);const Se=O(!1);z(E(m,Z(Se),D(([I,M])=>M||I!==0)),Se);const et=Qe(E(Ie(k,b),q(([{items:I}])=>I.length>0),Z(Se),q(([[I,M],J])=>{const he=I.items[I.items.length-1].index===M-1;return(J||I.bottom>0&&I.itemHeight>0&&I.offsetBottom===0&&I.items.length===M)&&he}),D(([[,I]])=>I-1),ve())),Ye=Qe(E(G(k),q(({items:I})=>I.length>0&&I[0].index===0),gt(0),ve())),Le=Qe(E(G(k),Z(ne),q(([{items:I},M])=>I.length>0&&!M),D(([{items:I}])=>({endIndex:I[I.length-1].index,startIndex:I[0].index})),ve(Jo),_t(0)));z(Le,x.scrollSeekRangeChanged),z(E(A,Z(N,H,b,$),D(([I,M,J,he,ue])=>{const Ke=sa(I),{align:V,behavior:at,offset:Et}=Ke;let tt=Ke.index;tt==="LAST"&&(tt=he-1),tt=cn(0,tt,ts(he-1,tt));let ut=ps(M,ue,J,tt);return V==="end"?ut=fo(ut-M.height+J.height):V==="center"&&(ut=fo(ut-M.height/2+J.height/2)),Et&&(ut+=Et),{behavior:at,top:ut}})),c);const Me=ze(E(k,D(I=>I.offsetBottom+I.bottom)),0);return z(E(C,D(I=>({height:I.visibleHeight,width:I.visibleWidth}))),N),{customScrollParent:f,data:L,deviation:B,footerHeight:a,gap:$,headerHeight:r,increaseViewportBy:e,initialItemCount:_,itemDimensions:H,overscan:s,restoreStateFrom:K,scrollBy:l,scrollContainerState:i,scrollHeight:P,scrollTo:c,scrollToIndex:A,scrollTop:m,smoothScrollTargetReached:h,totalCount:b,useWindowScroll:p,viewportDimensions:N,windowScrollContainerState:v,windowScrollTo:S,windowViewportRect:C,...x,gridState:k,horizontalDirection:Ze,initialTopMostItemIndex:ie,totalListHeight:Me,...d,endReached:et,propsReady:g,rangeChanged:Le,startReached:Ye,stateChanged:W,stateRestoreInProgress:ne,...y}},xe(Ls,We,yn,ca,Rt,Ms,Nt));function ya(e,t,s){return cn(1,Wn((e+s)/(Wn(t)+s)))}function go(e,t,s,o){const{height:a}=s;if(a===void 0||o.length===0)return{bottom:0,top:0};const r=ps(e,t,s,o[0].index);return{bottom:ps(e,t,s,o[o.length-1].index)+a,top:r}}function ps(e,t,s,o){const a=ya(e.width,s.width,t.column),r=Wn(o/a),l=r*s.height+cn(0,r-1)*t.row;return l>0?l+t.row:l}const om=re(()=>{const e=O(u=>`Item ${u}`),t=O({}),s=O(null),o=O("virtuoso-grid-item"),a=O("virtuoso-grid-list"),r=O(zs),l=O("div"),i=O(Zt),c=(u,d=null)=>ze(E(t,D(x=>x[u]),ve()),d),m=O(!1),h=O(!1);return z(G(h),m),{components:t,computeItemKey:r,context:s,FooterComponent:c("Footer"),HeaderComponent:c("Header"),headerFooterTag:l,itemClassName:o,ItemComponent:c("Item","div"),itemContent:e,listClassName:a,ListComponent:c("List","div"),readyStateChanged:m,reportReadyState:h,ScrollerComponent:c("Scroller","div"),scrollerRef:i,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder","div")}}),am=re(([e,t])=>({...e,...t}),xe(sm,om)),rm=j.memo(function(){const e=be("gridState"),t=be("listClassName"),s=be("itemClassName"),o=be("itemContent"),a=be("computeItemKey"),r=be("isSeeking"),l=ot("scrollHeight"),i=be("ItemComponent"),c=be("ListComponent"),m=be("ScrollSeekPlaceholder"),h=be("context"),u=ot("itemDimensions"),d=ot("gap"),x=be("log"),w=be("stateRestoreInProgress"),g=ot("reportReadyState"),f=Gt(j.useMemo(()=>p=>{const v=p.parentElement.parentElement.scrollHeight;l(v);const S=p.firstChild;if(S){const{height:C,width:y}=S.getBoundingClientRect();u({height:C,width:y})}d({column:vo("column-gap",getComputedStyle(p).columnGap,x),row:vo("row-gap",getComputedStyle(p).rowGap,x)})},[l,u,d,x]),!0,!1);return pa(()=>{e.itemHeight>0&&e.itemWidth>0&&g(!0)},[e]),w?null:n.jsx(c,{className:t,ref:f,...De(c,h),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(p=>{const v=a(p.index,p.data,h);return r?n.jsx(m,{...De(m,h),height:e.itemHeight,index:p.index,width:e.itemWidth},v):T.createElement(i,{...De(i,h),className:s,"data-index":p.index,key:v},o(p.index,p.data,h))})})}),im=j.memo(function(){const e=be("HeaderComponent"),t=ot("headerHeight"),s=be("headerFooterTag"),o=Gt(j.useMemo(()=>r=>{t(kt(r,"height"))},[t]),!0,!1),a=be("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...De(e,a)})}):null}),lm=j.memo(function(){const e=be("FooterComponent"),t=ot("footerHeight"),s=be("headerFooterTag"),o=Gt(j.useMemo(()=>r=>{t(kt(r,"height"))},[t]),!0,!1),a=be("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...De(e,a)})}):null}),cm=({children:e})=>{const t=j.useContext(fa),s=ot("itemDimensions"),o=ot("viewportDimensions"),a=Gt(j.useMemo(()=>r=>{o(r.getBoundingClientRect())},[o]),!0,!1);return j.useEffect(()=>{t&&(o({height:t.viewportHeight,width:t.viewportWidth}),s({height:t.itemHeight,width:t.itemWidth}))},[t,o,s]),n.jsx("div",{ref:a,style:Kn(!1),children:e})},dm=({children:e})=>{const t=j.useContext(fa),s=ot("windowViewportRect"),o=ot("itemDimensions"),a=be("customScrollParent"),r=Uo(s,a,!1);return j.useEffect(()=>{t&&(o({height:t.itemHeight,width:t.itemWidth}),s({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,s,o]),n.jsx("div",{ref:r,style:Kn(!1),children:e})},um=j.memo(function({...e}){const t=be("useWindowScroll"),s=be("customScrollParent"),o=s||t?hm:mm,a=s||t?dm:cm,r=be("context");return n.jsx(o,{...e,...De(o,r),children:n.jsxs(a,{children:[n.jsx(im,{}),n.jsx(rm,{}),n.jsx(lm,{})]})})}),{useEmitter:wa,useEmitterValue:be,usePublisher:ot}=ma(am,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},um),mm=xa({useEmitter:wa,useEmitterValue:be,usePublisher:ot}),hm=ba({useEmitter:wa,useEmitterValue:be,usePublisher:ot});function vo(e,t,s){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&s(`${e} was not resolved to pixel value correctly`,t,qe.WARN),t==="normal"?0:parseInt(t??"0",10)}const _a=Qt({status:"idle"}),fm=Qt("random"),Ca=Qt(new Set),Sa=Qt(""),pm=Qt(()=>[...new Set(Bo.map(t=>t.location))].map(t=>({id:t,name:t})).sort((t,s)=>t.name.localeCompare(s.name))),gm=(e,t)=>{if(!t)return e;const s=t.toLowerCase();return e.filter(o=>o.name.toLowerCase().includes(s))},vm=Qt(e=>{const t=e(Sa),s=e(pm),o=e(Lo),a=e(Mo);if(!o||!a)return[];const r=s.filter(l=>{const i=Sr(l.name);return i?.groupId===a&&i?.unitId===o});return gm(r,t)}),xm="_wrapper_1hwna_5",bm="_focused_1hwna_61",ym="_searchIcon_1hwna_103",wm="_clearButton_1hwna_149",_m="_visuallyHidden_1hwna_159",nn={wrapper:xm,focused:bm,searchIcon:ym,clearButton:wm,visuallyHidden:_m},ja=({value:e,onChange:t,placeholder:s,variant:o,autoFocus:a=!1})=>{const[r,l]=T.useState(!1),i=T.useRef(null),c=j.useId();T.useEffect(()=>{a&&i.current&&i.current.focus()},[a]);const m=`${nn.wrapper} ${r?nn.focused:""}`;return n.jsxs("div",{className:m,"data-variant":o,children:[n.jsx("label",{htmlFor:c,className:nn.visuallyHidden,children:s}),n.jsx("input",{ref:i,id:c,type:"text",placeholder:s,value:e,onChange:h=>t(h.target.value),onFocus:()=>l(!0),onBlur:()=>l(!1)}),o==="standalone"&&e&&n.jsx(ae,{variant:"quaternary",size:"xs",iconOnly:!0,onClick:()=>t(""),"aria-label":"Clear search",className:nn.clearButton,children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})}),n.jsx("span",{className:`material-symbols-rounded ${nn.searchIcon}`,children:"search"})]})};function Cm(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}const Ta=j.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),wn=()=>{const e=j.useContext(Ta);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};Cm(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Sm(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function jm(){return $s(/^Mac/)}function Tm(){return $s(/^iPhone/)}function xo(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function km(){return $s(/^iPad/)||jm()&&navigator.maxTouchPoints>1}function ka(){return Tm()||km()}function $s(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const Im=24,Nm=typeof window<"u"?T.useLayoutEffect:T.useEffect;function bo(...e){return(...t)=>{for(let s of e)typeof s=="function"&&s(...t)}}const ns=typeof document<"u"&&window.visualViewport;function yo(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function Ia(e){for(yo(e)&&(e=e.parentElement);e&&!yo(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const Rm=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Bn=0,ss;function Em(e={}){let{isDisabled:t}=e;Nm(()=>{if(!t)return Bn++,Bn===1&&ka()&&(ss=Am()),()=>{Bn--,Bn===0&&ss?.()}},[t])}function Am(){let e,t=0,s=u=>{e=Ia(u.target),!(e===document.documentElement&&e===document.body)&&(t=u.changedTouches[0].pageY)},o=u=>{if(!e||e===document.documentElement||e===document.body){u.preventDefault();return}let d=u.changedTouches[0].pageY,x=e.scrollTop,w=e.scrollHeight-e.clientHeight;w!==0&&((x<=0&&d>t||x>=w&&d<t)&&u.preventDefault(),t=d)},a=u=>{let d=u.target;gs(d)&&d!==document.activeElement&&(u.preventDefault(),d.style.transform="translateY(-2000px)",d.focus(),requestAnimationFrame(()=>{d.style.transform=""}))},r=u=>{let d=u.target;gs(d)&&(d.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{d.style.transform="",ns&&(ns.height<window.innerHeight?requestAnimationFrame(()=>{wo(d)}):ns.addEventListener("resize",()=>wo(d),{once:!0}))}))},l=()=>{window.scrollTo(0,0)},i=window.pageXOffset,c=window.pageYOffset,m=bo(Om(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let h=bo(sn(document,"touchstart",s,{passive:!1,capture:!0}),sn(document,"touchmove",o,{passive:!1,capture:!0}),sn(document,"touchend",a,{passive:!1,capture:!0}),sn(document,"focus",r,!0),sn(window,"scroll",l));return()=>{m(),h(),window.scrollTo(i,c)}}function Om(e,t,s){let o=e.style[t];return e.style[t]=s,()=>{e.style[t]=o}}function sn(e,t,s,o){return e.addEventListener(t,s,o),()=>{e.removeEventListener(t,s,o)}}function wo(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let s=Ia(e);if(s!==document.documentElement&&s!==document.body&&s!==e){let o=s.getBoundingClientRect().top,a=e.getBoundingClientRect().top,r=e.getBoundingClientRect().bottom;const l=s.getBoundingClientRect().bottom+Im;r>l&&(s.scrollTop+=a-o)}e=s.parentElement}}function gs(e){return e instanceof HTMLInputElement&&!Rm.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function Hm(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Bm(...e){return t=>e.forEach(s=>Hm(s,t))}function Na(...e){return T.useCallback(Bm(...e),e)}const Ra=new WeakMap;function Ee(e,t,s=!1){if(!e||!(e instanceof HTMLElement))return;let o={};Object.entries(t).forEach(([a,r])=>{if(a.startsWith("--")){e.style.setProperty(a,r);return}o[a]=e.style[a],e.style[a]=r}),!s&&Ra.set(e,o)}function Lm(e,t){if(!e||!(e instanceof HTMLElement))return;let s=Ra.get(e);s&&(e.style[t]=s[t])}const ke=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Ln(e,t){if(!e)return null;const s=window.getComputedStyle(e),o=s.transform||s.webkitTransform||s.mozTransform;let a=o.match(/^matrix3d\((.+)\)$/);return a?parseFloat(a[1].split(", ")[ke(t)?13:12]):(a=o.match(/^matrix\((.+)\)$/),a?parseFloat(a[1].split(", ")[ke(t)?5:4]):null)}function Mm(e){return 8*(Math.log(e+1)-2)}function os(e,t){if(!e)return()=>{};const s=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=s}}function Dm(...e){return(...t)=>{for(const s of e)typeof s=="function"&&s(...t)}}const ye={DURATION:.5,EASE:[.32,.72,0,1]},Ea=.4,zm=.25,Pm=100,Aa=8,Dt=16,vs=26,as="vaul-dragging";function Oa(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),j.useMemo(()=>(...s)=>t.current==null?void 0:t.current.call(t,...s),[])}function $m({defaultProp:e,onChange:t}){const s=j.useState(e),[o]=s,a=j.useRef(o),r=Oa(t);return j.useEffect(()=>{a.current!==o&&(r(o),a.current=o)},[o,a,r]),s}function Ha({prop:e,defaultProp:t,onChange:s=()=>{}}){const[o,a]=$m({defaultProp:t,onChange:s}),r=e!==void 0,l=r?e:o,i=Oa(s),c=j.useCallback(m=>{if(r){const u=typeof m=="function"?m(e):m;u!==e&&i(u)}else a(m)},[r,e,a,i]);return[l,c]}function Fm({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:s,drawerRef:o,overlayRef:a,fadeFromIndex:r,onSnapPointChange:l,direction:i="bottom",container:c,snapToSequentialPoint:m}){const[h,u]=Ha({prop:e,defaultProp:s?.[0],onChange:t}),[d,x]=j.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);j.useEffect(()=>{function _(){x({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",_),()=>window.removeEventListener("resize",_)},[]);const w=j.useMemo(()=>h===s?.[s.length-1]||null,[s,h]),g=j.useMemo(()=>{var _;return(_=s?.findIndex(k=>k===h))!=null?_:null},[s,h]),f=s&&s.length>0&&(r||r===0)&&!Number.isNaN(r)&&s[r]===h||!s,p=j.useMemo(()=>{const _=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var k;return(k=s?.map(N=>{const H=typeof N=="string";let A=0;if(H&&(A=parseInt(N,10)),ke(i)){const B=H?A:d?N*_.height:0;return d?i==="bottom"?_.height-B:-_.height+B:B}const P=H?A:d?N*_.width:0;return d?i==="right"?_.width-P:-_.width+P:P}))!=null?k:[]},[s,d,c]),v=j.useMemo(()=>g!==null?p?.[g]:null,[p,g]),S=j.useCallback(_=>{var k;const N=(k=p?.findIndex(H=>H===_))!=null?k:null;l(N),Ee(o.current,{transition:`transform ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,transform:ke(i)?`translate3d(0, ${_}px, 0)`:`translate3d(${_}px, 0, 0)`}),p&&N!==p.length-1&&r!==void 0&&N!==r&&N<r?Ee(a.current,{transition:`opacity ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,opacity:"0"}):Ee(a.current,{transition:`opacity ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,opacity:"1"}),u(s?.[Math.max(N,0)])},[o.current,s,p,r,a,u]);j.useEffect(()=>{if(h||e){var _;const k=(_=s?.findIndex(N=>N===e||N===h))!=null?_:-1;p&&k!==-1&&typeof p[k]=="number"&&S(p[k])}},[h,e,s,p,S]);function C({draggedDistance:_,closeDrawer:k,velocity:N,dismissible:H}){if(r===void 0)return;const A=i==="bottom"||i==="right"?(v??0)-_:(v??0)+_,P=g===r-1,B=g===0,L=_>0;if(P&&Ee(a.current,{transition:`opacity ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`}),!m&&N>2&&!L){H?k():S(p[0]);return}if(!m&&N>2&&L&&p&&s){S(p[s.length-1]);return}const $=p?.reduce((K,ne)=>typeof K!="number"||typeof ne!="number"?K:Math.abs(ne-A)<Math.abs(K-A)?ne:K),W=ke(i)?window.innerHeight:window.innerWidth;if(N>Ea&&Math.abs(_)<W*.4){const K=L?1:-1;if(K>0&&w&&s){S(p[s.length-1]);return}if(B&&K<0&&H&&k(),g===null)return;S(p[g+K]);return}S($)}function y({draggedDistance:_}){if(v===null)return;const k=i==="bottom"||i==="right"?v-_:v+_;(i==="bottom"||i==="right")&&k<p[p.length-1]||(i==="top"||i==="left")&&k>p[p.length-1]||Ee(o.current,{transform:ke(i)?`translate3d(0, ${k}px, 0)`:`translate3d(${k}px, 0, 0)`})}function b(_,k){if(!s||typeof g!="number"||!p||r===void 0)return null;const N=g===r-1;if(g>=r&&k)return 0;if(N&&!k)return 1;if(!f&&!N)return null;const A=N?g+1:g-1,P=N?p[A]-p[A-1]:p[A+1]-p[A],B=_/Math.abs(P);return N?1-B:B}return{isLastSnapPoint:w,activeSnapPoint:h,shouldFade:f,getPercentageDragged:b,setActiveSnapPoint:u,activeSnapPointIndex:g,onRelease:C,onDrag:y,snapPointsOffset:p}}const Wm=()=>()=>{};function Vm(){const{direction:e,isOpen:t,shouldScaleBackground:s,setBackgroundColorOnScale:o,noBodyStyles:a}=wn(),r=j.useRef(null),l=T.useMemo(()=>document.body.style.backgroundColor,[]);function i(){return(window.innerWidth-vs)/window.innerWidth}j.useEffect(()=>{if(t&&s){r.current&&clearTimeout(r.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;Dm(o&&!a?os(document.body,{background:"black"}):Wm,os(c,{transformOrigin:ke(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${ye.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ye.EASE.join(",")})`}));const m=os(c,{borderRadius:`${Aa}px`,overflow:"hidden",...ke(e)?{transform:`scale(${i()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${i()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{m(),r.current=window.setTimeout(()=>{l?document.body.style.background=l:document.body.style.removeProperty("background")},ye.DURATION*1e3)}}},[t,s,l])}let on=null;function Gm({isOpen:e,modal:t,nested:s,hasBeenOpened:o,preventScrollRestoration:a,noBodyStyles:r}){const[l,i]=j.useState(()=>typeof window<"u"?window.location.href:""),c=j.useRef(0),m=j.useCallback(()=>{if(xo()&&on===null&&e&&!r){on={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:u,innerHeight:d}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-u}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const x=d-window.innerHeight;x&&c.current>=d&&(document.body.style.top=`${-(c.current+x)}px`)}),300)}},[e]),h=j.useCallback(()=>{if(xo()&&on!==null&&!r){const u=-parseInt(document.body.style.top,10),d=-parseInt(document.body.style.left,10);Object.assign(document.body.style,on),window.requestAnimationFrame(()=>{if(a&&l!==window.location.href){i(window.location.href);return}window.scrollTo(d,u)}),on=null}},[l]);return j.useEffect(()=>{function u(){c.current=window.scrollY}return u(),window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}},[]),j.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||h()}},[t,h]),j.useEffect(()=>{s||!o||(e?(!window.matchMedia("(display-mode: standalone)").matches&&m(),t||window.setTimeout(()=>{h()},500)):h())},[e,o,l,t,s,m,h]),{restorePositionSetting:h}}function Um({open:e,onOpenChange:t,children:s,onDrag:o,onRelease:a,snapPoints:r,shouldScaleBackground:l=!1,setBackgroundColorOnScale:i=!0,closeThreshold:c=zm,scrollLockTimeout:m=Pm,dismissible:h=!0,handleOnly:u=!1,fadeFromIndex:d=r&&r.length-1,activeSnapPoint:x,setActiveSnapPoint:w,fixed:g,modal:f=!0,onClose:p,nested:v,noBodyStyles:S=!1,direction:C="bottom",defaultOpen:y=!1,disablePreventScroll:b=!0,snapToSequentialPoint:_=!1,preventScrollRestoration:k=!1,repositionInputs:N=!0,onAnimationEnd:H,container:A,autoFocus:P=!1}){var B,L;const[$=!1,W]=Ha({defaultProp:y,prop:e,onChange:U=>{t?.(U),!U&&!v&&Sn(),setTimeout(()=>{H?.(U)},ye.DURATION*1e3),U&&!f&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),U||(document.body.style.pointerEvents="auto")}}),[K,ne]=j.useState(!1),[ie,le]=j.useState(!1),[Ne,Ze]=j.useState(!1),Se=j.useRef(null),et=j.useRef(null),Ye=j.useRef(null),Le=j.useRef(null),Me=j.useRef(null),I=j.useRef(!1),M=j.useRef(null),J=j.useRef(0),he=j.useRef(!1),ue=j.useRef(!y),Ke=j.useRef(0),V=j.useRef(null),at=j.useRef(((B=V.current)==null?void 0:B.getBoundingClientRect().height)||0),Et=j.useRef(((L=V.current)==null?void 0:L.getBoundingClientRect().width)||0),tt=j.useRef(0),ut=j.useCallback(U=>{r&&U===mt.length-1&&(et.current=new Date)},[]),{activeSnapPoint:At,activeSnapPointIndex:rt,setActiveSnapPoint:qt,onRelease:_n,snapPointsOffset:mt,onDrag:Ct,shouldFade:ht,getPercentageDragged:Cn}=Fm({snapPoints:r,activeSnapPointProp:x,setActiveSnapPointProp:w,drawerRef:V,fadeFromIndex:d,overlayRef:Se,onSnapPointChange:ut,direction:C,container:A,snapToSequentialPoint:_});Em({isDisabled:!$||ie||!f||Ne||!K||!N||!b});const{restorePositionSetting:Sn}=Gm({isOpen:$,modal:f,nested:v??!1,hasBeenOpened:K,preventScrollRestoration:k,noBodyStyles:S});function Ot(){return(window.innerWidth-vs)/window.innerWidth}function jn(U){var de,fe;!h&&!r||V.current&&!V.current.contains(U.target)||(at.current=((de=V.current)==null?void 0:de.getBoundingClientRect().height)||0,Et.current=((fe=V.current)==null?void 0:fe.getBoundingClientRect().width)||0,le(!0),Ye.current=new Date,ka()&&window.addEventListener("touchend",()=>I.current=!1,{once:!0}),U.target.setPointerCapture(U.pointerId),J.current=ke(C)?U.pageY:U.pageX)}function Tn(U,de){var fe;let oe=U;const _e=(fe=window.getSelection())==null?void 0:fe.toString(),Ve=V.current?Ln(V.current,C):null,Pe=new Date;if(oe.tagName==="SELECT"||oe.hasAttribute("data-vaul-no-drag")||oe.closest("[data-vaul-no-drag]"))return!1;if(C==="right"||C==="left")return!0;if(et.current&&Pe.getTime()-et.current.getTime()<500)return!1;if(Ve!==null&&(C==="bottom"?Ve>0:Ve<0))return!0;if(_e&&_e.length>0)return!1;if(Me.current&&Pe.getTime()-Me.current.getTime()<m&&Ve===0||de)return Me.current=Pe,!1;for(;oe;){if(oe.scrollHeight>oe.clientHeight){if(oe.scrollTop!==0)return Me.current=new Date,!1;if(oe.getAttribute("role")==="dialog")return!0}oe=oe.parentNode}return!0}function kn(U){if(V.current&&ie){const de=C==="bottom"||C==="right"?1:-1,fe=(J.current-(ke(C)?U.pageY:U.pageX))*de,oe=fe>0,_e=r&&!h&&!oe;if(_e&&rt===0)return;const Ve=Math.abs(fe),Pe=document.querySelector("[data-vaul-drawer-wrapper]"),St=C==="bottom"||C==="top"?at.current:Et.current;let it=Ve/St;const Bt=Cn(Ve,oe);if(Bt!==null&&(it=Bt),_e&&it>=1||!I.current&&!Tn(U.target,oe))return;if(V.current.classList.add(as),I.current=!0,Ee(V.current,{transition:"none"}),Ee(Se.current,{transition:"none"}),r&&Ct({draggedDistance:fe}),oe&&!r){const ft=Mm(fe),In=Math.min(ft*-1,0)*de;Ee(V.current,{transform:ke(C)?`translate3d(0, ${In}px, 0)`:`translate3d(${In}px, 0, 0)`});return}const jt=1-it;if((ht||d&&rt===d-1)&&(o?.(U,it),Ee(Se.current,{opacity:`${jt}`,transition:"none"},!0)),Pe&&Se.current&&l){const ft=Math.min(Ot()+it*(1-Ot()),1),In=8-it*8,Ws=Math.max(0,14-it*14);Ee(Pe,{borderRadius:`${In}px`,transform:ke(C)?`scale(${ft}) translate3d(0, ${Ws}px, 0)`:`scale(${ft}) translate3d(${Ws}px, 0, 0)`,transition:"none"},!0)}if(!r){const ft=Ve*de;Ee(V.current,{transform:ke(C)?`translate3d(0, ${ft}px, 0)`:`translate3d(${ft}px, 0, 0)`})}}}j.useEffect(()=>{window.requestAnimationFrame(()=>{ue.current=!0})},[]),j.useEffect(()=>{var U;function de(){if(!V.current||!N)return;const fe=document.activeElement;if(gs(fe)||he.current){var oe;const _e=((oe=window.visualViewport)==null?void 0:oe.height)||0,Ve=window.innerHeight;let Pe=Ve-_e;const St=V.current.getBoundingClientRect().height||0,it=St>Ve*.8;tt.current||(tt.current=St);const Bt=V.current.getBoundingClientRect().top;if(Math.abs(Ke.current-Pe)>60&&(he.current=!he.current),r&&r.length>0&&mt&&rt){const jt=mt[rt]||0;Pe+=jt}if(Ke.current=Pe,St>_e||he.current){const jt=V.current.getBoundingClientRect().height;let ft=jt;jt>_e&&(ft=_e-(it?Bt:vs)),g?V.current.style.height=`${jt-Math.max(Pe,0)}px`:V.current.style.height=`${Math.max(ft,_e-Bt)}px`}else Sm()||(V.current.style.height=`${tt.current}px`);r&&r.length>0&&!he.current?V.current.style.bottom="0px":V.current.style.bottom=`${Math.max(Pe,0)}px`}}return(U=window.visualViewport)==null||U.addEventListener("resize",de),()=>{var fe;return(fe=window.visualViewport)==null?void 0:fe.removeEventListener("resize",de)}},[rt,r,mt]);function Ht(U){za(),p?.(),U||W(!1),setTimeout(()=>{r&&qt(r[0])},ye.DURATION*1e3)}function Fs(){if(!V.current)return;const U=document.querySelector("[data-vaul-drawer-wrapper]"),de=Ln(V.current,C);Ee(V.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`}),Ee(Se.current,{transition:`opacity ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,opacity:"1"}),l&&de&&de>0&&$&&Ee(U,{borderRadius:`${Aa}px`,overflow:"hidden",...ke(C)?{transform:`scale(${Ot()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ot()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${ye.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ye.EASE.join(",")})`},!0)}function za(){!ie||!V.current||(V.current.classList.remove(as),I.current=!1,le(!1),Le.current=new Date)}function Pa(U){if(!ie||!V.current)return;V.current.classList.remove(as),I.current=!1,le(!1),Le.current=new Date;const de=Ln(V.current,C);if(!U||!Tn(U.target,!1)||!de||Number.isNaN(de)||Ye.current===null)return;const fe=Le.current.getTime()-Ye.current.getTime(),oe=J.current-(ke(C)?U.pageY:U.pageX),_e=Math.abs(oe)/fe;if(_e>.05&&(Ze(!0),setTimeout(()=>{Ze(!1)},200)),r){_n({draggedDistance:oe*(C==="bottom"||C==="right"?1:-1),closeDrawer:Ht,velocity:_e,dismissible:h}),a?.(U,!0);return}if(C==="bottom"||C==="right"?oe>0:oe<0){Fs(),a?.(U,!0);return}if(_e>Ea){Ht(),a?.(U,!1);return}var Ve;const Pe=Math.min((Ve=V.current.getBoundingClientRect().height)!=null?Ve:0,window.innerHeight);var St;const it=Math.min((St=V.current.getBoundingClientRect().width)!=null?St:0,window.innerWidth),Bt=C==="left"||C==="right";if(Math.abs(de)>=(Bt?it:Pe)*c){Ht(),a?.(U,!1);return}a?.(U,!0),Fs()}j.useEffect(()=>($&&(Ee(document.documentElement,{scrollBehavior:"auto"}),et.current=new Date),()=>{Lm(document.documentElement,"scrollBehavior")}),[$]);function $a(U){const de=U?(window.innerWidth-Dt)/window.innerWidth:1,fe=U?-Dt:0;M.current&&window.clearTimeout(M.current),Ee(V.current,{transition:`transform ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,transform:ke(C)?`scale(${de}) translate3d(0, ${fe}px, 0)`:`scale(${de}) translate3d(${fe}px, 0, 0)`}),!U&&V.current&&(M.current=setTimeout(()=>{const oe=Ln(V.current,C);Ee(V.current,{transition:"none",transform:ke(C)?`translate3d(0, ${oe}px, 0)`:`translate3d(${oe}px, 0, 0)`})},500))}function Fa(U,de){if(de<0)return;const fe=(window.innerWidth-Dt)/window.innerWidth,oe=fe+de*(1-fe),_e=-Dt+de*Dt;Ee(V.current,{transform:ke(C)?`scale(${oe}) translate3d(0, ${_e}px, 0)`:`scale(${oe}) translate3d(${_e}px, 0, 0)`,transition:"none"})}function Wa(U,de){const fe=ke(C)?window.innerHeight:window.innerWidth,oe=de?(fe-Dt)/fe:1,_e=de?-Dt:0;de&&Ee(V.current,{transition:`transform ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,transform:ke(C)?`scale(${oe}) translate3d(0, ${_e}px, 0)`:`scale(${oe}) translate3d(${_e}px, 0, 0)`})}return j.useEffect(()=>{f||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[f]),j.createElement(sr,{defaultOpen:y,onOpenChange:U=>{!h&&!U||(U?ne(!0):Ht(!0),W(U))},open:$},j.createElement(Ta.Provider,{value:{activeSnapPoint:At,snapPoints:r,setActiveSnapPoint:qt,drawerRef:V,overlayRef:Se,onOpenChange:t,onPress:jn,onRelease:Pa,onDrag:kn,dismissible:h,shouldAnimate:ue,handleOnly:u,isOpen:$,isDragging:ie,shouldFade:ht,closeDrawer:Ht,onNestedDrag:Fa,onNestedOpenChange:$a,onNestedRelease:Wa,keyboardIsOpen:he,modal:f,snapPointsOffset:mt,activeSnapPointIndex:rt,direction:C,shouldScaleBackground:l,setBackgroundColorOnScale:i,noBodyStyles:S,container:A,autoFocus:P}},s))}const Ba=j.forwardRef(function({...e},t){const{overlayRef:s,snapPoints:o,onRelease:a,shouldFade:r,isOpen:l,modal:i,shouldAnimate:c}=wn(),m=Na(t,s),h=o&&o.length>0;if(!i)return null;const u=j.useCallback(d=>a(d),[a]);return j.createElement(ar,{onMouseUp:u,ref:m,"data-vaul-overlay":"","data-vaul-snap-points":l&&h?"true":"false","data-vaul-snap-points-overlay":l&&r?"true":"false","data-vaul-animate":c?.current?"true":"false",...e})});Ba.displayName="Drawer.Overlay";const La=j.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:s,...o},a){const{drawerRef:r,onPress:l,onRelease:i,onDrag:c,keyboardIsOpen:m,snapPointsOffset:h,activeSnapPointIndex:u,modal:d,isOpen:x,direction:w,snapPoints:g,container:f,handleOnly:p,shouldAnimate:v,autoFocus:S}=wn(),[C,y]=j.useState(!1),b=Na(a,r),_=j.useRef(null),k=j.useRef(null),N=j.useRef(!1),H=g&&g.length>0;Vm();const A=(B,L,$=0)=>{if(N.current)return!0;const W=Math.abs(B.y),K=Math.abs(B.x),ne=K>W,ie=["bottom","right"].includes(L)?1:-1;if(L==="left"||L==="right"){if(!(B.x*ie<0)&&K>=0&&K<=$)return ne}else if(!(B.y*ie<0)&&W>=0&&W<=$)return!ne;return N.current=!0,!0};j.useEffect(()=>{H&&window.requestAnimationFrame(()=>{y(!0)})},[]);function P(B){_.current=null,N.current=!1,i(B)}return j.createElement(rr,{"data-vaul-drawer-direction":w,"data-vaul-drawer":"","data-vaul-delayed-snap-points":C?"true":"false","data-vaul-snap-points":x&&H?"true":"false","data-vaul-custom-container":f?"true":"false","data-vaul-animate":v?.current?"true":"false",...o,ref:b,style:h&&h.length>0?{"--snap-point-height":`${h[u??0]}px`,...t}:t,onPointerDown:B=>{p||(o.onPointerDown==null||o.onPointerDown.call(o,B),_.current={x:B.pageX,y:B.pageY},l(B))},onOpenAutoFocus:B=>{s?.(B),S||B.preventDefault()},onPointerDownOutside:B=>{if(e?.(B),!d||B.defaultPrevented){B.preventDefault();return}m.current&&(m.current=!1)},onFocusOutside:B=>{if(!d){B.preventDefault();return}},onPointerMove:B=>{if(k.current=B,p||(o.onPointerMove==null||o.onPointerMove.call(o,B),!_.current))return;const L=B.pageY-_.current.y,$=B.pageX-_.current.x,W=B.pointerType==="touch"?10:2;A({x:$,y:L},w,W)?c(B):(Math.abs($)>W||Math.abs(L)>W)&&(_.current=null)},onPointerUp:B=>{o.onPointerUp==null||o.onPointerUp.call(o,B),_.current=null,N.current=!1,i(B)},onPointerOut:B=>{o.onPointerOut==null||o.onPointerOut.call(o,B),P(k.current)},onContextMenu:B=>{o.onContextMenu==null||o.onContextMenu.call(o,B),k.current&&P(k.current)}})});La.displayName="Drawer.Content";const qm=250,Ym=120,Km=j.forwardRef(function({preventCycle:e=!1,children:t,...s},o){const{closeDrawer:a,isDragging:r,snapPoints:l,activeSnapPoint:i,setActiveSnapPoint:c,dismissible:m,handleOnly:h,isOpen:u,onPress:d,onDrag:x}=wn(),w=j.useRef(null),g=j.useRef(!1);function f(){if(g.current){S();return}window.setTimeout(()=>{p()},Ym)}function p(){if(r||e||g.current){S();return}if(S(),!l||l.length===0){m||a();return}if(i===l[l.length-1]&&m){a();return}const y=l.findIndex(_=>_===i);if(y===-1)return;const b=l[y+1];c(b)}function v(){w.current=window.setTimeout(()=>{g.current=!0},qm)}function S(){w.current&&window.clearTimeout(w.current),g.current=!1}return j.createElement("div",{onClick:f,onPointerCancel:S,onPointerDown:C=>{h&&d(C),v()},onPointerMove:C=>{h&&x(C)},ref:o,"data-vaul-drawer-visible":u?"true":"false","data-vaul-handle":"","aria-hidden":"true",...s},j.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});Km.displayName="Drawer.Handle";function Xm(e){const t=wn(),{container:s=t.container,...o}=e;return j.createElement(or,{container:s,...o})}const Tt={Root:Um,Content:La,Overlay:Ba,Portal:Xm},Qm="_overlay_1tcxf_7",Jm="_contentWrapper_1tcxf_25",Zm="_content_1tcxf_25",eh="_handleContainer_1tcxf_83",th="_handle_1tcxf_83",nh="_iconContainer_1tcxf_115",sh="_nfcIcon_1tcxf_133",oh="_title_1tcxf_183",ah="_description_1tcxf_197",rh="_buttonGroup_1tcxf_213",ih="_cancelButton_1tcxf_229",lh="_actionButton_1tcxf_239",ch="_devToolsContainer_1tcxf_249",dh="_devToolsLabel_1tcxf_269",uh="_devButtons_1tcxf_287",Be={overlay:Qm,contentWrapper:Jm,content:Zm,handleContainer:eh,handle:th,iconContainer:nh,nfcIcon:sh,title:oh,description:ah,buttonGroup:rh,cancelButton:ih,actionButton:lh,devToolsContainer:ch,devToolsLabel:dh,devButtons:uh},mh=()=>{const[e,t]=te(_a),s=ee(Ca),[o]=te(fm),{trigger:a}=Fe(),[r,l]=T.useState(!1);T.useEffect(()=>{e.status!=="idle"&&e.status!=="selecting"?l(!0):l(!1)},[e.status]);const i=u=>{l(u),u||setTimeout(()=>{e.status!=="idle"&&t({status:"idle"})},300)},c=u=>{a("light"),t(d=>d.status==="ready"||d.status==="error"?{status:"writing",roomId:d.roomId,roomName:d.roomName}:d),setTimeout(()=>{if(u==="success"){if("roomId"in e){const{roomId:d,roomName:x}=e;t({status:"success",roomId:d,roomName:x}),s(w=>new Set(w).add(d)),a("success")}}else if(u==="net-error"){if("roomId"in e){const{roomId:d,roomName:x}=e;t({status:"error",roomId:d,roomName:x,error:{code:"WRITE_FAILED",message:"Network connection lost"}}),a("error")}}else if(u==="locked-error"&&"roomId"in e){const{roomId:d,roomName:x}=e;t({status:"error",roomId:d,roomName:x,error:{code:"TAG_LOCKED",message:"Tag is write-locked"}}),a("error")}},500)};if(T.useEffect(()=>{let u;return e.status==="writing"&&(u=setTimeout(()=>{const d=o==="forceSuccess"||o==="random"&&Math.random()>.2;if("roomId"in e){const{roomId:x,roomName:w}=e;d?(t({status:"success",roomId:x,roomName:w}),s(g=>new Set(g).add(x)),a("success")):(t({status:"error",roomId:x,roomName:w,error:{code:"WRITE_FAILED",message:"Tag connection lost"}}),a("error"))}},2e3)),e.status==="success"&&(u=setTimeout(()=>{l(!1),t({status:"idle"})},1500)),()=>clearTimeout(u)},[e,o,t,s,a]),e.status==="idle"||e.status==="selecting")return null;const h=(()=>{switch(e.status){case"ready":return{icon:"nfc",title:"Ready to Write",desc:`Hold device near tag to provision ${"roomName"in e?e.roomName:"room"}.`};case"writing":return{icon:"nfc",title:"Writing...",desc:"Keep device steady."};case"success":return{icon:"check_circle",title:"Success",desc:"Tag written successfully."};case"error":return{icon:"error",title:"Write Failed",desc:"error"in e?e.error.message:"Unknown error"};default:return{icon:"nfc",title:"",desc:""}}})();return n.jsx(Tt.Root,{open:r,onOpenChange:i,dismissible:e.status!=="writing",children:n.jsxs(Tt.Portal,{children:[n.jsx(Tt.Overlay,{className:Be.overlay}),n.jsx(Tt.Content,{className:Be.contentWrapper,children:n.jsxs("div",{className:Be.content,children:[n.jsx("div",{className:Be.handleContainer,children:n.jsx("div",{className:Be.handle})}),n.jsx("div",{className:Be.iconContainer,children:n.jsx("span",{className:`material-symbols-rounded ${Be.nfcIcon}`,"data-state":e.status,children:h.icon})}),n.jsx("h3",{className:Be.title,children:h.title}),n.jsx("p",{className:Be.description,children:h.desc}),e.status==="error"&&n.jsxs("div",{className:Be.buttonGroup,children:[n.jsx(ae,{variant:"primary",onClick:()=>t({status:"writing",roomId:e.roomId,roomName:e.roomName}),className:Be.actionButton,children:"Retry"}),n.jsx(ae,{variant:"secondary",onClick:()=>l(!1),className:Be.actionButton,children:"Cancel"})]}),e.status==="ready"&&n.jsx("div",{className:Be.buttonGroup,children:n.jsx(ae,{variant:"secondary",onClick:()=>l(!1),className:Be.cancelButton,children:"Cancel"})}),e.status==="ready"&&n.jsxs("div",{className:Be.devToolsContainer,children:[n.jsx("span",{className:Be.devToolsLabel,children:"Developer Controls"}),n.jsxs("div",{className:Be.devButtons,children:[n.jsx(ae,{variant:"tertiary",size:"s",onClick:()=>c("success"),children:"Success"}),n.jsx(ae,{variant:"tertiary",size:"s",onClick:()=>c("net-error"),children:"Net Error"}),n.jsx(ae,{variant:"tertiary",size:"s",onClick:()=>c("locked-error"),children:"Locked"})]})]})]})})]})})},hh="_viewContainer_9ldfb_5",fh="_header_9ldfb_29",ph="_controlsHeader_9ldfb_75",gh="_listContainer_9ldfb_103",Mn={viewContainer:hh,header:fh,controlsHeader:ph,listContainer:gh},vh=()=>{const e=ee(xt),t=ee(_a),s=ee(Ca),o=ee(bs),[a,r]=te(Sa),l=F(vm),i=F(ys),c=F(ws),[m,h]=te(Mo),[u,d]=te(Lo);T.useEffect(()=>{h(i),d(c)},[i,c,h,d]),T.useEffect(()=>()=>{r(""),s(new Set),h(null),d(null),t({status:"idle"})},[r,s,h,d,t]);const x=()=>{e({view:"none"})},w=(g,f)=>{t({status:"ready",roomId:g,roomName:f})};return n.jsxs(Q.div,{className:Mn.viewContainer,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsxs("header",{className:Mn.header,children:[n.jsx("h3",{children:"Write NFC tags"}),n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:x,"aria-label":"Close",children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),n.jsxs("div",{className:Mn.controlsHeader,children:[n.jsx(Po,{groupId:m,unitId:u,onClick:()=>o(!0)}),n.jsx(ja,{variant:"standalone",placeholder:"Search for a room...",value:a,onChange:r})]}),n.jsx("main",{className:Mn.listContainer,children:l.length>0?n.jsx(Ju,{data:l,itemContent:(g,f)=>n.jsx(wt,{label:f.name,onClick:()=>w(f.id,f.name)},f.id)}):n.jsx(ls,{title:"No Rooms Found",message:"Select a facility group and unit to see a list of rooms to provision."})}),n.jsx(mh,{})]})},xh="_overlay_1kbxu_5",bh="_contentWrapper_1kbxu_19",yh="_content_1kbxu_19",wh="_handleContainer_1kbxu_67",_h="_handle_1kbxu_67",Ch="_sheetHeader_1kbxu_105",Sh="_sheetTitle_1kbxu_127",jh="_searchContainer_1kbxu_143",Th="_listContainer_1kbxu_163",kh="_listContent_1kbxu_177",Ih="_sectionHeader_1kbxu_201",lt={overlay:xh,contentWrapper:bh,content:yh,handleContainer:wh,handle:_h,sheetHeader:Ch,sheetTitle:Sh,searchContainer:jh,listContainer:Th,listContent:kh,sectionHeader:Ih},Nh=()=>{const[e,t]=te(jr),[s,o]=te(Tr),[a,r]=te(kr),l=F(Ir),i=F(Nr),c=ee(xt),m=d=>{t(d),d||setTimeout(()=>{o(""),r(!1)},300)},h=d=>{t(!1),setTimeout(()=>{c({view:"form",type:"scheduled",method:"manual",checkId:d.id,roomName:d.residents[0]?.location||"Unknown Room",residents:d.residents,specialClassifications:d.specialClassifications})},300)},u=(d,x)=>{const w=new Set(x?.map(g=>g.residentId));return n.jsx("span",{style:{display:"flex",flexWrap:"wrap",gap:"var(--spacing-1)",alignItems:"center"},children:d.map((g,f)=>n.jsxs("span",{style:{display:"inline-flex",alignItems:"center",color:"inherit"},children:[w.has(g.id)&&n.jsx("span",{className:"material-symbols-rounded",style:{marginRight:"var(--spacing-0p5)",fontVariationSettings:"'FILL' 1",color:"var(--surface-fg-primary)"},children:"warning"}),g.name,f<d.length-1?",":""]},g.id))})};return n.jsx(Tt.Root,{open:e,onOpenChange:m,children:n.jsxs(Tt.Portal,{children:[n.jsx(Tt.Overlay,{className:lt.overlay}),n.jsx(Tt.Content,{className:lt.contentWrapper,children:n.jsxs("div",{className:lt.content,children:[n.jsx("div",{className:lt.handleContainer,children:n.jsx("div",{className:lt.handle})}),n.jsxs("div",{className:lt.sheetHeader,children:[n.jsx("h3",{className:lt.sheetTitle,children:"Add Manual Check"}),n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:()=>t(!1),children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),n.jsx("div",{className:lt.searchContainer,children:n.jsx(ja,{placeholder:"Search room or resident...",value:s,onChange:o,variant:"standalone"})}),n.jsx("div",{className:lt.listContainer,children:n.jsx("div",{className:lt.listContent,children:l.length>0?n.jsxs(n.Fragment,{children:[s&&n.jsx("div",{className:lt.sectionHeader,children:"Matching Results"}),l.map(d=>n.jsx(wt,{label:d.residents[0]?.location||"Unknown Room",subLabel:u(d.residents,d.specialClassifications),onClick:()=>h(d)},d.id))]}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"var(--spacing-8) 0",textAlign:"center",color:"var(--surface-fg-secondary)"},children:[n.jsx("span",{className:"material-symbols-rounded",style:{marginBottom:"var(--spacing-2)",opacity:.5},children:"search_off"}),n.jsx("p",{children:"No rooms found."}),!a&&s&&n.jsx("div",{style:{marginTop:"var(--spacing-4)"},children:n.jsxs(ae,{variant:"secondary",size:"s",onClick:()=>r(!0),children:["Search All Facilities (",i.count,")"]})})]})})})]})})]})})},Rh="_modalWrapper_1mcmc_5",Eh="_backdrop_1mcmc_21",Ah="_modalContainer_1mcmc_33",Oh="_header_1mcmc_57",Hh="_rightActionContainer_1mcmc_301",Bh="_content_1mcmc_325",Yt={modalWrapper:Rh,backdrop:Eh,modalContainer:Ah,header:Oh,rightActionContainer:Hh,content:Bh},Lh={hidden:e=>({x:e==="slide-horizontal"?"100%":0,y:e==="slide-vertical"?"100%":0}),visible:{x:0,y:0},exit:({type:e,direction:t})=>e==="slide-horizontal"&&t?{x:t==="left"?"-100%":"100%",transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]}}:{x:e==="slide-horizontal"?"100%":0,y:e==="slide-vertical"?"100%":0,transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]}}},rn=({isOpen:e,onClose:t,title:s,children:o,actionType:a="back",leftIcon:r="arrow_back",rightAction:l,transitionType:i="slide-horizontal",exitDirection:c})=>n.jsx(Je,{custom:{type:i,direction:c},children:e&&n.jsxs(Q.div,{className:Yt.modalWrapper,custom:{type:i,direction:c},variants:Lh,initial:"hidden",animate:"visible",exit:"exit",transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsx("div",{className:Yt.backdrop}),n.jsxs("div",{className:Yt.modalContainer,children:[n.jsxs("header",{className:Yt.header,children:[a==="back"?n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:t,"aria-label":"Back",children:n.jsx("span",{className:"material-symbols-rounded",children:r})}):null,n.jsx("h2",{style:{marginLeft:a==="close"?"8px":"0"},children:s}),n.jsx("div",{className:Yt.rightActionContainer,children:l||(a==="close"?n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:t,"aria-label":"Close",children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})}):null)})]}),n.jsx("main",{className:Yt.content,children:o})]})]})}),Mh="_switchRoot_u1li9_5",Dh="_switchThumb_u1li9_83",_o={switchRoot:Mh,switchThumb:Dh},pe=({checked:e,onCheckedChange:t,disabled:s,id:o})=>n.jsx(ir,{className:_o.switchRoot,checked:e,onCheckedChange:t,disabled:s,id:o,children:n.jsx(lr,{className:_o.switchThumb})}),zh="_container_993sg_5",Ph="_label_993sg_19",$h="_controlRow_993sg_31",Fh="_trackWrapper_993sg_49",Wh="_trackGradient_993sg_75",Vh="_thumb_993sg_105",Gh="_swatch_993sg_165",zt={container:zh,label:Ph,controlRow:$h,trackWrapper:Fh,trackGradient:Wh,thumb:Vh,swatch:Gh},Ma=({value:e,onChange:t,label:s,id:o})=>{const a=T.useId(),r=o||a,l=T.useRef(null),[i,c]=T.useState(!1),m=e/360*100,h=T.useCallback(f=>{if(!l.current)return;const p=l.current.getBoundingClientRect(),v=f-p.left,S=Math.max(0,Math.min(1,v/p.width)),C=Math.round(S*360);t(C)},[t]),u=f=>{c(!0),h(f);const p=S=>{const C="touches"in S?S.touches[0].clientX:S.clientX;h(C)},v=()=>{c(!1),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",v)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",v),document.addEventListener("touchmove",p,{passive:!0}),document.addEventListener("touchend",v)},d=f=>{f.preventDefault(),u(f.clientX)},x=f=>{u(f.touches[0].clientX)},w=f=>{let p=e;switch(f.key){case"ArrowRight":case"ArrowUp":p=Math.min(360,e+5);break;case"ArrowLeft":case"ArrowDown":p=Math.max(0,e-5);break;case"Home":p=0;break;case"End":p=360;break;default:return}f.preventDefault(),t(p)},g=`oklch(0.65 0.18 ${e})`;return n.jsxs("div",{className:zt.container,children:[n.jsx("label",{htmlFor:r,className:zt.label,children:s}),n.jsxs("div",{className:zt.controlRow,children:[n.jsxs("div",{ref:l,className:zt.trackWrapper,onMouseDown:d,onTouchStart:x,children:[n.jsx("div",{className:zt.trackGradient}),n.jsx("div",{className:zt.thumb,style:{left:`${m}%`},role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":e,"aria-label":s,tabIndex:0,onKeyDown:w,"data-dragging":i})]}),n.jsx("div",{className:zt.swatch,style:{backgroundColor:g},"aria-hidden":"true"})]})]})},Uh="_settingsContainer_10x12_5",qh="_settingsSection_10x12_23",Yh="_sectionTitle_10x12_35",Kh="_settingsGroup_10x12_57",Xh="_settingsItem_10x12_79",Qh="_itemLabel_10x12_145",Jh="_logoutButton_10x12_195",Re={settingsContainer:Uh,settingsSection:qh,sectionTitle:Yh,settingsGroup:Kh,settingsItem:Xh,itemLabel:Qh,logoutButton:Jh},Zh=[{value:"qr",label:"QR Code",icon:"qr_code_2"},{value:"nfc",label:"NFC",icon:"nfc"}],ef=()=>{const[e,t]=te($e),[s]=te(Vt),[o,a]=te(_s),r=F(Ft),l=ee(Ft),{trigger:i}=Fe(),{theme:c,setTheme:m}=Do(),h=r.user,u=g=>{i("light"),t(f=>({...f,hapticsEnabled:g}))},d=g=>{h&&a(f=>({...f,[h.username]:{...f[h.username],avatarHue:g}}))},x=()=>{l({isAuthenticated:!1,user:null})},w=h?o[h.username]?.avatarHue??js(h.username):0;return n.jsxs(Q.div,{className:Re.settingsContainer,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:Re.settingsSection,children:[n.jsx("h3",{className:Re.sectionTitle,children:"Preferences"}),n.jsxs("div",{className:Re.settingsGroup,children:[n.jsxs("div",{className:Re.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:Re.itemLabel,children:"Scan Mode"}),n.jsx(Ue,{id:"scan-mode-toggle",options:Zh,value:e.scanMode,onValueChange:g=>{i("selection"),t(f=>({...f,scanMode:g}))},itemDirection:"column"})]}),s.useHapticsEnabled&&n.jsxs("div",{className:Re.settingsItem,children:[n.jsx("label",{htmlFor:"haptics-switch",className:Re.itemLabel,children:"Haptic Feedback"}),n.jsx(pe,{id:"haptics-switch",checked:e.hapticsEnabled,onCheckedChange:u})]}),s.useSoundEnabled&&n.jsxs("div",{className:Re.settingsItem,children:[n.jsx("label",{htmlFor:"audio-switch",className:Re.itemLabel,children:"Audio Feedback"}),n.jsx(pe,{id:"audio-switch",checked:e.audioEnabled,onCheckedChange:g=>t(f=>({...f,audioEnabled:g}))})]}),s.enableDarkMode&&n.jsxs("div",{className:Re.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:Re.itemLabel,children:"Theme"}),n.jsx(Ue,{id:"theme-toggle",options:[{value:"light",label:"Light"},{value:"dark-a",label:"Dark A"},{value:"dark-b",label:"Dark B"},{value:"dark-c",label:"Dark C"}],value:c,onValueChange:g=>{i("selection"),m(g)}})]})]})]}),s.enableEnhancedAvatarDropdown&&n.jsxs("div",{className:Re.settingsSection,children:[n.jsx("h3",{className:Re.sectionTitle,children:"Appearance"}),n.jsx("div",{className:Re.settingsGroup,children:n.jsx("div",{className:Re.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},"data-no-hover":"true",children:n.jsx(Ma,{label:"Avatar Color",value:w,onChange:d})})})]}),n.jsxs("div",{className:Re.settingsSection,children:[n.jsx("h3",{className:Re.sectionTitle,children:"Account"}),n.jsx(ae,{variant:"secondary",onClick:x,className:Re.logoutButton,children:"Log Out"})]})]})},tf="_container_2lxl6_5",nf="_settingSection_2lxl6_23",sf="_sectionHeader_2lxl6_35",of="_subsectionHeader_2lxl6_59",af="_warningBlock_2lxl6_77",rf="_settingsGroup_2lxl6_105",lf="_settingsItem_2lxl6_123",cf="_itemLabel_2lxl6_149",df="_disabledGroup_2lxl6_161",uf="_toastGrid_2lxl6_175",mf="_toastPlaygroundItem_2lxl6_309",hf="_toastDescription_2lxl6_321",ff="_shortcutHint_2lxl6_335",pf="_ringTestContainer_2lxl6_349",gf="_ringTestPreview_2lxl6_367",vf="_ringTestLabel_2lxl6_391",xf="_ringTestControls_2lxl6_413",bf="_ringTestHeader_2lxl6_433",yf="_ringTestActions_2lxl6_461",wf="_ringTestSliders_2lxl6_491",_f="_ringTestSlider_2lxl6_491",Cf="_phaseViz_2lxl6_569",Sf="_phaseVizLabel_2lxl6_583",jf="_phaseVizGrid_2lxl6_597",Tf="_phaseVizRing_2lxl6_609",kf="_phaseVizIndex_2lxl6_623",If="_phaseVizBar_2lxl6_637",Nf="_phaseVizConveyor_2lxl6_653",Rf="_phaseVizShimmer_2lxl6_665",Ef="_recipeSection_2lxl6_679",Af="_recipeLabel_2lxl6_687",Of="_recipeGrid_2lxl6_701",Hf="_recipeButton_2lxl6_713",R={container:tf,settingSection:nf,sectionHeader:sf,subsectionHeader:of,warningBlock:af,settingsGroup:rf,settingsItem:lf,itemLabel:cf,disabledGroup:df,toastGrid:uf,toastPlaygroundItem:mf,toastDescription:hf,shortcutHint:ff,ringTestContainer:pf,ringTestPreview:gf,ringTestLabel:vf,ringTestControls:xf,ringTestHeader:bf,ringTestActions:yf,ringTestSliders:wf,ringTestSlider:_f,phaseViz:Cf,phaseVizLabel:Sf,phaseVizGrid:jf,phaseVizRing:Tf,phaseVizIndex:kf,phaseVizBar:If,phaseVizConveyor:Nf,phaseVizShimmer:Rf,recipeSection:Ef,recipeLabel:Af,recipeGrid:Of,recipeButton:Hf},Bf=[{label:"Sync Complete",message:"Data synced",icon:"cloud_done",variant:"success",logic:"Reconnection after offline."},{label:"Missed Check",message:"Check for Room 101 missed",icon:"history",variant:"warning",logic:"Ticker passes due + interval.",stableId:"lifecycle-missed-check"},{label:"Camera Error",message:`Camera not responding.
Try restarting your device.`,icon:"no_photography",variant:"alert",logic:"Simulated camera failure."},{label:"NFC Error",message:`Tag not read.
Hold phone steady against the tag.`,icon:"wifi_tethering_error",variant:"alert",logic:"Simulated NFC read failure."}],Lf=()=>{const[e,t]=te($e),[s,o]=te(Ss),[a,r]=te(pn),[l,i]=te(Oo),c=ee(gn),m=ee(Vn),h=F(Mr),{trigger:u}=Fe(),d=g=>f=>{u("light"),g(f)},x=()=>{u("warning"),c({type:"RESET_DATA"}),m({message:"Application data reset to defaults.",icon:"delete",variant:"neutral"})},w=g=>{u("medium");let f=g.message;if(g.stableId==="lifecycle-missed-check"){const p=h.find(v=>v.stableId===g.stableId);if(p){let v=1;const S=p.message.match(/^(\d+)\s+checks\s+missed/i);S&&(v=parseInt(S[1],10)),v++,f=`${v} checks missed`}}m({message:f,icon:g.icon,variant:g.variant,stableId:g.stableId})};return n.jsxs(Q.div,{className:R.container,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:R.settingSection,children:[n.jsx("h3",{className:R.sectionHeader,children:"Data Management"}),n.jsxs(ae,{variant:"secondary",onClick:x,children:[n.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"}),"Reset Application Data"]}),n.jsx("span",{className:R.shortcutHint,children:"Shortcut: Ctrl+Backspace"})]}),n.jsxs("div",{className:R.settingSection,children:[n.jsx("h3",{className:R.sectionHeader,children:"Workflow"}),n.jsxs("div",{className:R.settingsGroup,children:[n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"simple-submit-switch",className:R.itemLabel,children:"Simple submit"}),n.jsx(pe,{id:"simple-submit-switch",checked:e.simpleSubmitEnabled,onCheckedChange:d(g=>t(f=>({...f,simpleSubmitEnabled:g})))})]}),n.jsxs("div",{className:e.simpleSubmitEnabled?R.disabledGroup:"",children:[n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"mark-multiple-switch",className:R.itemLabel,children:"Mark multiple"}),n.jsx(pe,{id:"mark-multiple-switch",checked:e.markMultipleEnabled,onCheckedChange:d(g=>t(f=>({...f,markMultipleEnabled:g})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"check-type-switch",className:R.itemLabel,children:"Show check type"}),n.jsx(pe,{id:"check-type-switch",checked:e.isCheckTypeEnabled,onCheckedChange:d(g=>t(f=>({...f,isCheckTypeEnabled:g})))})]})]}),n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Status count"}),n.jsx(Ue,{id:"resident-status-count-toggle",options:[{value:"set-2",label:"2"},{value:"set-3",label:"3"},{value:"set-4",label:"4"},{value:"set-5",label:"5"},{value:"set-6",label:"6"},{value:"set-7",label:"7"}],value:e.residentStatusSet,onValueChange:g=>{u("selection"),t(f=>({...f,residentStatusSet:g}))}})]}),n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Status layout"}),n.jsx(Ue,{id:"status-layout-toggle",options:[{value:"row",label:"Row"},{value:"column",label:"Column"},{value:"grid",label:"Grid"}],value:e.markMultipleLayout,onValueChange:g=>{u("selection"),t(f=>({...f,markMultipleLayout:g}))}})]})]})]}),n.jsxs("div",{className:R.settingSection,children:[n.jsx("h3",{className:R.sectionHeader,children:"App Style"}),n.jsx("div",{className:R.settingsGroup,children:n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"status-indicators-switch",className:R.itemLabel,children:"Show status indicators"}),n.jsx(pe,{id:"status-indicators-switch",checked:e.showStatusIndicators,onCheckedChange:d(g=>t(f=>({...f,showStatusIndicators:g})))})]})})]}),n.jsxs("div",{className:R.settingSection,children:[n.jsx("h3",{className:R.sectionHeader,children:"Simulation"}),n.jsxs("div",{className:R.settingsGroup,children:[n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Connectivity"}),n.jsx(Ue,{id:"connectivity-toggle",options:[{value:"online",label:"Online",icon:"cloud"},{value:"offline",label:"Offline",icon:"cloud_off"}],value:a==="offline"?"offline":"online",onValueChange:g=>{u("selection"),r(g)},itemDirection:"column"})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"offline-toggle-visible-switch",className:R.itemLabel,children:"Show offline toggle"}),n.jsx(pe,{id:"offline-toggle-visible-switch",checked:l,onCheckedChange:d(g=>i(g))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"camera-fail-switch",className:R.itemLabel,children:"Force Camera Failure"}),n.jsx(pe,{id:"camera-fail-switch",checked:s.cameraFails,onCheckedChange:d(g=>o(f=>({...f,cameraFails:g})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"nfc-fail-switch",className:R.itemLabel,children:"Force NFC Failure"}),n.jsx(pe,{id:"nfc-fail-switch",checked:s.nfcFails,onCheckedChange:d(g=>o(f=>({...f,nfcFails:g})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"nfc-blocked-switch",className:R.itemLabel,children:"Force NFC Blocked"}),n.jsx(pe,{id:"nfc-blocked-switch",checked:s.nfcBlocked,onCheckedChange:d(g=>o(f=>({...f,nfcBlocked:g})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"nfc-off-switch",className:R.itemLabel,children:"Force NFC Turned Off"}),n.jsx(pe,{id:"nfc-off-switch",checked:s.nfcTurnedOff,onCheckedChange:d(g=>o(f=>({...f,nfcTurnedOff:g})))})]}),n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Scan timeout"}),n.jsx(Ue,{id:"nfc-timeout-toggle",options:[{value:"off",label:"Off"},{value:"5000",label:"5s"},{value:"10000",label:"10s"},{value:"15000",label:"15s"},{value:"30000",label:"30s"}],value:e.nfcTimeoutEnabled?String(e.nfcScanTimeout):"off",onValueChange:g=>{u("selection"),t(g==="off"?f=>({...f,nfcTimeoutEnabled:!1}):f=>({...f,nfcTimeoutEnabled:!0,nfcScanTimeout:Number(g)}))}})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"slow-load-switch",className:R.itemLabel,children:"Simulate slow loading"}),n.jsx(pe,{id:"slow-load-switch",checked:e.isSlowLoadEnabled,onCheckedChange:d(g=>t(f=>({...f,isSlowLoadEnabled:g})))})]})]})]}),n.jsxs("div",{className:R.settingSection,children:[n.jsx("h3",{className:R.sectionHeader,children:"Toast Playground"}),n.jsx("div",{className:R.toastGrid,children:Bf.map((g,f)=>n.jsxs("div",{className:R.toastPlaygroundItem,children:[n.jsxs(ae,{variant:"secondary",onClick:()=>w(g),children:[n.jsx("span",{className:"material-symbols-rounded",children:g.icon}),g.label]}),n.jsx("p",{className:R.toastDescription,children:g.logic})]},f))})]})]})},Mf=()=>{const[e,t]=te(Vt),[s,o]=te($e),a=ee(zo),{trigger:r}=Fe(),l=i=>c=>{r("light"),i(c)};return n.jsx(Q.div,{className:R.container,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:n.jsxs("div",{className:R.settingSection,children:[n.jsxs("div",{className:R.warningBlock,children:[n.jsx("strong",{children:"Experimental Features"}),n.jsx("br",{}),"These are just conceptual ideas for a potential future version.  Nothing here is expected for v1."]}),n.jsx("h3",{className:R.sectionHeader,children:"Ring Animation"}),n.jsx("div",{className:R.settingsGroup,children:n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"ring-animation-switch",className:R.itemLabel,children:"Enable Ring Animation"}),n.jsx(pe,{id:"ring-animation-switch",checked:e.feat_ring_animation,onCheckedChange:l(i=>t(c=>({...c,feat_ring_animation:i})))})]})}),e.feat_ring_animation&&n.jsxs(ae,{variant:"secondary",onClick:()=>{r("light"),a(!0)},children:[n.jsx("span",{className:"material-symbols-rounded",children:"animation"}),"Ring Animation Sandbox"]}),n.jsxs("div",{className:R.settingsGroup,children:[n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"use-sound-switch",className:R.itemLabel,children:"Use Sound"}),n.jsx(pe,{id:"use-sound-switch",checked:e.useSoundEnabled,onCheckedChange:l(i=>t(c=>({...c,useSoundEnabled:i})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"use-haptics-switch",className:R.itemLabel,children:"Use Haptics"}),n.jsx(pe,{id:"use-haptics-switch",checked:e.useHapticsEnabled,onCheckedChange:l(i=>t(c=>({...c,useHapticsEnabled:i})))})]}),e.useHapticsEnabled&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Success pattern"}),n.jsx(Ue,{id:"haptic-success-toggle",options:[{value:"light",label:"Light"},{value:"medium",label:"Medium"},{value:"heavy",label:"Heavy"}],value:s.hapticPatternSuccess,onValueChange:i=>{o(c=>({...c,hapticPatternSuccess:i})),setTimeout(()=>{r("success")},50)}})]}),n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Error pattern"}),n.jsx(Ue,{id:"haptic-error-toggle",options:[{value:"simple",label:"Simple"},{value:"double",label:"Double"},{value:"grind",label:"Grind"},{value:"stutter",label:"Stutter"}],value:s.hapticPatternError,onValueChange:i=>{o(c=>({...c,hapticPatternError:i})),setTimeout(()=>{r("error")},50)}})]})]})]}),n.jsxs("div",{className:R.settingsGroup,children:[n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"enable-dark-mode-switch",className:R.itemLabel,children:"Enable Dark Mode"}),n.jsx(pe,{id:"enable-dark-mode-switch",checked:e.enableDarkMode,onCheckedChange:l(i=>t(c=>({...c,enableDarkMode:i})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"enable-enhanced-avatar-switch",className:R.itemLabel,children:"Enhanced Avatar Dropdown"}),n.jsx(pe,{id:"enable-enhanced-avatar-switch",checked:e.enableEnhancedAvatarDropdown,onCheckedChange:l(i=>t(c=>({...c,enableEnhancedAvatarDropdown:i})))})]})]}),n.jsx("h3",{className:R.sectionHeader,children:"Late Check Concepts"}),n.jsx("div",{className:R.settingsGroup,children:n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-vignette-switch",className:R.itemLabel,children:"Active Vignette"}),n.jsx(pe,{id:"feat-vignette-switch",checked:e.feat_vignette,onCheckedChange:l(i=>t(c=>({...c,feat_vignette:i})))})]})}),n.jsx("h4",{className:R.subsectionHeader,children:"Pulse Effects"}),n.jsxs("div",{className:R.settingsGroup,children:[n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Glass Pulse Style"}),n.jsx(Ue,{id:"glass-pulse-style",options:[{value:"none",label:"None"},{value:"basic",label:"Basic"},{value:"gradient",label:"Gradient"}],value:e.feat_glass_pulse,onValueChange:i=>{r("light"),t(c=>({...c,feat_glass_pulse:i}))}})]}),n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Card Pulse Style"}),n.jsx(Ue,{id:"card-pulse-style",options:[{value:"none",label:"None"},{value:"basic",label:"Basic"},{value:"gradient",label:"Gradient"}],value:e.feat_card_pulse,onValueChange:i=>{r("light"),t(c=>({...c,feat_card_pulse:i}))}})]})]}),n.jsx("h4",{className:R.subsectionHeader,children:"Other Card Effects"}),n.jsxs("div",{className:R.settingsGroup,children:[n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-card-border-switch",className:R.itemLabel,children:"Fluid Borders"}),n.jsx(pe,{id:"feat-card-border-switch",checked:e.feat_card_border,onCheckedChange:l(i=>t(c=>({...c,feat_card_border:i})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-hazard-texture-switch",className:R.itemLabel,children:"Hazard Texture"}),n.jsx(pe,{id:"feat-hazard-texture-switch",checked:e.feat_hazard_texture,onCheckedChange:l(i=>t(c=>({...c,feat_hazard_texture:i})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-invert-card-switch",className:R.itemLabel,children:"Invert Card"}),n.jsx(pe,{id:"feat-invert-card-switch",checked:e.feat_invert_card,onCheckedChange:l(i=>t(c=>({...c,feat_invert_card:i})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-invert-badge-switch",className:R.itemLabel,children:"Invert Badge"}),n.jsx(pe,{id:"feat-invert-badge-switch",checked:e.feat_invert_badge,onCheckedChange:l(i=>t(c=>({...c,feat_invert_badge:i})))})]})]}),n.jsx("div",{className:R.settingsGroup,children:n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-badge-pulse-switch",className:R.itemLabel,children:"Badge Pulse"}),n.jsx(pe,{id:"feat-badge-pulse-switch",checked:e.feat_badge_mode==="pulse",onCheckedChange:l(i=>t(c=>({...c,feat_badge_mode:i?"pulse":"none"})))})]})}),n.jsx("div",{className:R.settingsGroup,children:n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-jump-fab-switch",className:R.itemLabel,children:"Jump FAB"}),n.jsx(pe,{id:"feat-jump-fab-switch",checked:e.feat_jump_fab,onCheckedChange:l(i=>t(c=>({...c,feat_jump_fab:i})))})]})})]})})},Df="_userSettingsContainer_1oi7l_5",zf="_profileHeader_1oi7l_25",Pf="_avatarLarge_1oi7l_45",$f="_userName_1oi7l_69",Ff="_settingsSection_1oi7l_87",Wf="_sectionTitle_1oi7l_99",Vf="_settingsGroup_1oi7l_119",Gf="_settingsItem_1oi7l_137",Uf="_itemLabel_1oi7l_203",qf="_logoutButton_1oi7l_215",we={userSettingsContainer:Df,profileHeader:zf,avatarLarge:Pf,userName:$f,settingsSection:Ff,sectionTitle:Wf,settingsGroup:Vf,settingsItem:Gf,itemLabel:Uf,logoutButton:qf},Yf=()=>{const e=F(Ft),t=ee(Ft),[s,o]=te($e),[a,r]=te(_s),[l]=te(Vt),{theme:i,setTheme:c}=Do(),{trigger:m}=Fe();if(!e.user)return null;const{username:h,initials:u,displayName:d}=e.user,x=a[h]?.avatarHue,w=x!==void 0?x:js(h),g=`oklch(0.65 0.18 ${w})`,f=()=>{t({isAuthenticated:!1,user:null})},p=C=>{m("light"),c(C)},v=C=>{m("light"),o(y=>({...y,scanMode:C}))},S=C=>{r(y=>({...y,[h]:{...y[h],avatarHue:C}}))};return n.jsxs(Q.div,{className:we.userSettingsContainer,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:we.profileHeader,children:[n.jsx("div",{className:we.avatarLarge,style:{backgroundColor:g},children:u}),n.jsx("h2",{className:we.userName,children:d})]}),n.jsxs("div",{className:we.settingsSection,children:[n.jsx("h3",{className:we.sectionTitle,children:"Appearance"}),n.jsxs("div",{className:we.settingsGroup,children:[n.jsxs("div",{className:we.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:we.itemLabel,children:"Theme"}),n.jsx(Ue,{id:"user-theme-toggle",options:[{value:"light",label:"Light"},{value:"dark-c",label:"Dark"}],value:i==="light"?"light":"dark-c",onValueChange:p,layout:"row"})]}),n.jsx("div",{className:we.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},"data-no-hover":"true",children:n.jsx(Ma,{label:"Avatar Color",value:w,onChange:S})})]})]}),n.jsxs("div",{className:we.settingsSection,children:[n.jsx("h3",{className:we.sectionTitle,children:"Preferences"}),n.jsxs("div",{className:we.settingsGroup,children:[n.jsxs("div",{className:we.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:we.itemLabel,children:"Scan Mode"}),n.jsx(Ue,{id:"user-scan-mode-toggle",options:[{value:"qr",label:"QR",icon:"qr_code_2"},{value:"nfc",label:"NFC",icon:"nfc"}],value:s.scanMode,onValueChange:v,itemDirection:"column"})]}),l.useHapticsEnabled&&n.jsxs("div",{className:we.settingsItem,children:[n.jsx("label",{htmlFor:"user-haptics-switch",className:we.itemLabel,children:"Haptic Feedback"}),n.jsx(pe,{id:"user-haptics-switch",checked:s.hapticsEnabled,onCheckedChange:C=>{m("light"),o(y=>({...y,hapticsEnabled:C}))}})]}),l.useSoundEnabled&&n.jsxs("div",{className:we.settingsItem,children:[n.jsx("label",{htmlFor:"user-audio-switch",className:we.itemLabel,children:"Audio Feedback"}),n.jsx(pe,{id:"user-audio-switch",checked:s.audioEnabled,onCheckedChange:C=>o(y=>({...y,audioEnabled:C}))})]})]})]}),n.jsxs("div",{className:we.settingsSection,children:[n.jsx("h3",{className:we.sectionTitle,children:"Account"}),n.jsxs(ae,{variant:"secondary",onClick:f,className:we.logoutButton,children:[n.jsx("span",{className:"material-symbols-rounded",children:"logout"}),n.jsx("span",{children:"Log Out"})]})]})]})},Kf="_container_4z875_5",Xf="_contextBanner_4z875_25",Qf="_viewWrapper_4z875_61",Jf="_listContainer_4z875_87",Kt={container:Kf,contextBanner:Xf,viewWrapper:Qf,listContainer:Jf},Co={enter:e=>({x:e===0?0:e>0?"100%":"-100%",opacity:1}),center:{x:0,opacity:1},exit:e=>({x:e<0?"100%":"-100%",opacity:1})},Zf=()=>{const[e,t]=te(Rr),[s,o]=te(bs),[a,r]=te(ys),[l,i]=te(ws),c=ee(Er),m=ee(Cs),h=ee(To),{trigger:u}=Fe(),[d,x]=T.useState("group"),[w,g]=T.useState(0),[f,p]=T.useState(a),[v,S]=T.useState("right"),C=e||s;T.useEffect(()=>{C&&(x("group"),g(0),p(a),S("right"))},[C,a]);const y=()=>{if(d==="unit"){g(-1),x("group");return}S("right"),e?c():o(!1)},b=A=>{u("selection"),p(A),g(1),x("unit")},_=A=>{u("selection"),f&&(S("left"),(f!==a||A!==l)&&h(!0),r(f),i(A),m("dashboardTime"),e&&t(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!1)})}))},k=is.find(A=>A.id===f),N=k?.units||[],H=()=>d==="group"?"Select Facility":"Select Unit";return n.jsx(rn,{isOpen:C,onClose:y,title:H(),transitionType:"slide-horizontal",exitDirection:v,children:n.jsx("div",{className:Kt.container,children:n.jsx(Je,{initial:!1,custom:w,mode:"popLayout",children:d==="group"?n.jsx(Q.div,{className:Kt.viewWrapper,custom:w,variants:Co,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:n.jsx("div",{className:Kt.listContainer,style:{borderTop:"none"},children:is.map(A=>n.jsx(wt,{label:A.name,leadingIcon:"domain",onClick:()=>b(A.id),showChevron:!0},A.id))})},"group-list"):n.jsxs(Q.div,{className:Kt.viewWrapper,custom:w,variants:Co,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:Kt.contextBanner,children:[n.jsx("span",{className:"material-symbols-rounded",children:"domain"}),k?.name]}),n.jsx("div",{className:Kt.listContainer,children:N.map(A=>n.jsx(wt,{label:A.name,onClick:()=>_(A.id),showChevron:!0},A.id))})]},"unit-list")})})})},ep=[{key:"ringCount",label:"Ring Count",min:5,max:15,step:1},{key:"conveyorDuration",label:"Conveyor Duration",min:20,max:120,step:5,unit:"s"},{key:"baseOpacity",label:"Base Opacity",min:.1,max:.6,step:.05},{key:"fadeInPercent",label:"Fade In %",min:.05,max:.3,step:.05},{key:"fadeOutPercent",label:"Fade Out %",min:.05,max:.3,step:.05},{key:"baseStrokeWidth",label:"Base Stroke",min:1,max:4,step:.5,unit:"px"},{key:"shimmerPeriod",label:"Shimmer Period",min:2,max:15,step:.5,unit:"s"},{key:"shimmerDuration",label:"Shimmer Duration",min:.5,max:5,step:.25,unit:"s"},{key:"shimmerOpacityBoost",label:"Shimmer Opacity+",min:.1,max:1,step:.05},{key:"shimmerStrokeBoost",label:"Shimmer Stroke+",min:.5,max:3,step:.25,unit:"px"}],tp=[{name:"Gentle Breath",description:"60s conveyor / 6s shimmer (10 cycles) - slow, meditative",params:{ringCount:10,conveyorDuration:60,shimmerPeriod:6,shimmerDuration:2,baseOpacity:.25,shimmerOpacityBoost:.4}},{name:"Heartbeat",description:"40s conveyor / 5s shimmer (8 cycles) - rhythmic pulse",params:{ringCount:8,conveyorDuration:40,shimmerPeriod:5,shimmerDuration:1.5,baseOpacity:.3,shimmerOpacityBoost:.5}},{name:"Radar Sweep",description:"30s conveyor / 3s shimmer (10 cycles) - quick, active",params:{ringCount:10,conveyorDuration:30,shimmerPeriod:3,shimmerDuration:1,baseOpacity:.2,shimmerOpacityBoost:.6,shimmerStrokeBoost:2}},{name:"Ocean Tide",description:"90s conveyor / 9s shimmer (10 cycles) - very slow, calming",params:{ringCount:12,conveyorDuration:90,shimmerPeriod:9,shimmerDuration:3,baseOpacity:.2,fadeInPercent:.2,fadeOutPercent:.2,shimmerOpacityBoost:.35}},{name:"Perfect Sync",description:"50s conveyor / 5s shimmer (10 cycles) - 10 rings, each shimmer = 1 ring",params:{ringCount:10,conveyorDuration:50,shimmerPeriod:5,shimmerDuration:2,baseOpacity:.3,shimmerOpacityBoost:.5}}],np=({params:e,mountKey:t})=>{const[s,o]=T.useState([]),a=T.useRef(0),r=T.useRef(0);return T.useEffect(()=>{a.current=performance.now(),r.current=performance.now();const l=()=>{const c=performance.now(),m=(c-a.current)/1e3;(c-r.current)/1e3>=e.shimmerPeriod&&(r.current=c);const u=Array.from({length:e.ringCount},(d,x)=>{const w=x/e.ringCount*e.conveyorDuration,g=(m+w)%e.conveyorDuration/e.conveyorDuration,f=x/e.ringCount*e.shimmerDuration,p=(c-r.current)/1e3,v=Math.max(0,Math.min(1,(p-f)/.8));return{conveyor:g,shimmer:v<1&&v>0?v:0}});o(u)},i=setInterval(l,100);return l(),()=>clearInterval(i)},[e,t]),n.jsxs("div",{className:R.phaseViz,children:[n.jsx("div",{className:R.phaseVizLabel,children:"Phase Alignment (Ring 0 = inner)"}),n.jsx("div",{className:R.phaseVizGrid,children:s.map((l,i)=>n.jsxs("div",{className:R.phaseVizRing,children:[n.jsx("span",{className:R.phaseVizIndex,children:i}),n.jsx("div",{className:R.phaseVizBar,children:n.jsx("div",{className:R.phaseVizConveyor,style:{width:`${l.conveyor*100}%`}})}),n.jsx("div",{className:R.phaseVizBar,children:n.jsx("div",{className:R.phaseVizShimmer,style:{width:l.shimmer>0?`${(1-Math.abs(l.shimmer-.5)*2)*100}%`:"0%",opacity:l.shimmer>0?1:.3}})})]},i))})]})},sp=({onClose:e})=>{const[t,s]=T.useState(cs),[o,a]=T.useState(0),[r,l]=T.useState(!0),i=T.useCallback((u,d)=>{s(x=>({...x,[u]:d}))},[]),c=T.useCallback(()=>{s(cs),a(u=>u+1)},[]),m=T.useCallback(()=>{a(u=>u+1)},[]),h=T.useCallback(()=>{const u=JSON.stringify(t,null,2);navigator.clipboard.writeText(u),console.log("[RingAnimationTest] Config copied:",u)},[t]);return n.jsxs(Q.div,{className:R.ringTestContainer,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[n.jsxs("div",{className:R.ringTestPreview,children:[n.jsx(Fo,{isEnabled:!0,params:t},o),n.jsx("div",{className:R.ringTestLabel,children:"Ring Animation Sandbox"})]}),n.jsxs("div",{className:R.ringTestControls,children:[n.jsxs("div",{className:R.ringTestHeader,children:[n.jsx("h3",{children:"Parameters"}),n.jsxs("div",{className:R.ringTestActions,children:[n.jsxs(ae,{variant:"tertiary",size:"s",onClick:()=>l(u=>!u),children:[n.jsx("span",{className:"material-symbols-rounded",children:"monitoring"}),"Phase"]}),n.jsxs(ae,{variant:"tertiary",size:"s",onClick:m,children:[n.jsx("span",{className:"material-symbols-rounded",children:"refresh"}),"Remount"]}),n.jsxs(ae,{variant:"tertiary",size:"s",onClick:c,children:[n.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"}),"Reset"]}),n.jsxs(ae,{variant:"tertiary",size:"s",onClick:h,children:[n.jsx("span",{className:"material-symbols-rounded",children:"content_copy"}),"Copy"]}),n.jsx(ae,{variant:"tertiary",size:"s",onClick:e,children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})]}),r&&n.jsx(np,{params:t,mountKey:o}),n.jsxs("div",{className:R.recipeSection,children:[n.jsx("div",{className:R.recipeLabel,children:"Sync Recipes"}),n.jsx("div",{className:R.recipeGrid,children:tp.map(u=>n.jsx("button",{className:R.recipeButton,onClick:()=>{s(d=>({...d,...u.params})),a(d=>d+1)},title:u.description,children:u.name},u.name))})]}),n.jsx("div",{className:R.ringTestSliders,children:ep.map(u=>n.jsxs("div",{className:R.ringTestSlider,children:[n.jsxs("label",{children:[u.label,": ",t[u.key],u.unit||""]}),n.jsx("input",{type:"range",min:u.min,max:u.max,step:u.step,value:t[u.key],onChange:d=>i(u.key,parseFloat(d.target.value))})]},u.key))})]})]})},Da=T.createContext(null),op=()=>{const e=T.useContext(Da);if(!e)throw new Error("useGestureContext must be used within a GestureProvider");return e},ap=({children:e})=>{const t=Gs(0),s=Gs(0);return n.jsx(Da.Provider,{value:{filmStripProgress:t,sideMenuProgress:s},children:e})},rp=()=>{T.useEffect(()=>{if(!window.visualViewport)return;const e=()=>{requestAnimationFrame(()=>{const t=window.visualViewport?.height;t&&document.documentElement.style.setProperty("--visual-viewport-height",`${t}px`)})};return e(),window.visualViewport.addEventListener("resize",e),window.visualViewport.addEventListener("scroll",e),()=>{window.visualViewport?.removeEventListener("resize",e),window.visualViewport?.removeEventListener("scroll",e),document.documentElement.style.removeProperty("--visual-viewport-height")}},[])},ip="_appContainer_1q3pp_5",lp="_sideMenuContainer_1q3pp_25",cp="_mainViewWrapper_1q3pp_49",dp="_backdrop_1q3pp_71",up="_chromeContainer_1q3pp_105",an={appContainer:ip,sideMenuContainer:lp,mainViewWrapper:cp,backdrop:dp,chromeContainer:up},rs={type:"spring",stiffness:400,damping:40,restDelta:.001},mp=()=>{const[e,t]=te(Cs),s=F(xt),[o,a]=te(ko),[r,l]=te(Io),[i,c]=te(No),[m,h]=te(Ro),[u,d]=te(zo),x=T.useCallback(()=>{c(!1)},[c]),[w,g]=T.useState(0),f=T.useRef(null),p=T.useRef(null),{filmStripProgress:v,sideMenuProgress:S}=op(),C=T.useRef(!1),y=T.useRef(0),b=T.useRef(0),_=T.useRef(0);T.useEffect(()=>{f.current&&g(f.current.offsetWidth)},[]),T.useEffect(()=>{C.current||(e==="sideMenu"?Xn(S,1,rs):Xn(S,0,rs))},[e,S]),T.useEffect(()=>{s.view!=="none"&&(S.get()>0&&S.set(0),e==="sideMenu"&&t("dashboardTime"))},[s.view,S,e,t]),rp(),T.useEffect(()=>{s.view==="form"&&"residents"in s&&s.residents.length>0?document.title=`Safety Check - ${s.residents[0].location}`:document.title="Safety Check App"},[s]);const k=()=>{t("dashboardTime")},N=W=>{s.view==="none"&&(y.current=W.clientX,b.current=W.clientY,_.current=v.get(),C.current=!1)},H=W=>{if(s.view==="none"){if(C.current){const K=W.clientX-y.current,ne=window.innerWidth,ie=K/ne;if(e==="sideMenu"){const le=Math.max(0,Math.min(1,1+K/w));S.set(le);return}if(e==="dashboardTime"&&K>0){const le=Math.max(0,Math.min(1,K/w));S.set(le);return}if(S.get()===0){const le=Math.max(0,Math.min(1,_.current-ie));v.set(le)}return}if(W.buttons>0||W.pointerType==="touch"){const K=Math.abs(W.clientX-y.current),ne=Math.abs(W.clientY-b.current);K>10&&K>ne&&(C.current=!0,W.currentTarget.setPointerCapture(W.pointerId))}}},A=W=>{if(!C.current)return;C.current=!1,W.currentTarget.releasePointerCapture(W.pointerId);const K=W.clientX-y.current,ne=S.get();let ie=!1;e==="sideMenu"?ie=!(ne<.8||K<-50):ie=ne>.2||K>50,Xn(S,ie?1:0,rs),t(ie?"sideMenu":"dashboardTime")},P=Nn(S,[0,1],[0,w]),B=Nn(S,[0,1],[-w,0]),L=Nn(S,[0,1],[0,1]),$=Nn(S,W=>W>0?"auto":"none");return n.jsxs("div",{className:an.appContainer,onPointerDown:N,onPointerMove:H,onPointerUp:A,onPointerCancel:A,onPointerLeave:A,style:{touchAction:"pan-y"},children:[n.jsx(Q.div,{ref:f,className:an.sideMenuContainer,style:{x:B},children:n.jsx(ml,{})}),n.jsxs(Q.div,{className:an.mainViewWrapper,style:{x:P},children:[n.jsx(Fi,{}),n.jsx(Q.div,{className:an.backdrop,style:{opacity:L,pointerEvents:$},onClick:k}),n.jsxs("div",{ref:p,className:an.chromeContainer,children:[n.jsx(Cc,{}),n.jsx(Fl,{})]}),n.jsx(yc,{})]}),n.jsxs(Je,{children:[s.view==="scanning"&&n.jsx(Pc,{}),s.view==="form"&&n.jsx(Fd,{checkData:s}),s.view==="provisioning"&&n.jsx(vh,{})]}),n.jsx(Nh,{}),n.jsx(Zf,{}),n.jsx(rn,{isOpen:o,onClose:()=>a(!1),title:"Settings",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(ef,{})}),n.jsx(rn,{isOpen:r,onClose:()=>l(!1),title:"Developer Tools",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(Lf,{})}),n.jsx(rn,{isOpen:i,onClose:x,title:"Future Ideas",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(Mf,{})}),n.jsx(rn,{isOpen:m,onClose:()=>h(!1),title:"User Settings",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(Yf,{})}),n.jsx(Je,{children:u&&n.jsx(sp,{onClose:()=>d(!1)})})]})},bp=()=>n.jsx(ap,{children:n.jsx(mp,{})});export{bp as AppShell};
