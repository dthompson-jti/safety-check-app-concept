import{j as s,a as Ar,b as Mr,T as Or,c as Lr,d as Dr,A as Br,e as zr,f as $r,g as Pr,h as Fr,i as Wr,I as Vr,k as Gr,l as qr,m as Ur,O as Yr,n as Xr,o as Kr,p as Qr}from"./vendor-ui-BnN46pMw.js";import{f as q,a as O,e as ee,u as ie,R as _,d as Yt}from"./vendor-react-CPITYxLf.js";import{s as wo,f as Jr,t as Zr,a as Xt,w as It,r as bo,b as Qe,c as xs,d as ea,i as Co,e as $s,g as ta,h as na,p as sa,j as is,k as yo,l as _o,m as So,n as ws,o as Ut,q as bs,u as Cs,v as oa,x as fn,y as ra,z as Io,A as ys,B as Wn,C as pn,D as _s,E as aa,F as ia,G as jo,H as To,I as la,J as ca,K as da,L as ko,M as No,N as ua,O as ma,P as ha,Q as fa,R as pa,S as ga,T as Eo,U as va,V as xa,W as wa}from"./index-Bjvt-FA-.js";import{m as Ce,A as _t,u as ba,a as Ps,b as Kn,c as Tn}from"./vendor-heavy-BEHQp6WW.js";import{B as me,g as Ro,a as Ca,u as ya}from"./useScrollToFocused-DWOpYIG-.js";const _a=(e,t)=>{const n=(e.getTime()-t)/1e3;if(n<0){const i=Math.abs(n)/60,c=Math.floor(i/60),d=Math.floor(i%60);if(i<1)return"Overdue";const u=[];return c>0&&u.push(`${c}h`),d>0&&u.push(`${d}m`),`Overdue ${u.join(" ")}`}if(n<60)return`${Math.max(0,n).toFixed(1)}s`;if(n<300){const i=Math.floor(n/60),c=Math.floor(n%60);return`${i}m ${String(c).padStart(2,"0")}s`}if(n<3600)return`${Math.ceil(n/60)}m`;const o=n/60,r=Math.floor(o/60),a=Math.round(o%60),l=[];return r>0&&l.push(`${r}h`),a>0&&l.push(`${a}m`),l.join(" ")},Sa=(e,t)=>{const n=t==="early"||t==="pending"||t==="due"||t==="missed",o=Date.now(),r=(e.getTime()-o)/1e3;let a=wo;t!=="missed"&&(r<60&&r>-60?a=Jr:r<300&&(a=Zr));const l=q(a);if(!n)return"";if(t==="missed"){const i=(l-e.getTime())/1e3,c=Math.floor(i/60),d=Math.floor(c/60),u=c%60;if(c<1)return"Overdue";const f=[];return d>0&&f.push(`${d}h`),u>0&&f.push(`${u}m`),`Overdue ${f.join(" ")}`}return _a(e,l)},Ia="_badge_15b9s_5",ja="_badgeIcon_15b9s_37",Ta="_badgePulse_15b9s_161",ka="_badgeInvert_15b9s_193",Na="_badgeInvertForCard_15b9s_215",Jt={badge:Ia,badgeIcon:ja,badgePulse:Ta,badgeInvert:ka,badgeInvertForCard:Na},Ea=1200,Ra=e=>{switch(e){case"due":return{label:"Due",icon:"schedule"};case"missed":return{label:"Missed",icon:"notifications_active"};case"completing":return{label:"Completed",icon:"check_circle"};case"complete":return{label:"Completed",icon:"check_circle"};case"queued":return{label:"Queued",icon:"cloud_off"};default:return{label:"",icon:null}}},Ha=(e,t)=>{const n=new Date(e).getTime(),o=(t-n)/(60*1e3),r=Math.max(1,Math.ceil(o/15));return r===1?"Missed":`${r} Missed`},Aa=({status:e,type:t,dueDate:n})=>{const o=q(wo),{feat_badge_mode:r,feat_invert_badge:a,feat_invert_card:l}=q(Xt),i=O.useMemo(()=>-(Date.now()%Ea),[]);if(e==="pending"||e==="early")return null;const c=Ra(e);let d=c.label,u=e;t==="supplemental"&&(d="Supplemental",u="supplemental"),e==="missed"&&n&&(d=Ha(n,o));const f=e==="missed"&&a&&!l,m=e==="missed"&&l,w=r==="pulse"&&e==="missed",g=[Jt.badge,w?Jt.badgePulse:"",f?Jt.badgeInvert:"",m?Jt.badgeInvertForCard:""].filter(Boolean).join(" "),p=w?{animationDelay:`${i}ms`}:void 0;return s.jsxs("div",{className:g,"data-status":u,style:p,children:[c.icon&&s.jsx("span",{className:`material-symbols-rounded ${Jt.badgeIcon}`,children:c.icon}),d]})},Ma="_checkCard_1o021_117",Oa="_statusIndicator_1o021_273",La="_mainContent_1o021_323",Da="_topRow_1o021_339",Ba="_bottomRow_1o021_353",za="_locationInfo_1o021_367",$a="_locationText_1o021_381",Pa="_residentList_1o021_399",Fa="_residentListItem_1o021_421",Wa="_warningIcon_1o021_443",Va="_timeDisplay_1o021_455",Ga="_cardGradient_1o021_529",qa="_cardBorder_1o021_577",Ua="_cardHazard_1o021_617",Ya="_cardInvert_1o021_703",Me={checkCard:Ma,statusIndicator:Oa,mainContent:La,topRow:Da,bottomRow:Ba,locationInfo:za,locationText:$a,residentList:Pa,residentListItem:Fa,warningIcon:Wa,timeDisplay:Va,cardGradient:Ga,cardBorder:qa,cardHazard:Ua,cardInvert:Ya},Xa=({resident:e,check:t})=>{const n=t.specialClassifications?.some(o=>o.residentId===e.id);return s.jsxs("li",{className:Me.residentListItem,children:[n&&s.jsx("span",{className:`material-symbols-rounded ${Me.warningIcon}`,children:"warning"}),e.name]})},Ka=({check:e,transition:t})=>{const n=ee(It),o=q(bo),{showStatusIndicators:r}=q(Qe),{feat_card_gradient:a,feat_card_border:l,feat_hazard_texture:i,feat_invert_card:c}=q(Xt),d=o===e.id,u=1200,f=O.useMemo(()=>-(Date.now()%u),[]),m=O.useMemo(()=>new Date(e.dueDate),[e.dueDate]),w=Sa(m,e.status),g=!["complete","supplemental","completing","queued"].includes(e.status),p=()=>{g&&n({view:"form",type:"scheduled",method:"manual",checkId:e.id,roomName:e.residents[0].location,residents:e.residents,specialClassifications:e.specialClassifications})},{residents:v}=e,h=v[0]?.location||"N/A",x=!["complete","supplemental","completing","queued"].includes(e.status),S=e.status==="missed",I=S&&(a||l||i),y=[Me.checkCard,d?Me.isCompleting:"",S&&a?Me.cardGradient:"",S&&l?Me.cardBorder:"",S&&i?Me.cardHazard:"",S&&c?Me.cardInvert:""].filter(Boolean).join(" "),C=I?{animationDelay:`${f}ms`}:void 0;return s.jsx(Ce.div,{initial:{height:"auto",marginBottom:"var(--space-3)"},animate:{height:"auto",marginBottom:"var(--space-3)"},exit:{height:0,marginBottom:0,overflow:"hidden",transition:{delay:.1,duration:.2,ease:"linear"}},children:s.jsxs(Ce.div,{transition:t,initial:{opacity:0,x:0},animate:{opacity:1,x:0},exit:{x:"100%",opacity:0,transition:{x:{duration:.5,ease:[.25,1,.5,1]},opacity:{duration:1.5,delay:1,ease:"easeOut"}}},className:y,style:C,"data-status":e.status,"data-check-id":e.id,"data-indicators-visible":r,onClick:p,"aria-disabled":!g,whileTap:g?{scale:.98}:{},children:[r&&x&&s.jsx("div",{className:Me.statusIndicator,"data-status":e.status}),s.jsxs("div",{className:Me.mainContent,children:[s.jsxs("div",{className:Me.topRow,children:[s.jsx("div",{className:Me.locationInfo,children:s.jsx("span",{className:Me.locationText,children:h})}),s.jsx(Aa,{status:e.status,type:e.type,dueDate:e.dueDate})]}),s.jsxs("div",{className:Me.bottomRow,children:[s.jsx("ul",{className:Me.residentList,children:v.map(b=>s.jsx(Xa,{resident:b,check:e},b.id))}),s.jsx("div",{className:Me.timeDisplay,children:g?w:null})]})]})]})})},Qa="_shimmer_2k4yv_23",Ja="_cardWrapper_2k4yv_49",Za="_indicator_2k4yv_89",ei="_mainContent_2k4yv_109",ti="_topRow_2k4yv_123",ni="_bottomRow_2k4yv_125",si="_location_2k4yv_153",oi="_badge_2k4yv_155",ri="_resident_2k4yv_157",ai="_residentShort_2k4yv_159",ct={shimmer:Qa,cardWrapper:Ja,indicator:Za,mainContent:ei,topRow:ti,bottomRow:ni,location:si,badge:oi,resident:ri,residentShort:ai},ii=()=>s.jsxs("div",{className:ct.cardWrapper,children:[s.jsx("div",{className:ct.shimmer}),s.jsx("div",{className:ct.indicator}),s.jsxs("div",{className:ct.mainContent,children:[s.jsxs("div",{className:ct.topRow,children:[s.jsx("div",{className:ct.location}),s.jsx("div",{className:ct.badge})]}),s.jsxs("div",{className:ct.bottomRow,children:[s.jsx("div",{className:ct.resident}),s.jsx("div",{className:ct.residentShort})]})]})]}),li="_emptyStateContainer_f4o6k_3",ci="_emptyStateMessage_f4o6k_47",kn={emptyStateContainer:li,emptyStateMessage:ci},ls=({icon:e="search_off",title:t,message:n,action:o})=>s.jsxs("div",{className:kn.emptyStateContainer,children:[s.jsx("span",{className:"material-symbols-rounded large-feature-icon",children:e}),s.jsx("h3",{className:kn.emptyStateTitle,children:t}),n&&s.jsx("p",{className:kn.emptyStateMessage,children:n}),o&&s.jsx("div",{className:kn.actionContainer,children:o})]}),di="_chipContainer_1nicu_5",ui="_chipContent_1nicu_19",mi="_chipText_1nicu_43",hi="_clearButton_1nicu_63",Nn={chipContainer:di,chipContent:ui,chipText:mi,clearButton:hi},fi=({filterLabel:e,onClear:t})=>s.jsx(Ce.div,{layout:!0,className:Nn.chipContainer,initial:{y:-20,opacity:0,height:0},animate:{y:0,opacity:1,height:"auto"},exit:{y:-20,opacity:0,height:0},transition:{type:"tween",duration:.25,ease:"easeInOut"},children:s.jsxs("div",{className:Nn.chipContent,children:[s.jsxs("span",{className:Nn.chipText,children:["Showing: ",s.jsx("strong",{children:e})]}),s.jsx(me,{variant:"quaternary",size:"xs",iconOnly:!0,onClick:t,"aria-label":"Clear filter",className:Nn.clearButton,children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})}),pi="_emptyStateContainer_s7drc_3",En={emptyStateContainer:pi},gi=({filterLabel:e,onClear:t})=>s.jsxs("div",{className:En.emptyStateContainer,children:[s.jsx("div",{className:En.iconWrapper,children:s.jsx("span",{className:"material-symbols-rounded",children:"filter_list_off"})}),s.jsxs("h3",{className:En.title,children:['No "',e,'" checks']}),s.jsx("p",{className:En.message,children:"There are no checks that match the current filter. Try clearing the filter to see all upcoming checks."}),s.jsx(me,{variant:"secondary",size:"m",onClick:t,children:"Clear Filter"})]}),vi="_scrollContainer_c95zg_5",xi="_headerWrapper_c95zg_49",wi="_priorityGroupHeader_c95zg_57",Zt={scrollContainer:vi,headerWrapper:xi,priorityGroupHeader:wi},Fs={type:"tween",duration:.25,ease:[.25,1,.5,1]},bi=8,Ws={missed:"Missed",due:"Due",queued:"Queued"},Ci=e=>{const t={Missed:[],Due:[],Upcoming:[]};return e.forEach(n=>{if(["complete","supplemental","queued"].includes(n.status))return;let o=n.status;if(n.status==="completing"){const r=n.baseInterval*60*1e3,l=new Date(n.dueDate).getTime()-r,c=(Date.now()-l)/(60*1e3);c<13?o="pending":c<15?o="due":o="missed"}switch(o){case"missed":t.Missed.push(n);break;case"due":t.Due.push(n);break;case"early":case"pending":default:t.Upcoming.push(n);break}}),Object.entries(t).map(([n,o])=>({title:n,checks:o})).filter(n=>n.checks.length>0)},yi=e=>{const t=e.filter(o=>!["complete","supplemental","missed","queued"].includes(o.status)),n=[];return t.length>0&&n.push({title:"Walking Order",checks:t}),n},_i=({viewType:e})=>{const t=q(e==="time"?xs:ea),{isSlowLoadEnabled:n}=q(Qe),[o,r]=ie(Co),a=q($s),l=q(ta),[i,c]=ie(na),d=ee($s);O.useEffect(()=>{if(o){const g=setTimeout(()=>r(!1),n?3e3:750);return()=>clearTimeout(g)}},[o,r,n]);const u=()=>{d(!0),c("all"),setTimeout(()=>d(!1),500)},f=o,m=i!=="all",w=()=>{if(f)return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Zt.headerWrapper,children:s.jsx("div",{className:Zt.priorityGroupHeader,style:{width:"100px",height:"1.5rem",backgroundColor:"transparent",marginBottom:"var(--spacing-2)"},children:s.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"var(--surface-bg-tertiary)",borderRadius:"var(--radius-sm)",opacity:.3}})})}),Array.from({length:bi}).map((p,v)=>s.jsx(ii,{},v))]});if(t.length===0)return l?s.jsx(ls,{title:"No Results Found",message:`Your search for "${l}" did not return any results.`}):m?s.jsx(gi,{filterLabel:Ws[i],onClear:u}):s.jsx(ls,{title:"All Checks Complete",message:"There are no checks due at this time."});const g=e==="time"?Ci(t):yi(t);return s.jsxs(s.Fragment,{children:[s.jsx(_t,{children:g.flatMap(p=>[s.jsx(Ce.div,{className:Zt.headerWrapper,layout:!0,transition:Fs,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:s.jsx("h2",{className:Zt.priorityGroupHeader,children:p.title})},p.title),...p.checks.map(v=>s.jsx(Ka,{check:v,transition:Fs},v.id))])}),s.jsx("div",{style:{height:"calc(var(--footer-height, 96px) + var(--spacing-4))"}})]})};return s.jsxs("div",{className:Zt.scrollContainer,"data-refreshing":a,children:[s.jsx("div",{style:{height:"var(--header-height)"}}),s.jsx(_t,{mode:"wait",children:m&&s.jsx(fi,{filterLabel:Ws[i],onClear:u},i)}),w()]})},Si="_container_r0gas_5",Ii={container:Si},ji=()=>s.jsx("div",{className:Ii.container,children:s.jsx(_i,{viewType:"time"})}),Ti={light:[50],medium:[100],heavy:[150]},ki={simple:[200],double:[300,100,300],grind:[50,50,50,50,50,50],stutter:[50,100,50,100,200]},Ni={warning:[100,50,100],light:10,medium:40,heavy:60,selection:5},Ei=150,Je=()=>{const e=q(Qe),t=O.useRef(0);return{trigger:O.useCallback(o=>{if(e.hapticsEnabled&&window.navigator&&"vibrate"in window.navigator){const r=Date.now();if(r-t.current<Ei)return;try{let a;o==="success"?a=Ti[e.hapticPatternSuccess]:o==="error"?a=ki[e.hapticPatternError]:a=Ni[o],window.navigator.vibrate(a),t.current=r}catch{}}},[e.hapticsEnabled,e.hapticPatternSuccess,e.hapticPatternError])}},Vn=()=>{const{audioEnabled:e}=q(Qe),t=q(sa);return{play:O.useCallback((o,r)=>{!e||!t||t(o,r)},[e,t])}},Ri=(e,t=7,n=3e3)=>{const o=O.useRef(0),r=O.useRef(0),a=O.useRef(e);return a.current=e,{onTap:O.useCallback(()=>{const i=Date.now();i-r.current>n&&(o.current=0,r.current=i),o.current+=1,o.current===1&&(r.current=i),o.current>=t&&(o.current=0,a.current())},[t,n]),currentCount:o.current}},Hi="_contextCard_157qg_5",Ai="_stackedContainer_157qg_43",Mi="_stackItem_157qg_57",Oi="_label_157qg_69",Li="_value_157qg_85",Di="_actionIcon_157qg_97",pt={contextCard:Hi,stackedContainer:Ai,stackItem:Mi,label:Oi,value:Li,actionIcon:Di},Ho=({groupId:e,unitId:t,onClick:n})=>{const o=is.find(i=>i.id===e),r=o?.units.find(i=>i.id===t),a=o?.name||"Select Group",l=r?.name||"Select Unit";return s.jsxs("button",{className:pt.contextCard,onClick:n,type:"button",children:[s.jsxs("div",{className:pt.stackedContainer,children:[s.jsxs("div",{className:pt.stackItem,children:[s.jsx("span",{className:pt.label,children:"Group"}),s.jsx("span",{className:pt.value,children:a})]}),s.jsxs("div",{className:pt.stackItem,children:[s.jsx("span",{className:pt.label,children:"Unit"}),s.jsx("span",{className:pt.value,children:l})]})]}),s.jsx("div",{className:pt.actionIcon,children:s.jsx("span",{className:"material-symbols-rounded",children:"swap_horiz"})})]})},vt=({label:e,subLabel:t,leadingIcon:n,leadingElement:o,trailingIcon:r,trailingElement:a,isSelected:l,disabled:i,onClick:c,indent:d=!1,showChevron:u=!0})=>{let f=o;!f&&n?f=s.jsx("span",{className:"material-symbols-rounded",children:n}):!f&&l&&(f=s.jsx("span",{className:"material-symbols-rounded",children:"check"}));let m=a;return!m&&r?m=s.jsx("span",{className:"material-symbols-rounded",children:r}):!m&&c&&u&&!l&&(m=s.jsx("span",{className:"material-symbols-rounded",children:"chevron_right"})),s.jsxs("button",{className:"list-item-root",onClick:c,disabled:i,"aria-selected":l,"data-has-leading":!!f||d,type:"button",children:[(f||d)&&s.jsx("div",{className:"list-item-leading",children:f}),s.jsxs("div",{className:"list-item-content",children:[s.jsxs("div",{className:"list-item-text-group",children:[s.jsx("span",{className:"list-item-label",children:e}),t&&s.jsx("span",{className:"list-item-sublabel",children:t})]}),m&&s.jsx("div",{className:"list-item-trailing",children:m})]})]})},Bi="_sideMenu_m12kq_5",zi="_header_m12kq_29",$i="_title_m12kq_49",Pi="_headerSeparator_m12kq_83",Fi="_content_m12kq_95",Wi="_separator_m12kq_113",Vi="_menuList_m12kq_223",Gi="_footer_m12kq_233",qi="_userProfileCard_m12kq_249",Ui="_userName_m12kq_321",Ue={sideMenu:Bi,header:zi,title:$i,headerSeparator:Pi,content:Fi,separator:Wi,menuList:Vi,footer:Gi,userProfileCard:qi,userName:Ui},Yi=()=>{const e=ee(yo),t=ee(_o),n=ee(So),o=ee(It),r=ee(ws),a=ee(Ut),l=q(Ut),i=q(bs),c=q(Cs),{toggle:d,isUnlocked:u}=oa(),f=ee(fn),{trigger:m}=Je(),{play:w}=Vn(),g=O.useCallback(()=>{const h=!u;d(),m(h?"success":"light"),h&&w("success"),f({message:h?"Future Ideas Unlocked":"Future Ideas Hidden",icon:h?"lightbulb":"lightbulb_outline",variant:"neutral"})},[d,u,f,m,w]),{onTap:p}=Ri(g,7,3e3),v=()=>{a({isAuthenticated:!1,user:null})};return s.jsxs("aside",{className:Ue.sideMenu,children:[s.jsxs("header",{className:Ue.header,children:[s.jsx("h1",{className:Ue.title,onClick:p,children:"Safeguard"}),s.jsx("div",{className:Ue.headerSeparator})]}),s.jsxs("main",{className:Ue.content,children:[s.jsx(Ho,{groupId:i,unitId:c,onClick:()=>r(!0)}),s.jsx("div",{className:Ue.separator}),s.jsxs("div",{className:Ue.menuList,children:[s.jsx(vt,{label:"Write NFC tags",leadingIcon:"nfc",onClick:()=>o({view:"provisioning"}),showChevron:!1}),s.jsx(vt,{label:"Developer tools",leadingIcon:"code",onClick:()=>t(!0),showChevron:!1}),u&&s.jsx(vt,{label:"Future Ideas",leadingIcon:"lightbulb",onClick:()=>n(!0),showChevron:!1})]})]}),s.jsxs("footer",{className:Ue.footer,children:[s.jsx("div",{className:Ue.menuList,children:s.jsx(vt,{label:"Log out",leadingIcon:"logout",onClick:v,showChevron:!1})}),s.jsx("div",{className:Ue.separator}),s.jsxs("button",{className:Ue.userProfileCard,onClick:()=>e(!0),children:[s.jsx("span",{className:Ue.userName,children:l.user?.displayName||"Unknown User"}),s.jsx("span",{className:"material-symbols-rounded",children:"settings"})]})]})]})},Xi=({children:e,content:t,delay:n=300,side:o="top"})=>t?s.jsx(Ar,{children:s.jsxs(Mr,{delayDuration:n,children:[s.jsx(Or,{asChild:!0,children:e}),s.jsx(Lr,{children:s.jsxs(Dr,{className:"tooltip-content",side:o,sideOffset:5,children:[t,s.jsx(Br,{className:"tooltip-arrow"})]})})]})}):e,cs=({trigger:e,children:t,open:n,onOpenChange:o,variant:r="default"})=>{const a=r==="tooltip"?"popover-content-tooltip":"popover-content";return s.jsxs(zr,{open:n,onOpenChange:o,children:[s.jsx($r,{asChild:!0,children:e}),s.jsx(Pr,{children:s.jsx(Fr,{className:a,sideOffset:5,collisionPadding:8,children:t})})]})},Ki="_statusBar_9ph0v_7",Qi="_contentContainer_9ph0v_19",Ji="_statusPill_9ph0v_29",Zi="_icon_9ph0v_99",el="_count_9ph0v_109",tl="_popoverContent_9ph0v_123",Bt={statusBar:Ki,contentContainer:Qi,statusPill:Ji,icon:Zi,count:el,popoverContent:tl},Vs=({count:e,icon:t,status:n,tooltipContent:o})=>{const r=e===0,a=s.jsxs("div",{className:Bt.statusPill,"data-status":n,"data-active":"false","data-empty":r?"true":void 0,children:[s.jsx("span",{className:`material-symbols-rounded ${Bt.icon}`,children:t}),s.jsx("span",{className:Bt.count,children:e})]});return o?s.jsx(cs,{trigger:a,variant:"tooltip",children:o}):a},nl=()=>{const e=q(ra),t=s.jsx("div",{className:Bt.popoverContent,children:s.jsxs("span",{children:[e.missed," Missed"]})}),n=s.jsx("div",{className:Bt.popoverContent,children:s.jsxs("span",{children:[e.due," Due"]})});return s.jsx(Ce.div,{className:Bt.statusBar,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{type:"tween",duration:.2},children:s.jsxs("div",{className:Bt.contentContainer,children:[s.jsx(Vs,{count:e.missed,icon:"notifications_active",status:"missed",tooltipContent:t}),s.jsx(Vs,{count:e.due,icon:"schedule",status:"due",tooltipContent:n})]})})},sl="_menuContainer_16210_5",ol="_userName_16210_29",Gs={menuContainer:sl,userName:ol},rl=({displayName:e})=>{const t=ee(Ut),n=()=>{t({isAuthenticated:!1,user:null})};return s.jsxs("div",{className:Gs.menuContainer,children:[s.jsx("div",{className:Gs.userName,children:e}),s.jsx(me,{variant:"secondary",size:"s",onClick:n,style:{width:"100%"},children:"Log Out"})]})},al="_avatar_10qqp_5",il="_popoverContent_10qqp_67",qs={avatar:al,popoverContent:il},ll=()=>{const e=q(Ut),t=q(Io),n=q(Xt);if(!e.user)return null;const{initials:o,displayName:r,username:a}=e.user;let l;if(n.enableEnhancedAvatarDropdown){const d=t[a]?.avatarHue,u=d!==void 0?d:Ro(a);l=Ca(u)}const i=s.jsx("div",{className:qs.avatar,"aria-label":`User: ${r}`,style:l?{backgroundColor:l}:void 0,children:o});if(n.enableEnhancedAvatarDropdown)return s.jsx(cs,{trigger:i,variant:"default",children:s.jsx(rl,{displayName:r})});const c=s.jsx("div",{className:qs.popoverContent,children:r});return s.jsx(cs,{trigger:i,variant:"tooltip",children:c})},cl="_header_k8mz5_5",dl="_headerContent_k8mz5_75",ul="_leftActions_k8mz5_95",ml="_centerContent_k8mz5_113",hl="_rightActions_k8mz5_131",en={header:cl,headerContent:dl,leftActions:ul,centerContent:ml,rightActions:hl},fl=()=>{const[e,t]=ie(ys),n=O.useRef(null);O.useLayoutEffect(()=>{const r=()=>{if(n.current){const l=n.current.offsetHeight;document.documentElement.style.setProperty("--header-height",`${l}px`)}};r();const a=new ResizeObserver(r);return n.current&&a.observe(n.current),()=>{a.disconnect(),document.documentElement.style.removeProperty("--header-height")}},[]);const o=()=>{t(e==="sideMenu"?"dashboardTime":"sideMenu")};return s.jsx("header",{className:en.header,ref:n,children:s.jsxs("div",{className:en.headerContent,children:[s.jsx("div",{className:en.leftActions,children:s.jsx(Xi,{content:"Open navigation",children:s.jsx(me,{variant:"tertiary",size:"m",iconOnly:!0,onClick:o,"aria-label":"Open navigation menu",children:s.jsx("span",{className:"material-symbols-rounded",children:"menu"})})})}),s.jsx("div",{className:en.centerContent,children:s.jsx(nl,{})}),s.jsx("div",{className:en.rightActions,children:s.jsx(ll,{})})]})})},Ss=()=>{const e=ee(Wn),t=ee(bo),n=q(pn),o=q(Qe),{trigger:r}=Je(),{play:a}=Vn();return{completeCheck:({checkId:i,statuses:c,notes:d,onSuccess:u})=>{const f=o.scanMode==="nfc"&&o.simpleSubmitEnabled;r("success"),a("success"),e({type:"CHECK_SET_COMPLETING",payload:{checkId:i}}),t(i),setTimeout(()=>{const w={checkId:i,statuses:c,notes:d,completionTime:new Date().toISOString()};e(n==="offline"?{type:"CHECK_SET_QUEUED",payload:w}:{type:"CHECK_COMPLETE",payload:w}),t(null),u?.()},f?0:1e3)}}},pl="_footer_gxkvr_5",gl="_scanButton_gxkvr_89",vl="_nfcContainer_gxkvr_113",xl="_nfcIcon_gxkvr_149",wl="_nfcText_gxkvr_163",tn={footer:pl,scanButton:gl,nfcContainer:vl,nfcIcon:xl,nfcText:wl},bl=()=>{const e=ee(It),t=q(Qe),n=q(xs),o=q(_s),r=ee(fn),a=O.useRef(null),{trigger:l}=Je(),{completeCheck:i}=Ss();O.useLayoutEffect(()=>{const u=()=>{if(a.current){const m=a.current.offsetHeight;document.documentElement.style.setProperty("--footer-height",`${m}px`)}};u();const f=new ResizeObserver(u);return a.current&&f.observe(a.current),window.addEventListener("resize",u),()=>{f.disconnect(),document.documentElement.style.removeProperty("--footer-height"),window.removeEventListener("resize",u)}},[t.scanMode]);const c=()=>{l("heavy"),e({view:"scanning",isManualSelectionOpen:!1})},d=()=>{if(o.nfcFails){l("error"),r({message:`Tag not read.
Hold phone steady against the tag.`,icon:"wifi_tethering_error",variant:"alert"});return}const u=n.find(f=>f.status!=="complete"&&f.type!=="supplemental");if(u){if(l("success"),t.simpleSubmitEnabled){const f=u.residents.reduce((m,w)=>(m[w.id]="Awake",m),{});i({checkId:u.id,statuses:f,notes:"",onSuccess:()=>{r({message:"Check completed",icon:"check_circle",variant:"success"})}});return}e({view:"form",type:"scheduled",method:"scan",checkId:u.id,roomName:u.residents[0].location,residents:u.residents,specialClassifications:u.specialClassifications})}else l("warning"),r({message:"No incomplete checks found in current list.",icon:"info",variant:"neutral"})};return s.jsx("footer",{className:tn.footer,ref:a,children:t.scanMode==="nfc"?s.jsxs(Ce.div,{className:tn.nfcContainer,animate:{opacity:[.6,1,.6]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},onClick:d,children:[s.jsx("span",{className:`material-symbols-rounded ${tn.nfcIcon}`,children:"sensors"}),s.jsx("span",{className:tn.nfcText,children:"Ready to scan"})]}):s.jsxs(me,{variant:"primary",className:tn.scanButton,onClick:c,children:[s.jsx("span",{className:"material-symbols-rounded",children:"qr_code_scanner"}),s.jsx("span",{children:"Scan"})]})})},Cl="_banner_1b615_5",yl="_iconContainer_1b615_39",_l="_icon_1b615_39",Sl="_textContainer_1b615_73",Il="_statusText_1b615_95",jl="_queueText_1b615_123",Tl="_syncButton_1b615_139",kl="_spinner_1b615_185",dt={banner:Cl,iconContainer:yl,icon:_l,textContainer:Sl,statusText:Il,queueText:jl,syncButton:Tl,spinner:kl},Nl=e=>{const t=Math.floor(e/1e3),n=Math.floor(t/60),o=t%60;return`${n}:${o.toString().padStart(2,"0")}`},El=()=>{const[e,t]=ie(pn),n=q(aa),o=q(ia),r=ee(Wn),{trigger:a}=Je(),{play:l}=Vn(),[i,c]=O.useState("0:00"),d=O.useRef(null);if(O.useEffect(()=>{e==="offline"&&a("warning")},[e,n,a]),O.useEffect(()=>{if(e!=="offline"||!n){c("0:00");return}const m=()=>{const p=Date.now()-n;c(Nl(p))};m();const w=setInterval(m,1e3);return()=>clearInterval(w)},[e,n]),O.useEffect(()=>{const m=()=>{if(d.current){const g=d.current.offsetHeight;document.documentElement.style.setProperty("--offline-banner-height",`${g}px`)}else document.documentElement.style.removeProperty("--offline-banner-height")};m();const w=new ResizeObserver(m);return d.current&&w.observe(d.current),()=>{w.disconnect(),document.documentElement.style.removeProperty("--offline-banner-height")}},[e]),e==="online")return null;const u=()=>{t("syncing"),a("medium"),setTimeout(()=>{r({type:"SYNC_QUEUED_CHECKS",payload:{syncTime:new Date().toISOString()}}),a("success"),l("success"),t("online")},2e3)},f=()=>o===0?"No items queued for sync":o===1?"1 item queued for sync":`${o} items queued for sync`;return s.jsx(_t,{children:s.jsxs(Ce.div,{className:dt.banner,ref:d,initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"tween",duration:.3},children:[s.jsx("div",{className:dt.iconContainer,children:s.jsx("span",{className:`material-symbols-rounded ${dt.icon} ${e==="syncing"?dt.spinner:""}`,children:e==="syncing"?"sync":"cloud_off"})}),s.jsx("div",{className:dt.textContainer,children:e==="syncing"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:dt.statusText,children:"Syncing data..."}),s.jsx("div",{className:dt.queueText,children:"Please wait"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:dt.statusText,children:["Offline for ",i]}),s.jsx("div",{className:dt.queueText,children:f()})]})}),e==="offline"&&s.jsx("button",{className:dt.syncButton,onClick:u,children:"Sync Now"})]})})},Rl="_scanView_427ct_35",Hl="_header_427ct_57",Al="_preScanAlert_427ct_91",Ml="_alertSeparator_427ct_149",Ol="_cameraContainer_427ct_163",Ll="_viewfinder_427ct_185",Dl="_statusOverlay_427ct_243",Bl="_processingState_427ct_275",zl="_spinner_427ct_281",$l="_successState_427ct_291",Pl="_failState_427ct_299",Fl="_helperText_427ct_309",Wl="_footer_427ct_319",Vl="_devControlsContainer_427ct_365",Gl="_devControlsHeader_427ct_385",ql="_devControls_427ct_365",Ie={scanView:Rl,header:Hl,preScanAlert:Al,alertSeparator:Ml,cameraContainer:Ol,viewfinder:Ll,statusOverlay:Dl,processingState:Bl,spinner:zl,successState:$l,failState:Pl,helperText:Fl,footer:Wl,devControlsContainer:Vl,devControlsHeader:Gl,devControls:ql},Ul=()=>{const[e,t]=ie(It),n=q(jo),o=q(Qe),r=q(xs),a=q(_s),l=ee(fn),{trigger:i}=Je(),{play:c}=Vn(),{completeCheck:d}=Ss(),[u,f]=O.useState("scanning"),[m,w]=O.useState(null),g=O.useRef(null),p=O.useRef(0);O.useEffect(()=>{if(e.view==="scanning"&&f("scanning"),e.view==="scanning"&&e.targetCheckId){const j=n.find(T=>T.id===e.targetCheckId)?.specialClassifications?.[0];if(j){const T=To.find(A=>A.id===j.residentId);T&&w({residentName:T.name,classificationType:j.type})}}else w(null)},[e,n]);const v=O.useCallback(()=>{i("error"),c("error"),f("fail"),setTimeout(()=>{f("scanning")},1500)},[i,c]),h=b=>{u==="scanning"&&(g.current===b&&Date.now()-p.current<2e3||(g.current=b,p.current=Date.now(),f("processing"),setTimeout(()=>{const j=b.startsWith("room:")?b.split(":")[1]:b,T=n.find(A=>A.id===j&&A.status!=="complete");if(T){if(i("success"),c("success"),f("success"),o.simpleSubmitEnabled){const A=T.residents.reduce((R,D)=>(R[D.id]="Awake",R),{});t({view:"none"}),d({checkId:T.id,statuses:A,notes:"",onSuccess:()=>{l({message:"Check completed",icon:"check_circle",variant:"success"})}});return}setTimeout(()=>{t({view:"form",type:"scheduled",method:"scan",checkId:T.id,roomName:T.residents[0].location,residents:T.residents,specialClassifications:T.specialClassifications})},800)}else v()},300)))},x=b=>{b instanceof Error?console.log("QR Scanner Error:",b.message):console.log("An unknown QR scanner error occurred:",b)},S=()=>t({view:"none"}),I=()=>{if(e.view==="scanning"&&e.targetCheckId){h(e.targetCheckId);return}const b=r.find(j=>j.status!=="complete"&&j.type!=="supplemental");if(b)h(b.id);else{const j=n.find(T=>T.status!=="complete");j?h(j.id):l({message:"No incomplete checks found to simulate.",icon:"info",variant:"neutral"})}},y=()=>h("invalid-qr-code-id"),C=()=>{if(a.cameraFails)return s.jsxs("div",{className:`${Ie.statusOverlay} ${Ie.failState}`,children:[s.jsx("span",{className:"material-symbols-rounded",children:"no_photography"}),"Camera Error"]});switch(u){case"scanning":return s.jsx(ba,{onDecode:h,onError:x,constraints:{facingMode:"environment"},scanDelay:500});case"processing":return s.jsxs("div",{className:`${Ie.statusOverlay} ${Ie.processingState}`,children:[s.jsx("span",{className:`material-symbols-rounded ${Ie.spinner}`,children:"progress_activity"}),"Processing..."]});case"success":return s.jsxs("div",{className:`${Ie.statusOverlay} ${Ie.successState}`,children:[s.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),"Success!"]});case"fail":return s.jsxs("div",{className:`${Ie.statusOverlay} ${Ie.failState}`,children:[s.jsx("span",{className:"material-symbols-rounded",children:"error"}),"Scan Failed"]});default:return null}};return s.jsxs(Ce.div,{className:Ie.scanView,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[s.jsxs("header",{className:Ie.header,children:[s.jsx("h3",{children:"Scan Room QR Code"}),s.jsx(me,{variant:"on-solid",size:"m",iconOnly:!0,onClick:S,"aria-label":"Close scanner",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx(_t,{children:m&&s.jsxs(Ce.div,{className:Ie.preScanAlert,initial:{y:"-100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"-100%",opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.35},children:[s.jsx("span",{className:"material-symbols-rounded",children:"warning"}),s.jsxs("p",{children:[s.jsx("span",{children:m.residentName}),s.jsx("span",{className:Ie.alertSeparator,children:"|"}),s.jsx("span",{children:m.classificationType})]})]})}),s.jsxs("main",{className:Ie.cameraContainer,children:[s.jsx("div",{className:Ie.viewfinder,"data-scan-state":u,children:C()}),s.jsx("p",{className:Ie.helperText,children:a.cameraFails?"Camera hardware is not responding.":"Point your camera at the room's QR code"})]}),s.jsx("footer",{className:Ie.footer,children:s.jsxs("div",{className:Ie.devControlsContainer,children:[s.jsx("p",{className:Ie.devControlsHeader,children:"Dev controls"}),s.jsxs("div",{className:Ie.devControls,children:[s.jsxs(me,{variant:"on-solid",size:"s",onClick:I,disabled:a.cameraFails,children:[s.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),"Simulate success"]}),s.jsxs(me,{variant:"on-solid",size:"s",onClick:y,disabled:a.cameraFails,children:[s.jsx("span",{className:"material-symbols-rounded",children:"error"}),"Simulate fail"]})]})]})})]})},Yl="_segmentedControlItem_1n9ka_9",Xl="_itemColumn_1n9ka_69",Kl="_segmentedControl_1n9ka_9",Ql="_columnContainer_1n9ka_203",Jl="_gridContainer_1n9ka_259",Zl="_deadCell_1n9ka_357",Mt={segmentedControlItem:Yl,itemColumn:Xl,segmentedControl:Kl,columnContainer:Ql,gridContainer:Jl,deadCell:Zl},gt=({options:e,value:t,onValueChange:n,id:o,layout:r="row",itemDirection:a="row"})=>{const l=u=>{u&&n(u)};let i=Mt.segmentedControl;r==="column"?i=Mt.columnContainer:r==="grid"&&(i=Mt.gridContainer);const c=a==="column"?`${Mt.segmentedControlItem} ${Mt.itemColumn}`:Mt.segmentedControlItem,d=r==="grid"&&e.length%2!==0;return s.jsxs(Wr,{type:"single",className:i,value:t,onValueChange:l,"aria-label":o,id:o,children:[e.map(u=>s.jsxs(Vr,{value:u.value,"aria-label":u.label,className:c,children:[u.icon&&s.jsx("span",{className:"material-symbols-rounded",children:u.icon}),s.jsx("span",{children:u.label})]},u.value)),d&&s.jsx("div",{className:Mt.deadCell,"aria-hidden":"true"})]})},ec=(e,t)=>{O.useLayoutEffect(()=>{if(e){e.style.height="0px";const n=e.scrollHeight;e.style.height=n+"px"}},[e,t])},tc="_container_le1e3_5",nc="_header_le1e3_27",sc="_residentName_le1e3_39",oc="_warningIcon_le1e3_59",rc="_controlSection_le1e3_69",ac="_classificationDetails_le1e3_99",ic="_notesInput_le1e3_125",Ot={container:tc,header:nc,residentName:sc,warningIcon:oc,controlSection:rc,classificationDetails:ac,notesInput:ic},lc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"}],cc=[{value:"Refused",label:"Refused"},{value:"Sleeping",label:"Sleeping"},{value:"Awake",label:"Awake"}],dc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"}],uc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"}],mc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"}],hc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"},{value:"Chilling",label:"Chilling"}],fc=({resident:e,status:t,notes:n,onStatusChange:o,onNotesChange:r,classification:a})=>{const l=!!a,i=O.useRef(null),{residentStatusSet:c,markMultipleLayout:d}=q(Qe);ec(i.current,n);let u;const f=d;switch(c){case"set-2":u=lc;break;case"set-4":u=dc;break;case"set-5":u=uc;break;case"set-6":u=mc;break;case"set-7":u=hc;break;case"set-3":default:u=cc;break}return s.jsxs("div",{className:Ot.container,"data-classified":l,children:[s.jsx("div",{className:Ot.header,children:s.jsxs("h4",{className:Ot.residentName,children:[l&&s.jsx("span",{className:`material-symbols-rounded ${Ot.warningIcon}`,"aria-label":"Special Classification",children:"warning"}),e.name]})}),l&&s.jsx("div",{className:Ot.classificationDetails,children:s.jsxs("p",{children:[s.jsxs("strong",{children:[a.type,":"]})," ",a.details]})}),s.jsx("div",{className:Ot.controlSection,children:s.jsx(gt,{id:`status-group-${e.id}`,options:u,value:t,onValueChange:m=>o(e.id,m),layout:f})}),s.jsx("textarea",{ref:i,id:`notes-${e.id}`,value:n,onChange:m=>r(e.id,m.target.value),placeholder:"Enter optional notes",rows:1,className:Ot.notesInput})]})},pc="_overlay_61m3b_5",gc="_content_61m3b_19",vc="_handleContainer_61m3b_51",xc="_handle_61m3b_51",wc="_header_61m3b_79",bc="_headerTitle_61m3b_91",Cc="_listContainer_61m3b_105",yc="_columnList_61m3b_123",_c="_rowContainer_61m3b_135",Sc="_gridButton_61m3b_151",Ic="_gridContainer_61m3b_161",jc="_deadCell_61m3b_231",Ye={overlay:pc,content:gc,handleContainer:vc,handle:xc,header:wc,headerTitle:bc,listContainer:Cc,columnList:yc,rowContainer:_c,gridButton:Sc,gridContainer:Ic,deadCell:jc},Tc=({isOpen:e,onClose:t,onSelect:n,options:o,layout:r})=>{const{trigger:a}=Je(),l=u=>{a("selection"),n(u),t()},i=()=>{t()},c=r==="grid"&&o.length%2!==0,d=()=>{switch(r){case"row":return Ye.rowContainer;case"column":return Ye.columnList;case"grid":return Ye.gridContainer}};return s.jsx(_t,{children:e&&s.jsxs(s.Fragment,{children:[s.jsx(Ce.div,{className:Ye.overlay,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:i}),s.jsxs(Ce.div,{className:Ye.content,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[s.jsx("div",{className:Ye.handleContainer,children:s.jsx("div",{className:Ye.handle})}),s.jsx("div",{className:Ye.header,children:s.jsx("h3",{className:Ye.headerTitle,children:"Select Status"})}),s.jsx("div",{className:Ye.listContainer,children:r==="column"?s.jsx("div",{className:d(),children:o.map(u=>s.jsx(vt,{label:u.label,onClick:()=>l(u.value)},u.value))}):s.jsxs("div",{className:d(),children:[o.map(u=>s.jsx("button",{className:Ye.gridButton,onClick:()=>l(u.value),children:u.label},u.value)),c&&s.jsx("div",{className:Ye.deadCell})]})})]})]})})},kc="_checkFormView_5x6hp_5",Nc="_header_5x6hp_27",Ec="_headerTitle_5x6hp_47",Rc="_formContent_5x6hp_67",Hc="_roomHeader_5x6hp_89",Ac="_badgeWrapper_5x6hp_117",Mc="_statusLabel_5x6hp_135",Oc="_warningBlock_5x6hp_201",Lc="_sectionHeader_5x6hp_255",Dc="_checkTypeSection_5x6hp_271",Bc="_markMultipleContainer_5x6hp_291",zc="_residentListContainer_5x6hp_305",$c="_footer_5x6hp_435",He={checkFormView:kc,header:Nc,headerTitle:Ec,formContent:Rc,roomHeader:Hc,badgeWrapper:Ac,statusLabel:Mc,warningBlock:Oc,sectionHeader:Lc,checkTypeSection:Dc,markMultipleContainer:Bc,residentListContainer:zc,footer:$c},Pc=[{value:"Locked down",label:"Locked down"},{value:"Random",label:"Random"}],Fc=[{value:"Noise Complaint",label:"Noise Complaint"},{value:"Resident Request",label:"Resident Request"},{value:"Medical Alert",label:"Medical Alert"},{value:"Security Concern",label:"Security Concern"},{value:"Other",label:"Other"}],Wc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"}],Vc=[{value:"Refused",label:"Refused"},{value:"Sleeping",label:"Sleeping"},{value:"Awake",label:"Awake"}],Gc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"}],qc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"}],Uc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"}],Yc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"},{value:"Chilling",label:"Chilling"}],Xc=({checkData:e})=>{const t=ee(It),n=ee(Wn),o=ee(fn),r=q(la),a=ee(ca),l=ee(da),i=q(jo),c=q(pn),{isCheckTypeEnabled:d,markMultipleEnabled:u,residentStatusSet:f,markMultipleLayout:m}=q(Qe),{trigger:w}=Je(),{completeCheck:g}=Ss(),[p,v]=O.useState(!1);let h;switch(f){case"set-2":h=Wc;break;case"set-4":h=Gc;break;case"set-5":h=qc;break;case"set-6":h=Uc;break;case"set-7":h=Yc;break;case"set-3":default:h=Vc;break}const x=O.useRef(null),S=O.useRef(null),[I,y]=O.useState(!1);ya({containerRef:S,footerOffsetVar:"--form-footer-height"});const C=e.type==="scheduled"?r[e.checkId]:void 0,[b,j]=O.useState(()=>C?.statuses||e.residents.reduce((P,K)=>({...P,[K.id]:""}),{})),[T,A]=O.useState(()=>C?.notes||e.residents.reduce((P,K)=>({...P,[K.id]:""}),{})),[R,D]=O.useState(C?.checkType||""),[E,L]=O.useState(""),$=e.type==="scheduled"&&e.method==="manual",U=e.type==="supplemental",se=O.useMemo(()=>U?"supplemental":e.type==="scheduled"&&i.find(K=>K.id===e.checkId)?.status||"pending",[i,e,U]),pe=O.useRef(!1);O.useEffect(()=>()=>{!pe.current&&e.type==="scheduled"&&a({checkId:e.checkId,draft:{statuses:b,notes:T,checkType:R}})},[e,b,T,R,a]),O.useLayoutEffect(()=>{const P=x.current;if(P){const K=P.offsetHeight;document.documentElement.style.setProperty("--form-footer-height",`${K}px`)}return()=>{document.documentElement.style.removeProperty("--form-footer-height")}},[]),O.useLayoutEffect(()=>{const P=S.current;if(!P)return;const K=()=>{const{scrollTop:X,scrollHeight:oe,clientHeight:le}=P,de=oe-X<=le+1,Ge=oe>le;y(Ge&&!de)},N=new ResizeObserver(K);return N.observe(P),P.addEventListener("scroll",K,{passive:!0}),K(),()=>{N.disconnect(),P.removeEventListener("scroll",K)}},[]);const we=()=>{t({view:"none"})},be=(P,K)=>{j(N=>({...N,[P]:K}))},ke=(P,K)=>{A(N=>({...N,[P]:K}))},We=P=>{if(!P)return;const K={...b};e.residents.forEach(N=>{K[N.id]=P}),j(K)},ye=O.useMemo(()=>!(!e.residents.every(K=>b[K.id])||d&&!R||U&&!E),[b,e.residents,d,R,U,E]),Ve=()=>{if(!ye)return;pe.current=!0,e.type==="scheduled"&&l(e.checkId),w("success");const P=Object.values(T).filter(K=>K.trim()!=="").join(`
---
`);e.type==="scheduled"?(g({checkId:e.checkId,statuses:b,notes:P}),t({view:"none"})):e.type==="supplemental"&&(n({type:"CHECK_SUPPLEMENTAL_ADD",payload:{roomId:e.roomId,statuses:b,notes:P,incidentType:E}}),t({view:"none"}),c!=="offline"&&o({message:`Supplemental check for ${e.roomName} saved.`,icon:"task_alt",variant:"success"}))};return s.jsxs(Ce.div,{className:He.checkFormView,style:{height:"var(--visual-viewport-height, 100dvh)"},initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[s.jsxs("header",{className:He.header,children:[s.jsx(me,{variant:"tertiary",size:"m",iconOnly:!0,onClick:we,"aria-label":"Back",children:s.jsx("span",{className:"material-symbols-rounded",children:"arrow_back"})}),s.jsx("h3",{className:He.headerTitle,children:"Record Check"})]}),s.jsxs("main",{className:He.formContent,ref:S,children:[s.jsxs("h2",{className:He.roomHeader,children:[e.roomName,s.jsxs("div",{className:He.badgeWrapper,children:[$&&s.jsx("span",{className:He.statusLabel,"data-variant":"info",children:"Manual"}),U&&s.jsx("span",{className:He.statusLabel,"data-variant":"info",children:"Supplemental"})]})]}),!U&&se==="early"&&s.jsxs("div",{className:He.warningBlock,children:[s.jsx("span",{className:"material-symbols-rounded","aria-hidden":"true",children:"info"}),s.jsx("span",{children:"This room was checked recently. Are you sure you want to check now?"})]}),U&&s.jsxs("div",{className:He.incidentTypeSection,children:[s.jsx("label",{htmlFor:"incident-type-select",className:He.sectionLabel,children:"Reason for Check"}),s.jsxs("select",{id:"incident-type-select",className:He.selectInput,value:E,onChange:P=>L(P.target.value),children:[s.jsx("option",{value:"",disabled:!0,children:"Select a reason..."}),Fc.map(P=>s.jsx("option",{value:P.value,children:P.label},P.value))]})]}),d&&s.jsxs("div",{className:He.checkTypeSection,children:[s.jsx("label",{htmlFor:"check-type-control",className:He.sectionHeader,children:"Check type"}),s.jsx(gt,{id:"check-type-control",options:Pc,value:R,onValueChange:D})]}),u&&e.residents.length>1&&s.jsx("div",{className:He.markMultipleContainer,children:s.jsx(me,{variant:"secondary",size:"m",onClick:()=>v(!0),children:"Mark all"})}),s.jsx(Tc,{isOpen:p,onClose:()=>v(!1),onSelect:We,options:h,layout:m}),s.jsx("div",{className:He.residentListContainer,children:e.residents.map(P=>{const K=e.type==="scheduled"?e.specialClassifications?.find(N=>N.residentId===P.id):void 0;return s.jsx(fc,{resident:P,status:b[P.id],notes:T[P.id],onStatusChange:be,onNotesChange:ke,classification:K},P.id)})})]}),s.jsx("footer",{className:He.footer,ref:x,"data-scrolled":I,children:s.jsx(me,{variant:"primary",size:"m",onClick:Ve,disabled:!ye,children:"Save"})})]})},Gn=0,jt=1,Kt=2,Ao=4;function Us(e){return()=>e}function Kc(e){e()}function Mo(e,t){return n=>e(t(n))}function Ys(e,t){return()=>e(t)}function Qc(e,t){return n=>e(t,n)}function Is(e){return e!==void 0}function Jc(...e){return()=>{e.map(Kc)}}function Qt(){}function qn(e,t){return t(e),e}function Zc(e,t){return t(e)}function fe(...e){return e}function re(e,t){return e(jt,t)}function Q(e,t){e(Gn,t)}function js(e){e(Kt)}function Se(e){return e(Ao)}function z(e,t){return re(e,Qc(t,Gn))}function st(e,t){const n=e(jt,o=>{n(),t(o)});return n}function Xs(e){let t,n;return o=>r=>{t=r,n&&clearTimeout(n),n=setTimeout(()=>{o(t)},e)}}function Oo(e,t){return e===t}function he(e=Oo){let t;return n=>o=>{e(t,o)||(t=o,n(o))}}function V(e){return t=>n=>{e(n)&&t(n)}}function B(e){return t=>Mo(t,e)}function ut(e){return t=>()=>{t(e)}}function k(e,...t){const n=ed(...t);return(o,r)=>{switch(o){case Kt:js(e);return;case jt:return re(e,n(r))}}}function mt(e,t){return n=>o=>{n(t=e(t,o))}}function $t(e){return t=>n=>{e>0?e--:t(n)}}function xt(e){let t=null,n;return o=>r=>{t=r,!n&&(n=setTimeout(()=>{n=void 0,o(t)},e))}}function J(...e){const t=new Array(e.length);let n=0,o=null;const r=Math.pow(2,e.length)-1;return e.forEach((a,l)=>{const i=Math.pow(2,l);re(a,c=>{const d=n;n=n|i,t[l]=c,d!==r&&n===r&&o&&(o(),o=null)})}),a=>l=>{const i=()=>{a([l].concat(t))};n===r?i():o=i}}function ed(...e){return t=>e.reduceRight(Zc,t)}function td(e){let t,n;const o=()=>t?.();return function(r,a){switch(r){case jt:return a?n===a?void 0:(o(),n=a,t=re(e,a),t):(o(),Qt);case Kt:o(),n=null;return}}}function H(e){let t=e;const n=Z();return(o,r)=>{switch(o){case Gn:t=r;break;case jt:{r(t);break}case Ao:return t}return n(o,r)}}function Le(e,t){return qn(H(t),n=>z(e,n))}function Z(){const e=[];return(t,n)=>{switch(t){case Gn:e.slice().forEach(o=>{o(n)});return;case Kt:e.splice(0,e.length);return;case jt:return e.push(n),()=>{const o=e.indexOf(n);o>-1&&e.splice(o,1)}}}}function Fe(e){return qn(Z(),t=>z(e,t))}function ne(e,t=[],{singleton:n}={singleton:!0}){return{constructor:e,dependencies:t,id:nd(),singleton:n}}const nd=()=>Symbol();function sd(e){const t=new Map,n=({constructor:o,dependencies:r,id:a,singleton:l})=>{if(l&&t.has(a))return t.get(a);const i=o(r.map(c=>n(c)));return l&&t.set(a,i),i};return n(e)}function Te(...e){const t=Z(),n=new Array(e.length);let o=0;const r=Math.pow(2,e.length)-1;return e.forEach((a,l)=>{const i=Math.pow(2,l);re(a,c=>{n[l]=c,o=o|i,o===r&&Q(t,n)})}),function(a,l){switch(a){case Kt:{js(t);return}case jt:return o===r&&l(n),re(t,l)}}}function F(e,t=Oo){return k(e,he(t))}function ds(...e){return function(t,n){switch(t){case Kt:return;case jt:return Jc(...e.map(o=>re(o,n)))}}}var $e=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))($e||{});const od={0:"debug",3:"error",1:"log",2:"warn"},rd=()=>typeof globalThis>"u"?window:globalThis,Tt=ne(()=>{const e=H(3);return{log:H((t,n,o=1)=>{var r;const a=(r=rd().VIRTUOSO_LOG_LEVEL)!=null?r:Se(e);o>=a&&console[od[o]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)}),logLevel:e}},[],{singleton:!0});function Pt(e,t,n){return Ts(e,t,n).callbackRef}function Ts(e,t,n){const o=_.useRef(null);let r=l=>{};const a=_.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(l=>{const i=()=>{const c=l[0].target;c.offsetParent!==null&&e(c)};n?i():requestAnimationFrame(i)}):null,[e,n]);return r=l=>{l&&t?(a?.observe(l),o.current=l):(o.current&&a?.unobserve(o.current),o.current=null)},{callbackRef:r,ref:o}}function ad(e,t,n,o,r,a,l,i,c){const d=_.useCallback(u=>{const f=id(u.children,t,i?"offsetWidth":"offsetHeight",r);let m=u.parentElement;for(;!m.dataset.virtuosoScroller;)m=m.parentElement;const w=m.lastElementChild.dataset.viewportType==="window";let g;w&&(g=m.ownerDocument.defaultView);const p=l?i?l.scrollLeft:l.scrollTop:w?i?g.scrollX||g.document.documentElement.scrollLeft:g.scrollY||g.document.documentElement.scrollTop:i?m.scrollLeft:m.scrollTop,v=l?i?l.scrollWidth:l.scrollHeight:w?i?g.document.documentElement.scrollWidth:g.document.documentElement.scrollHeight:i?m.scrollWidth:m.scrollHeight,h=l?i?l.offsetWidth:l.offsetHeight:w?i?g.innerWidth:g.innerHeight:i?m.offsetWidth:m.offsetHeight;o({scrollHeight:v,scrollTop:Math.max(p,0),viewportHeight:h}),a?.(i?Ks("column-gap",getComputedStyle(u).columnGap,r):Ks("row-gap",getComputedStyle(u).rowGap,r)),f!==null&&e(f)},[e,t,r,a,l,o,i]);return Ts(d,n,c)}function id(e,t,n,o){const r=e.length;if(r===0)return null;const a=[];for(let l=0;l<r;l++){const i=e.item(l);if(i.dataset.index===void 0)continue;const c=parseInt(i.dataset.index),d=parseFloat(i.dataset.knownSize),u=t(i,n);if(u===0&&o("Zero-sized element, this should not happen",{child:i},$e.ERROR),u===d)continue;const f=a[a.length-1];a.length===0||f.size!==u||f.endIndex!==c-1?a.push({endIndex:c,size:u,startIndex:c}):a[a.length-1].endIndex++}return a}function Ks(e,t,n){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&n(`${e} was not resolved to pixel value correctly`,t,$e.WARN),t==="normal"?0:parseInt(t??"0",10)}function Lo(e,t,n){const o=_.useRef(null),r=_.useCallback(c=>{if(!(c!=null&&c.offsetParent))return;const d=c.getBoundingClientRect(),u=d.width;let f,m;if(t){const w=t.getBoundingClientRect(),g=d.top-w.top;m=w.height-Math.max(0,g),f=g+t.scrollTop}else{const w=l.current.ownerDocument.defaultView;m=w.innerHeight-Math.max(0,d.top),f=d.top+w.scrollY}o.current={offsetTop:f,visibleHeight:m,visibleWidth:u},e(o.current)},[e,t]),{callbackRef:a,ref:l}=Ts(r,!0,n),i=_.useCallback(()=>{r(l.current)},[r,l]);return _.useEffect(()=>{var c;if(t){t.addEventListener("scroll",i);const d=new ResizeObserver(()=>{requestAnimationFrame(i)});return d.observe(t),()=>{t.removeEventListener("scroll",i),d.unobserve(t)}}else{const d=(c=l.current)==null?void 0:c.ownerDocument.defaultView;return d?.addEventListener("scroll",i),d?.addEventListener("resize",i),()=>{d?.removeEventListener("scroll",i),d?.removeEventListener("resize",i)}}},[i,t,l]),a}const Be=ne(()=>{const e=Z(),t=Z(),n=H(0),o=Z(),r=H(0),a=Z(),l=Z(),i=H(0),c=H(0),d=H(0),u=H(0),f=Z(),m=Z(),w=H(!1),g=H(!1),p=H(!1);return z(k(e,B(({scrollTop:v})=>v)),t),z(k(e,B(({scrollHeight:v})=>v)),l),z(t,r),{deviation:n,fixedFooterHeight:d,fixedHeaderHeight:c,footerHeight:u,headerHeight:i,horizontalDirection:g,scrollBy:m,scrollContainerState:e,scrollHeight:l,scrollingInProgress:w,scrollTo:f,scrollTop:t,skipAnimationFrameInResizeObserver:p,smoothScrollTargetReached:o,statefulScrollTop:r,viewportHeight:a}},[],{singleton:!0}),cn={lvl:0};function Do(e,t){const n=e.length;if(n===0)return[];let{index:o,value:r}=t(e[0]);const a=[];for(let l=1;l<n;l++){const{index:i,value:c}=t(e[l]);a.push({end:i-1,start:o,value:r}),o=i,r=c}return a.push({end:1/0,start:o,value:r}),a}function ce(e){return e===cn}function dn(e,t){if(!ce(e))return t===e.k?e.v:t<e.k?dn(e.l,t):dn(e.r,t)}function ot(e,t,n="k"){if(ce(e))return[-1/0,void 0];if(Number(e[n])===t)return[e.k,e.v];if(Number(e[n])<t){const o=ot(e.r,t,n);return o[0]===-1/0?[e.k,e.v]:o}return ot(e.l,t,n)}function Pe(e,t,n){return ce(e)?$o(t,n,1):t===e.k?Re(e,{k:t,v:n}):t<e.k?Qs(Re(e,{l:Pe(e.l,t,n)})):Qs(Re(e,{r:Pe(e.r,t,n)}))}function qt(){return cn}function Un(e,t,n){if(ce(e))return[];const o=ot(e,t)[0];return ld(ms(e,o,n))}function us(e,t){if(ce(e))return cn;const{k:n,l:o,r}=e;if(t===n){if(ce(o))return r;if(ce(r))return o;{const[a,l]=zo(o);return Ln(Re(e,{k:a,l:Bo(o),v:l}))}}else return t<n?Ln(Re(e,{l:us(o,t)})):Ln(Re(e,{r:us(r,t)}))}function zt(e){return ce(e)?[]:[...zt(e.l),{k:e.k,v:e.v},...zt(e.r)]}function ms(e,t,n){if(ce(e))return[];const{k:o,l:r,r:a,v:l}=e;let i=[];return o>t&&(i=i.concat(ms(r,t,n))),o>=t&&o<=n&&i.push({k:o,v:l}),o<=n&&(i=i.concat(ms(a,t,n))),i}function Ln(e){const{l:t,lvl:n,r:o}=e;if(o.lvl>=n-1&&t.lvl>=n-1)return e;if(n>o.lvl+1){if(Qn(t))return Po(Re(e,{lvl:n-1}));if(!ce(t)&&!ce(t.r))return Re(t.r,{l:Re(t,{r:t.r.l}),lvl:n,r:Re(e,{l:t.r.r,lvl:n-1})});throw new Error("Unexpected empty nodes")}else{if(Qn(e))return hs(Re(e,{lvl:n-1}));if(!ce(o)&&!ce(o.l)){const r=o.l,a=Qn(r)?o.lvl-1:o.lvl;return Re(r,{l:Re(e,{lvl:n-1,r:r.l}),lvl:r.lvl+1,r:hs(Re(o,{l:r.r,lvl:a}))})}else throw new Error("Unexpected empty nodes")}}function Re(e,t){return $o(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function Bo(e){return ce(e.r)?e.l:Ln(Re(e,{r:Bo(e.r)}))}function Qn(e){return ce(e)||e.lvl>e.r.lvl}function zo(e){return ce(e.r)?[e.k,e.v]:zo(e.r)}function $o(e,t,n,o=cn,r=cn){return{k:e,l:o,lvl:n,r,v:t}}function Qs(e){return hs(Po(e))}function Po(e){const{l:t}=e;return!ce(t)&&t.lvl===e.lvl?Re(t,{r:Re(e,{l:t.r})}):e}function hs(e){const{lvl:t,r:n}=e;return!ce(n)&&!ce(n.r)&&n.lvl===t&&n.r.lvl===t?Re(n,{l:Re(e,{r:n.l}),lvl:t+1}):e}function ld(e){return Do(e,({k:t,v:n})=>({index:t,value:n}))}function Fo(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function un(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const ks=ne(()=>({recalcInProgress:H(!1)}),[],{singleton:!0});function Wo(e,t,n){return e[zn(e,t,n)]}function zn(e,t,n,o=0){let r=e.length-1;for(;o<=r;){const a=Math.floor((o+r)/2),l=e[a],i=n(l,t);if(i===0)return a;if(i===-1){if(r-o<2)return a-1;r=a-1}else{if(r===o)return a;o=a+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function cd(e,t,n,o){const r=zn(e,t,o),a=zn(e,n,o,r);return e.slice(r,a+1)}function St(e,t){return Math.round(e.getBoundingClientRect()[t])}function Yn(e){return!ce(e.groupOffsetTree)}function Ns({index:e},t){return t===e?0:t<e?-1:1}function dd(){return{groupIndices:[],groupOffsetTree:qt(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:qt()}}function ud(e,t){let n=ce(e)?0:1/0;for(const o of t){const{endIndex:r,size:a,startIndex:l}=o;if(n=Math.min(n,l),ce(e)){e=Pe(e,0,a);continue}const i=Un(e,l-1,r+1);if(i.some(xd(o)))continue;let c=!1,d=!1;for(const{end:u,start:f,value:m}of i)c?(r>=f||a===m)&&(e=us(e,f)):(d=m!==a,c=!0),u>r&&r>=f&&m!==a&&(e=Pe(e,r+1,m));d&&(e=Pe(e,l,a))}return[e,n]}function md(e){return typeof e.groupIndex<"u"}function hd({offset:e},t){return t===e?0:t<e?-1:1}function mn(e,t,n){if(t.length===0)return 0;const{index:o,offset:r,size:a}=Wo(t,e,Ns),l=e-o,i=a*l+(l-1)*n+r;return i>0?i+n:i}function Vo(e,t){if(!Yn(t))return e;let n=0;for(;t.groupIndices[n]<=e+n;)n++;return e+n}function Go(e,t,n){if(md(e))return t.groupIndices[e.groupIndex]+1;{const o=e.index==="LAST"?n:e.index;let r=Vo(o,t);return r=Math.max(0,r,Math.min(n,r)),r}}function fd(e,t,n,o=0){return o>0&&(t=Math.max(t,Wo(e,o,Ns).offset)),Do(cd(e,t,n,hd),vd)}function pd(e,[t,n,o,r]){t.length>0&&o("received item sizes",t,$e.DEBUG);const a=e.sizeTree;let l=a,i=0;if(n.length>0&&ce(a)&&t.length===2){const m=t[0].size,w=t[1].size;l=n.reduce((g,p)=>Pe(Pe(g,p,m),p+1,w),l)}else[l,i]=ud(l,t);if(l===a)return e;const{lastIndex:c,lastOffset:d,lastSize:u,offsetTree:f}=fs(e.offsetTree,i,l,r);return{groupIndices:n,groupOffsetTree:n.reduce((m,w)=>Pe(m,w,mn(w,f,r)),qt()),lastIndex:c,lastOffset:d,lastSize:u,offsetTree:f,sizeTree:l}}function gd(e){return zt(e).map(({k:t,v:n},o,r)=>{const a=r[o+1];return{endIndex:a?a.k-1:1/0,size:n,startIndex:t}})}function Js(e,t){let n=0,o=0;for(;n<e;)n+=t[o+1]-t[o]-1,o++;return o-(n===e?0:1)}function fs(e,t,n,o){let r=e,a=0,l=0,i=0,c=0;if(t!==0){c=zn(r,t-1,Ns),i=r[c].offset;const d=ot(n,t-1);a=d[0],l=d[1],r.length&&r[c].size===ot(n,t)[1]&&(c-=1),r=r.slice(0,c+1)}else r=[];for(const{start:d,value:u}of Un(n,t,1/0)){const f=d-a,m=f*l+i+f*o;r.push({index:d,offset:m,size:u}),a=d,i=m,l=u}return{lastIndex:a,lastOffset:i,lastSize:l,offsetTree:r}}function vd(e){return{index:e.index,value:e}}function xd(e){const{endIndex:t,size:n,startIndex:o}=e;return r=>r.start===o&&(r.end===t||r.end===1/0)&&r.value===n}const wd={offsetHeight:"height",offsetWidth:"width"},ht=ne(([{log:e},{recalcInProgress:t}])=>{const n=Z(),o=Z(),r=Le(o,0),a=Z(),l=Z(),i=H(0),c=H([]),d=H(void 0),u=H(void 0),f=H((y,C)=>St(y,wd[C])),m=H(void 0),w=H(0),g=dd(),p=Le(k(n,J(c,e,w),mt(pd,g),he()),g),v=Le(k(c,he(),mt((y,C)=>({current:C,prev:y.current}),{current:[],prev:[]}),B(({prev:y})=>y)),[]);z(k(c,V(y=>y.length>0),J(p,w),B(([y,C,b])=>{const j=y.reduce((T,A,R)=>Pe(T,A,mn(A,C.offsetTree,b)||R),qt());return{...C,groupIndices:y,groupOffsetTree:j}})),p),z(k(o,J(p),V(([y,{lastIndex:C}])=>y<C),B(([y,{lastIndex:C,lastSize:b}])=>[{endIndex:C,size:b,startIndex:y}])),n),z(d,u);const h=Le(k(d,B(y=>y===void 0)),!0);z(k(u,V(y=>y!==void 0&&ce(Se(p).sizeTree)),B(y=>[{endIndex:0,size:y,startIndex:0}])),n);const x=Fe(k(n,J(p),mt(({sizes:y},[C,b])=>({changed:b!==y,sizes:b}),{changed:!1,sizes:g}),B(y=>y.changed)));re(k(i,mt((y,C)=>({diff:y.prev-C,prev:C}),{diff:0,prev:0}),B(y=>y.diff)),y=>{const{groupIndices:C}=Se(p);if(y>0)Q(t,!0),Q(a,y+Js(y,C));else if(y<0){const b=Se(v);b.length>0&&(y-=Js(-y,b)),Q(l,y)}}),re(k(i,J(e)),([y,C])=>{y<0&&C("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:i},$e.ERROR)});const S=Fe(a);z(k(a,J(p),B(([y,C])=>{const b=C.groupIndices.length>0,j=[],T=C.lastSize;if(b){const A=dn(C.sizeTree,0);let R=0,D=0;for(;R<y;){const L=C.groupIndices[D],$=C.groupIndices.length===D+1?1/0:C.groupIndices[D+1]-L-1;j.push({endIndex:L,size:A,startIndex:L}),j.push({endIndex:L+1+$-1,size:T,startIndex:L+1}),D++,R+=$+1}const E=zt(C.sizeTree);return R!==y&&E.shift(),E.reduce((L,{k:$,v:U})=>{let se=L.ranges;return L.prevSize!==0&&(se=[...L.ranges,{endIndex:$+y-1,size:L.prevSize,startIndex:L.prevIndex}]),{prevIndex:$+y,prevSize:U,ranges:se}},{prevIndex:y,prevSize:0,ranges:j}).ranges}return zt(C.sizeTree).reduce((A,{k:R,v:D})=>({prevIndex:R+y,prevSize:D,ranges:[...A.ranges,{endIndex:R+y-1,size:A.prevSize,startIndex:A.prevIndex}]}),{prevIndex:0,prevSize:T,ranges:[]}).ranges})),n);const I=Fe(k(l,J(p,w),B(([y,{offsetTree:C},b])=>{const j=-y;return mn(j,C,b)})));return z(k(l,J(p,w),B(([y,C,b])=>{if(C.groupIndices.length>0){if(ce(C.sizeTree))return C;let j=qt();const T=Se(v);let A=0,R=0,D=0;for(;A<-y;){D=T[R];const E=T[R+1]-D-1;R++,A+=E+1}if(j=zt(C.sizeTree).reduce((E,{k:L,v:$})=>Pe(E,Math.max(0,L+y),$),j),A!==-y){const E=dn(C.sizeTree,D);j=Pe(j,0,E);const L=ot(C.sizeTree,-y+1)[1];j=Pe(j,1,L)}return{...C,sizeTree:j,...fs(C.offsetTree,0,j,b)}}else{const j=zt(C.sizeTree).reduce((T,{k:A,v:R})=>Pe(T,Math.max(0,A+y),R),qt());return{...C,sizeTree:j,...fs(C.offsetTree,0,j,b)}}})),p),{beforeUnshiftWith:S,data:m,defaultItemSize:u,firstItemIndex:i,fixedItemSize:d,gap:w,groupIndices:c,itemSize:f,listRefresh:x,shiftWith:l,shiftWithOffset:I,sizeRanges:n,sizes:p,statefulTotalCount:r,totalCount:o,trackItemSizes:h,unshiftWith:a}},fe(Tt,ks),{singleton:!0});function bd(e){return e.reduce((t,n)=>(t.groupIndices.push(t.totalCount),t.totalCount+=n+1,t),{groupIndices:[],totalCount:0})}const qo=ne(([{groupIndices:e,sizes:t,totalCount:n},{headerHeight:o,scrollTop:r}])=>{const a=Z(),l=Z(),i=Fe(k(a,B(bd)));return z(k(i,B(c=>c.totalCount)),n),z(k(i,B(c=>c.groupIndices)),e),z(k(Te(r,t,o),V(([c,d])=>Yn(d)),B(([c,d,u])=>ot(d.groupOffsetTree,Math.max(c-u,0),"v")[0]),he(),B(c=>[c])),l),{groupCounts:a,topItemsIndexes:l}},fe(ht,Be)),kt=ne(([{log:e}])=>{const t=H(!1),n=Fe(k(t,V(o=>o),he()));return re(t,o=>{o&&Se(e)("props updated",{},$e.DEBUG)}),{didMount:n,propsReady:t}},fe(Tt),{singleton:!0}),Cd=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function Uo(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!Cd)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const gn=ne(([{gap:e,listRefresh:t,sizes:n,totalCount:o},{fixedFooterHeight:r,fixedHeaderHeight:a,footerHeight:l,headerHeight:i,scrollingInProgress:c,scrollTo:d,smoothScrollTargetReached:u,viewportHeight:f},{log:m}])=>{const w=Z(),g=Z(),p=H(0);let v=null,h=null,x=null;function S(){v&&(v(),v=null),x&&(x(),x=null),h&&(clearTimeout(h),h=null),Q(c,!1)}return z(k(w,J(n,f,o,p,i,l,m),J(e,a,r),B(([[I,y,C,b,j,T,A,R],D,E,L])=>{const $=Uo(I),{align:U,behavior:se,offset:pe}=$,we=b-1,be=Go($,y,we);let ke=mn(be,y.offsetTree,D)+T;U==="end"?(ke+=E+ot(y.sizeTree,be)[1]-C+L,be===we&&(ke+=A)):U==="center"?ke+=(E+ot(y.sizeTree,be)[1]-C+L)/2:ke-=j,pe&&(ke+=pe);const We=ye=>{S(),ye?(R("retrying to scroll to",{location:I},$e.DEBUG),Q(w,I)):(Q(g,!0),R("list did not change, scroll successful",{},$e.DEBUG))};if(S(),se==="smooth"){let ye=!1;x=re(t,Ve=>{ye=ye||Ve}),v=st(u,()=>{We(ye)})}else v=st(k(t,yd(150)),We);return h=setTimeout(()=>{S()},1200),Q(c,!0),R("scrolling from index to",{behavior:se,index:be,top:ke},$e.DEBUG),{behavior:se,top:ke}})),d),{scrollTargetReached:g,scrollToIndex:w,topListHeight:p}},fe(ht,Be,Tt),{singleton:!0});function yd(e){return t=>{const n=setTimeout(()=>{t(!1)},e);return o=>{o&&(t(!0),clearTimeout(n))}}}function Es(e,t){e==0?t():requestAnimationFrame(()=>{Es(e-1,t)})}function Rs(e,t){const n=t-1;return typeof e=="number"?e:e.index==="LAST"?n:e.index}const vn=ne(([{defaultItemSize:e,listRefresh:t,sizes:n},{scrollTop:o},{scrollTargetReached:r,scrollToIndex:a},{didMount:l}])=>{const i=H(!0),c=H(0),d=H(!0);return z(k(l,J(c),V(([u,f])=>!!f),ut(!1)),i),z(k(l,J(c),V(([u,f])=>!!f),ut(!1)),d),re(k(Te(t,l),J(i,n,e,d),V(([[,u],f,{sizeTree:m},w,g])=>u&&(!ce(m)||Is(w))&&!f&&!g),J(c)),([,u])=>{st(r,()=>{Q(d,!0)}),Es(4,()=>{st(o,()=>{Q(i,!0)}),Q(a,u)})}),{initialItemFinalLocationReached:d,initialTopMostItemIndex:c,scrolledToInitialItem:i}},fe(ht,Be,gn,kt),{singleton:!0});function Yo(e,t){return Math.abs(e-t)<1.01}const hn="up",an="down",_d="none",Sd={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},Id=0,xn=ne(([{footerHeight:e,headerHeight:t,scrollBy:n,scrollContainerState:o,scrollTop:r,viewportHeight:a}])=>{const l=H(!1),i=H(!0),c=Z(),d=Z(),u=H(4),f=H(Id),m=Le(k(ds(k(F(r),$t(1),ut(!0)),k(F(r),$t(1),ut(!1),Xs(100))),he()),!1),w=Le(k(ds(k(n,ut(!0)),k(n,ut(!1),Xs(200))),he()),!1);z(k(Te(F(r),F(f)),B(([x,S])=>x<=S),he()),i),z(k(i,xt(50)),d);const g=Fe(k(Te(o,F(a),F(t),F(e),F(u)),mt((x,[{scrollHeight:S,scrollTop:I},y,C,b,j])=>{const T=I+y-S>-j,A={scrollHeight:S,scrollTop:I,viewportHeight:y};if(T){let D,E;return I>x.state.scrollTop?(D="SCROLLED_DOWN",E=x.state.scrollTop-I):(D="SIZE_DECREASED",E=x.state.scrollTop-I||x.scrollTopDelta),{atBottom:!0,atBottomBecause:D,scrollTopDelta:E,state:A}}let R;return A.scrollHeight>x.state.scrollHeight?R="SIZE_INCREASED":y<x.state.viewportHeight?R="VIEWPORT_HEIGHT_DECREASING":I<x.state.scrollTop?R="SCROLLING_UPWARDS":R="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:R,state:A}},Sd),he((x,S)=>x&&x.atBottom===S.atBottom))),p=Le(k(o,mt((x,{scrollHeight:S,scrollTop:I,viewportHeight:y})=>{if(Yo(x.scrollHeight,S))return{changed:!1,jump:0,scrollHeight:S,scrollTop:I};{const C=S-(I+y)<1;return x.scrollTop!==I&&C?{changed:!0,jump:x.scrollTop-I,scrollHeight:S,scrollTop:I}:{changed:!0,jump:0,scrollHeight:S,scrollTop:I}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),V(x=>x.changed),B(x=>x.jump)),0);z(k(g,B(x=>x.atBottom)),l),z(k(l,xt(50)),c);const v=H(an);z(k(o,B(({scrollTop:x})=>x),he(),mt((x,S)=>Se(w)?{direction:x.direction,prevScrollTop:S}:{direction:S<x.prevScrollTop?hn:an,prevScrollTop:S},{direction:an,prevScrollTop:0}),B(x=>x.direction)),v),z(k(o,xt(50),ut(_d)),v);const h=H(0);return z(k(m,V(x=>!x),ut(0)),h),z(k(r,xt(100),J(m),V(([x,S])=>!!S),mt(([x,S],[I])=>[S,I],[0,0]),B(([x,S])=>S-x)),h),{atBottomState:g,atBottomStateChange:c,atBottomThreshold:u,atTopStateChange:d,atTopThreshold:f,isAtBottom:l,isAtTop:i,isScrolling:m,lastJumpDueToItemResize:p,scrollDirection:v,scrollVelocity:h}},fe(Be)),$n="top",Pn="bottom",Zs="none";function eo(e,t,n){return typeof e=="number"?n===hn&&t===$n||n===an&&t===Pn?e:0:n===hn?t===$n?e.main:e.reverse:t===Pn?e.main:e.reverse}function to(e,t){var n;return typeof e=="number"?e:(n=e[t])!=null?n:0}const Hs=ne(([{deviation:e,fixedHeaderHeight:t,headerHeight:n,scrollTop:o,viewportHeight:r}])=>{const a=Z(),l=H(0),i=H(0),c=H(0),d=Le(k(Te(F(o),F(r),F(n),F(a,un),F(c),F(l),F(t),F(e),F(i)),B(([u,f,m,[w,g],p,v,h,x,S])=>{const I=u-x,y=v+h,C=Math.max(m-I,0);let b=Zs;const j=to(S,$n),T=to(S,Pn);return w-=x,w+=m+h,g+=m+h,g-=x,w>u+y-j&&(b=hn),g<u-C+f+T&&(b=an),b!==Zs?[Math.max(I-m-eo(p,$n,b)-j,0),I-C-h+f+eo(p,Pn,b)+T]:null}),V(u=>u!=null),he(un)),[0,0]);return{increaseViewportBy:i,listBoundary:a,overscan:c,topListHeight:l,visibleRange:d}},fe(Be),{singleton:!0});function jd(e,t,n){if(Yn(t)){const o=Vo(e,t);return[{index:ot(t.groupOffsetTree,o)[0],offset:0,size:0},{data:n?.[0],index:o,offset:0,size:0}]}return[{data:n?.[0],index:e,offset:0,size:0}]}const Jn={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function Dn(e,t,n,o,r,a){const{lastIndex:l,lastOffset:i,lastSize:c}=r;let d=0,u=0;if(e.length>0){d=e[0].offset;const p=e[e.length-1];u=p.offset+p.size}const f=n-l,m=i+f*c+(f-1)*o,w=d,g=m-u;return{bottom:u,firstItemIndex:a,items:no(e,r,a),offsetBottom:g,offsetTop:d,top:w,topItems:no(t,r,a),topListHeight:t.reduce((p,v)=>v.size+p,0),totalCount:n}}function Xo(e,t,n,o,r,a){let l=0;if(n.groupIndices.length>0)for(const u of n.groupIndices){if(u-l>=e)break;l++}const i=e+l,c=Rs(t,i),d=Array.from({length:i}).map((u,f)=>({data:a[f+c],index:f+c,offset:0,size:0}));return Dn(d,[],i,r,n,o)}function no(e,t,n){if(e.length===0)return[];if(!Yn(t))return e.map(d=>({...d,index:d.index+n,originalIndex:d.index}));const o=e[0].index,r=e[e.length-1].index,a=[],l=Un(t.groupOffsetTree,o,r);let i,c=0;for(const d of e){(!i||i.end<d.index)&&(i=l.shift(),c=t.groupIndices.indexOf(i.start));let u;d.index===i.start?u={index:c,type:"group"}:u={groupIndex:c,index:d.index-(c+1)+n},a.push({...u,data:d.data,offset:d.offset,originalIndex:d.index,size:d.size})}return a}const Ft=ne(([{data:e,firstItemIndex:t,gap:n,sizes:o,totalCount:r},a,{listBoundary:l,topListHeight:i,visibleRange:c},{initialTopMostItemIndex:d,scrolledToInitialItem:u},{topListHeight:f},m,{didMount:w},{recalcInProgress:g}])=>{const p=H([]),v=H(0),h=Z();z(a.topItemsIndexes,p);const x=Le(k(Te(w,g,F(c,un),F(r),F(o),F(d),u,F(p),F(t),F(n),e),V(([C,b,,j,,,,,,,T])=>{const A=T&&T.length!==j;return C&&!b&&!A}),B(([,,[C,b],j,T,A,R,D,E,L,$])=>{const U=T,{offsetTree:se,sizeTree:pe}=U,we=Se(v);if(j===0)return{...Jn,totalCount:j};if(C===0&&b===0)return we===0?{...Jn,totalCount:j}:Xo(we,A,T,E,L,$||[]);if(ce(pe))return we>0?null:Dn(jd(Rs(A,j),U,$),[],j,L,U,E);const be=[];if(D.length>0){const Ze=D[0],P=D[D.length-1];let K=0;for(const N of Un(pe,Ze,P)){const X=N.value,oe=Math.max(N.start,Ze),le=Math.min(N.end,P);for(let de=oe;de<=le;de++)be.push({data:$?.[de],index:de,offset:K,size:X}),K+=X}}if(!R)return Dn([],be,j,L,U,E);const ke=D.length>0?D[D.length-1]+1:0,We=fd(se,C,b,ke);if(We.length===0)return null;const ye=j-1,Ve=qn([],Ze=>{for(const P of We){const K=P.value;let N=K.offset,X=P.start;const oe=K.size;if(K.offset<C){X+=Math.floor((C-K.offset+L)/(oe+L));const de=X-P.start;N+=de*oe+de*L}X<ke&&(N+=(ke-X)*oe,X=ke);const le=Math.min(P.end,ye);for(let de=X;de<=le&&!(N>=b);de++)Ze.push({data:$?.[de],index:de,offset:N,size:oe}),N+=oe+L}});return Dn(Ve,be,j,L,U,E)}),V(C=>C!==null),he()),Jn);z(k(e,V(Is),B(C=>C?.length)),r),z(k(x,B(C=>C.topListHeight)),f),z(f,i),z(k(x,B(C=>[C.top,C.bottom])),l),z(k(x,B(C=>C.items)),h);const S=Fe(k(x,V(({items:C})=>C.length>0),J(r,e),V(([{items:C},b])=>C[C.length-1].originalIndex===b-1),B(([,C,b])=>[C-1,b]),he(un),B(([C])=>C))),I=Fe(k(x,xt(200),V(({items:C,topItems:b})=>C.length>0&&C[0].originalIndex===b.length),B(({items:C})=>C[0].index),he())),y=Fe(k(x,V(({items:C})=>C.length>0),B(({items:C})=>{let b=0,j=C.length-1;for(;C[b].type==="group"&&b<j;)b++;for(;C[j].type==="group"&&j>b;)j--;return{endIndex:C[j].index,startIndex:C[b].index}}),he(Fo)));return{endReached:S,initialItemCount:v,itemsRendered:h,listState:x,rangeChanged:y,startReached:I,topItemsIndexes:p,...m}},fe(ht,qo,Hs,vn,gn,xn,kt,ks),{singleton:!0}),Ko=ne(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:n,headerHeight:o},{listState:r}])=>{const a=Z(),l=Le(k(Te(n,e,o,t,r),B(([i,c,d,u,f])=>i+c+d+u+f.offsetBottom+f.bottom)),0);return z(F(l),a),{totalListHeight:l,totalListHeightChanged:a}},fe(Be,Ft),{singleton:!0}),Td=ne(([{viewportHeight:e},{totalListHeight:t}])=>{const n=H(!1),o=Le(k(Te(n,e,t),V(([r])=>r),B(([,r,a])=>Math.max(0,r-a)),xt(0),he()),0);return{alignToBottom:n,paddingTopAddition:o}},fe(Be,Ko),{singleton:!0}),Qo=ne(()=>({context:H(null)})),kd=({itemBottom:e,itemTop:t,locationParams:{align:n,behavior:o,...r},viewportBottom:a,viewportTop:l})=>t<l?{...r,align:n??"start",behavior:o}:e>a?{...r,align:n??"end",behavior:o}:null,Jo=ne(([{gap:e,sizes:t,totalCount:n},{fixedFooterHeight:o,fixedHeaderHeight:r,headerHeight:a,scrollingInProgress:l,scrollTop:i,viewportHeight:c},{scrollToIndex:d}])=>{const u=Z();return z(k(u,J(t,c,n,a,r,o,i),J(e),B(([[f,m,w,g,p,v,h,x],S])=>{const{align:I,behavior:y,calculateViewLocation:C=kd,done:b,...j}=f,T=Go(f,m,g-1),A=mn(T,m.offsetTree,S)+p+v,R=A+ot(m.sizeTree,T)[1],D=x+v,E=x+w-h,L=C({itemBottom:R,itemTop:A,locationParams:{align:I,behavior:y,...j},viewportBottom:E,viewportTop:D});return L?b&&st(k(l,V($=>!$),$t(Se(l)?1:2)),b):b&&b(),L}),V(f=>f!==null)),d),{scrollIntoView:u}},fe(ht,Be,gn,Ft,Tt),{singleton:!0});function so(e){return e?e==="smooth"?"smooth":"auto":!1}const Nd=(e,t)=>typeof e=="function"?so(e(t)):t&&so(e),Ed=ne(([{listRefresh:e,totalCount:t,fixedItemSize:n,data:o},{atBottomState:r,isAtBottom:a},{scrollToIndex:l},{scrolledToInitialItem:i},{didMount:c,propsReady:d},{log:u},{scrollingInProgress:f},{context:m},{scrollIntoView:w}])=>{const g=H(!1),p=Z();let v=null;function h(y){Q(l,{align:"end",behavior:y,index:"LAST"})}re(k(Te(k(F(t),$t(1)),c),J(F(g),a,i,f),B(([[y,C],b,j,T,A])=>{let R=C&&T,D="auto";return R&&(D=Nd(b,j||A),R=R&&!!D),{followOutputBehavior:D,shouldFollow:R,totalCount:y}}),V(({shouldFollow:y})=>y)),({followOutputBehavior:y,totalCount:C})=>{v&&(v(),v=null),Se(n)?requestAnimationFrame(()=>{Se(u)("following output to ",{totalCount:C},$e.DEBUG),h(y)}):v=st(e,()=>{Se(u)("following output to ",{totalCount:C},$e.DEBUG),h(y),v=null})});function x(y){const C=st(r,b=>{y&&!b.atBottom&&b.notAtBottomBecause==="SIZE_INCREASED"&&!v&&(Se(u)("scrolling to bottom due to increased size",{},$e.DEBUG),h("auto"))});setTimeout(C,100)}re(k(Te(F(g),t,d),V(([y,,C])=>y&&C),mt(({value:y},[,C])=>({refreshed:y===C,value:C}),{refreshed:!1,value:0}),V(({refreshed:y})=>y),J(g,t)),([,y])=>{Se(i)&&x(y!==!1)}),re(p,()=>{x(Se(g)!==!1)}),re(Te(F(g),r),([y,C])=>{y&&!C.atBottom&&C.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&h("auto")});const S=H(null),I=Z();return z(ds(k(F(o),B(y=>{var C;return(C=y?.length)!=null?C:0})),k(F(t))),I),re(k(Te(k(I,$t(1)),c),J(F(S),i,f,m),B(([[y,C],b,j,T,A])=>C&&j&&b?.({context:A,totalCount:y,scrollingInProgress:T})),V(y=>!!y),xt(0)),y=>{v&&(v(),v=null),Se(n)?requestAnimationFrame(()=>{Se(u)("scrolling into view",{}),Q(w,y)}):v=st(e,()=>{Se(u)("scrolling into view",{}),Q(w,y),v=null})}),{autoscrollToBottom:p,followOutput:g,scrollIntoViewOnChange:S}},fe(ht,xn,gn,vn,kt,Tt,Be,Qo,Jo)),Rd=ne(([{data:e,firstItemIndex:t,gap:n,sizes:o},{initialTopMostItemIndex:r},{initialItemCount:a,listState:l},{didMount:i}])=>(z(k(i,J(a),V(([,c])=>c!==0),J(r,o,t,n,e),B(([[,c],d,u,f,m,w=[]])=>Xo(c,d,u,f,m,w))),l),{}),fe(ht,vn,Ft,kt),{singleton:!0}),Hd=ne(([{didMount:e},{scrollTo:t},{listState:n}])=>{const o=H(0);return re(k(e,J(o),V(([,r])=>r!==0),B(([,r])=>({top:r}))),r=>{st(k(n,$t(1),V(a=>a.items.length>1)),()=>{requestAnimationFrame(()=>{Q(t,r)})})}),{initialScrollTop:o}},fe(kt,Be,Ft),{singleton:!0}),Zo=ne(([{scrollVelocity:e}])=>{const t=H(!1),n=Z(),o=H(!1);return z(k(e,J(o,t,n),V(([r,a])=>!!a),B(([r,a,l,i])=>{const{enter:c,exit:d}=a;if(l){if(d(r,i))return!1}else if(c(r,i))return!0;return l}),he()),t),re(k(Te(t,e,n),J(o)),([[r,a,l],i])=>{r&&i&&i.change&&i.change(a,l)}),{isSeeking:t,scrollSeekConfiguration:o,scrollSeekRangeChanged:n,scrollVelocity:e}},fe(xn),{singleton:!0}),As=ne(([{scrollContainerState:e,scrollTo:t}])=>{const n=Z(),o=Z(),r=Z(),a=H(!1),l=H(void 0);return z(k(Te(n,o),B(([{scrollHeight:i,scrollTop:c,viewportHeight:d},{offsetTop:u}])=>({scrollHeight:i,scrollTop:Math.max(0,c-u),viewportHeight:d}))),e),z(k(t,J(o),B(([i,{offsetTop:c}])=>({...i,top:i.top+c}))),r),{customScrollParent:l,useWindowScroll:a,windowScrollContainerState:n,windowScrollTo:r,windowViewportRect:o}},fe(Be)),Ad=ne(([{sizeRanges:e,sizes:t},{headerHeight:n,scrollTop:o},{initialTopMostItemIndex:r},{didMount:a},{useWindowScroll:l,windowScrollContainerState:i,windowViewportRect:c}])=>{const d=Z(),u=H(void 0),f=H(null),m=H(null);return z(i,f),z(c,m),re(k(d,J(t,o,l,f,m,n)),([w,g,p,v,h,x,S])=>{const I=gd(g.sizeTree);v&&h!==null&&x!==null&&(p=h.scrollTop-x.offsetTop),p-=S,w({ranges:I,scrollTop:p})}),z(k(u,V(Is),B(Md)),r),z(k(a,J(u),V(([,w])=>w!==void 0),he(),B(([,w])=>w.ranges)),e),{getState:d,restoreStateFrom:u}},fe(ht,Be,vn,kt,As));function Md(e){return{align:"start",index:0,offset:e.scrollTop}}const Od=ne(([{topItemsIndexes:e}])=>{const t=H(0);return z(k(t,V(n=>n>=0),B(n=>Array.from({length:n}).map((o,r)=>r))),e),{topItemCount:t}},fe(Ft));function er(e){let t=!1,n;return()=>(t||(t=!0,n=e()),n)}const Ld=er(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),Dd=ne(([{deviation:e,scrollBy:t,scrollingInProgress:n,scrollTop:o},{isAtBottom:r,isScrolling:a,lastJumpDueToItemResize:l,scrollDirection:i},{listState:c},{beforeUnshiftWith:d,gap:u,shiftWithOffset:f,sizes:m},{log:w},{recalcInProgress:g}])=>{const p=Fe(k(c,J(l),mt(([,h,x,S],[{bottom:I,items:y,offsetBottom:C,totalCount:b},j])=>{const T=I+C;let A=0;return x===b&&h.length>0&&y.length>0&&(y[0].originalIndex===0&&h[0].originalIndex===0||(A=T-S,A!==0&&(A+=j))),[A,y,b,T]},[0,[],0,0]),V(([h])=>h!==0),J(o,i,n,r,w,g),V(([,h,x,S,,,I])=>!I&&!S&&h!==0&&x===hn),B(([[h],,,,,x])=>(x("Upward scrolling compensation",{amount:h},$e.DEBUG),h))));function v(h){h>0?(Q(t,{behavior:"auto",top:-h}),Q(e,0)):(Q(e,0),Q(t,{behavior:"auto",top:-h}))}return re(k(p,J(e,a)),([h,x,S])=>{S&&Ld()?Q(e,x-h):v(-h)}),re(k(Te(Le(a,!1),e,g),V(([h,x,S])=>!h&&!S&&x!==0),B(([h,x])=>x),xt(1)),v),z(k(f,B(h=>({top:-h}))),t),re(k(d,J(m,u),B(([h,{groupIndices:x,lastSize:S,sizeTree:I},y])=>{function C(b){return b*(S+y)}if(x.length===0)return C(h);{let b=0;const j=dn(I,0);let T=0,A=0;for(;T<h;){T++,b+=j;let R=x.length===A+1?1/0:x[A+1]-x[A]-1;T+R>h&&(b-=j,R=h-T+1),T+=R,b+=C(R),A++}return b}})),h=>{Q(e,h),requestAnimationFrame(()=>{Q(t,{top:h}),requestAnimationFrame(()=>{Q(e,0),Q(g,!1)})})}),{deviation:e}},fe(Be,xn,Ft,ht,Tt,ks)),Bd=ne(([e,t,n,o,r,a,l,i,c,d,u])=>({...e,...t,...n,...o,...r,...a,...l,...i,...c,...d,...u}),fe(Hs,Rd,kt,Zo,Ko,Hd,Td,As,Jo,Tt,Qo)),tr=ne(([{data:e,defaultItemSize:t,firstItemIndex:n,fixedItemSize:o,gap:r,groupIndices:a,itemSize:l,sizeRanges:i,sizes:c,statefulTotalCount:d,totalCount:u,trackItemSizes:f},{initialItemFinalLocationReached:m,initialTopMostItemIndex:w,scrolledToInitialItem:g},p,v,h,{listState:x,topItemsIndexes:S,...I},{scrollToIndex:y},C,{topItemCount:b},{groupCounts:j},T])=>(z(I.rangeChanged,T.scrollSeekRangeChanged),z(k(T.windowViewportRect,B(A=>A.visibleHeight)),p.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:n,fixedItemHeight:o,gap:r,groupCounts:j,initialItemFinalLocationReached:m,initialTopMostItemIndex:w,scrolledToInitialItem:g,sizeRanges:i,topItemCount:b,topItemsIndexes:S,totalCount:u,...h,groupIndices:a,itemSize:l,listState:x,scrollToIndex:y,statefulTotalCount:d,trackItemSizes:f,...I,...T,...p,sizes:c,...v}),fe(ht,vn,Be,Ad,Ed,Ft,gn,Dd,Od,qo,Bd));function zd(e,t){const n={},o={};let r=0;const a=e.length;for(;r<a;)o[e[r]]=1,r+=1;for(const l in t)Object.hasOwn(o,l)||(n[l]=t[l]);return n}const Rn=typeof document<"u"?_.useLayoutEffect:_.useEffect;function nr(e,t,n){const o=Object.keys(t.required||{}),r=Object.keys(t.optional||{}),a=Object.keys(t.methods||{}),l=Object.keys(t.events||{}),i=_.createContext({});function c(v,h){v.propsReady&&Q(v.propsReady,!1);for(const x of o){const S=v[t.required[x]];Q(S,h[x])}for(const x of r)if(x in h){const S=v[t.optional[x]];Q(S,h[x])}v.propsReady&&Q(v.propsReady,!0)}function d(v){return a.reduce((h,x)=>(h[x]=S=>{const I=v[t.methods[x]];Q(I,S)},h),{})}function u(v){return l.reduce((h,x)=>(h[x]=td(v[t.events[x]]),h),{})}const f=_.forwardRef((v,h)=>{const{children:x,...S}=v,[I]=_.useState(()=>qn(sd(e),b=>{c(b,S)})),[y]=_.useState(Ys(u,I));Rn(()=>{for(const b of l)b in S&&re(y[b],S[b]);return()=>{Object.values(y).map(js)}},[S,y,I]),Rn(()=>{c(I,S)}),_.useImperativeHandle(h,Us(d(I)));const C=n;return s.jsx(i.Provider,{value:I,children:n?s.jsx(C,{...zd([...o,...r,...l],S),children:x}):x})}),m=v=>{const h=_.useContext(i);return _.useCallback(x=>{Q(h[v],x)},[h,v])},w=v=>{const h=_.useContext(i)[v],x=_.useCallback(S=>re(h,S),[h]);return _.useSyncExternalStore(x,()=>Se(h),()=>Se(h))},g=v=>{const h=_.useContext(i)[v],[x,S]=_.useState(Ys(Se,h));return Rn(()=>re(h,I=>{I!==x&&S(Us(I))}),[h,x]),x},p=_.version.startsWith("18")?w:g;return{Component:f,useEmitter:(v,h)=>{const x=_.useContext(i)[v];Rn(()=>re(x,h),[h,x])},useEmitterValue:p,usePublisher:m}}const sr=_.createContext(void 0),or=_.createContext(void 0),rr=typeof document<"u"?_.useLayoutEffect:_.useEffect;function Zn(e){return"self"in e}function $d(e){return"body"in e}function ar(e,t,n,o=Qt,r,a){const l=_.useRef(null),i=_.useRef(null),c=_.useRef(null),d=_.useCallback(m=>{let w,g,p;const v=m.target;if($d(v)||Zn(v)){const x=Zn(v)?v:v.defaultView;p=a?x.scrollX:x.scrollY,w=a?x.document.documentElement.scrollWidth:x.document.documentElement.scrollHeight,g=a?x.innerWidth:x.innerHeight}else p=a?v.scrollLeft:v.scrollTop,w=a?v.scrollWidth:v.scrollHeight,g=a?v.offsetWidth:v.offsetHeight;const h=()=>{e({scrollHeight:w,scrollTop:Math.max(p,0),viewportHeight:g})};m.suppressFlushSync?h():Gr.flushSync(h),i.current!==null&&(p===i.current||p<=0||p===w-g)&&(i.current=null,t(!0),c.current&&(clearTimeout(c.current),c.current=null))},[e,t,a]);_.useEffect(()=>{const m=r||l.current;return o(r||l.current),d({suppressFlushSync:!0,target:m}),m.addEventListener("scroll",d,{passive:!0}),()=>{o(null),m.removeEventListener("scroll",d)}},[l,d,n,o,r]);function u(m){const w=l.current;if(!w||(a?"offsetWidth"in w&&w.offsetWidth===0:"offsetHeight"in w&&w.offsetHeight===0))return;const g=m.behavior==="smooth";let p,v,h;Zn(w)?(v=Math.max(St(w.document.documentElement,a?"width":"height"),a?w.document.documentElement.scrollWidth:w.document.documentElement.scrollHeight),p=a?w.innerWidth:w.innerHeight,h=a?window.scrollX:window.scrollY):(v=w[a?"scrollWidth":"scrollHeight"],p=St(w,a?"width":"height"),h=w[a?"scrollLeft":"scrollTop"]);const x=v-p;if(m.top=Math.ceil(Math.max(Math.min(x,m.top),0)),Yo(p,v)||m.top===h){e({scrollHeight:v,scrollTop:h,viewportHeight:p}),g&&t(!0);return}g?(i.current=m.top,c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{c.current=null,i.current=null,t(!0)},1e3)):i.current=null,a&&(m={behavior:m.behavior,left:m.top}),w.scrollTo(m)}function f(m){a&&(m={behavior:m.behavior,left:m.top}),l.current.scrollBy(m)}return{scrollByCallback:f,scrollerRef:l,scrollToCallback:u}}const es="-webkit-sticky",oo="sticky",Ms=er(()=>{if(typeof document>"u")return oo;const e=document.createElement("div");return e.style.position=es,e.style.position===es?es:oo});function Os(e){return e}const Pd=ne(()=>{const e=H(i=>`Item ${i}`),t=H(i=>`Group ${i}`),n=H({}),o=H(Os),r=H("div"),a=H(Qt),l=(i,c=null)=>Le(k(n,B(d=>d[i]),he()),c);return{components:n,computeItemKey:o,EmptyPlaceholder:l("EmptyPlaceholder"),FooterComponent:l("Footer"),GroupComponent:l("Group","div"),groupContent:t,HeaderComponent:l("Header"),HeaderFooterTag:r,ItemComponent:l("Item","div"),itemContent:e,ListComponent:l("List","div"),ScrollerComponent:l("Scroller","div"),scrollerRef:a,ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),TopItemListComponent:l("TopItemList")}}),Fd=ne(([e,t])=>({...e,...t}),fe(tr,Pd)),Wd=({height:e})=>s.jsx("div",{style:{height:e}}),Vd={overflowAnchor:"none",position:Ms(),zIndex:1},ir={overflowAnchor:"none"},Gd={...ir,display:"inline-block",height:"100%"},ro=_.memo(function({showTopList:e=!1}){const t=Y("listState"),n=Xe("sizeRanges"),o=Y("useWindowScroll"),r=Y("customScrollParent"),a=Xe("windowScrollContainerState"),l=Xe("scrollContainerState"),i=r||o?a:l,c=Y("itemContent"),d=Y("context"),u=Y("groupContent"),f=Y("trackItemSizes"),m=Y("itemSize"),w=Y("log"),g=Xe("gap"),p=Y("horizontalDirection"),{callbackRef:v}=ad(n,m,f,e?Qt:i,w,g,r,p,Y("skipAnimationFrameInResizeObserver")),[h,x]=_.useState(0);Ls("deviation",L=>{h!==L&&x(L)});const S=Y("EmptyPlaceholder"),I=Y("ScrollSeekPlaceholder")||Wd,y=Y("ListComponent"),C=Y("ItemComponent"),b=Y("GroupComponent"),j=Y("computeItemKey"),T=Y("isSeeking"),A=Y("groupIndices").length>0,R=Y("alignToBottom"),D=Y("initialItemFinalLocationReached"),E=e?{}:{boxSizing:"border-box",...p?{display:"inline-block",height:"100%",marginLeft:h!==0?h:R?"auto":0,paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,whiteSpace:"nowrap"}:{marginTop:h!==0?h:R?"auto":0,paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},...D?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&S?s.jsx(S,{...Oe(S,d)}):s.jsx(y,{...Oe(y,d),"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",ref:v,style:E,children:(e?t.topItems:t.items).map(L=>{const $=L.originalIndex,U=j($+t.firstItemIndex,L.data,d);return T?O.createElement(I,{...Oe(I,d),height:L.size,index:L.index,key:U,type:L.type||"item",...L.type==="group"?{}:{groupIndex:L.groupIndex}}):L.type==="group"?O.createElement(b,{...Oe(b,d),"data-index":$,"data-item-index":L.index,"data-known-size":L.size,key:U,style:Vd},u(L.index,d)):O.createElement(C,{...Oe(C,d),...Xd(C,L.data),"data-index":$,"data-item-group-index":L.groupIndex,"data-item-index":L.index,"data-known-size":L.size,key:U,style:p?Gd:ir},A?c(L.index,L.groupIndex,L.data,d):c(L.index,L.data,d))})})}),qd={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Ud={outline:"none",overflowX:"auto",position:"relative"},Xn=e=>({height:"100%",position:"absolute",top:0,width:"100%",...e?{display:"flex",flexDirection:"column"}:{}}),Yd={position:Ms(),top:0,width:"100%",zIndex:1};function Oe(e,t){if(typeof e!="string")return{context:t}}function Xd(e,t){return{item:typeof e=="string"?void 0:t}}const Kd=_.memo(function(){const e=Y("HeaderComponent"),t=Xe("headerHeight"),n=Y("HeaderFooterTag"),o=Pt(_.useMemo(()=>a=>{t(St(a,"height"))},[t]),!0,Y("skipAnimationFrameInResizeObserver")),r=Y("context");return e?s.jsx(n,{ref:o,children:s.jsx(e,{...Oe(e,r)})}):null}),Qd=_.memo(function(){const e=Y("FooterComponent"),t=Xe("footerHeight"),n=Y("HeaderFooterTag"),o=Pt(_.useMemo(()=>a=>{t(St(a,"height"))},[t]),!0,Y("skipAnimationFrameInResizeObserver")),r=Y("context");return e?s.jsx(n,{ref:o,children:s.jsx(e,{...Oe(e,r)})}):null});function lr({useEmitter:e,useEmitterValue:t,usePublisher:n}){return _.memo(function({children:o,style:r,context:a,...l}){const i=n("scrollContainerState"),c=t("ScrollerComponent"),d=n("smoothScrollTargetReached"),u=t("scrollerRef"),f=t("horizontalDirection")||!1,{scrollByCallback:m,scrollerRef:w,scrollToCallback:g}=ar(i,d,c,u,void 0,f);return e("scrollTo",g),e("scrollBy",m),s.jsx(c,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:w,style:{...f?Ud:qd,...r},tabIndex:0,...l,...Oe(c,a),children:o})})}function cr({useEmitter:e,useEmitterValue:t,usePublisher:n}){return _.memo(function({children:o,style:r,context:a,...l}){const i=n("windowScrollContainerState"),c=t("ScrollerComponent"),d=n("smoothScrollTargetReached"),u=t("totalListHeight"),f=t("deviation"),m=t("customScrollParent"),w=_.useRef(null),g=t("scrollerRef"),{scrollByCallback:p,scrollerRef:v,scrollToCallback:h}=ar(i,d,c,g,m);return rr(()=>{var x;return v.current=m||((x=w.current)==null?void 0:x.ownerDocument.defaultView),()=>{v.current=null}},[v,m]),e("windowScrollTo",h),e("scrollBy",p),s.jsx(c,{ref:w,"data-virtuoso-scroller":!0,style:{position:"relative",...r,...u!==0?{height:u+f}:{}},...l,...Oe(c,a),children:o})})}const Jd=({children:e})=>{const t=_.useContext(sr),n=Xe("viewportHeight"),o=Xe("fixedItemHeight"),r=Y("alignToBottom"),a=Y("horizontalDirection"),l=_.useMemo(()=>Mo(n,c=>St(c,a?"width":"height")),[n,a]),i=Pt(l,!0,Y("skipAnimationFrameInResizeObserver"));return _.useEffect(()=>{t&&(n(t.viewportHeight),o(t.itemHeight))},[t,n,o]),s.jsx("div",{"data-viewport-type":"element",ref:i,style:Xn(r),children:e})},Zd=({children:e})=>{const t=_.useContext(sr),n=Xe("windowViewportRect"),o=Xe("fixedItemHeight"),r=Y("customScrollParent"),a=Lo(n,r,Y("skipAnimationFrameInResizeObserver")),l=Y("alignToBottom");return _.useEffect(()=>{t&&(o(t.itemHeight),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))},[t,n,o]),s.jsx("div",{"data-viewport-type":"window",ref:a,style:Xn(l),children:e})},eu=({children:e})=>{const t=Y("TopItemListComponent")||"div",n=Y("headerHeight"),o={...Yd,marginTop:`${n}px`},r=Y("context");return s.jsx(t,{style:o,...Oe(t,r),children:e})},tu=_.memo(function(e){const t=Y("useWindowScroll"),n=Y("topItemsIndexes").length>0,o=Y("customScrollParent"),r=Y("context");return s.jsxs(o||t?ou:su,{...e,context:r,children:[n&&s.jsx(eu,{children:s.jsx(ro,{showTopList:!0})}),s.jsxs(o||t?Zd:Jd,{children:[s.jsx(Kd,{}),s.jsx(ro,{}),s.jsx(Qd,{})]})]})}),{Component:nu,useEmitter:Ls,useEmitterValue:Y,usePublisher:Xe}=nr(Fd,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",scrollIntoViewOnChange:"scrollIntoViewOnChange",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},tu),su=lr({useEmitter:Ls,useEmitterValue:Y,usePublisher:Xe}),ou=cr({useEmitter:Ls,useEmitterValue:Y,usePublisher:Xe}),ru=nu,au=ne(()=>{const e=H(d=>s.jsxs("td",{children:["Item $",d]})),t=H(null),n=H(d=>s.jsxs("td",{colSpan:1e3,children:["Group ",d]})),o=H(null),r=H(null),a=H({}),l=H(Os),i=H(Qt),c=(d,u=null)=>Le(k(a,B(f=>f[d]),he()),u);return{components:a,computeItemKey:l,context:t,EmptyPlaceholder:c("EmptyPlaceholder"),FillerRow:c("FillerRow"),fixedFooterContent:r,fixedHeaderContent:o,itemContent:e,groupContent:n,ScrollerComponent:c("Scroller","div"),scrollerRef:i,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder"),TableBodyComponent:c("TableBody","tbody"),TableComponent:c("Table","table"),TableFooterComponent:c("TableFoot","tfoot"),TableHeadComponent:c("TableHead","thead"),TableRowComponent:c("TableRow","tr"),GroupComponent:c("Group","tr")}});fe(tr,au);Ms();const ao={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},iu={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:io,floor:Fn,max:ln,min:ts,round:lo}=Math;function co(e,t,n){return Array.from({length:t-e+1}).map((o,r)=>({data:n===null?null:n[r+e],index:r+e}))}function lu(e){return{...iu,items:e}}function Hn(e,t){return e&&e.width===t.width&&e.height===t.height}function cu(e,t){return e&&e.column===t.column&&e.row===t.row}const du=ne(([{increaseViewportBy:e,listBoundary:t,overscan:n,visibleRange:o},{footerHeight:r,headerHeight:a,scrollBy:l,scrollContainerState:i,scrollTo:c,scrollTop:d,smoothScrollTargetReached:u,viewportHeight:f},m,w,{didMount:g,propsReady:p},{customScrollParent:v,useWindowScroll:h,windowScrollContainerState:x,windowScrollTo:S,windowViewportRect:I},y])=>{const C=H(0),b=H(0),j=H(ao),T=H({height:0,width:0}),A=H({height:0,width:0}),R=Z(),D=Z(),E=H(0),L=H(null),$=H({column:0,row:0}),U=Z(),se=Z(),pe=H(!1),we=H(0),be=H(!0),ke=H(!1),We=H(!1);re(k(g,J(we),V(([N,X])=>!!X)),()=>{Q(be,!1)}),re(k(Te(g,be,A,T,we,ke),V(([N,X,oe,le,,de])=>N&&!X&&oe.height!==0&&le.height!==0&&!de)),([,,,,N])=>{Q(ke,!0),Es(1,()=>{Q(R,N)}),st(k(d),()=>{Q(t,[0,0]),Q(be,!0)})}),z(k(se,V(N=>N!=null&&N.scrollTop>0),ut(0)),b),re(k(g,J(se),V(([,N])=>N!=null)),([,N])=>{N&&(Q(T,N.viewport),Q(A,N.item),Q($,N.gap),N.scrollTop>0&&(Q(pe,!0),st(k(d,$t(1)),X=>{Q(pe,!1)}),Q(c,{top:N.scrollTop})))}),z(k(T,B(({height:N})=>N)),f),z(k(Te(F(T,Hn),F(A,Hn),F($,(N,X)=>N&&N.column===X.column&&N.row===X.row),F(d)),B(([N,X,oe,le])=>({gap:oe,item:X,scrollTop:le,viewport:N}))),U),z(k(Te(F(C),o,F($,cu),F(A,Hn),F(T,Hn),F(L),F(b),F(pe),F(be),F(we)),V(([,,,,,,,N])=>!N),B(([N,[X,oe],le,de,Ge,G,ft,,Nt,qe])=>{const{column:rt,row:Et}=le,{height:et,width:Wt}=de,{width:bn}=Ge;if(ft===0&&(N===0||bn===0))return ao;if(Wt===0){const In=Rs(qe,N),Ht=In+Math.max(ft-1,0);return lu(co(In,Ht,G))}const at=dr(bn,Wt,rt);let wt,it;Nt?X===0&&oe===0&&ft>0?(wt=0,it=ft-1):(wt=at*Fn((X+Et)/(et+Et)),it=at*io((oe+Et)/(et+Et))-1,it=ts(N-1,ln(it,at-1)),wt=ts(it,ln(0,wt))):(wt=0,it=-1);const Cn=co(wt,it,G),{bottom:yn,top:Rt}=uo(Ge,le,de,Cn),_n=io(N/at),Sn=_n*et+(_n-1)*Et-yn;return{bottom:yn,itemHeight:et,items:Cn,itemWidth:Wt,offsetBottom:Sn,offsetTop:Rt,top:Rt}})),j),z(k(L,V(N=>N!==null),B(N=>N.length)),C),z(k(Te(T,A,j,$),V(([N,X,{items:oe}])=>oe.length>0&&X.height!==0&&N.height!==0),B(([N,X,{items:oe},le])=>{const{bottom:de,top:Ge}=uo(N,le,X,oe);return[Ge,de]}),he(un)),t);const ye=H(!1);z(k(d,J(ye),B(([N,X])=>X||N!==0)),ye);const Ve=Fe(k(Te(j,C),V(([{items:N}])=>N.length>0),J(ye),V(([[N,X],oe])=>{const le=N.items[N.items.length-1].index===X-1;return(oe||N.bottom>0&&N.itemHeight>0&&N.offsetBottom===0&&N.items.length===X)&&le}),B(([[,N]])=>N-1),he())),Ze=Fe(k(F(j),V(({items:N})=>N.length>0&&N[0].index===0),ut(0),he())),P=Fe(k(F(j),J(pe),V(([{items:N},X])=>N.length>0&&!X),B(([{items:N}])=>({endIndex:N[N.length-1].index,startIndex:N[0].index})),he(Fo),xt(0)));z(P,w.scrollSeekRangeChanged),z(k(R,J(T,A,C,$),B(([N,X,oe,le,de])=>{const Ge=Uo(N),{align:G,behavior:ft,offset:Nt}=Ge;let qe=Ge.index;qe==="LAST"&&(qe=le-1),qe=ln(0,qe,ts(le-1,qe));let rt=ps(X,de,oe,qe);return G==="end"?rt=lo(rt-X.height+oe.height):G==="center"&&(rt=lo(rt-X.height/2+oe.height/2)),Nt&&(rt+=Nt),{behavior:ft,top:rt}})),c);const K=Le(k(j,B(N=>N.offsetBottom+N.bottom)),0);return z(k(I,B(N=>({height:N.visibleHeight,width:N.visibleWidth}))),T),{customScrollParent:v,data:L,deviation:E,footerHeight:r,gap:$,headerHeight:a,increaseViewportBy:e,initialItemCount:b,itemDimensions:A,overscan:n,restoreStateFrom:se,scrollBy:l,scrollContainerState:i,scrollHeight:D,scrollTo:c,scrollToIndex:R,scrollTop:d,smoothScrollTargetReached:u,totalCount:C,useWindowScroll:h,viewportDimensions:T,windowScrollContainerState:x,windowScrollTo:S,windowViewportRect:I,...w,gridState:j,horizontalDirection:We,initialTopMostItemIndex:we,totalListHeight:K,...m,endReached:Ve,propsReady:p,rangeChanged:P,startReached:Ze,stateChanged:U,stateRestoreInProgress:pe,...y}},fe(Hs,Be,xn,Zo,kt,As,Tt));function dr(e,t,n){return ln(1,Fn((e+n)/(Fn(t)+n)))}function uo(e,t,n,o){const{height:r}=n;if(r===void 0||o.length===0)return{bottom:0,top:0};const a=ps(e,t,n,o[0].index);return{bottom:ps(e,t,n,o[o.length-1].index)+r,top:a}}function ps(e,t,n,o){const r=dr(e.width,n.width,t.column),a=Fn(o/r),l=a*n.height+ln(0,a-1)*t.row;return l>0?l+t.row:l}const uu=ne(()=>{const e=H(f=>`Item ${f}`),t=H({}),n=H(null),o=H("virtuoso-grid-item"),r=H("virtuoso-grid-list"),a=H(Os),l=H("div"),i=H(Qt),c=(f,m=null)=>Le(k(t,B(w=>w[f]),he()),m),d=H(!1),u=H(!1);return z(F(u),d),{components:t,computeItemKey:a,context:n,FooterComponent:c("Footer"),HeaderComponent:c("Header"),headerFooterTag:l,itemClassName:o,ItemComponent:c("Item","div"),itemContent:e,listClassName:r,ListComponent:c("List","div"),readyStateChanged:d,reportReadyState:u,ScrollerComponent:c("Scroller","div"),scrollerRef:i,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder","div")}}),mu=ne(([e,t])=>({...e,...t}),fe(du,uu)),hu=_.memo(function(){const e=ge("gridState"),t=ge("listClassName"),n=ge("itemClassName"),o=ge("itemContent"),r=ge("computeItemKey"),a=ge("isSeeking"),l=Ke("scrollHeight"),i=ge("ItemComponent"),c=ge("ListComponent"),d=ge("ScrollSeekPlaceholder"),u=ge("context"),f=Ke("itemDimensions"),m=Ke("gap"),w=ge("log"),g=ge("stateRestoreInProgress"),p=Ke("reportReadyState"),v=Pt(_.useMemo(()=>h=>{const x=h.parentElement.parentElement.scrollHeight;l(x);const S=h.firstChild;if(S){const{height:I,width:y}=S.getBoundingClientRect();f({height:I,width:y})}m({column:mo("column-gap",getComputedStyle(h).columnGap,w),row:mo("row-gap",getComputedStyle(h).rowGap,w)})},[l,f,m,w]),!0,!1);return rr(()=>{e.itemHeight>0&&e.itemWidth>0&&p(!0)},[e]),g?null:s.jsx(c,{className:t,ref:v,...Oe(c,u),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(h=>{const x=r(h.index,h.data,u);return a?s.jsx(d,{...Oe(d,u),height:e.itemHeight,index:h.index,width:e.itemWidth},x):O.createElement(i,{...Oe(i,u),className:n,"data-index":h.index,key:x},o(h.index,h.data,u))})})}),fu=_.memo(function(){const e=ge("HeaderComponent"),t=Ke("headerHeight"),n=ge("headerFooterTag"),o=Pt(_.useMemo(()=>a=>{t(St(a,"height"))},[t]),!0,!1),r=ge("context");return e?s.jsx(n,{ref:o,children:s.jsx(e,{...Oe(e,r)})}):null}),pu=_.memo(function(){const e=ge("FooterComponent"),t=Ke("footerHeight"),n=ge("headerFooterTag"),o=Pt(_.useMemo(()=>a=>{t(St(a,"height"))},[t]),!0,!1),r=ge("context");return e?s.jsx(n,{ref:o,children:s.jsx(e,{...Oe(e,r)})}):null}),gu=({children:e})=>{const t=_.useContext(or),n=Ke("itemDimensions"),o=Ke("viewportDimensions"),r=Pt(_.useMemo(()=>a=>{o(a.getBoundingClientRect())},[o]),!0,!1);return _.useEffect(()=>{t&&(o({height:t.viewportHeight,width:t.viewportWidth}),n({height:t.itemHeight,width:t.itemWidth}))},[t,o,n]),s.jsx("div",{ref:r,style:Xn(!1),children:e})},vu=({children:e})=>{const t=_.useContext(or),n=Ke("windowViewportRect"),o=Ke("itemDimensions"),r=ge("customScrollParent"),a=Lo(n,r,!1);return _.useEffect(()=>{t&&(o({height:t.itemHeight,width:t.itemWidth}),n({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,n,o]),s.jsx("div",{ref:a,style:Xn(!1),children:e})},xu=_.memo(function({...e}){const t=ge("useWindowScroll"),n=ge("customScrollParent"),o=n||t?bu:wu,r=n||t?vu:gu,a=ge("context");return s.jsx(o,{...e,...Oe(o,a),children:s.jsxs(r,{children:[s.jsx(fu,{}),s.jsx(hu,{}),s.jsx(pu,{})]})})}),{useEmitter:ur,useEmitterValue:ge,usePublisher:Ke}=nr(mu,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},xu),wu=lr({useEmitter:ur,useEmitterValue:ge,usePublisher:Ke}),bu=cr({useEmitter:ur,useEmitterValue:ge,usePublisher:Ke});function mo(e,t,n){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&n(`${e} was not resolved to pixel value correctly`,t,$e.WARN),t==="normal"?0:parseInt(t??"0",10)}const mr=Yt({status:"idle"}),Cu=Yt("random"),hr=Yt(new Set),fr=Yt(""),yu=Yt(()=>[...new Set(To.map(t=>t.location))].map(t=>({id:t,name:t})).sort((t,n)=>t.name.localeCompare(n.name))),_u=(e,t)=>{if(!t)return e;const n=t.toLowerCase();return e.filter(o=>o.name.toLowerCase().includes(n))},Su=Yt(e=>{const t=e(fr),n=e(yu),o=e(ko),r=e(No);if(!o||!r)return[];const a=n.filter(l=>{const i=ua(l.name);return i?.groupId===r&&i?.unitId===o});return _u(a,t)}),Iu="_wrapper_349p2_5",ju="_focused_349p2_49",Tu="_searchIcon_349p2_89",ku="_clearButton_349p2_131",Nu="_visuallyHidden_349p2_141",nn={wrapper:Iu,focused:ju,searchIcon:Tu,clearButton:ku,visuallyHidden:Nu},pr=({value:e,onChange:t,placeholder:n,variant:o,autoFocus:r=!1})=>{const[a,l]=O.useState(!1),i=O.useRef(null),c=_.useId();O.useEffect(()=>{r&&i.current&&i.current.focus()},[r]);const d=`${nn.wrapper} ${a?nn.focused:""}`;return s.jsxs("div",{className:d,"data-variant":o,children:[s.jsx("label",{htmlFor:c,className:nn.visuallyHidden,children:n}),s.jsx("input",{ref:i,id:c,type:"text",placeholder:n,value:e,onChange:u=>t(u.target.value),onFocus:()=>l(!0),onBlur:()=>l(!1)}),o==="standalone"&&e&&s.jsx(me,{variant:"quaternary",size:"xs",iconOnly:!0,onClick:()=>t(""),"aria-label":"Clear search",className:nn.clearButton,children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})}),s.jsx("span",{className:`material-symbols-rounded ${nn.searchIcon}`,children:"search"})]})};function Eu(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const gr=_.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),wn=()=>{const e=_.useContext(gr);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};Eu(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Ru(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function Hu(){return Ds(/^Mac/)}function Au(){return Ds(/^iPhone/)}function ho(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Mu(){return Ds(/^iPad/)||Hu()&&navigator.maxTouchPoints>1}function vr(){return Au()||Mu()}function Ds(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const Ou=24,Lu=typeof window<"u"?O.useLayoutEffect:O.useEffect;function fo(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const ns=typeof document<"u"&&window.visualViewport;function po(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function xr(e){for(po(e)&&(e=e.parentElement);e&&!po(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const Du=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let An=0,ss;function Bu(e={}){let{isDisabled:t}=e;Lu(()=>{if(!t)return An++,An===1&&vr()&&(ss=zu()),()=>{An--,An===0&&ss?.()}},[t])}function zu(){let e,t=0,n=f=>{e=xr(f.target),!(e===document.documentElement&&e===document.body)&&(t=f.changedTouches[0].pageY)},o=f=>{if(!e||e===document.documentElement||e===document.body){f.preventDefault();return}let m=f.changedTouches[0].pageY,w=e.scrollTop,g=e.scrollHeight-e.clientHeight;g!==0&&((w<=0&&m>t||w>=g&&m<t)&&f.preventDefault(),t=m)},r=f=>{let m=f.target;gs(m)&&m!==document.activeElement&&(f.preventDefault(),m.style.transform="translateY(-2000px)",m.focus(),requestAnimationFrame(()=>{m.style.transform=""}))},a=f=>{let m=f.target;gs(m)&&(m.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{m.style.transform="",ns&&(ns.height<window.innerHeight?requestAnimationFrame(()=>{go(m)}):ns.addEventListener("resize",()=>go(m),{once:!0}))}))},l=()=>{window.scrollTo(0,0)},i=window.pageXOffset,c=window.pageYOffset,d=fo($u(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let u=fo(sn(document,"touchstart",n,{passive:!1,capture:!0}),sn(document,"touchmove",o,{passive:!1,capture:!0}),sn(document,"touchend",r,{passive:!1,capture:!0}),sn(document,"focus",a,!0),sn(window,"scroll",l));return()=>{d(),u(),window.scrollTo(i,c)}}function $u(e,t,n){let o=e.style[t];return e.style[t]=n,()=>{e.style[t]=o}}function sn(e,t,n,o){return e.addEventListener(t,n,o),()=>{e.removeEventListener(t,n,o)}}function go(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let n=xr(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let o=n.getBoundingClientRect().top,r=e.getBoundingClientRect().top,a=e.getBoundingClientRect().bottom;const l=n.getBoundingClientRect().bottom+Ou;a>l&&(n.scrollTop+=r-o)}e=n.parentElement}}function gs(e){return e instanceof HTMLInputElement&&!Du.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function Pu(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Fu(...e){return t=>e.forEach(n=>Pu(n,t))}function wr(...e){return O.useCallback(Fu(...e),e)}const br=new WeakMap;function Ee(e,t,n=!1){if(!e||!(e instanceof HTMLElement))return;let o={};Object.entries(t).forEach(([r,a])=>{if(r.startsWith("--")){e.style.setProperty(r,a);return}o[r]=e.style[r],e.style[r]=a}),!n&&br.set(e,o)}function Wu(e,t){if(!e||!(e instanceof HTMLElement))return;let n=br.get(e);n&&(e.style[t]=n[t])}const je=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Mn(e,t){if(!e)return null;const n=window.getComputedStyle(e),o=n.transform||n.webkitTransform||n.mozTransform;let r=o.match(/^matrix3d\((.+)\)$/);return r?parseFloat(r[1].split(", ")[je(t)?13:12]):(r=o.match(/^matrix\((.+)\)$/),r?parseFloat(r[1].split(", ")[je(t)?5:4]):null)}function Vu(e){return 8*(Math.log(e+1)-2)}function os(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function Gu(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}const xe={DURATION:.5,EASE:[.32,.72,0,1]},Cr=.4,qu=.25,Uu=100,yr=8,Lt=16,vs=26,rs="vaul-dragging";function _r(e){const t=_.useRef(e);return _.useEffect(()=>{t.current=e}),_.useMemo(()=>(...n)=>t.current==null?void 0:t.current.call(t,...n),[])}function Yu({defaultProp:e,onChange:t}){const n=_.useState(e),[o]=n,r=_.useRef(o),a=_r(t);return _.useEffect(()=>{r.current!==o&&(a(o),r.current=o)},[o,r,a]),n}function Sr({prop:e,defaultProp:t,onChange:n=()=>{}}){const[o,r]=Yu({defaultProp:t,onChange:n}),a=e!==void 0,l=a?e:o,i=_r(n),c=_.useCallback(d=>{if(a){const f=typeof d=="function"?d(e):d;f!==e&&i(f)}else r(d)},[a,e,r,i]);return[l,c]}function Xu({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:n,drawerRef:o,overlayRef:r,fadeFromIndex:a,onSnapPointChange:l,direction:i="bottom",container:c,snapToSequentialPoint:d}){const[u,f]=Sr({prop:e,defaultProp:n?.[0],onChange:t}),[m,w]=_.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);_.useEffect(()=>{function b(){w({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const g=_.useMemo(()=>u===n?.[n.length-1]||null,[n,u]),p=_.useMemo(()=>{var b;return(b=n?.findIndex(j=>j===u))!=null?b:null},[n,u]),v=n&&n.length>0&&(a||a===0)&&!Number.isNaN(a)&&n[a]===u||!n,h=_.useMemo(()=>{const b=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var j;return(j=n?.map(T=>{const A=typeof T=="string";let R=0;if(A&&(R=parseInt(T,10)),je(i)){const E=A?R:m?T*b.height:0;return m?i==="bottom"?b.height-E:-b.height+E:E}const D=A?R:m?T*b.width:0;return m?i==="right"?b.width-D:-b.width+D:D}))!=null?j:[]},[n,m,c]),x=_.useMemo(()=>p!==null?h?.[p]:null,[h,p]),S=_.useCallback(b=>{var j;const T=(j=h?.findIndex(A=>A===b))!=null?j:null;l(T),Ee(o.current,{transition:`transform ${xe.DURATION}s cubic-bezier(${xe.EASE.join(",")})`,transform:je(i)?`translate3d(0, ${b}px, 0)`:`translate3d(${b}px, 0, 0)`}),h&&T!==h.length-1&&a!==void 0&&T!==a&&T<a?Ee(r.current,{transition:`opacity ${xe.DURATION}s cubic-bezier(${xe.EASE.join(",")})`,opacity:"0"}):Ee(r.current,{transition:`opacity ${xe.DURATION}s cubic-bezier(${xe.EASE.join(",")})`,opacity:"1"}),f(n?.[Math.max(T,0)])},[o.current,n,h,a,r,f]);_.useEffect(()=>{if(u||e){var b;const j=(b=n?.findIndex(T=>T===e||T===u))!=null?b:-1;h&&j!==-1&&typeof h[j]=="number"&&S(h[j])}},[u,e,n,h,S]);function I({draggedDistance:b,closeDrawer:j,velocity:T,dismissible:A}){if(a===void 0)return;const R=i==="bottom"||i==="right"?(x??0)-b:(x??0)+b,D=p===a-1,E=p===0,L=b>0;if(D&&Ee(r.current,{transition:`opacity ${xe.DURATION}s cubic-bezier(${xe.EASE.join(",")})`}),!d&&T>2&&!L){A?j():S(h[0]);return}if(!d&&T>2&&L&&h&&n){S(h[n.length-1]);return}const $=h?.reduce((se,pe)=>typeof se!="number"||typeof pe!="number"?se:Math.abs(pe-R)<Math.abs(se-R)?pe:se),U=je(i)?window.innerHeight:window.innerWidth;if(T>Cr&&Math.abs(b)<U*.4){const se=L?1:-1;if(se>0&&g&&n){S(h[n.length-1]);return}if(E&&se<0&&A&&j(),p===null)return;S(h[p+se]);return}S($)}function y({draggedDistance:b}){if(x===null)return;const j=i==="bottom"||i==="right"?x-b:x+b;(i==="bottom"||i==="right")&&j<h[h.length-1]||(i==="top"||i==="left")&&j>h[h.length-1]||Ee(o.current,{transform:je(i)?`translate3d(0, ${j}px, 0)`:`translate3d(${j}px, 0, 0)`})}function C(b,j){if(!n||typeof p!="number"||!h||a===void 0)return null;const T=p===a-1;if(p>=a&&j)return 0;if(T&&!j)return 1;if(!v&&!T)return null;const R=T?p+1:p-1,D=T?h[R]-h[R-1]:h[R+1]-h[R],E=b/Math.abs(D);return T?1-E:E}return{isLastSnapPoint:g,activeSnapPoint:u,shouldFade:v,getPercentageDragged:C,setActiveSnapPoint:f,activeSnapPointIndex:p,onRelease:I,onDrag:y,snapPointsOffset:h}}const Ku=()=>()=>{};function Qu(){const{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:o,noBodyStyles:r}=wn(),a=_.useRef(null),l=O.useMemo(()=>document.body.style.backgroundColor,[]);function i(){return(window.innerWidth-vs)/window.innerWidth}_.useEffect(()=>{if(t&&n){a.current&&clearTimeout(a.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;Gu(o&&!r?os(document.body,{background:"black"}):Ku,os(c,{transformOrigin:je(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${xe.DURATION}s`,transitionTimingFunction:`cubic-bezier(${xe.EASE.join(",")})`}));const d=os(c,{borderRadius:`${yr}px`,overflow:"hidden",...je(e)?{transform:`scale(${i()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${i()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{d(),a.current=window.setTimeout(()=>{l?document.body.style.background=l:document.body.style.removeProperty("background")},xe.DURATION*1e3)}}},[t,n,l])}let on=null;function Ju({isOpen:e,modal:t,nested:n,hasBeenOpened:o,preventScrollRestoration:r,noBodyStyles:a}){const[l,i]=_.useState(()=>typeof window<"u"?window.location.href:""),c=_.useRef(0),d=_.useCallback(()=>{if(ho()&&on===null&&e&&!a){on={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:f,innerHeight:m}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-f}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const w=m-window.innerHeight;w&&c.current>=m&&(document.body.style.top=`${-(c.current+w)}px`)}),300)}},[e]),u=_.useCallback(()=>{if(ho()&&on!==null&&!a){const f=-parseInt(document.body.style.top,10),m=-parseInt(document.body.style.left,10);Object.assign(document.body.style,on),window.requestAnimationFrame(()=>{if(r&&l!==window.location.href){i(window.location.href);return}window.scrollTo(m,f)}),on=null}},[l]);return _.useEffect(()=>{function f(){c.current=window.scrollY}return f(),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}},[]),_.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||u()}},[t,u]),_.useEffect(()=>{n||!o||(e?(!window.matchMedia("(display-mode: standalone)").matches&&d(),t||window.setTimeout(()=>{u()},500)):u())},[e,o,l,t,n,d,u]),{restorePositionSetting:u}}function Zu({open:e,onOpenChange:t,children:n,onDrag:o,onRelease:r,snapPoints:a,shouldScaleBackground:l=!1,setBackgroundColorOnScale:i=!0,closeThreshold:c=qu,scrollLockTimeout:d=Uu,dismissible:u=!0,handleOnly:f=!1,fadeFromIndex:m=a&&a.length-1,activeSnapPoint:w,setActiveSnapPoint:g,fixed:p,modal:v=!0,onClose:h,nested:x,noBodyStyles:S=!1,direction:I="bottom",defaultOpen:y=!1,disablePreventScroll:C=!0,snapToSequentialPoint:b=!1,preventScrollRestoration:j=!1,repositionInputs:T=!0,onAnimationEnd:A,container:R,autoFocus:D=!1}){var E,L;const[$=!1,U]=Sr({defaultProp:y,prop:e,onChange:W=>{t?.(W),!W&&!x&&yn(),setTimeout(()=>{A?.(W)},xe.DURATION*1e3),W&&!v&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),W||(document.body.style.pointerEvents="auto")}}),[se,pe]=_.useState(!1),[we,be]=_.useState(!1),[ke,We]=_.useState(!1),ye=_.useRef(null),Ve=_.useRef(null),Ze=_.useRef(null),P=_.useRef(null),K=_.useRef(null),N=_.useRef(!1),X=_.useRef(null),oe=_.useRef(0),le=_.useRef(!1),de=_.useRef(!y),Ge=_.useRef(0),G=_.useRef(null),ft=_.useRef(((E=G.current)==null?void 0:E.getBoundingClientRect().height)||0),Nt=_.useRef(((L=G.current)==null?void 0:L.getBoundingClientRect().width)||0),qe=_.useRef(0),rt=_.useCallback(W=>{a&&W===at.length-1&&(Ve.current=new Date)},[]),{activeSnapPoint:Et,activeSnapPointIndex:et,setActiveSnapPoint:Wt,onRelease:bn,snapPointsOffset:at,onDrag:wt,shouldFade:it,getPercentageDragged:Cn}=Xu({snapPoints:a,activeSnapPointProp:w,setActiveSnapPointProp:g,drawerRef:G,fadeFromIndex:m,overlayRef:ye,onSnapPointChange:rt,direction:I,container:R,snapToSequentialPoint:b});Bu({isDisabled:!$||we||!v||ke||!se||!T||!C});const{restorePositionSetting:yn}=Ju({isOpen:$,modal:v,nested:x??!1,hasBeenOpened:se,preventScrollRestoration:j,noBodyStyles:S});function Rt(){return(window.innerWidth-vs)/window.innerWidth}function _n(W){var ae,ue;!u&&!a||G.current&&!G.current.contains(W.target)||(ft.current=((ae=G.current)==null?void 0:ae.getBoundingClientRect().height)||0,Nt.current=((ue=G.current)==null?void 0:ue.getBoundingClientRect().width)||0,be(!0),Ze.current=new Date,vr()&&window.addEventListener("touchend",()=>N.current=!1,{once:!0}),W.target.setPointerCapture(W.pointerId),oe.current=je(I)?W.pageY:W.pageX)}function Sn(W,ae){var ue;let te=W;const _e=(ue=window.getSelection())==null?void 0:ue.toString(),ze=G.current?Mn(G.current,I):null,De=new Date;if(te.tagName==="SELECT"||te.hasAttribute("data-vaul-no-drag")||te.closest("[data-vaul-no-drag]"))return!1;if(I==="right"||I==="left")return!0;if(Ve.current&&De.getTime()-Ve.current.getTime()<500)return!1;if(ze!==null&&(I==="bottom"?ze>0:ze<0))return!0;if(_e&&_e.length>0)return!1;if(K.current&&De.getTime()-K.current.getTime()<d&&ze===0||ae)return K.current=De,!1;for(;te;){if(te.scrollHeight>te.clientHeight){if(te.scrollTop!==0)return K.current=new Date,!1;if(te.getAttribute("role")==="dialog")return!0}te=te.parentNode}return!0}function In(W){if(G.current&&we){const ae=I==="bottom"||I==="right"?1:-1,ue=(oe.current-(je(I)?W.pageY:W.pageX))*ae,te=ue>0,_e=a&&!u&&!te;if(_e&&et===0)return;const ze=Math.abs(ue),De=document.querySelector("[data-vaul-drawer-wrapper]"),bt=I==="bottom"||I==="top"?ft.current:Nt.current;let tt=ze/bt;const At=Cn(ze,te);if(At!==null&&(tt=At),_e&&tt>=1||!N.current&&!Sn(W.target,te))return;if(G.current.classList.add(rs),N.current=!0,Ee(G.current,{transition:"none"}),Ee(ye.current,{transition:"none"}),a&&wt({draggedDistance:ue}),te&&!a){const lt=Vu(ue),jn=Math.min(lt*-1,0)*ae;Ee(G.current,{transform:je(I)?`translate3d(0, ${jn}px, 0)`:`translate3d(${jn}px, 0, 0)`});return}const Ct=1-tt;if((it||m&&et===m-1)&&(o?.(W,tt),Ee(ye.current,{opacity:`${Ct}`,transition:"none"},!0)),De&&ye.current&&l){const lt=Math.min(Rt()+tt*(1-Rt()),1),jn=8-tt*8,zs=Math.max(0,14-tt*14);Ee(De,{borderRadius:`${jn}px`,transform:je(I)?`scale(${lt}) translate3d(0, ${zs}px, 0)`:`scale(${lt}) translate3d(${zs}px, 0, 0)`,transition:"none"},!0)}if(!a){const lt=ze*ae;Ee(G.current,{transform:je(I)?`translate3d(0, ${lt}px, 0)`:`translate3d(${lt}px, 0, 0)`})}}}_.useEffect(()=>{window.requestAnimationFrame(()=>{de.current=!0})},[]),_.useEffect(()=>{var W;function ae(){if(!G.current||!T)return;const ue=document.activeElement;if(gs(ue)||le.current){var te;const _e=((te=window.visualViewport)==null?void 0:te.height)||0,ze=window.innerHeight;let De=ze-_e;const bt=G.current.getBoundingClientRect().height||0,tt=bt>ze*.8;qe.current||(qe.current=bt);const At=G.current.getBoundingClientRect().top;if(Math.abs(Ge.current-De)>60&&(le.current=!le.current),a&&a.length>0&&at&&et){const Ct=at[et]||0;De+=Ct}if(Ge.current=De,bt>_e||le.current){const Ct=G.current.getBoundingClientRect().height;let lt=Ct;Ct>_e&&(lt=_e-(tt?At:vs)),p?G.current.style.height=`${Ct-Math.max(De,0)}px`:G.current.style.height=`${Math.max(lt,_e-At)}px`}else Ru()||(G.current.style.height=`${qe.current}px`);a&&a.length>0&&!le.current?G.current.style.bottom="0px":G.current.style.bottom=`${Math.max(De,0)}px`}}return(W=window.visualViewport)==null||W.addEventListener("resize",ae),()=>{var ue;return(ue=window.visualViewport)==null?void 0:ue.removeEventListener("resize",ae)}},[et,a,at]);function Ht(W){kr(),h?.(),W||U(!1),setTimeout(()=>{a&&Wt(a[0])},xe.DURATION*1e3)}function Bs(){if(!G.current)return;const W=document.querySelector("[data-vaul-drawer-wrapper]"),ae=Mn(G.current,I);Ee(G.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${xe.DURATION}s cubic-bezier(${xe.EASE.join(",")})`}),Ee(ye.current,{transition:`opacity ${xe.DURATION}s cubic-bezier(${xe.EASE.join(",")})`,opacity:"1"}),l&&ae&&ae>0&&$&&Ee(W,{borderRadius:`${yr}px`,overflow:"hidden",...je(I)?{transform:`scale(${Rt()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Rt()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${xe.DURATION}s`,transitionTimingFunction:`cubic-bezier(${xe.EASE.join(",")})`},!0)}function kr(){!we||!G.current||(G.current.classList.remove(rs),N.current=!1,be(!1),P.current=new Date)}function Nr(W){if(!we||!G.current)return;G.current.classList.remove(rs),N.current=!1,be(!1),P.current=new Date;const ae=Mn(G.current,I);if(!W||!Sn(W.target,!1)||!ae||Number.isNaN(ae)||Ze.current===null)return;const ue=P.current.getTime()-Ze.current.getTime(),te=oe.current-(je(I)?W.pageY:W.pageX),_e=Math.abs(te)/ue;if(_e>.05&&(We(!0),setTimeout(()=>{We(!1)},200)),a){bn({draggedDistance:te*(I==="bottom"||I==="right"?1:-1),closeDrawer:Ht,velocity:_e,dismissible:u}),r?.(W,!0);return}if(I==="bottom"||I==="right"?te>0:te<0){Bs(),r?.(W,!0);return}if(_e>Cr){Ht(),r?.(W,!1);return}var ze;const De=Math.min((ze=G.current.getBoundingClientRect().height)!=null?ze:0,window.innerHeight);var bt;const tt=Math.min((bt=G.current.getBoundingClientRect().width)!=null?bt:0,window.innerWidth),At=I==="left"||I==="right";if(Math.abs(ae)>=(At?tt:De)*c){Ht(),r?.(W,!1);return}r?.(W,!0),Bs()}_.useEffect(()=>($&&(Ee(document.documentElement,{scrollBehavior:"auto"}),Ve.current=new Date),()=>{Wu(document.documentElement,"scrollBehavior")}),[$]);function Er(W){const ae=W?(window.innerWidth-Lt)/window.innerWidth:1,ue=W?-Lt:0;X.current&&window.clearTimeout(X.current),Ee(G.current,{transition:`transform ${xe.DURATION}s cubic-bezier(${xe.EASE.join(",")})`,transform:je(I)?`scale(${ae}) translate3d(0, ${ue}px, 0)`:`scale(${ae}) translate3d(${ue}px, 0, 0)`}),!W&&G.current&&(X.current=setTimeout(()=>{const te=Mn(G.current,I);Ee(G.current,{transition:"none",transform:je(I)?`translate3d(0, ${te}px, 0)`:`translate3d(${te}px, 0, 0)`})},500))}function Rr(W,ae){if(ae<0)return;const ue=(window.innerWidth-Lt)/window.innerWidth,te=ue+ae*(1-ue),_e=-Lt+ae*Lt;Ee(G.current,{transform:je(I)?`scale(${te}) translate3d(0, ${_e}px, 0)`:`scale(${te}) translate3d(${_e}px, 0, 0)`,transition:"none"})}function Hr(W,ae){const ue=je(I)?window.innerHeight:window.innerWidth,te=ae?(ue-Lt)/ue:1,_e=ae?-Lt:0;ae&&Ee(G.current,{transition:`transform ${xe.DURATION}s cubic-bezier(${xe.EASE.join(",")})`,transform:je(I)?`scale(${te}) translate3d(0, ${_e}px, 0)`:`scale(${te}) translate3d(${_e}px, 0, 0)`})}return _.useEffect(()=>{v||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[v]),_.createElement(qr,{defaultOpen:y,onOpenChange:W=>{!u&&!W||(W?pe(!0):Ht(!0),U(W))},open:$},_.createElement(gr.Provider,{value:{activeSnapPoint:Et,snapPoints:a,setActiveSnapPoint:Wt,drawerRef:G,overlayRef:ye,onOpenChange:t,onPress:_n,onRelease:Nr,onDrag:In,dismissible:u,shouldAnimate:de,handleOnly:f,isOpen:$,isDragging:we,shouldFade:it,closeDrawer:Ht,onNestedDrag:Rr,onNestedOpenChange:Er,onNestedRelease:Hr,keyboardIsOpen:le,modal:v,snapPointsOffset:at,activeSnapPointIndex:et,direction:I,shouldScaleBackground:l,setBackgroundColorOnScale:i,noBodyStyles:S,container:R,autoFocus:D}},n))}const Ir=_.forwardRef(function({...e},t){const{overlayRef:n,snapPoints:o,onRelease:r,shouldFade:a,isOpen:l,modal:i,shouldAnimate:c}=wn(),d=wr(t,n),u=o&&o.length>0;if(!i)return null;const f=_.useCallback(m=>r(m),[r]);return _.createElement(Yr,{onMouseUp:f,ref:d,"data-vaul-overlay":"","data-vaul-snap-points":l&&u?"true":"false","data-vaul-snap-points-overlay":l&&a?"true":"false","data-vaul-animate":c?.current?"true":"false",...e})});Ir.displayName="Drawer.Overlay";const jr=_.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...o},r){const{drawerRef:a,onPress:l,onRelease:i,onDrag:c,keyboardIsOpen:d,snapPointsOffset:u,activeSnapPointIndex:f,modal:m,isOpen:w,direction:g,snapPoints:p,container:v,handleOnly:h,shouldAnimate:x,autoFocus:S}=wn(),[I,y]=_.useState(!1),C=wr(r,a),b=_.useRef(null),j=_.useRef(null),T=_.useRef(!1),A=p&&p.length>0;Qu();const R=(E,L,$=0)=>{if(T.current)return!0;const U=Math.abs(E.y),se=Math.abs(E.x),pe=se>U,we=["bottom","right"].includes(L)?1:-1;if(L==="left"||L==="right"){if(!(E.x*we<0)&&se>=0&&se<=$)return pe}else if(!(E.y*we<0)&&U>=0&&U<=$)return!pe;return T.current=!0,!0};_.useEffect(()=>{A&&window.requestAnimationFrame(()=>{y(!0)})},[]);function D(E){b.current=null,T.current=!1,i(E)}return _.createElement(Xr,{"data-vaul-drawer-direction":g,"data-vaul-drawer":"","data-vaul-delayed-snap-points":I?"true":"false","data-vaul-snap-points":w&&A?"true":"false","data-vaul-custom-container":v?"true":"false","data-vaul-animate":x?.current?"true":"false",...o,ref:C,style:u&&u.length>0?{"--snap-point-height":`${u[f??0]}px`,...t}:t,onPointerDown:E=>{h||(o.onPointerDown==null||o.onPointerDown.call(o,E),b.current={x:E.pageX,y:E.pageY},l(E))},onOpenAutoFocus:E=>{n?.(E),S||E.preventDefault()},onPointerDownOutside:E=>{if(e?.(E),!m||E.defaultPrevented){E.preventDefault();return}d.current&&(d.current=!1)},onFocusOutside:E=>{if(!m){E.preventDefault();return}},onPointerMove:E=>{if(j.current=E,h||(o.onPointerMove==null||o.onPointerMove.call(o,E),!b.current))return;const L=E.pageY-b.current.y,$=E.pageX-b.current.x,U=E.pointerType==="touch"?10:2;R({x:$,y:L},g,U)?c(E):(Math.abs($)>U||Math.abs(L)>U)&&(b.current=null)},onPointerUp:E=>{o.onPointerUp==null||o.onPointerUp.call(o,E),b.current=null,T.current=!1,i(E)},onPointerOut:E=>{o.onPointerOut==null||o.onPointerOut.call(o,E),D(j.current)},onContextMenu:E=>{o.onContextMenu==null||o.onContextMenu.call(o,E),j.current&&D(j.current)}})});jr.displayName="Drawer.Content";const em=250,tm=120,nm=_.forwardRef(function({preventCycle:e=!1,children:t,...n},o){const{closeDrawer:r,isDragging:a,snapPoints:l,activeSnapPoint:i,setActiveSnapPoint:c,dismissible:d,handleOnly:u,isOpen:f,onPress:m,onDrag:w}=wn(),g=_.useRef(null),p=_.useRef(!1);function v(){if(p.current){S();return}window.setTimeout(()=>{h()},tm)}function h(){if(a||e||p.current){S();return}if(S(),!l||l.length===0){d||r();return}if(i===l[l.length-1]&&d){r();return}const y=l.findIndex(b=>b===i);if(y===-1)return;const C=l[y+1];c(C)}function x(){g.current=window.setTimeout(()=>{p.current=!0},em)}function S(){g.current&&window.clearTimeout(g.current),p.current=!1}return _.createElement("div",{onClick:v,onPointerCancel:S,onPointerDown:I=>{u&&m(I),x()},onPointerMove:I=>{u&&w(I)},ref:o,"data-vaul-drawer-visible":f?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},_.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});nm.displayName="Drawer.Handle";function sm(e){const t=wn(),{container:n=t.container,...o}=e;return _.createElement(Ur,{container:n,...o})}const yt={Root:Zu,Content:jr,Overlay:Ir,Portal:sm},om="_overlay_m434v_7",rm="_contentWrapper_m434v_23",am="_content_m434v_23",im="_handleContainer_m434v_81",lm="_handle_m434v_81",cm="_iconContainer_m434v_113",dm="_nfcIcon_m434v_131",um="_title_m434v_179",mm="_description_m434v_193",hm="_buttonGroup_m434v_209",fm="_cancelButton_m434v_225",pm="_actionButton_m434v_235",gm="_devToolsContainer_m434v_245",vm="_devToolsLabel_m434v_265",xm="_devButtons_m434v_283",Ae={overlay:om,contentWrapper:rm,content:am,handleContainer:im,handle:lm,iconContainer:cm,nfcIcon:dm,title:um,description:mm,buttonGroup:hm,cancelButton:fm,actionButton:pm,devToolsContainer:gm,devToolsLabel:vm,devButtons:xm},wm=()=>{const[e,t]=ie(mr),n=ee(hr),[o]=ie(Cu),{trigger:r}=Je(),[a,l]=O.useState(!1);O.useEffect(()=>{e.status!=="idle"&&e.status!=="selecting"?l(!0):l(!1)},[e.status]);const i=f=>{l(f),f||setTimeout(()=>{e.status!=="idle"&&t({status:"idle"})},300)},c=f=>{r("light"),t(m=>m.status==="ready"||m.status==="error"?{status:"writing",roomId:m.roomId,roomName:m.roomName}:m),setTimeout(()=>{if(f==="success"){if("roomId"in e){const{roomId:m,roomName:w}=e;t({status:"success",roomId:m,roomName:w}),n(g=>new Set(g).add(m)),r("success")}}else if(f==="net-error"){if("roomId"in e){const{roomId:m,roomName:w}=e;t({status:"error",roomId:m,roomName:w,error:{code:"WRITE_FAILED",message:"Network connection lost"}}),r("error")}}else if(f==="locked-error"&&"roomId"in e){const{roomId:m,roomName:w}=e;t({status:"error",roomId:m,roomName:w,error:{code:"TAG_LOCKED",message:"Tag is write-locked"}}),r("error")}},500)};if(O.useEffect(()=>{let f;return e.status==="writing"&&(f=setTimeout(()=>{const m=o==="forceSuccess"||o==="random"&&Math.random()>.2;if("roomId"in e){const{roomId:w,roomName:g}=e;m?(t({status:"success",roomId:w,roomName:g}),n(p=>new Set(p).add(w)),r("success")):(t({status:"error",roomId:w,roomName:g,error:{code:"WRITE_FAILED",message:"Tag connection lost"}}),r("error"))}},2e3)),e.status==="success"&&(f=setTimeout(()=>{l(!1),t({status:"idle"})},1500)),()=>clearTimeout(f)},[e,o,t,n,r]),e.status==="idle"||e.status==="selecting")return null;const u=(()=>{switch(e.status){case"ready":return{icon:"nfc",title:"Ready to Write",desc:`Hold device near tag to provision ${"roomName"in e?e.roomName:"room"}.`};case"writing":return{icon:"nfc",title:"Writing...",desc:"Keep device steady."};case"success":return{icon:"check_circle",title:"Success",desc:"Tag written successfully."};case"error":return{icon:"error",title:"Write Failed",desc:"error"in e?e.error.message:"Unknown error"};default:return{icon:"nfc",title:"",desc:""}}})();return s.jsx(yt.Root,{open:a,onOpenChange:i,dismissible:e.status!=="writing",children:s.jsxs(yt.Portal,{children:[s.jsx(yt.Overlay,{className:Ae.overlay}),s.jsx(yt.Content,{className:Ae.contentWrapper,children:s.jsxs("div",{className:Ae.content,children:[s.jsx("div",{className:Ae.handleContainer,children:s.jsx("div",{className:Ae.handle})}),s.jsx("div",{className:Ae.iconContainer,children:s.jsx("span",{className:`material-symbols-rounded ${Ae.nfcIcon}`,"data-state":e.status,children:u.icon})}),s.jsx("h3",{className:Ae.title,children:u.title}),s.jsx("p",{className:Ae.description,children:u.desc}),e.status==="error"&&s.jsxs("div",{className:Ae.buttonGroup,children:[s.jsx(me,{variant:"primary",onClick:()=>t({status:"writing",roomId:e.roomId,roomName:e.roomName}),className:Ae.actionButton,children:"Retry"}),s.jsx(me,{variant:"secondary",onClick:()=>l(!1),className:Ae.actionButton,children:"Cancel"})]}),e.status==="ready"&&s.jsx("div",{className:Ae.buttonGroup,children:s.jsx(me,{variant:"secondary",onClick:()=>l(!1),className:Ae.cancelButton,children:"Cancel"})}),e.status==="ready"&&s.jsxs("div",{className:Ae.devToolsContainer,children:[s.jsx("span",{className:Ae.devToolsLabel,children:"Developer Controls"}),s.jsxs("div",{className:Ae.devButtons,children:[s.jsx(me,{variant:"tertiary",size:"s",onClick:()=>c("success"),children:"Success"}),s.jsx(me,{variant:"tertiary",size:"s",onClick:()=>c("net-error"),children:"Net Error"}),s.jsx(me,{variant:"tertiary",size:"s",onClick:()=>c("locked-error"),children:"Locked"})]})]})]})})]})})},bm="_viewContainer_1hlha_5",Cm="_header_1hlha_29",ym="_controlsHeader_1hlha_71",_m="_listContainer_1hlha_99",On={viewContainer:bm,header:Cm,controlsHeader:ym,listContainer:_m},Sm=()=>{const e=ee(It),t=ee(mr),n=ee(hr),o=ee(ws),[r,a]=ie(fr),l=q(Su),i=q(bs),c=q(Cs),[d,u]=ie(No),[f,m]=ie(ko);O.useEffect(()=>{u(i),m(c)},[i,c,u,m]),O.useEffect(()=>()=>{a(""),n(new Set),u(null),m(null),t({status:"idle"})},[a,n,u,m,t]);const w=()=>{e({view:"none"})},g=(p,v)=>{t({status:"ready",roomId:p,roomName:v})};return s.jsxs(Ce.div,{className:On.viewContainer,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[s.jsxs("header",{className:On.header,children:[s.jsx("h3",{children:"Write NFC tags"}),s.jsx(me,{variant:"tertiary",size:"m",iconOnly:!0,onClick:w,"aria-label":"Close",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsxs("div",{className:On.controlsHeader,children:[s.jsx(Ho,{groupId:d,unitId:f,onClick:()=>o(!0)}),s.jsx(pr,{variant:"standalone",placeholder:"Search for a room...",value:r,onChange:a})]}),s.jsx("main",{className:On.listContainer,children:l.length>0?s.jsx(ru,{data:l,itemContent:(p,v)=>s.jsx(vt,{label:v.name,onClick:()=>g(v.id,v.name)},v.id)}):s.jsx(ls,{title:"No Rooms Found",message:"Select a facility group and unit to see a list of rooms to provision."})}),s.jsx(wm,{})]})},Im="_overlay_1qrfg_5",jm="_contentWrapper_1qrfg_19",Tm="_content_1qrfg_19",km="_handleContainer_1qrfg_67",Nm="_handle_1qrfg_67",Em="_sheetHeader_1qrfg_103",Rm="_sheetTitle_1qrfg_123",Hm="_searchContainer_1qrfg_139",Am="_listContainer_1qrfg_159",Mm="_listContent_1qrfg_173",Om="_sectionHeader_1qrfg_197",nt={overlay:Im,contentWrapper:jm,content:Tm,handleContainer:km,handle:Nm,sheetHeader:Em,sheetTitle:Rm,searchContainer:Hm,listContainer:Am,listContent:Mm,sectionHeader:Om},Lm=()=>{const[e,t]=ie(ma),[n,o]=ie(ha),[r,a]=ie(fa),l=q(pa),i=q(ga),c=ee(It),d=m=>{t(m),m||setTimeout(()=>{o(""),a(!1)},300)},u=m=>{t(!1),setTimeout(()=>{c({view:"form",type:"scheduled",method:"manual",checkId:m.id,roomName:m.residents[0]?.location||"Unknown Room",residents:m.residents,specialClassifications:m.specialClassifications})},300)},f=(m,w)=>{const g=new Set(w?.map(p=>p.residentId));return s.jsx("span",{style:{display:"flex",flexWrap:"wrap",gap:"4px",alignItems:"center"},children:m.map((p,v)=>s.jsxs("span",{style:{display:"inline-flex",alignItems:"center",color:"inherit"},children:[g.has(p.id)&&s.jsx("span",{className:"material-symbols-rounded",style:{fontSize:"14px",marginRight:"2px",fontVariationSettings:"'FILL' 1",color:"var(--surface-fg-primary)"},children:"warning"}),p.name,v<m.length-1?",":""]},p.id))})};return s.jsx(yt.Root,{open:e,onOpenChange:d,children:s.jsxs(yt.Portal,{children:[s.jsx(yt.Overlay,{className:nt.overlay}),s.jsx(yt.Content,{className:nt.contentWrapper,children:s.jsxs("div",{className:nt.content,children:[s.jsx("div",{className:nt.handleContainer,children:s.jsx("div",{className:nt.handle})}),s.jsxs("div",{className:nt.sheetHeader,children:[s.jsx("h3",{className:nt.sheetTitle,children:"Add Manual Check"}),s.jsx(me,{variant:"tertiary",size:"s",iconOnly:!0,onClick:()=>t(!1),children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),s.jsx("div",{className:nt.searchContainer,children:s.jsx(pr,{placeholder:"Search room or resident...",value:n,onChange:o,variant:"standalone"})}),s.jsx("div",{className:nt.listContainer,children:s.jsx("div",{className:nt.listContent,children:l.length>0?s.jsxs(s.Fragment,{children:[n&&s.jsx("div",{className:nt.sectionHeader,children:"Matching Results"}),l.map(m=>s.jsx(vt,{label:m.residents[0]?.location||"Unknown Room",subLabel:f(m.residents,m.specialClassifications),onClick:()=>u(m)},m.id))]}):s.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"48px 0",textAlign:"center",color:"var(--surface-fg-tertiary)"},children:[s.jsx("span",{className:"material-symbols-rounded",style:{fontSize:"48px",marginBottom:"8px",opacity:.5},children:"search_off"}),s.jsx("p",{children:"No rooms found."}),!r&&n&&s.jsx("div",{style:{marginTop:"16px"},children:s.jsxs(me,{variant:"secondary",size:"s",onClick:()=>a(!0),children:["Search All Facilities (",i.count,")"]})})]})})})]})})]})})},Dm="_modalWrapper_1da3w_5",Bm="_backdrop_1da3w_21",zm="_modalContainer_1da3w_33",$m="_header_1da3w_53",Pm="_rightActionContainer_1da3w_103",Fm="_content_1da3w_127",Vt={modalWrapper:Dm,backdrop:Bm,modalContainer:zm,header:$m,rightActionContainer:Pm,content:Fm},Wm={hidden:e=>({x:e==="slide-horizontal"?"100%":0,y:e==="slide-vertical"?"100%":0}),visible:{x:0,y:0},exit:({type:e,direction:t})=>e==="slide-horizontal"&&t?{x:t==="left"?"-100%":"100%",transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]}}:{x:e==="slide-horizontal"?"100%":0,y:e==="slide-vertical"?"100%":0,transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]}}},Bn=({isOpen:e,onClose:t,title:n,children:o,actionType:r="back",leftIcon:a="arrow_back",rightAction:l,transitionType:i="slide-horizontal",exitDirection:c})=>s.jsx(_t,{custom:{type:i,direction:c},children:e&&s.jsxs(Ce.div,{className:Vt.modalWrapper,custom:{type:i,direction:c},variants:Wm,initial:"hidden",animate:"visible",exit:"exit",transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[s.jsx("div",{className:Vt.backdrop}),s.jsxs("div",{className:Vt.modalContainer,children:[s.jsxs("header",{className:Vt.header,children:[r==="back"?s.jsx(me,{variant:"tertiary",size:"m",iconOnly:!0,onClick:t,"aria-label":"Back",children:s.jsx("span",{className:"material-symbols-rounded",children:a})}):null,s.jsx("h2",{style:{marginLeft:r==="close"?"8px":"0"},children:n}),s.jsx("div",{className:Vt.rightActionContainer,children:l||(r==="close"?s.jsx(me,{variant:"tertiary",size:"m",iconOnly:!0,onClick:t,"aria-label":"Close",children:s.jsx("span",{className:"material-symbols-rounded",children:"close"})}):null)})]}),s.jsx("main",{className:Vt.content,children:o})]})]})}),Vm="_switchRoot_voksj_5",Gm="_switchThumb_voksj_75",vo={switchRoot:Vm,switchThumb:Gm},ve=({checked:e,onCheckedChange:t,disabled:n,id:o})=>s.jsx(Kr,{className:vo.switchRoot,checked:e,onCheckedChange:t,disabled:n,id:o,children:s.jsx(Qr,{className:vo.switchThumb})}),qm="_container_1m7fz_5",Um="_label_1m7fz_19",Ym="_controlRow_1m7fz_31",Xm="_trackWrapper_1m7fz_49",Km="_trackGradient_1m7fz_75",Qm="_thumb_1m7fz_105",Jm="_swatch_1m7fz_165",Dt={container:qm,label:Um,controlRow:Ym,trackWrapper:Xm,trackGradient:Km,thumb:Qm,swatch:Jm},Zm=({value:e,onChange:t,label:n,id:o})=>{const r=O.useId(),a=o||r,l=O.useRef(null),[i,c]=O.useState(!1),d=e/360*100,u=O.useCallback(v=>{if(!l.current)return;const h=l.current.getBoundingClientRect(),x=v-h.left,S=Math.max(0,Math.min(1,x/h.width)),I=Math.round(S*360);t(I)},[t]),f=v=>{c(!0),u(v);const h=S=>{const I="touches"in S?S.touches[0].clientX:S.clientX;u(I)},x=()=>{c(!1),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",x)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",x),document.addEventListener("touchmove",h,{passive:!0}),document.addEventListener("touchend",x)},m=v=>{v.preventDefault(),f(v.clientX)},w=v=>{f(v.touches[0].clientX)},g=v=>{let h=e;switch(v.key){case"ArrowRight":case"ArrowUp":h=Math.min(360,e+5);break;case"ArrowLeft":case"ArrowDown":h=Math.max(0,e-5);break;case"Home":h=0;break;case"End":h=360;break;default:return}v.preventDefault(),t(h)},p=`oklch(0.65 0.18 ${e})`;return s.jsxs("div",{className:Dt.container,children:[s.jsx("label",{htmlFor:a,className:Dt.label,children:n}),s.jsxs("div",{className:Dt.controlRow,children:[s.jsxs("div",{ref:l,className:Dt.trackWrapper,onMouseDown:m,onTouchStart:w,children:[s.jsx("div",{className:Dt.trackGradient}),s.jsx("div",{className:Dt.thumb,style:{left:`${d}%`},role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":e,"aria-label":n,tabIndex:0,onKeyDown:g,"data-dragging":i})]}),s.jsx("div",{className:Dt.swatch,style:{backgroundColor:p},"aria-hidden":"true"})]})]})},eh="_settingsContainer_nbowl_5",th="_settingsSection_nbowl_23",nh="_sectionTitle_nbowl_35",sh="_settingsGroup_nbowl_55",oh="_settingsItem_nbowl_77",rh="_itemLabel_nbowl_143",ah="_logoutButton_nbowl_191",Ne={settingsContainer:eh,settingsSection:th,sectionTitle:nh,settingsGroup:sh,settingsItem:oh,itemLabel:rh,logoutButton:ah},ih=[{value:"qr",label:"QR Code",icon:"qr_code_2"},{value:"nfc",label:"NFC",icon:"nfc"}],lh=()=>{const[e,t]=ie(Qe),[n]=ie(Xt),[o,r]=ie(Io),a=q(Ut),l=ee(Ut),{trigger:i}=Je(),{theme:c,setTheme:d}=Eo(),u=a.user,f=p=>{i("light"),t(v=>({...v,hapticsEnabled:p}))},m=p=>{u&&r(v=>({...v,[u.username]:{...v[u.username],avatarHue:p}}))},w=()=>{l({isAuthenticated:!1,user:null})},g=u?o[u.username]?.avatarHue??Ro(u.username):0;return s.jsxs(Ce.div,{className:Ne.settingsContainer,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[s.jsxs("div",{className:Ne.settingsSection,children:[s.jsx("h3",{className:Ne.sectionTitle,children:"Preferences"}),s.jsxs("div",{className:Ne.settingsGroup,children:[s.jsxs("div",{className:Ne.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[s.jsx("label",{className:Ne.itemLabel,children:"Scan Mode"}),s.jsx(gt,{id:"scan-mode-toggle",options:ih,value:e.scanMode,onValueChange:p=>{i("selection"),t(v=>({...v,scanMode:p}))},itemDirection:"column"})]}),n.useHapticsEnabled&&s.jsxs("div",{className:Ne.settingsItem,children:[s.jsx("label",{htmlFor:"haptics-switch",className:Ne.itemLabel,children:"Haptic Feedback"}),s.jsx(ve,{id:"haptics-switch",checked:e.hapticsEnabled,onCheckedChange:f})]}),n.useSoundEnabled&&s.jsxs("div",{className:Ne.settingsItem,children:[s.jsx("label",{htmlFor:"audio-switch",className:Ne.itemLabel,children:"Audio Feedback"}),s.jsx(ve,{id:"audio-switch",checked:e.audioEnabled,onCheckedChange:p=>t(v=>({...v,audioEnabled:p}))})]}),n.enableDarkMode&&s.jsxs("div",{className:Ne.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[s.jsx("label",{className:Ne.itemLabel,children:"Theme"}),s.jsx(gt,{id:"theme-toggle",options:[{value:"light",label:"Light"},{value:"dark-a",label:"Dark A"},{value:"dark-b",label:"Dark B"},{value:"dark-c",label:"Dark C"}],value:c,onValueChange:p=>{i("selection"),d(p)}})]})]})]}),n.enableEnhancedAvatarDropdown&&s.jsxs("div",{className:Ne.settingsSection,children:[s.jsx("h3",{className:Ne.sectionTitle,children:"Appearance"}),s.jsx("div",{className:Ne.settingsGroup,children:s.jsx("div",{className:Ne.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},"data-no-hover":"true",children:s.jsx(Zm,{label:"Avatar Color",value:g,onChange:m})})})]}),s.jsxs("div",{className:Ne.settingsSection,children:[s.jsx("h3",{className:Ne.sectionTitle,children:"Account"}),s.jsx(me,{variant:"secondary",onClick:w,className:Ne.logoutButton,children:"Log Out"})]})]})},ch="_container_1kawd_5",dh="_settingSection_1kawd_23",uh="_sectionHeader_1kawd_35",mh="_settingsGroup_1kawd_55",hh="_settingsItem_1kawd_73",fh="_itemLabel_1kawd_99",ph="_disabledGroup_1kawd_109",gh="_toastGrid_1kawd_123",vh="_toastPlaygroundItem_1kawd_257",xh="_toastDescription_1kawd_269",wh="_shortcutHint_1kawd_283",M={container:ch,settingSection:dh,sectionHeader:uh,settingsGroup:mh,settingsItem:hh,itemLabel:fh,disabledGroup:ph,toastGrid:gh,toastPlaygroundItem:vh,toastDescription:xh,shortcutHint:wh},bh=[{label:"Sync Complete",message:"Data synced",icon:"cloud_done",variant:"success",logic:"Reconnection after offline."},{label:"Missed Check",message:"Check for Room 101 missed",icon:"history",variant:"warning",logic:"Ticker passes due + interval.",stableId:"lifecycle-missed-check"},{label:"Camera Error",message:`Camera not responding.
Try restarting your device.`,icon:"no_photography",variant:"alert",logic:"Simulated camera failure."},{label:"NFC Error",message:`Tag not read.
Hold phone steady against the tag.`,icon:"wifi_tethering_error",variant:"alert",logic:"Simulated NFC read failure."}],Ch=()=>{const[e,t]=ie(Qe),[n,o]=ie(_s),[r,a]=ie(pn),l=ee(Wn),i=ee(fn),c=q(va),{trigger:d}=Je(),u=q(Xt),f=g=>p=>{d("light"),g(p)},m=()=>{d("warning"),l({type:"RESET_DATA"}),i({message:"Application data reset to defaults.",icon:"delete",variant:"neutral"})},w=g=>{d("medium");let p=g.message;if(g.stableId==="lifecycle-missed-check"){const v=c.find(h=>h.stableId===g.stableId);if(v){let h=1;const x=v.message.match(/^(\d+)\s+checks\s+missed/i);x&&(h=parseInt(x[1],10)),h++,p=`${h} checks missed`}}i({message:p,icon:g.icon,variant:g.variant,stableId:g.stableId})};return s.jsxs(Ce.div,{className:M.container,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[s.jsxs("div",{className:M.settingSection,children:[s.jsx("h3",{className:M.sectionHeader,children:"Data Management"}),s.jsxs(me,{variant:"secondary",onClick:m,children:[s.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"}),"Reset Application Data"]}),s.jsx("span",{className:M.shortcutHint,children:"Shortcut: Ctrl+Backspace"})]}),s.jsxs("div",{className:M.settingSection,children:[s.jsx("h3",{className:M.sectionHeader,children:"Workflow"}),s.jsxs("div",{className:M.settingsGroup,children:[s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"simple-submit-switch",className:M.itemLabel,children:"Simple submit"}),s.jsx(ve,{id:"simple-submit-switch",checked:e.simpleSubmitEnabled,onCheckedChange:f(g=>t(p=>({...p,simpleSubmitEnabled:g})))})]}),s.jsxs("div",{className:e.simpleSubmitEnabled?M.disabledGroup:"",children:[s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"mark-multiple-switch",className:M.itemLabel,children:"Mark multiple"}),s.jsx(ve,{id:"mark-multiple-switch",checked:e.markMultipleEnabled,onCheckedChange:f(g=>t(p=>({...p,markMultipleEnabled:g})))})]}),s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"check-type-switch",className:M.itemLabel,children:"Show check type"}),s.jsx(ve,{id:"check-type-switch",checked:e.isCheckTypeEnabled,onCheckedChange:f(g=>t(p=>({...p,isCheckTypeEnabled:g})))})]})]}),s.jsxs("div",{className:M.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[s.jsx("label",{className:M.itemLabel,children:"Status count"}),s.jsx(gt,{id:"resident-status-count-toggle",options:[{value:"set-2",label:"2"},{value:"set-3",label:"3"},{value:"set-4",label:"4"},{value:"set-5",label:"5"},{value:"set-6",label:"6"},{value:"set-7",label:"7"}],value:e.residentStatusSet,onValueChange:g=>{d("selection"),t(p=>({...p,residentStatusSet:g}))}})]}),s.jsxs("div",{className:M.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[s.jsx("label",{className:M.itemLabel,children:"Status layout"}),s.jsx(gt,{id:"status-layout-toggle",options:[{value:"row",label:"Row"},{value:"column",label:"Column"},{value:"grid",label:"Grid"}],value:e.markMultipleLayout,onValueChange:g=>{d("selection"),t(p=>({...p,markMultipleLayout:g}))}})]})]})]}),s.jsxs("div",{className:M.settingSection,children:[s.jsx("h3",{className:M.sectionHeader,children:"App Style"}),s.jsx("div",{className:M.settingsGroup,children:s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"status-indicators-switch",className:M.itemLabel,children:"Show status indicators"}),s.jsx(ve,{id:"status-indicators-switch",checked:e.showStatusIndicators,onCheckedChange:f(g=>t(p=>({...p,showStatusIndicators:g})))})]})})]}),u.useHapticsEnabled&&s.jsxs("div",{className:M.settingSection,children:[s.jsx("h3",{className:M.sectionHeader,children:"Haptics"}),s.jsxs("div",{className:M.settingsGroup,children:[s.jsxs("div",{className:M.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[s.jsx("label",{className:M.itemLabel,children:"Success pattern"}),s.jsx(gt,{id:"haptic-success-toggle",options:[{value:"light",label:"Light (50ms)"},{value:"medium",label:"Medium (100ms)"},{value:"heavy",label:"Heavy (150ms)"}],value:e.hapticPatternSuccess,onValueChange:g=>{t(p=>({...p,hapticPatternSuccess:g})),setTimeout(()=>{d("success")},50)}})]}),s.jsxs("div",{className:M.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[s.jsx("label",{className:M.itemLabel,children:"Error pattern"}),s.jsx(gt,{id:"haptic-error-toggle",options:[{value:"simple",label:"Simple"},{value:"double",label:"Double"},{value:"grind",label:"Grind"},{value:"stutter",label:"Stutter"}],value:e.hapticPatternError,onValueChange:g=>{t(p=>({...p,hapticPatternError:g})),setTimeout(()=>{d("error")},50)}})]})]})]}),s.jsxs("div",{className:M.settingSection,children:[s.jsx("h3",{className:M.sectionHeader,children:"Simulation"}),s.jsxs("div",{className:M.settingsGroup,children:[s.jsxs("div",{className:M.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[s.jsx("label",{className:M.itemLabel,children:"Connectivity"}),s.jsx(gt,{id:"connectivity-toggle",options:[{value:"online",label:"Online",icon:"cloud"},{value:"offline",label:"Offline",icon:"cloud_off"}],value:r==="offline"?"offline":"online",onValueChange:g=>{d("selection"),a(g)},itemDirection:"column"})]}),s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"camera-fail-switch",className:M.itemLabel,children:"Force Camera Failure"}),s.jsx(ve,{id:"camera-fail-switch",checked:n.cameraFails,onCheckedChange:f(g=>o(p=>({...p,cameraFails:g})))})]}),s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"nfc-fail-switch",className:M.itemLabel,children:"Force NFC Failure"}),s.jsx(ve,{id:"nfc-fail-switch",checked:n.nfcFails,onCheckedChange:f(g=>o(p=>({...p,nfcFails:g})))})]}),s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"slow-load-switch",className:M.itemLabel,children:"Simulate slow loading"}),s.jsx(ve,{id:"slow-load-switch",checked:e.isSlowLoadEnabled,onCheckedChange:f(g=>t(p=>({...p,isSlowLoadEnabled:g})))})]})]})]}),s.jsxs("div",{className:M.settingSection,children:[s.jsx("h3",{className:M.sectionHeader,children:"Toast Playground"}),s.jsx("div",{className:M.toastGrid,children:bh.map((g,p)=>s.jsxs("div",{className:M.toastPlaygroundItem,children:[s.jsxs(me,{variant:"secondary",onClick:()=>w(g),children:[s.jsx("span",{className:"material-symbols-rounded",children:g.icon}),g.label]}),s.jsx("p",{className:M.toastDescription,children:g.logic})]},p))})]})]})},yh=()=>{const[e,t]=ie(Xt),[n,o]=ie(Qe),{trigger:r}=Je(),{theme:a,setTheme:l}=Eo();O.useEffect(()=>{!e.enableDarkMode&&a!=="light"&&l("light"),!e.useSoundEnabled&&n.audioEnabled&&o(c=>({...c,audioEnabled:!1})),!e.useHapticsEnabled&&n.hapticsEnabled&&o(c=>({...c,hapticsEnabled:!1}))},[e.enableDarkMode,e.useSoundEnabled,e.useHapticsEnabled,a,l,n.audioEnabled,n.hapticsEnabled,o]);const i=c=>d=>{r("light"),c(d)};return s.jsx(Ce.div,{className:M.container,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:s.jsxs("div",{className:M.settingSection,children:[s.jsxs("div",{className:M.warningBlock,style:{padding:"var(--spacing-3)",marginBottom:"var(--spacing-3)",backgroundColor:"var(--color-surface-tertiary)",border:"1px solid var(--color-control-tertiary-border)",borderRadius:"var(--radius-3)",fontSize:"var(--font-size-sm)",color:"var(--color-text-secondary)",lineHeight:"1.4"},children:[s.jsx("strong",{children:"Experimental Features"}),s.jsx("br",{}),"These are just conceptual ideas for a potential future version.  Nothing here is expected for v1."]}),s.jsxs("div",{className:M.settingsGroup,children:[s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"use-sound-switch",className:M.itemLabel,children:"Use Sound"}),s.jsx(ve,{id:"use-sound-switch",checked:e.useSoundEnabled,onCheckedChange:i(c=>t(d=>({...d,useSoundEnabled:c})))})]}),s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"use-haptics-switch",className:M.itemLabel,children:"Use Haptics"}),s.jsx(ve,{id:"use-haptics-switch",checked:e.useHapticsEnabled,onCheckedChange:i(c=>t(d=>({...d,useHapticsEnabled:c})))})]}),s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"enable-dark-mode-switch",className:M.itemLabel,children:"Enable Dark Mode"}),s.jsx(ve,{id:"enable-dark-mode-switch",checked:e.enableDarkMode,onCheckedChange:i(c=>t(d=>({...d,enableDarkMode:c})))})]}),s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"enable-enhanced-avatar-switch",className:M.itemLabel,children:"Enhanced Avatar Dropdown"}),s.jsx(ve,{id:"enable-enhanced-avatar-switch",checked:e.enableEnhancedAvatarDropdown,onCheckedChange:i(c=>t(d=>({...d,enableEnhancedAvatarDropdown:c})))})]})]}),s.jsx("h3",{style:{marginTop:"var(--spacing-5)",marginBottom:"var(--spacing-3)",fontSize:"0.875rem",fontWeight:600,color:"var(--surface-fg-secondary)"},children:"Late Check Concepts"}),s.jsxs("div",{className:M.settingsGroup,children:[s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"feat-vignette-switch",className:M.itemLabel,children:"Active Vignette"}),s.jsx(ve,{id:"feat-vignette-switch",checked:e.feat_vignette,onCheckedChange:i(c=>t(d=>({...d,feat_vignette:c})))})]}),s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"feat-glass-tint-switch",className:M.itemLabel,children:"Glass Tinting"}),s.jsx(ve,{id:"feat-glass-tint-switch",checked:e.feat_glass_tint,onCheckedChange:i(c=>t(d=>({...d,feat_glass_tint:c})))})]})]}),s.jsxs("div",{className:M.settingsGroup,style:{marginTop:"var(--spacing-4)"},children:[s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"feat-card-gradient-switch",className:M.itemLabel,children:"Magma Gradient"}),s.jsx(ve,{id:"feat-card-gradient-switch",checked:e.feat_card_gradient,onCheckedChange:i(c=>t(d=>({...d,feat_card_gradient:c})))})]}),s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"feat-card-border-switch",className:M.itemLabel,children:"Fluid Borders"}),s.jsx(ve,{id:"feat-card-border-switch",checked:e.feat_card_border,onCheckedChange:i(c=>t(d=>({...d,feat_card_border:c})))})]}),s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"feat-hazard-texture-switch",className:M.itemLabel,children:"Hazard Texture"}),s.jsx(ve,{id:"feat-hazard-texture-switch",checked:e.feat_hazard_texture,onCheckedChange:i(c=>t(d=>({...d,feat_hazard_texture:c})))})]}),s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"feat-invert-card-switch",className:M.itemLabel,children:"Invert Card"}),s.jsx(ve,{id:"feat-invert-card-switch",checked:e.feat_invert_card,onCheckedChange:i(c=>t(d=>({...d,feat_invert_card:c})))})]}),s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"feat-invert-badge-switch",className:M.itemLabel,children:"Invert Badge"}),s.jsx(ve,{id:"feat-invert-badge-switch",checked:e.feat_invert_badge,onCheckedChange:i(c=>t(d=>({...d,feat_invert_badge:c})))})]})]}),s.jsx("div",{className:M.settingsGroup,style:{marginTop:"var(--spacing-4)"},children:s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"feat-badge-pulse-switch",className:M.itemLabel,children:"Badge Pulse"}),s.jsx(ve,{id:"feat-badge-pulse-switch",checked:e.feat_badge_mode==="pulse",onCheckedChange:i(c=>t(d=>({...d,feat_badge_mode:c?"pulse":"none"})))})]})}),s.jsx("div",{className:M.settingsGroup,style:{marginTop:"var(--spacing-4)"},children:s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"feat-jump-fab-switch",className:M.itemLabel,children:"Jump FAB"}),s.jsx(ve,{id:"feat-jump-fab-switch",checked:e.feat_jump_fab,onCheckedChange:i(c=>t(d=>({...d,feat_jump_fab:c})))})]})}),s.jsx("div",{className:M.settingsGroup,style:{marginTop:"var(--spacing-4)"},children:s.jsxs("div",{className:M.settingsItem,children:[s.jsx("label",{htmlFor:"feat-bio-sync-switch",className:M.itemLabel,children:"Bio-Sync Mode"}),s.jsx(ve,{id:"feat-bio-sync-switch",checked:e.feat_bio_sync,onCheckedChange:i(c=>t(d=>({...d,feat_bio_sync:c})))})]})})]})})},_h="_container_1r85s_5",Sh="_contextBanner_1r85s_25",Ih="_viewWrapper_1r85s_61",jh="_listContainer_1r85s_87",Gt={container:_h,contextBanner:Sh,viewWrapper:Ih,listContainer:jh},xo={enter:e=>({x:e===0?0:e>0?"100%":"-100%",opacity:1}),center:{x:0,opacity:1},exit:e=>({x:e<0?"100%":"-100%",opacity:1})},Th=()=>{const[e,t]=ie(xa),[n,o]=ie(ws),[r,a]=ie(bs),[l,i]=ie(Cs),c=ee(wa),d=ee(ys),u=ee(Co),{trigger:f}=Je(),[m,w]=O.useState("group"),[g,p]=O.useState(0),[v,h]=O.useState(r),[x,S]=O.useState("right"),I=e||n;O.useEffect(()=>{I&&(w("group"),p(0),h(r),S("right"))},[I,r]);const y=()=>{if(m==="unit"){p(-1),w("group");return}S("right"),e?c():o(!1)},C=R=>{f("selection"),h(R),p(1),w("unit")},b=R=>{f("selection"),v&&(S("left"),(v!==r||R!==l)&&u(!0),a(v),i(R),e?t(!1):d("dashboardTime"),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!1)})}))},j=is.find(R=>R.id===v),T=j?.units||[],A=()=>m==="group"?"Select Facility":"Select Unit";return s.jsx(Bn,{isOpen:I,onClose:y,title:A(),transitionType:"slide-horizontal",exitDirection:x,children:s.jsx("div",{className:Gt.container,children:s.jsx(_t,{initial:!1,custom:g,mode:"popLayout",children:m==="group"?s.jsx(Ce.div,{className:Gt.viewWrapper,custom:g,variants:xo,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:s.jsx("div",{className:Gt.listContainer,style:{borderTop:"none"},children:is.map(R=>s.jsx(vt,{label:R.name,leadingIcon:"domain",onClick:()=>C(R.id),showChevron:!0},R.id))})},"group-list"):s.jsxs(Ce.div,{className:Gt.viewWrapper,custom:g,variants:xo,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[s.jsxs("div",{className:Gt.contextBanner,children:[s.jsx("span",{className:"material-symbols-rounded",style:{fontSize:20},children:"domain"}),j?.name]}),s.jsx("div",{className:Gt.listContainer,children:T.map(R=>s.jsx(vt,{label:R.name,onClick:()=>b(R.id),showChevron:!0},R.id))})]},"unit-list")})})})},Tr=O.createContext(null),kh=()=>{const e=O.useContext(Tr);if(!e)throw new Error("useGestureContext must be used within a GestureProvider");return e},Nh=({children:e})=>{const t=Ps(0),n=Ps(0);return s.jsx(Tr.Provider,{value:{filmStripProgress:t,sideMenuProgress:n},children:e})},Eh=()=>{O.useEffect(()=>{if(!window.visualViewport)return;const e=()=>{requestAnimationFrame(()=>{const t=window.visualViewport?.height;t&&document.documentElement.style.setProperty("--visual-viewport-height",`${t}px`)})};return e(),window.visualViewport.addEventListener("resize",e),window.visualViewport.addEventListener("scroll",e),()=>{window.visualViewport?.removeEventListener("resize",e),window.visualViewport?.removeEventListener("scroll",e),document.documentElement.style.removeProperty("--visual-viewport-height")}},[])},Rh="_appContainer_1ckhx_5",Hh="_sideMenuContainer_1ckhx_25",Ah="_mainViewWrapper_1ckhx_51",Mh="_backdrop_1ckhx_73",Oh="_chromeContainer_1ckhx_107",rn={appContainer:Rh,sideMenuContainer:Hh,mainViewWrapper:Ah,backdrop:Mh,chromeContainer:Oh},as={type:"spring",stiffness:400,damping:40,restDelta:.001},Lh=()=>{const[e,t]=ie(ys),n=q(It),o=q(pn),[r,a]=ie(yo),[l,i]=ie(_o),[c,d]=ie(So),[u,f]=O.useState(0),m=O.useRef(null),w=O.useRef(null),{filmStripProgress:g,sideMenuProgress:p}=kh(),v=O.useRef(!1),h=O.useRef(0),x=O.useRef(0),S=O.useRef(0);O.useEffect(()=>{m.current&&f(m.current.offsetWidth)},[]),O.useEffect(()=>{v.current||(e==="sideMenu"?Kn(p,1,as):Kn(p,0,as))},[e,p]),O.useEffect(()=>{n.view!=="none"&&(p.get()>0&&p.set(0),e==="sideMenu"&&t("dashboardTime"))},[n.view,p,e,t]),Eh(),O.useEffect(()=>{n.view==="form"&&"residents"in n&&n.residents.length>0?document.title=`Safety Check - ${n.residents[0].location}`:document.title="Safety Check App"},[n]);const I=()=>{t("dashboardTime")},y=D=>{n.view==="none"&&(h.current=D.clientX,x.current=D.clientY,S.current=g.get(),v.current=!1)},C=D=>{if(n.view==="none"){if(v.current){const E=D.clientX-h.current,L=window.innerWidth,$=E/L;if(e==="sideMenu"){const U=Math.max(0,Math.min(1,1+E/u));p.set(U);return}if(e==="dashboardTime"&&E>0){const U=Math.max(0,Math.min(1,E/u));p.set(U);return}if(p.get()===0){const U=Math.max(0,Math.min(1,S.current-$));g.set(U)}return}if(D.buttons>0||D.pointerType==="touch"){const E=Math.abs(D.clientX-h.current),L=Math.abs(D.clientY-x.current);E>10&&E>L&&(v.current=!0,D.currentTarget.setPointerCapture(D.pointerId))}}},b=D=>{if(!v.current)return;v.current=!1,D.currentTarget.releasePointerCapture(D.pointerId);const E=D.clientX-h.current,L=p.get();let $=!1;e==="sideMenu"?$=!(L<.8||E<-50):$=L>.2||E>50,Kn(p,$?1:0,as),t($?"sideMenu":"dashboardTime")},j=Tn(p,[0,1],[0,u]),T=Tn(p,[0,1],[-u,0]),A=Tn(p,[0,1],[0,1]),R=Tn(p,D=>D>0?"auto":"none");return s.jsxs("div",{className:rn.appContainer,onPointerDown:y,onPointerMove:C,onPointerUp:b,onPointerCancel:b,onPointerLeave:b,style:{touchAction:"pan-y"},children:[s.jsx(Ce.div,{ref:m,className:rn.sideMenuContainer,style:{x:T},children:s.jsx(Yi,{})}),s.jsxs(Ce.div,{className:rn.mainViewWrapper,style:{x:j},children:[s.jsx(ji,{}),s.jsx(Ce.div,{className:rn.backdrop,style:{opacity:A,pointerEvents:R},onClick:I}),s.jsxs("div",{ref:w,className:rn.chromeContainer,children:[o!=="online"&&s.jsx(El,{}),s.jsx(fl,{})]}),s.jsx(bl,{})]}),s.jsxs(_t,{children:[n.view==="scanning"&&s.jsx(Ul,{}),n.view==="form"&&s.jsx(Xc,{checkData:n}),n.view==="provisioning"&&s.jsx(Sm,{})]}),s.jsx(Lm,{}),s.jsx(Th,{}),s.jsx(Bn,{isOpen:r,onClose:()=>a(!1),title:"Settings",transitionType:"slide-horizontal",actionType:"back",children:s.jsx(lh,{})}),s.jsx(Bn,{isOpen:l,onClose:()=>i(!1),title:"Developer Tools",transitionType:"slide-horizontal",actionType:"back",children:s.jsx(Ch,{})}),s.jsx(Bn,{isOpen:c,onClose:()=>d(!1),title:"Future Ideas",transitionType:"slide-horizontal",actionType:"back",children:s.jsx(yh,{})})]})},Fh=()=>s.jsx(Nh,{children:s.jsx(Lh,{})});export{Fh as AppShell};
