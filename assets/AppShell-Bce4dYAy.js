import{j as n,a as Ga,b as Ua,T as qa,c as Ya,d as Xa,A as Ka,e as Qa,f as Ja,g as Za,h as er,i as tr,I as nr,k as sr,l as or,m as ar,O as rr,n as ir,o as lr,p as cr}from"./vendor-ui-C96W7_pt.js";import{u as F,a as j,R as S,e as Z,f as ee,d as Qt}from"./vendor-react-B_tfjPbg.js";import{s as jo,f as ur,t as dr,a as Vt,w as xt,r as To,b as Pe,c as ys,d as mr,i as ko,e as Gs,g as hr,h as fr,p as pr,j as cs,k as Io,l as No,m as Ro,n as ws,o as Ft,q as Cs,u as _s,v as gr,x as Vn,y as vr,z as Ss,A as Eo,B as js,C as Ao,D as xr,E as Gn,F as Oo,G as gn,H as br,I as Ts,J as yr,K as wr,L as Cr,M as Ho,N as Mo,O as _r,P as Sr,Q as jr,R as Lo,S as Bo,T as Tr,U as kr,V as Ir,W as Nr,X as Rr,Y as Er,Z as Do,_ as Ar,$ as zo,a0 as Or,a1 as Hr}from"./index-BNIXJS0X.js";import{m as te,A as lt,M as Mr,u as Lr,a as Us,b as Jn,c as Nn}from"./vendor-heavy-CnZYldLt.js";import{B as ae,A as Br,g as ks,a as Dr,u as zr}from"./useScrollToFocused-COAVzxgK.js";const Pr=(e,t)=>{const s=(e.getTime()-t)/1e3;if(s<0){const i=Math.abs(s)/60,c=Math.floor(i/60),u=Math.floor(i%60);if(i<1)return"Overdue";const h=[];return c>0&&h.push(`${c}h`),u>0&&h.push(`${u}m`),`Overdue ${h.join(" ")}`}if(s<60)return`${Math.max(0,s).toFixed(1)}s`;if(s<300){const i=Math.floor(s/60),c=Math.floor(s%60);return`${i}m ${String(c).padStart(2,"0")}s`}if(s<3600)return`${Math.ceil(s/60)}m`;const o=s/60,a=Math.floor(o/60),r=Math.round(o%60),l=[];return a>0&&l.push(`${a}h`),r>0&&l.push(`${r}m`),l.join(" ")},$r=(e,t)=>{const s=t==="early"||t==="pending"||t==="due"||t==="missed",o=Date.now(),a=(e.getTime()-o)/1e3;let r=jo;t!=="missed"&&(a<60&&a>-60?r=ur:a<300&&(r=dr));const l=F(r);if(!s)return"";if(t==="missed"){const i=(l-e.getTime())/1e3,c=Math.floor(i/60),u=Math.floor(c/60),h=c%60;if(c<1)return"Overdue";const d=[];return u>0&&d.push(`${u}h`),h>0&&d.push(`${h}m`),`Overdue ${d.join(" ")}`}return Pr(e,l)},Fr=["pulse-basic","pulse-gradient","magma-flow","border-pulse","hazard-fade","card-pulse-basic","card-pulse-gradient","indicator-pulse","badge-pulse","glass-tint-pulse","pulseRingExpand","shimmerOpacity"];function vn(e,t){const{isEnabled:s,animationNames:o=Fr}=t,a=j.useRef(!1);typeof window<"u"&&(a.current=window.matchMedia("(prefers-reduced-motion: reduce)").matches),j.useLayoutEffect(()=>{if(!s||!e.current||a.current)return;const r=e.current,l=u=>{if("animationName"in u){const h=u.animationName;o.some(d=>h.includes(d))&&(u.startTime=0,console.log(`[useWaapiSync] Synced '${h}' to startTime=0`))}};r.getAnimations({subtree:!0}).forEach(l);const c=u=>{if(o.some(h=>u.animationName.includes(h))){const d=r.getAnimations({subtree:!0}).find(m=>m.animationName===u.animationName);d&&l(d)}};return r.addEventListener("animationstart",c),()=>{r.removeEventListener("animationstart",c)}},[s,e,o])}const Wr="_badge_sy3c1_5",Vr="_badgeIcon_sy3c1_37",Gr="_badgePulse_sy3c1_161",Ur="_badgeInvert_sy3c1_197",qr="_badgeInvertForCard_sy3c1_219",en={badge:Wr,badgeIcon:Vr,badgePulse:Gr,badgeInvert:Ur,badgeInvertForCard:qr},Yr=e=>{switch(e){case"due":return{label:"Due",icon:"schedule"};case"missed":return{label:"Missed",icon:"notifications_active"};case"completing":return{label:"Completed",icon:"check_circle"};case"complete":return{label:"Completed",icon:"check_circle"};case"queued":return{label:"Queued",icon:"cloud_off"};default:return{label:"",icon:null}}},Xr=(e,t)=>{const s=new Date(e).getTime(),o=(t-s)/(60*1e3),a=Math.max(1,Math.ceil(o/15));return a===1?"Missed":`${a} Missed`},Kr=({status:e,type:t,dueDate:s})=>{const o=F(jo),{feat_badge_mode:a,feat_invert_badge:r,feat_invert_card:l}=F(Vt),i=S.useRef(null),c=a==="pulse"&&e==="missed";if(vn(i,{isEnabled:c}),e==="pending"||e==="early")return null;const u=Yr(e);let h=u.label,d=e;t==="supplemental"&&(h="Supplemental",d="supplemental"),e==="missed"&&s&&(h=Xr(s,o));const m=e==="missed"&&r&&!l,f=e==="missed"&&l,g=[en.badge,c?en.badgePulse:"",m?en.badgeInvert:"",f?en.badgeInvertForCard:""].filter(Boolean).join(" ");return n.jsxs("div",{className:g,"data-status":d,ref:i,children:[u.icon&&n.jsx("span",{className:`material-symbols-rounded ${en.badgeIcon}`,children:u.icon}),h]})},Qr="_checkCard_1jx0x_117",Jr="_statusIndicator_1jx0x_273",Zr="_mainContent_1jx0x_353",ei="_topRow_1jx0x_369",ti="_bottomRow_1jx0x_383",ni="_locationInfo_1jx0x_397",si="_locationText_1jx0x_411",oi="_residentList_1jx0x_429",ai="_residentListItem_1jx0x_453",ri="_warningIcon_1jx0x_475",ii="_timeDisplay_1jx0x_487",li="_cardGradient_1jx0x_561",ci="_cardBorder_1jx0x_643",ui="_cardHazard_1jx0x_683",di="_cardPulseBasic_1jx0x_749",mi="_cardInvert_1jx0x_949",Ae={checkCard:Qr,statusIndicator:Jr,mainContent:Zr,topRow:ei,bottomRow:ti,locationInfo:ni,locationText:si,residentList:oi,residentListItem:ai,warningIcon:ri,timeDisplay:ii,cardGradient:li,cardBorder:ci,cardHazard:ui,cardPulseBasic:di,cardInvert:mi},hi=({resident:e,check:t})=>{const s=t.specialClassifications?.some(o=>o.residentId===e.id);return n.jsxs("li",{className:Ae.residentListItem,children:[s&&n.jsx("span",{className:`material-symbols-rounded ${Ae.warningIcon}`,children:"warning"}),e.name]})},fi=({check:e,transition:t})=>{const s=Z(xt),o=F(To),{showStatusIndicators:a}=F(Pe),{feat_card_pulse:r,feat_card_gradient:l,feat_card_border:i,feat_hazard_texture:c,feat_invert_card:u}=F(Vt),h=o===e.id,d=e.status==="missed",m=j.useRef(null);vn(m,{isEnabled:d&&(r!=="none"||l||i||c)});const g=j.useMemo(()=>new Date(e.dueDate),[e.dueDate]),b=$r(g,e.status),v=!["complete","supplemental","completing","queued"].includes(e.status),p=()=>{v&&s({view:"form",type:"scheduled",method:"manual",checkId:e.id,roomName:e.residents[0].location,residents:e.residents,specialClassifications:e.specialClassifications})},{residents:x}=e,k=x[0]?.location||"N/A",_=!["complete","supplemental","completing","queued"].includes(e.status),w=d&&r==="basic"?Ae.cardPulseBasic:d&&r==="gradient"?Ae.cardGradient:"",y=d&&r==="none"&&l?Ae.cardGradient:"",C=[Ae.checkCard,h?Ae.isCompleting:"",w,y,d&&i?Ae.cardBorder:"",d&&c?Ae.cardHazard:"",d&&u?Ae.cardInvert:""].filter(Boolean).join(" ");return n.jsx(te.div,{initial:{height:"auto",marginBottom:"var(--space-3)"},animate:{height:"auto",marginBottom:"var(--space-3)"},exit:{height:0,marginBottom:0,overflow:"hidden",transition:{delay:.1,duration:.2,ease:"linear"}},children:n.jsxs(te.div,{ref:m,transition:t,initial:{opacity:0,x:0},animate:{opacity:1,x:0},exit:{x:"100%",opacity:0,transition:{x:{duration:.2,ease:[.25,1,.5,1]},opacity:{duration:.2,ease:"easeOut"}}},className:C,"data-status":e.status,"data-check-id":e.id,"data-indicators-visible":a,onClick:p,"aria-disabled":!v,whileTap:v?{scale:.98}:{},children:[a&&_&&n.jsx("div",{className:Ae.statusIndicator,"data-status":e.status}),n.jsxs("div",{className:Ae.mainContent,children:[n.jsxs("div",{className:Ae.topRow,children:[n.jsx("div",{className:Ae.locationInfo,children:n.jsx("span",{className:Ae.locationText,children:k})}),n.jsx(Kr,{status:e.status,type:e.type,dueDate:e.dueDate})]}),n.jsxs("div",{className:Ae.bottomRow,children:[n.jsx("ul",{className:Ae.residentList,children:x.map(T=>n.jsx(hi,{resident:T,check:e},T.id))}),n.jsx("div",{className:Ae.timeDisplay,children:v?b:null})]})]})]})})},pi="_shimmer_1m0k7_23",gi="_cardWrapper_1m0k7_49",vi="_indicator_1m0k7_89",xi="_mainContent_1m0k7_109",bi="_topRow_1m0k7_123",yi="_bottomRow_1m0k7_125",wi="_location_1m0k7_153",Ci="_badge_1m0k7_155",_i="_resident_1m0k7_157",Si="_residentShort_1m0k7_159",ft={shimmer:pi,cardWrapper:gi,indicator:vi,mainContent:xi,topRow:bi,bottomRow:yi,location:wi,badge:Ci,resident:_i,residentShort:Si},ji=()=>n.jsxs("div",{className:ft.cardWrapper,children:[n.jsx("div",{className:ft.shimmer}),n.jsx("div",{className:ft.indicator}),n.jsxs("div",{className:ft.mainContent,children:[n.jsxs("div",{className:ft.topRow,children:[n.jsx("div",{className:ft.location}),n.jsx("div",{className:ft.badge})]}),n.jsxs("div",{className:ft.bottomRow,children:[n.jsx("div",{className:ft.resident}),n.jsx("div",{className:ft.residentShort})]})]})]}),Ti="_emptyStateContainer_11y9y_3",ki="_emptyStateMessage_11y9y_47",Rn={emptyStateContainer:Ti,emptyStateMessage:ki},us=({icon:e="search_off",title:t,message:s,action:o})=>n.jsxs("div",{className:Rn.emptyStateContainer,children:[n.jsx("span",{className:"material-symbols-rounded large-feature-icon",children:e}),n.jsx("h3",{className:Rn.emptyStateTitle,children:t}),s&&n.jsx("p",{className:Rn.emptyStateMessage,children:s}),o&&n.jsx("div",{className:Rn.actionContainer,children:o})]}),Ii="_chipContainer_5af65_5",Ni="_chipContent_5af65_19",Ri="_chipText_5af65_43",Ei="_clearButton_5af65_63",En={chipContainer:Ii,chipContent:Ni,chipText:Ri,clearButton:Ei},Ai=({filterLabel:e,onClear:t})=>n.jsx(te.div,{layout:!0,className:En.chipContainer,initial:{y:-20,opacity:0,height:0},animate:{y:0,opacity:1,height:"auto"},exit:{y:-20,opacity:0,height:0},transition:{type:"tween",duration:.25,ease:"easeInOut"},children:n.jsxs("div",{className:En.chipContent,children:[n.jsxs("span",{className:En.chipText,children:["Showing: ",n.jsx("strong",{children:e})]}),n.jsx(ae,{variant:"quaternary",size:"xs",iconOnly:!0,onClick:t,"aria-label":"Clear filter",className:En.clearButton,children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})}),Oi="_emptyStateContainer_1yck0_3",An={emptyStateContainer:Oi},Hi=({filterLabel:e,onClear:t})=>n.jsxs("div",{className:An.emptyStateContainer,children:[n.jsx("div",{className:An.iconWrapper,children:n.jsx("span",{className:"material-symbols-rounded",children:"filter_list_off"})}),n.jsxs("h3",{className:An.title,children:['No "',e,'" checks']}),n.jsx("p",{className:An.message,children:"There are no checks that match the current filter. Try clearing the filter to see all upcoming checks."}),n.jsx(ae,{variant:"secondary",size:"m",onClick:t,children:"Clear Filter"})]}),Mi="_scrollContainer_1khaw_5",Li="_headerWrapper_1khaw_49",Bi="_priorityGroupHeader_1khaw_57",tn={scrollContainer:Mi,headerWrapper:Li,priorityGroupHeader:Bi},qs={type:"tween",duration:.25,ease:[.25,1,.5,1]},Di=8,Ys={missed:"Missed",due:"Due",queued:"Queued"},zi=e=>{const t={Missed:[],Due:[],Upcoming:[]};return e.forEach(s=>{if(["complete","supplemental","queued"].includes(s.status))return;let o=s.status;if(s.status==="completing"){const a=s.baseInterval*60*1e3,l=new Date(s.dueDate).getTime()-a,c=(Date.now()-l)/(60*1e3);c<13?o="pending":c<15?o="due":o="missed"}switch(o){case"missed":t.Missed.push(s);break;case"due":t.Due.push(s);break;case"early":case"pending":default:t.Upcoming.push(s);break}}),Object.entries(t).map(([s,o])=>({title:s,checks:o})).filter(s=>s.checks.length>0)},Pi=e=>{const t=e.filter(o=>!["complete","supplemental","missed","queued"].includes(o.status)),s=[];return t.length>0&&s.push({title:"Walking Order",checks:t}),s},$i=({viewType:e})=>{const t=F(e==="time"?ys:mr),{isSlowLoadEnabled:s}=F(Pe),[o,a]=ee(ko),r=F(Gs),l=F(hr),[i,c]=ee(fr),u=Z(Gs);j.useEffect(()=>{if(o){const g=setTimeout(()=>a(!1),s?3e3:750);return()=>clearTimeout(g)}},[o,a,s]);const h=()=>{u(!0),c("all"),setTimeout(()=>u(!1),500)},d=o,m=i!=="all",f=()=>{if(d)return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:tn.headerWrapper,children:n.jsx("div",{className:tn.priorityGroupHeader,style:{width:"100px",height:"1.5rem",backgroundColor:"transparent",marginBottom:"var(--spacing-2)"},children:n.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"var(--surface-bg-tertiary)",borderRadius:"var(--radius-sm)",opacity:.3}})})}),Array.from({length:Di}).map((b,v)=>n.jsx(ji,{},v))]});if(t.length===0)return l?n.jsx(us,{title:"No Results Found",message:`Your search for "${l}" did not return any results.`}):m?n.jsx(Hi,{filterLabel:Ys[i],onClear:h}):n.jsx(us,{title:"All Checks Complete",message:"There are no checks due at this time."});const g=e==="time"?zi(t):Pi(t);return n.jsxs(n.Fragment,{children:[n.jsx(lt,{children:g.flatMap(b=>[n.jsx(te.div,{className:tn.headerWrapper,layout:!0,transition:qs,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n.jsx("h2",{className:tn.priorityGroupHeader,children:b.title})},b.title),...b.checks.map(v=>n.jsx(fi,{check:v,transition:qs},v.id))])}),n.jsx("div",{style:{height:"calc(var(--footer-height, 96px) + var(--spacing-4))"}})]})};return n.jsxs("div",{className:tn.scrollContainer,"data-refreshing":r,children:[n.jsx("div",{style:{height:"var(--header-height)"}}),n.jsx(lt,{mode:"wait",children:m&&n.jsx(Ai,{filterLabel:Ys[i],onClear:h},i)}),f()]})},Fi="_container_r0gas_5",Wi={container:Fi},Vi=()=>n.jsx("div",{className:Wi.container,children:n.jsx($i,{viewType:"time"})}),Gi={light:[50],medium:[100],heavy:[150]},Ui={simple:[200],double:[300,100,300],grind:[50,50,50,50,50,50],stutter:[50,100,50,100,200]},qi={warning:[100,50,100],light:10,medium:40,heavy:60,selection:5},Yi=150,Ue=()=>{const e=F(Pe),t=j.useRef(0);return{trigger:j.useCallback(o=>{if(e.hapticsEnabled&&window.navigator&&"vibrate"in window.navigator){const a=Date.now();if(a-t.current<Yi)return;try{let r;o==="success"?r=Gi[e.hapticPatternSuccess]:o==="error"?r=Ui[e.hapticPatternError]:r=qi[o],window.navigator.vibrate(r),t.current=a}catch{}}},[e.hapticsEnabled,e.hapticPatternSuccess,e.hapticPatternError])}},Un=()=>{const{audioEnabled:e}=F(Pe),t=F(pr);return{play:j.useCallback((o,a)=>{!e||!t||t(o,a)},[e,t])}},Xi=(e,t=7,s=3e3)=>{const o=j.useRef(0),a=j.useRef(0),r=j.useRef(e);return r.current=e,{onTap:j.useCallback(()=>{const i=Date.now();i-a.current>s&&(o.current=0,a.current=i),o.current+=1,o.current===1&&(a.current=i),o.current>=t&&(o.current=0,r.current())},[t,s]),currentCount:o.current}},Ki="_contextCard_17t6w_5",Qi="_stackedContainer_17t6w_43",Ji="_stackItem_17t6w_57",Zi="_label_17t6w_69",el="_value_17t6w_85",tl="_actionIcon_17t6w_97",yt={contextCard:Ki,stackedContainer:Qi,stackItem:Ji,label:Zi,value:el,actionIcon:tl},Po=({groupId:e,unitId:t,onClick:s})=>{const o=cs.find(i=>i.id===e),a=o?.units.find(i=>i.id===t),r=o?.name||"Select Group",l=a?.name||"Select Unit";return n.jsxs("button",{className:yt.contextCard,onClick:s,type:"button",children:[n.jsxs("div",{className:yt.stackedContainer,children:[n.jsxs("div",{className:yt.stackItem,children:[n.jsx("span",{className:yt.label,children:"Group"}),n.jsx("span",{className:yt.value,children:r})]}),n.jsxs("div",{className:yt.stackItem,children:[n.jsx("span",{className:yt.label,children:"Unit"}),n.jsx("span",{className:yt.value,children:l})]})]}),n.jsx("div",{className:yt.actionIcon,children:n.jsx("span",{className:"material-symbols-rounded",children:"swap_horiz"})})]})},wt=({label:e,subLabel:t,leadingIcon:s,leadingElement:o,trailingIcon:a,trailingElement:r,isSelected:l,disabled:i,onClick:c,indent:u=!1,showChevron:h=!0})=>{let d=o;!d&&s?d=n.jsx("span",{className:"material-symbols-rounded",children:s}):!d&&l&&(d=n.jsx("span",{className:"material-symbols-rounded",children:"check"}));let m=r;return!m&&a?m=n.jsx("span",{className:"material-symbols-rounded",children:a}):!m&&c&&h&&!l&&(m=n.jsx("span",{className:"material-symbols-rounded",children:"chevron_right"})),n.jsxs("button",{className:"list-item-root",onClick:c,disabled:i,"aria-selected":l,"data-has-leading":!!d||u,type:"button",children:[(d||u)&&n.jsx("div",{className:"list-item-leading",children:d}),n.jsxs("div",{className:"list-item-content",children:[n.jsxs("div",{className:"list-item-text-group",children:[n.jsx("span",{className:"list-item-label",children:e}),t&&n.jsx("span",{className:"list-item-sublabel",children:t})]}),m&&n.jsx("div",{className:"list-item-trailing",children:m})]})]})},nl="_sideMenu_15qma_5",sl="_header_15qma_29",ol="_titleRow_15qma_49",al="_title_15qma_49",rl="_version_15qma_83",il="_headerSeparator_15qma_113",ll="_content_15qma_125",cl="_separator_15qma_143",ul="_menuList_15qma_253",dl="_footer_15qma_273",ml="_userProfileCard_15qma_289",hl="_userName_15qma_361",We={sideMenu:nl,header:sl,titleRow:ol,title:al,version:rl,headerSeparator:il,content:ll,separator:cl,menuList:ul,footer:dl,userProfileCard:ml,userName:hl},fl=()=>{const e=Z(Io),t=Z(No),s=Z(Ro),o=Z(xt),a=Z(ws),r=Z(Ft),l=F(Ft),i=F(Cs),c=F(_s),{toggle:u,isUnlocked:h}=gr(),d=Z(Vn),{trigger:m}=Ue(),{play:f}=Un(),g=j.useCallback(()=>{const p=!h;u(),m(p?"success":"light"),p&&f("success"),d({message:p?"Future Ideas Unlocked":"Future Ideas Hidden",icon:p?"lightbulb":"lightbulb_outline",variant:"neutral"})},[u,h,d,m,f]),{onTap:b}=Xi(g,7,3e3),v=()=>{r({isAuthenticated:!1,user:null})};return n.jsxs("aside",{className:We.sideMenu,children:[n.jsxs("header",{className:We.header,children:[n.jsxs("div",{className:We.titleRow,children:[n.jsx("h1",{className:We.title,onClick:b,children:"Safeguard"}),n.jsx("span",{className:We.version,children:Br})]}),n.jsx("div",{className:We.headerSeparator})]}),n.jsxs("main",{className:We.content,children:[n.jsx(Po,{groupId:i,unitId:c,onClick:()=>a(!0)}),n.jsx("div",{className:We.separator}),n.jsxs("div",{className:We.menuList,children:[n.jsx(wt,{label:"Write NFC tags",leadingIcon:"nfc",onClick:()=>o({view:"provisioning"}),showChevron:!1}),n.jsx(wt,{label:"Developer tools",leadingIcon:"code",onClick:()=>t(!0),showChevron:!1}),h&&n.jsx(wt,{label:"Future Ideas",leadingIcon:"lightbulb",onClick:()=>s(!0),showChevron:!1})]})]}),n.jsxs("footer",{className:We.footer,children:[n.jsx("div",{className:We.menuList,children:n.jsx(wt,{label:"Log out",leadingIcon:"logout",onClick:v,showChevron:!1})}),n.jsx("div",{className:We.separator}),n.jsxs("button",{className:We.userProfileCard,onClick:()=>e(!0),"aria-label":"Settings",children:[n.jsx("span",{className:We.userName,children:l.user?.displayName||"Unknown User"}),n.jsx("span",{className:"material-symbols-rounded",children:"settings"})]})]})]})},$o=e=>{const t=Z(e),s=j.useRef(null),o=j.useRef(0),a=j.useRef(0);return j.useLayoutEffect(()=>{const r=()=>{if(s.current){const i=s.current.offsetHeight;o.current!==i&&(cancelAnimationFrame(a.current),a.current=requestAnimationFrame(()=>{o.current=i,t(i)}))}};r();const l=new ResizeObserver(r);return s.current&&l.observe(s.current),()=>{l.disconnect(),cancelAnimationFrame(a.current),t(0)}},[t]),s},pl=({children:e,content:t,delay:s=300,side:o="top"})=>t?n.jsx(Ga,{children:n.jsxs(Ua,{delayDuration:s,children:[n.jsx(qa,{asChild:!0,children:e}),n.jsx(Ya,{children:n.jsxs(Xa,{className:"tooltip-content",side:o,sideOffset:5,children:[t,n.jsx(Ka,{className:"tooltip-arrow"})]})})]})}):e,Fo=({trigger:e,children:t,open:s,onOpenChange:o,variant:a="default"})=>{const r=a==="tooltip"?"popover-content-tooltip":"popover-content";return n.jsxs(Qa,{open:s,onOpenChange:o,children:[n.jsx(Ja,{asChild:!0,children:e}),n.jsx(Za,{children:n.jsx(er,{className:r,sideOffset:5,collisionPadding:8,children:t})})]})},gl="_statusBar_9ph0v_7",vl="_contentContainer_9ph0v_19",xl="_statusPill_9ph0v_29",bl="_icon_9ph0v_99",yl="_count_9ph0v_109",wl="_popoverContent_9ph0v_123",Pt={statusBar:gl,contentContainer:vl,statusPill:xl,icon:bl,count:yl,popoverContent:wl},Xs=({count:e,icon:t,status:s,tooltipContent:o})=>{const a=e===0,r=n.jsxs("div",{className:Pt.statusPill,"data-status":s,"data-active":"false","data-empty":a?"true":void 0,children:[n.jsx("span",{className:`material-symbols-rounded ${Pt.icon}`,children:t}),n.jsx("span",{className:Pt.count,children:e})]});return o?n.jsx(Fo,{trigger:r,variant:"tooltip",children:o}):r},Cl=()=>{const e=F(vr),t=n.jsx("div",{className:Pt.popoverContent,children:n.jsxs("span",{children:[e.missed," Missed"]})}),s=n.jsx("div",{className:Pt.popoverContent,children:n.jsxs("span",{children:[e.due," Due"]})});return n.jsx(te.div,{className:Pt.statusBar,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{type:"tween",duration:.2},children:n.jsxs("div",{className:Pt.contentContainer,children:[n.jsx(Xs,{count:e.missed,icon:"notifications_active",status:"missed",tooltipContent:t}),n.jsx(Xs,{count:e.due,icon:"schedule",status:"due",tooltipContent:s})]})})},_l="_avatar_pc746_5",Sl="_popoverContent_pc746_67",Ks={avatar:_l,popoverContent:Sl},jl=()=>{const e=F(Ft),t=F(Ss),s=F(Vt),o=Z(Eo);if(!e.user)return null;const{initials:a,displayName:r,username:l}=e.user;let i;if(s.enableEnhancedAvatarDropdown){const h=t[l]?.avatarHue,d=h!==void 0?h:ks(l);i=Dr(d)}const c=n.jsx("div",{className:Ks.avatar,"aria-label":`User: ${r}`,style:i?{backgroundColor:i}:void 0,onClick:s.enableEnhancedAvatarDropdown?()=>o(!0):void 0,role:s.enableEnhancedAvatarDropdown?"button":void 0,children:a});if(s.enableEnhancedAvatarDropdown)return c;const u=n.jsx("div",{className:Ks.popoverContent,children:r});return n.jsx(Fo,{trigger:c,variant:"tooltip",children:u})},Tl="_header_32bx9_5",kl="_headerContent_32bx9_251",Il="_leftActions_32bx9_275",Nl="_centerContent_32bx9_295",Rl="_rightActions_32bx9_313",nn={header:Tl,headerContent:kl,leftActions:Il,centerContent:Nl,rightActions:Rl},El=()=>{const[e,t]=ee(js),s=F(Ao),o=$o(xr),a=j.useRef(null),r=j.useCallback(i=>{o.current=i,a.current=i},[o]);vn(a,{isEnabled:s>0});const l=()=>{t(e==="sideMenu"?"dashboardTime":"sideMenu")};return n.jsx("header",{className:nn.header,ref:r,children:n.jsxs("div",{className:nn.headerContent,children:[n.jsx("div",{className:nn.leftActions,children:n.jsx(pl,{content:"Open navigation",children:n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:l,"aria-label":"Open navigation menu",children:n.jsx("span",{className:"material-symbols-rounded",children:"menu"})})})}),n.jsx("div",{className:nn.centerContent,children:n.jsx(Cl,{})}),n.jsx("div",{className:nn.rightActions,children:n.jsx(jl,{})})]})})},Is=()=>{const e=Z(Gn),t=Z(To),s=Z(Oo),o=F(gn),a=F(Pe),{trigger:r}=Ue(),{play:l}=Un();return{completeCheck:({checkId:c,statuses:u,notes:h,onSuccess:d})=>{const m=a.scanMode==="nfc"&&a.simpleSubmitEnabled;r("success"),l("success"),e({type:"CHECK_SET_COMPLETING",payload:{checkId:c}}),t(c);const f=m?0:1e3;a.scanMode==="nfc"&&!a.simpleSubmitEnabled&&s("scanning"),setTimeout(()=>{const g={checkId:c,statuses:u,notes:h,completionTime:new Date().toISOString()};e(o==="offline"?{type:"CHECK_SET_QUEUED",payload:g}:{type:"CHECK_COMPLETE",payload:g}),t(null),d?.()},f)}}},Ns=()=>{const[e,t]=ee(Oo),[s,o]=ee(br),a=F(Pe),r=F(Ts),l=F(ys),i=F(xt),c=Z(xt),{trigger:u}=Ue(),{completeCheck:h}=Is(),d=j.useRef(null);j.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]),j.useEffect(()=>{r.nfcBlocked?e!=="blocked"&&(u("warning"),t("blocked"),d.current&&clearTimeout(d.current)):r.nfcTurnedOff?e!=="hardwareOff"&&(u("warning"),t("hardwareOff"),d.current&&clearTimeout(d.current)):(e==="blocked"||e==="hardwareOff")&&t("idle")},[r.nfcBlocked,r.nfcTurnedOff,e,t,u]);const m=j.useCallback(()=>{e!=="idle"&&(d.current&&(clearTimeout(d.current),d.current=null),u("light"),t("idle"),o(null))},[e,t,o,u]),f=j.useCallback(()=>{if(e!=="scanning")return;if(r.nfcFails){u("warning"),t("readError");return}const y=l.find(C=>C.status!=="complete"&&C.type!=="supplemental");if(y&&a.simpleSubmitEnabled){const C=y.residents.reduce((T,N)=>(T[N.id]="Awake",T),{});h({checkId:y.id,statuses:C,notes:"",onSuccess:()=>{}})}console.log("[NFC Debug] handleTagRead - setting scanState to success"),t("success"),o(null),u("success")},[e,r.nfcFails,t,o,u,l,a.simpleSubmitEnabled,h]),g=j.useCallback(()=>{if(!(e!=="idle"&&e!=="readError"&&e!=="timeout"&&e!=="blocked"&&e!=="hardwareOff"&&e!=="success")){if(r.nfcBlocked){u("warning"),t("blocked");return}if(r.nfcTurnedOff){u("warning"),t("hardwareOff");return}u("light"),t("scanning"),o(Date.now()),a.nfcTimeoutEnabled&&(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{t("timeout"),o(null),u("warning")},a.nfcScanTimeout))}},[e,r,a.nfcScanTimeout,a.nfcTimeoutEnabled,t,o,u]),b=j.useCallback(()=>{if(console.log("[NFC Debug] restartScan called - setting to scanning"),r.nfcBlocked){u("warning"),t("blocked");return}if(r.nfcTurnedOff){u("warning"),t("hardwareOff");return}u("light"),t("scanning"),o(Date.now()),a.nfcTimeoutEnabled&&(d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{t("timeout"),o(null),u("warning")},a.nfcScanTimeout))},[r,a.nfcTimeoutEnabled,a.nfcScanTimeout,t,o,u]),v=j.useCallback(()=>{e==="timeout"&&t("idle")},[e,t]),p=j.useCallback(()=>{f()},[f]),x=j.useCallback(()=>{if(console.log("[NFC Debug] finalizeSuccess called:",{scanState:e,simpleSubmitEnabled:a.simpleSubmitEnabled,workflowView:i.view}),e==="formComplete"){console.log("[NFC Debug] formComplete path - restarting scan"),b();return}if(e!=="success"){console.log("[NFC Debug] NOT in success state, exiting early");return}if(a.simpleSubmitEnabled)console.log("[NFC Debug] Path A: Simple Scan ON - restarting scan"),b();else{if(console.log("[NFC Debug] Path B: Simple Scan OFF - opening form"),i.view==="form"){console.log("[NFC Debug] Already in form view - just clearing to idle"),t("idle");return}const y=l.find(C=>C.status!=="complete"&&C.type!=="supplemental");t("idle"),y&&c({view:"form",type:"scheduled",method:"scan",checkId:y.id,roomName:y.residents[0].location,residents:y.residents,specialClassifications:y.specialClassifications})}},[e,a.simpleSubmitEnabled,t,b,l,c,i.view]),k=j.useCallback(()=>{if(!s||e!=="scanning")return a.nfcScanTimeout;const y=Date.now()-s;return Math.max(0,a.nfcScanTimeout-y)},[e,s,a.nfcScanTimeout]),w=l.find(y=>y.status!=="complete"&&y.type!=="supplemental")?.residents[0]?.location||"Room";return{scanState:e,startScan:g,stopScan:m,resetFromTimeout:v,simulateTagRead:p,finalizeSuccess:x,getRemainingTime:k,targetRoom:w,config:{timeout:a.nfcScanTimeout,timeoutEnabled:a.nfcTimeoutEnabled,showCountdown:a.nfcShowCountdown}}},ds={ringCount:15,conveyorDuration:40,minRadius:8,maxRadius:80,baseOpacity:.3,fadeInPercent:.2,fadeOutPercent:.3,baseStrokeWidth:2,shimmerPeriod:4,shimmerDuration:1,shimmerOpacityBoost:.55,shimmerStrokeBoost:1};function Al(e,t){const{minRadius:s,maxRadius:o,baseOpacity:a,fadeInPercent:r,fadeOutPercent:l,baseStrokeWidth:i}=e,c=a*.3;return[{r:s,opacity:0,strokeWidth:i,offset:0},{r:s+(o-s)*r,opacity:a,strokeWidth:i,offset:r},{r:s+(o-s)*(1-l),opacity:c,strokeWidth:i,offset:1-l},{r:o,opacity:0,strokeWidth:i,offset:1}]}function Ol(e){return[{opacity:0,offset:0},{opacity:e,offset:.3},{opacity:0,offset:1}]}function Hl(e){return[{strokeWidth:0,offset:0},{strokeWidth:e,offset:.3},{strokeWidth:0,offset:1}]}function Ml(e,t,s){const o=j.useRef([]),a=j.useRef(null),r=j.useRef(0),l=j.useCallback(()=>{if(!e.current)return;const i=e.current.querySelectorAll("circle.ring"),u=performance.now()-r.current,h=t.conveyorDuration*1e3;i.forEach((d,m)=>{const f=o.current[m];f?.shimmerOpacityAnim&&f.shimmerOpacityAnim.cancel(),f?.shimmerStrokeAnim&&f.shimmerStrokeAnim.cancel();const g=m/t.ringCount,b=(u/h+g)%1,v=b*t.shimmerDuration*1e3,p=1-t.fadeOutPercent;let x=1;b>p&&(x=1-(b-p)/t.fadeOutPercent),b<t.fadeInPercent&&(x=b/t.fadeInPercent);const k=t.shimmerOpacityBoost*x,_=t.shimmerStrokeBoost*x,w=d.animate(Ol(k),{duration:800,easing:"ease-in-out",delay:v,fill:"forwards",composite:"add"}),y=d.animate(Hl(_),{duration:800,easing:"ease-in-out",delay:v,fill:"forwards",composite:"add"});o.current[m]&&(o.current[m].shimmerOpacityAnim=w,o.current[m].shimmerStrokeAnim=y)}),console.log("[RingAnimation] Shimmer wave triggered at elapsed:",u)},[e,t]);j.useLayoutEffect(()=>{if(!e.current||!s)return;const c=e.current.querySelectorAll("circle.ring");return r.current=Number(document.timeline?.currentTime??performance.now()),console.log("[RingAnimation] Mount time:",r.current),o.current=[],c.forEach((u,h)=>{const d=h/t.ringCount,m=-d*t.conveyorDuration*1e3,f=u.animate(Al(t),{duration:t.conveyorDuration*1e3,iterations:1/0,easing:"linear"});f.currentTime=-m,o.current.push({conveyorAnim:f,shimmerOpacityAnim:null,shimmerStrokeAnim:null}),console.log(`[RingAnimation] Ring ${h} conveyor started, phase offset: ${d}`)}),a.current=setInterval(()=>{l()},t.shimmerPeriod*1e3),l(),()=>{o.current.forEach(u=>{u.conveyorAnim?.cancel(),u.shimmerOpacityAnim?.cancel(),u.shimmerStrokeAnim?.cancel()}),o.current=[],a.current&&(clearInterval(a.current),a.current=null),console.log("[RingAnimation] Cleanup complete")}},[e,s,t,l])}function Ll(e){const t=[],{ringCount:s,minRadius:o,maxRadius:a}=e;for(let r=0;r<s;r++){const l=r/s;t.push(o+(a-o)*l)}return t}const Bl="_nfcWrapper_5e0j4_5",Dl="_buttonContainer_5e0j4_27",zl="_startButton_5e0j4_49",Pl="_timeoutButton_5e0j4_51",$l="_visualizerWrapper_5e0j4_137",Fl="_visualizerContainer_5e0j4_179",Wl="_feedbackWrapper_5e0j4_195",Vl="_feedbackBackground_5e0j4_217",Gl="_feedbackBackgroundSuccess_5e0j4_231",Ul="_feedbackBackgroundError_5e0j4_239",ql="_errorToast_5e0j4_249",Yl="_errorToastIcon_5e0j4_275",Xl="_errorToastContent_5e0j4_287",Kl="_errorToastPrimary_5e0j4_301",Ql="_errorToastSecondary_5e0j4_315",Jl="_feedbackTextContainer_5e0j4_333",Zl="_primaryText_5e0j4_351",ec="_secondaryText_5e0j4_367",tc="_ringsSvg_5e0j4_383",nc="_scanningLabel_5e0j4_407",ge={nfcWrapper:Bl,buttonContainer:Dl,startButton:zl,timeoutButton:Pl,visualizerWrapper:$l,visualizerContainer:Fl,feedbackWrapper:Wl,feedbackBackground:Vl,feedbackBackgroundSuccess:Gl,feedbackBackgroundError:Ul,errorToast:ql,errorToastIcon:Yl,errorToastContent:Xl,errorToastPrimary:Kl,errorToastSecondary:Ql,feedbackTextContainer:Jl,primaryText:Zl,secondaryText:ec,ringsSvg:tc,scanningLabel:nc},Wo=({isEnabled:e,params:t})=>{const s=j.useRef(null),o=j.useMemo(()=>({...ds,...t}),[t]),a=j.useMemo(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches,[]),r=Ll(o);Ml(s,o,e&&!a);const l="var(--surface-border-info)";return n.jsx("svg",{ref:s,className:ge.ringsSvg,viewBox:"0 0 200 200",children:a?r.map((i,c)=>n.jsx("circle",{cx:"100",cy:"100",r:i,fill:"none",stroke:l,strokeWidth:o.baseStrokeWidth,opacity:o.baseOpacity,vectorEffect:"non-scaling-stroke"},`static-ring-${c}`)):Array.from({length:o.ringCount},(i,c)=>n.jsx("circle",{className:"ring",cx:"100",cy:"100",r:o.minRadius,fill:"none",stroke:l,strokeWidth:o.baseStrokeWidth,opacity:0,vectorEffect:"non-scaling-stroke"},`ring-${c}`))})},sc=({onClick:e})=>n.jsxs("button",{className:ge.startButton,onClick:e,children:[n.jsx("span",{className:"material-symbols-rounded",children:"sensors"}),n.jsx("span",{children:"Scan"})]}),oc=({type:e})=>{const t={success:"var(--surface-fg-success-primary)",alert:"var(--surface-fg-alert-primary)",warning:"var(--surface-fg-warning-primary)",info:"var(--surface-fg-info-primary)"}[e],s={success:"M 97 100 L 99 102 L 103 98",alert:"M 100 96.9 L 100 100.1 M 100 103 L 100 103.1",warning:"M 100 96.9 L 100 100.1 M 100 103 L 100 103.1",info:"M 100 104 L 100 99 M 100 96 L 100 96.1"}[e];return n.jsx("svg",{className:ge.ringsSvg,viewBox:"0 0 200 200",children:n.jsxs(te.g,{children:[n.jsx(te.circle,{cx:"100",cy:"100",initial:{r:20,stroke:"var(--surface-border-primary)",opacity:.5},animate:{r:5.5,stroke:t,opacity:1,strokeWidth:3},transition:{duration:.4,ease:[.16,1,.3,1]},fill:"none",style:{vectorEffect:"non-scaling-stroke"}}),n.jsx(te.path,{d:s,fill:"none",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.4,delay:.1,ease:"easeOut"}})]})})},Qs=({primary:e,secondary:t})=>n.jsxs("div",{className:ge.feedbackTextContainer,children:[n.jsx(te.div,{className:ge.primaryText,initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.25,delay:.7},children:e}),t&&n.jsx(te.div,{className:ge.secondaryText,initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.25,delay:.7},children:t})]}),ac=()=>{const{scanState:e,finalizeSuccess:t,targetRoom:s,startScan:o}=Ns(),a=F(Vt),r=F(Pe),l=j.useRef(s);j.useEffect(()=>{e==="success"&&(l.current=s)},[e,s]);const i=!r.simpleSubmitEnabled,c=j.useRef(t);j.useEffect(()=>{c.current=t},[t]),j.useEffect(()=>{if(console.log("[NFC Debug] useEffect triggered:",{scanState:e,isPreFormPhase:i,simpleSubmitEnabled:r.simpleSubmitEnabled}),e==="success"){const g=i?800:2e3;console.log("[NFC Debug] SUCCESS state - setting timer:",{delay:g,isPreFormPhase:i});const b=setTimeout(()=>{console.log("[NFC Debug] SUCCESS timer fired - calling finalizeSuccess"),c.current()},g);return()=>{console.log("[NFC Debug] SUCCESS timer cleared"),clearTimeout(b)}}if(e==="formComplete"){console.log("[NFC Debug] FORMCOMPLETE state - setting timer: 1700ms");const g=setTimeout(()=>{console.log("[NFC Debug] FORMCOMPLETE timer fired - calling finalizeSuccess"),c.current()},1700);return()=>{console.log("[NFC Debug] FORMCOMPLETE timer cleared"),clearTimeout(g)}}},[e]);const u=e==="scanning",h=a.feat_ring_animation&&u,d=(g,b,v="success")=>{const p=v==="success"?ge.feedbackBackgroundSuccess:ge.feedbackBackgroundError;return n.jsxs(te.div,{className:ge.feedbackWrapper,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.98,y:-4,transition:{duration:i?0:.2,ease:"easeIn"}},children:[n.jsx("div",{className:`${ge.feedbackBackground} ${p}`}),n.jsx(te.div,{animate:i?{opacity:1}:{opacity:[1,1,0]},transition:i?{}:{times:[0,.6,1],duration:1,ease:"easeInOut"},children:n.jsx(oc,{type:v})}),n.jsx(Qs,{primary:g,secondary:b})]},`feedback-${v}`)},m=()=>n.jsxs(te.div,{className:ge.feedbackWrapper,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.98,y:-4,transition:{duration:.2,ease:"easeIn"}},children:[n.jsx("div",{className:`${ge.feedbackBackground} ${ge.feedbackBackgroundSuccess}`}),n.jsx(Qs,{primary:`${l.current} Complete`})]},"formComplete"),f=(g,b,v)=>n.jsxs(te.div,{className:ge.errorToast,initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-4,transition:{duration:.2,ease:"easeIn"}},children:[n.jsx("span",{className:`material-symbols-rounded ${ge.errorToastIcon}`,children:g}),n.jsxs("div",{className:ge.errorToastContent,children:[n.jsx("span",{className:ge.errorToastPrimary,children:b}),n.jsx("span",{className:ge.errorToastSecondary,children:v})]})]},`errorToast-${g}`);return n.jsxs("div",{className:ge.visualizerContainer,onClick:e==="readError"?o:void 0,style:{cursor:e==="readError"?"pointer":"default"},children:[h&&n.jsx(Wo,{isEnabled:!0}),n.jsxs(lt,{mode:"wait",children:[e==="scanning"&&n.jsx(te.div,{className:ge.scanningLabel,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},children:"Ready to Scan"},"scanning"),e==="success"&&d(i?"":`${l.current} Complete`,void 0,"success"),e==="formComplete"&&m(),e==="readError"&&d("Tag not read","Tap to retry","alert"),e==="blocked"&&f("block","NFC Blocked","Allow in app settings"),e==="hardwareOff"&&f("sensors_off","NFC is turned off","Open NFC Settings to turn on")]})]})},rc=()=>{const{scanState:e,startScan:t,stopScan:s,simulateTagRead:o}=Ns();return n.jsx("div",{className:ge.nfcWrapper,children:n.jsx(Mr,{transition:{type:"tween",ease:[.16,1,.3,1],duration:.4},children:n.jsxs(lt,{mode:"wait",children:[e==="idle"&&n.jsx(te.div,{className:ge.buttonContainer,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:n.jsx(sc,{onClick:t})},"idle"),e!=="idle"&&e!=="timeout"&&n.jsx(te.div,{className:ge.visualizerWrapper,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e==="scanning"?o:void 0,style:{cursor:e==="scanning"?"pointer":"default",pointerEvents:"auto"},children:n.jsx(ac,{})},"visualizer"),e==="timeout"&&n.jsx(te.div,{className:ge.buttonContainer,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:n.jsxs("button",{className:ge.timeoutButton,onClick:()=>{s(),t()},children:[n.jsx("span",{className:"material-symbols-rounded",children:"timer_off"}),n.jsx("span",{children:"Timed out â€” Tap to retry"})]})},"timeout")]})})})},ic="_footer_19icv_5",lc="_scanButton_19icv_343",Js={footer:ic,scanButton:lc},cc=()=>{const e=Z(xt),t=F(Pe),s=F(Ao),o=j.useRef(null),{trigger:a}=Ue();vn(o,{isEnabled:s>0}),j.useLayoutEffect(()=>{const l=()=>{if(o.current){const c=o.current.offsetHeight;document.documentElement.style.setProperty("--footer-height",`${c}px`)}};l();const i=new ResizeObserver(l);return o.current&&i.observe(o.current),()=>{i.disconnect(),document.documentElement.style.removeProperty("--footer-height")}},[t.scanMode]);const r=()=>{a("heavy"),e({view:"scanning",isManualSelectionOpen:!1})};return n.jsx("footer",{className:Js.footer,ref:o,children:t.scanMode==="nfc"?n.jsx(rc,{}):n.jsxs(ae,{variant:"primary",className:Js.scanButton,onClick:r,children:[n.jsx("span",{className:"material-symbols-rounded",children:"qr_code_scanner"}),n.jsx("span",{children:"Scan"})]})})},uc="_banner_128fn_5",dc="_iconContainer_128fn_39",mc="_icon_128fn_39",hc="_textContainer_128fn_73",fc="_statusText_128fn_95",pc="_queueText_128fn_123",gc="_syncButton_128fn_139",vc="_spinner_128fn_185",pt={banner:uc,iconContainer:dc,icon:mc,textContainer:hc,statusText:fc,queueText:pc,syncButton:gc,spinner:vc},xc=e=>{const t=Math.floor(e/1e3),s=Math.floor(t/60),o=t%60;return`${s}:${o.toString().padStart(2,"0")}`},bc=()=>{const[e,t]=ee(gn),s=F(yr),o=F(wr),a=Z(Gn),{trigger:r}=Ue(),{play:l}=Un(),[i,c]=j.useState("0:00"),u=$o(Cr);if(j.useEffect(()=>{e==="offline"&&r("warning")},[e,s,r]),j.useEffect(()=>{if(e!=="offline"||!s){c("0:00");return}const m=()=>{const b=Date.now()-s;c(xc(b))};m();const f=setInterval(m,1e3);return()=>clearInterval(f)},[e,s]),e==="online")return null;const h=()=>{t("syncing"),r("medium"),setTimeout(()=>{a({type:"SYNC_QUEUED_CHECKS",payload:{syncTime:new Date().toISOString()}}),r("success"),l("success"),t("online")},2e3)},d=()=>o===0?"No items queued for sync":o===1?"1 item queued for sync":`${o} items queued for sync`;return n.jsx(lt,{children:n.jsxs(te.div,{className:pt.banner,ref:u,initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{type:"tween",duration:.3},children:[n.jsx("div",{className:pt.iconContainer,children:n.jsx("span",{className:`material-symbols-rounded ${pt.icon} ${e==="syncing"?pt.spinner:""}`,children:e==="syncing"?"sync":"cloud_off"})}),n.jsx("div",{className:pt.textContainer,children:e==="syncing"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:pt.statusText,children:"Syncing data..."}),n.jsx("div",{className:pt.queueText,children:"Please wait"})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:pt.statusText,children:["Offline for ",i]}),n.jsx("div",{className:pt.queueText,children:d()})]})}),e==="offline"&&n.jsx("button",{className:pt.syncButton,onClick:h,children:"Sync Now"})]})})},yc="_scanView_ax5b5_65",wc="_header_ax5b5_87",Cc="_preScanAlert_ax5b5_127",_c="_alertSeparator_ax5b5_197",Sc="_cameraContainer_ax5b5_211",jc="_viewfinder_ax5b5_233",Tc="_statusOverlay_ax5b5_291",kc="_processingState_ax5b5_325",Ic="_spinner_ax5b5_333",Nc="_successState_ax5b5_345",Rc="_failState_ax5b5_353",Ec="_helperText_ax5b5_363",Ac="_footer_ax5b5_373",Oc="_devControlsContainer_ax5b5_421",Hc="_devControlsHeader_ax5b5_441",Mc="_devControls_ax5b5_421",Te={scanView:yc,header:wc,preScanAlert:Cc,alertSeparator:_c,cameraContainer:Sc,viewfinder:jc,statusOverlay:Tc,processingState:kc,spinner:Ic,successState:Nc,failState:Rc,helperText:Ec,footer:Ac,devControlsContainer:Oc,devControlsHeader:Hc,devControls:Mc},Lc=()=>{const[e,t]=ee(xt),s=F(Ho),o=F(Pe),a=F(ys),r=F(Ts),l=Z(Vn),{trigger:i}=Ue(),{play:c}=Un(),{completeCheck:u}=Is(),[h,d]=j.useState("scanning"),[m,f]=j.useState(null),g=j.useRef(null),b=j.useRef(0);j.useEffect(()=>{if(e.view==="scanning"&&d("scanning"),e.view==="scanning"&&e.targetCheckId){const T=s.find(N=>N.id===e.targetCheckId)?.specialClassifications?.[0];if(T){const N=Mo.find(H=>H.id===T.residentId);N&&f({residentName:N.name,classificationType:T.type})}}else f(null)},[e,s]);const v=j.useCallback(()=>{i("error"),c("error"),d("fail"),setTimeout(()=>{d("scanning")},1500)},[i,c]),p=C=>{h==="scanning"&&(g.current===C&&Date.now()-b.current<2e3||(g.current=C,b.current=Date.now(),d("processing"),setTimeout(()=>{const T=C.startsWith("room:")?C.split(":")[1]:C,N=s.find(H=>H.id===T&&H.status!=="complete");if(N){if(i("success"),c("success"),d("success"),o.simpleSubmitEnabled){const H=N.residents.reduce((A,P)=>(A[P.id]="Awake",A),{});t({view:"none"}),u({checkId:N.id,statuses:H,notes:"",onSuccess:()=>{l({message:"Check completed",icon:"check_circle",variant:"success"})}});return}setTimeout(()=>{t({view:"form",type:"scheduled",method:"scan",checkId:N.id,roomName:N.residents[0].location,residents:N.residents,specialClassifications:N.specialClassifications})},800)}else v()},300)))},x=C=>{C instanceof Error?console.log("QR Scanner Error:",C.message):console.log("An unknown QR scanner error occurred:",C)},k=()=>t({view:"none"}),_=()=>{if(e.view==="scanning"&&e.targetCheckId){p(e.targetCheckId);return}const C=a.find(T=>T.status!=="complete"&&T.type!=="supplemental");if(C)p(C.id);else{const T=s.find(N=>N.status!=="complete");T?p(T.id):l({message:"No incomplete checks found to simulate.",icon:"info",variant:"neutral"})}},w=()=>p("invalid-qr-code-id"),y=()=>{if(r.cameraFails)return n.jsxs("div",{className:`${Te.statusOverlay} ${Te.failState}`,children:[n.jsx("span",{className:"material-symbols-rounded",children:"no_photography"}),"Camera Error"]});switch(h){case"scanning":return n.jsx(Lr,{onScan:C=>{C&&C.length>0&&p(C[0].rawValue)},onError:x,constraints:{facingMode:"environment"},scanDelay:500});case"processing":return n.jsxs("div",{className:`${Te.statusOverlay} ${Te.processingState}`,children:[n.jsx("span",{className:`material-symbols-rounded ${Te.spinner}`,children:"progress_activity"}),"Processing..."]});case"success":return n.jsxs("div",{className:`${Te.statusOverlay} ${Te.successState}`,children:[n.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),"Success!"]});case"fail":return n.jsxs("div",{className:`${Te.statusOverlay} ${Te.failState}`,children:[n.jsx("span",{className:"material-symbols-rounded",children:"error"}),"Scan Failed"]});default:return null}};return n.jsxs(te.div,{className:Te.scanView,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsxs("header",{className:Te.header,children:[n.jsx("h3",{children:"Scan Room QR Code"}),n.jsx(ae,{variant:"on-solid",size:"lg",iconOnly:!0,onClick:k,"aria-label":"Close scanner",children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),n.jsx(lt,{children:m&&n.jsxs(te.div,{className:Te.preScanAlert,initial:{y:"-100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"-100%",opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.35},children:[n.jsx("span",{className:"material-symbols-rounded",children:"warning"}),n.jsxs("p",{children:[n.jsx("span",{children:m.residentName}),n.jsx("span",{className:Te.alertSeparator,children:"|"}),n.jsx("span",{children:m.classificationType})]})]})}),n.jsxs("main",{className:Te.cameraContainer,children:[n.jsx("div",{className:Te.viewfinder,"data-scan-state":h,children:y()}),n.jsx("p",{className:Te.helperText,children:r.cameraFails?"Camera hardware is not responding.":"Point your camera at the room's QR code"})]}),n.jsx("footer",{className:Te.footer,children:n.jsxs("div",{className:Te.devControlsContainer,children:[n.jsx("p",{className:Te.devControlsHeader,children:"Dev controls"}),n.jsxs("div",{className:Te.devControls,children:[n.jsxs(ae,{variant:"on-solid",size:"s",onClick:_,disabled:r.cameraFails,children:[n.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),"Simulate success"]}),n.jsxs(ae,{variant:"on-solid",size:"s",onClick:w,disabled:r.cameraFails,children:[n.jsx("span",{className:"material-symbols-rounded",children:"error"}),"Simulate fail"]})]})]})})]})},Bc="_segmentedControlItem_1kcz1_9",Dc="_itemColumn_1kcz1_69",zc="_segmentedControl_1kcz1_9",Pc="_columnContainer_1kcz1_203",$c="_gridContainer_1kcz1_259",Fc="_deadCell_1kcz1_357",Lt={segmentedControlItem:Bc,itemColumn:Dc,segmentedControl:zc,columnContainer:Pc,gridContainer:$c,deadCell:Fc},Ve=({options:e,value:t,onValueChange:s,id:o,layout:a="row",itemDirection:r="row"})=>{const l=h=>{h&&s(h)};let i=Lt.segmentedControl;a==="column"?i=Lt.columnContainer:a==="grid"&&(i=Lt.gridContainer);const c=r==="column"?`${Lt.segmentedControlItem} ${Lt.itemColumn}`:Lt.segmentedControlItem,u=a==="grid"&&e.length%2!==0;return n.jsxs(tr,{type:"single",className:i,value:t,onValueChange:l,"aria-label":o,id:o,children:[e.map(h=>n.jsxs(nr,{value:h.value,"aria-label":h.label,className:c,children:[h.icon&&n.jsx("span",{className:"material-symbols-rounded",children:h.icon}),n.jsx("span",{children:h.label})]},h.value)),u&&n.jsx("div",{className:Lt.deadCell,"aria-hidden":"true"})]})},Wc=(e,t)=>{j.useLayoutEffect(()=>{if(e){e.style.height="0px";const s=e.scrollHeight;e.style.height=s+"px"}},[e,t])},Vc="_container_tigow_5",Gc="_header_tigow_27",Uc="_residentName_tigow_39",qc="_warningIcon_tigow_59",Yc="_controlSection_tigow_69",Xc="_classificationDetails_tigow_99",Kc="_notesInput_tigow_125",Bt={container:Vc,header:Gc,residentName:Uc,warningIcon:qc,controlSection:Yc,classificationDetails:Xc,notesInput:Kc},Qc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"}],Jc=[{value:"Refused",label:"Refused"},{value:"Sleeping",label:"Sleeping"},{value:"Awake",label:"Awake"}],Zc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"}],eu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"}],tu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"}],nu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"},{value:"Chilling",label:"Chilling"}],su=({resident:e,status:t,notes:s,onStatusChange:o,onNotesChange:a,classification:r})=>{const l=!!r,i=j.useRef(null),{residentStatusSet:c,markMultipleLayout:u}=F(Pe);Wc(i.current,s);let h;const d=u;switch(c){case"set-2":h=Qc;break;case"set-4":h=Zc;break;case"set-5":h=eu;break;case"set-6":h=tu;break;case"set-7":h=nu;break;case"set-3":default:h=Jc;break}return n.jsxs("div",{className:Bt.container,"data-classified":l,children:[n.jsx("div",{className:Bt.header,children:n.jsxs("h4",{className:Bt.residentName,children:[l&&n.jsx("span",{className:`material-symbols-rounded ${Bt.warningIcon}`,"aria-label":"Special Classification",children:"warning"}),e.name]})}),l&&n.jsx("div",{className:Bt.classificationDetails,children:n.jsxs("p",{children:[n.jsxs("strong",{children:[r.type,":"]})," ",r.details]})}),n.jsx("div",{className:Bt.controlSection,children:n.jsx(Ve,{id:`status-group-${e.id}`,options:h,value:t,onValueChange:m=>o(e.id,m),layout:d})}),n.jsx("textarea",{ref:i,id:`notes-${e.id}`,value:s,onChange:m=>a(e.id,m.target.value),placeholder:"Enter optional notes","aria-label":`Notes for ${e.name}`,rows:1,className:Bt.notesInput})]})},ou="_overlay_2b95s_5",au="_content_2b95s_19",ru="_handleContainer_2b95s_51",iu="_handle_2b95s_51",lu="_header_2b95s_81",cu="_headerTitle_2b95s_93",uu="_listContainer_2b95s_107",du="_columnList_2b95s_125",mu="_rowContainer_2b95s_137",hu="_gridButton_2b95s_153",fu="_gridContainer_2b95s_163",pu="_deadCell_2b95s_233",et={overlay:ou,content:au,handleContainer:ru,handle:iu,header:lu,headerTitle:cu,listContainer:uu,columnList:du,rowContainer:mu,gridButton:hu,gridContainer:fu,deadCell:pu},gu=({isOpen:e,onClose:t,onSelect:s,options:o,layout:a})=>{const{trigger:r}=Ue(),l=j.useRef(null),i=j.useRef(null),c=m=>{r("selection"),s(m),t()},u=()=>{t()};j.useEffect(()=>{if(e){const m=setTimeout(()=>{i.current?.focus()},50),f=g=>{g.key==="Escape"&&(g.preventDefault(),t())};return document.addEventListener("keydown",f),()=>{clearTimeout(m),document.removeEventListener("keydown",f)}}},[e,t]);const h=a==="grid"&&o.length%2!==0,d=()=>{switch(a){case"row":return et.rowContainer;case"column":return et.columnList;case"grid":return et.gridContainer}};return n.jsx(lt,{children:e&&n.jsxs(n.Fragment,{children:[n.jsx(te.div,{className:et.overlay,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:u,"aria-hidden":"true"}),n.jsxs(te.div,{ref:l,className:et.content,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},role:"dialog","aria-modal":"true","aria-labelledby":"status-sheet-title",children:[n.jsx("div",{className:et.handleContainer,children:n.jsx("div",{className:et.handle})}),n.jsx("div",{className:et.header,children:n.jsx("h3",{id:"status-sheet-title",className:et.headerTitle,children:"Select Status"})}),n.jsx("div",{className:et.listContainer,children:a==="column"?n.jsx("div",{className:d(),children:o.map(m=>n.jsx(wt,{label:m.label,onClick:()=>c(m.value)},m.value))}):n.jsxs("div",{className:d(),children:[o.map((m,f)=>n.jsx("button",{ref:f===0?i:void 0,className:et.gridButton,onClick:()=>c(m.value),children:m.label},m.value)),h&&n.jsx("div",{className:et.deadCell})]})})]})]})})},vu="_checkFormView_tpp19_5",xu="_header_tpp19_27",bu="_headerTitle_tpp19_291",yu="_formContent_tpp19_319",wu="_roomHeader_tpp19_341",Cu="_badgeWrapper_tpp19_371",_u="_statusLabel_tpp19_389",Su="_warningBlock_tpp19_455",ju="_sectionHeader_tpp19_509",Tu="_checkTypeSection_tpp19_527",ku="_markMultipleContainer_tpp19_547",Iu="_residentListContainer_tpp19_561",Nu="_footer_tpp19_691",Oe={checkFormView:vu,header:xu,headerTitle:bu,formContent:yu,roomHeader:wu,badgeWrapper:Cu,statusLabel:_u,warningBlock:Su,sectionHeader:ju,checkTypeSection:Tu,markMultipleContainer:ku,residentListContainer:Iu,footer:Nu},Ru=[{value:"Locked down",label:"Locked down"},{value:"Random",label:"Random"}],Eu=[{value:"Noise Complaint",label:"Noise Complaint"},{value:"Resident Request",label:"Resident Request"},{value:"Medical Alert",label:"Medical Alert"},{value:"Security Concern",label:"Security Concern"},{value:"Other",label:"Other"}],Au=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"}],Ou=[{value:"Refused",label:"Refused"},{value:"Sleeping",label:"Sleeping"},{value:"Awake",label:"Awake"}],Hu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"}],Mu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"}],Lu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"}],Bu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"},{value:"Chilling",label:"Chilling"}],Du=({checkData:e})=>{const t=Z(xt),s=Z(Gn),o=Z(Vn),a=F(_r),r=Z(Sr),l=Z(jr),i=F(Ho),c=F(gn),{isCheckTypeEnabled:u,markMultipleEnabled:h,residentStatusSet:d,markMultipleLayout:m}=F(Pe),{trigger:f}=Ue(),{completeCheck:g}=Is(),{startScan:b}=Ns(),[v,p]=j.useState(!1);let x;switch(d){case"set-2":x=Au;break;case"set-4":x=Hu;break;case"set-5":x=Mu;break;case"set-6":x=Lu;break;case"set-7":x=Bu;break;case"set-3":default:x=Ou;break}const k=j.useRef(null),_=j.useRef(null),w=j.useRef(null),[y,C]=j.useState(!1);vn(w,{isEnabled:!0}),zr({containerRef:_,footerOffsetVar:"--form-footer-height"});const T=e.type==="scheduled"?a[e.checkId]:void 0,[N,H]=j.useState(()=>T?.statuses||e.residents.reduce((I,B)=>({...I,[B.id]:""}),{})),[A,P]=j.useState(()=>T?.notes||e.residents.reduce((I,B)=>({...I,[B.id]:""}),{})),[M,L]=j.useState(T?.checkType||""),[$,se]=j.useState(""),W=e.type==="scheduled"&&e.method==="manual",K=e.type==="supplemental",ce=j.useMemo(()=>K?"supplemental":e.type==="scheduled"&&i.find(B=>B.id===e.checkId)?.status||"pending",[i,e,K]),ie=j.useRef(!1);j.useEffect(()=>()=>{!ie.current&&e.type==="scheduled"&&r({checkId:e.checkId,draft:{statuses:N,notes:A,checkType:M}})},[e,N,A,M,r]),j.useLayoutEffect(()=>{const I=k.current;if(I){const B=I.offsetHeight;document.documentElement.style.setProperty("--form-footer-height",`${B}px`)}return()=>{document.documentElement.style.removeProperty("--form-footer-height")}},[]),j.useLayoutEffect(()=>{const I=_.current;if(!I)return;const B=()=>{const{scrollTop:fe,scrollHeight:de,clientHeight:Ye}=I,V=de-fe<=Ye+1,st=de>Ye;C(st&&!V)},Q=new ResizeObserver(B);return Q.observe(I),I.addEventListener("scroll",B,{passive:!0}),B(),()=>{Q.disconnect(),I.removeEventListener("scroll",B)}},[]);const he=()=>{e.type==="scheduled"&&e.method==="scan"&&b(),t({view:"none"})},Qe=(I,B)=>{H(Q=>({...Q,[I]:B}))},je=(I,B)=>{P(Q=>({...Q,[I]:B}))},Je=I=>{if(!I)return;const B={...N};e.residents.forEach(Q=>{B[Q.id]=I}),H(B)},qe=j.useMemo(()=>!(!e.residents.every(B=>N[B.id])||u&&!M||K&&!$),[N,e.residents,u,M,K,$]),Me=()=>{if(!qe)return;ie.current=!0,e.type==="scheduled"&&l(e.checkId),f("success");const I=Object.values(A).filter(B=>B.trim()!=="").join(`
---
`);e.type==="scheduled"?(g({checkId:e.checkId,statuses:N,notes:I}),t({view:"none"})):e.type==="supplemental"&&(s({type:"CHECK_SUPPLEMENTAL_ADD",payload:{roomId:e.roomId,statuses:N,notes:I,incidentType:$}}),t({view:"none"}),c!=="offline"&&o({message:`Supplemental check for ${e.roomName} saved.`,icon:"task_alt",variant:"success"})),e.type==="scheduled"&&e.method==="scan"&&b()};return n.jsxs(te.div,{className:Oe.checkFormView,style:{height:"var(--visual-viewport-height, 100dvh)"},initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsxs("header",{className:Oe.header,ref:w,children:[n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:he,"aria-label":"Back",children:n.jsx("span",{className:"material-symbols-rounded",children:"arrow_back"})}),n.jsx("h3",{className:Oe.headerTitle,children:"Record Check"})]}),n.jsxs("main",{className:Oe.formContent,ref:_,children:[n.jsxs("h2",{className:Oe.roomHeader,children:[e.roomName,n.jsxs("div",{className:Oe.badgeWrapper,children:[W&&n.jsx("span",{className:Oe.statusLabel,"data-variant":"info",children:"Manual"}),K&&n.jsx("span",{className:Oe.statusLabel,"data-variant":"info",children:"Supplemental"})]})]}),!K&&ce==="early"&&n.jsxs("div",{className:Oe.warningBlock,role:"status",children:[n.jsx("span",{className:"material-symbols-rounded","aria-hidden":"true",children:"info"}),n.jsx("span",{children:"This room was checked recently. Are you sure you want to check now?"})]}),K&&n.jsxs("div",{className:Oe.incidentTypeSection,children:[n.jsx("label",{htmlFor:"incident-type-select",className:Oe.sectionLabel,children:"Reason for Check"}),n.jsxs("select",{id:"incident-type-select",className:Oe.selectInput,value:$,onChange:I=>se(I.target.value),children:[n.jsx("option",{value:"",disabled:!0,children:"Select a reason..."}),Eu.map(I=>n.jsx("option",{value:I.value,children:I.label},I.value))]})]}),u&&n.jsxs("div",{className:Oe.checkTypeSection,children:[n.jsx("label",{htmlFor:"check-type-control",className:Oe.sectionHeader,children:"Check type"}),n.jsx(Ve,{id:"check-type-control",options:Ru,value:M,onValueChange:L})]}),h&&e.residents.length>1&&n.jsx("div",{className:Oe.markMultipleContainer,children:n.jsx(ae,{variant:"secondary",size:"m",onClick:()=>p(!0),children:"Mark all"})}),n.jsx(gu,{isOpen:v,onClose:()=>p(!1),onSelect:Je,options:x,layout:m}),n.jsx("div",{className:Oe.residentListContainer,children:e.residents.map(I=>{const B=e.type==="scheduled"?e.specialClassifications?.find(Q=>Q.residentId===I.id):void 0;return n.jsx(su,{resident:I,status:N[I.id],notes:A[I.id],onStatusChange:Qe,onNotesChange:je,classification:B},I.id)})})]}),n.jsx("footer",{className:Oe.footer,ref:k,"data-scrolled":y,children:n.jsx(ae,{variant:"primary",size:"m",onClick:Me,disabled:!qe,children:"Save"})})]})},qn=0,It=1,Jt=2,Vo=4;function Zs(e){return()=>e}function zu(e){e()}function Go(e,t){return s=>e(t(s))}function eo(e,t){return()=>e(t)}function Pu(e,t){return s=>e(t,s)}function Rs(e){return e!==void 0}function $u(...e){return()=>{e.map(zu)}}function Zt(){}function Yn(e,t){return t(e),e}function Fu(e,t){return t(e)}function be(...e){return e}function le(e,t){return e(It,t)}function X(e,t){e(qn,t)}function Es(e){e(Jt)}function Se(e){return e(Vo)}function z(e,t){return le(e,Pu(t,qn))}function it(e,t){const s=e(It,o=>{s(),t(o)});return s}function to(e){let t,s;return o=>a=>{t=a,s&&clearTimeout(s),s=setTimeout(()=>{o(t)},e)}}function Uo(e,t){return e===t}function xe(e=Uo){let t;return s=>o=>{e(t,o)||(t=o,s(o))}}function q(e){return t=>s=>{e(s)&&t(s)}}function D(e){return t=>Go(t,e)}function gt(e){return t=>()=>{t(e)}}function E(e,...t){const s=Wu(...t);return(o,a)=>{switch(o){case Jt:Es(e);return;case It:return le(e,s(a))}}}function vt(e,t){return s=>o=>{s(t=e(t,o))}}function Wt(e){return t=>s=>{e>0?e--:t(s)}}function Ct(e){let t=null,s;return o=>a=>{t=a,!s&&(s=setTimeout(()=>{s=void 0,o(t)},e))}}function J(...e){const t=new Array(e.length);let s=0,o=null;const a=Math.pow(2,e.length)-1;return e.forEach((r,l)=>{const i=Math.pow(2,l);le(r,c=>{const u=s;s=s|i,t[l]=c,u!==a&&s===a&&o&&(o(),o=null)})}),r=>l=>{const i=()=>{r([l].concat(t))};s===a?i():o=i}}function Wu(...e){return t=>e.reduceRight(Fu,t)}function Vu(e){let t,s;const o=()=>t?.();return function(a,r){switch(a){case It:return r?s===r?void 0:(o(),s=r,t=le(e,r),t):(o(),Zt);case Jt:o(),s=null;return}}}function O(e){let t=e;const s=ne();return(o,a)=>{switch(o){case qn:t=a;break;case It:{a(t);break}case Vo:return t}return s(o,a)}}function De(e,t){return Yn(O(t),s=>z(e,s))}function ne(){const e=[];return(t,s)=>{switch(t){case qn:e.slice().forEach(o=>{o(s)});return;case Jt:e.splice(0,e.length);return;case It:return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}}}function Ke(e){return Yn(ne(),t=>z(e,t))}function re(e,t=[],{singleton:s}={singleton:!0}){return{constructor:e,dependencies:t,id:Gu(),singleton:s}}const Gu=()=>Symbol();function Uu(e){const t=new Map,s=({constructor:o,dependencies:a,id:r,singleton:l})=>{if(l&&t.has(r))return t.get(r);const i=o(a.map(c=>s(c)));return l&&t.set(r,i),i};return s(e)}function Ie(...e){const t=ne(),s=new Array(e.length);let o=0;const a=Math.pow(2,e.length)-1;return e.forEach((r,l)=>{const i=Math.pow(2,l);le(r,c=>{s[l]=c,o=o|i,o===a&&X(t,s)})}),function(r,l){switch(r){case Jt:{Es(t);return}case It:return o===a&&l(s),le(t,l)}}}function G(e,t=Uo){return E(e,xe(t))}function ms(...e){return function(t,s){switch(t){case Jt:return;case It:return $u(...e.map(o=>le(o,s)))}}}var Ge=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(Ge||{});const qu={0:"debug",3:"error",1:"log",2:"warn"},Yu=()=>typeof globalThis>"u"?window:globalThis,Nt=re(()=>{const e=O(3);return{log:O((t,s,o=1)=>{var a;const r=(a=Yu().VIRTUOSO_LOG_LEVEL)!=null?a:Se(e);o>=r&&console[qu[o]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,s)}),logLevel:e}},[],{singleton:!0});function Gt(e,t,s){return As(e,t,s).callbackRef}function As(e,t,s){const o=S.useRef(null);let a=l=>{};const r=S.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(l=>{const i=()=>{const c=l[0].target;c.offsetParent!==null&&e(c)};s?i():requestAnimationFrame(i)}):null,[e,s]);return a=l=>{l&&t?(r?.observe(l),o.current=l):(o.current&&r?.unobserve(o.current),o.current=null)},{callbackRef:a,ref:o}}function Xu(e,t,s,o,a,r,l,i,c){const u=S.useCallback(h=>{const d=Ku(h.children,t,i?"offsetWidth":"offsetHeight",a);let m=h.parentElement;for(;!m.dataset.virtuosoScroller;)m=m.parentElement;const f=m.lastElementChild.dataset.viewportType==="window";let g;f&&(g=m.ownerDocument.defaultView);const b=l?i?l.scrollLeft:l.scrollTop:f?i?g.scrollX||g.document.documentElement.scrollLeft:g.scrollY||g.document.documentElement.scrollTop:i?m.scrollLeft:m.scrollTop,v=l?i?l.scrollWidth:l.scrollHeight:f?i?g.document.documentElement.scrollWidth:g.document.documentElement.scrollHeight:i?m.scrollWidth:m.scrollHeight,p=l?i?l.offsetWidth:l.offsetHeight:f?i?g.innerWidth:g.innerHeight:i?m.offsetWidth:m.offsetHeight;o({scrollHeight:v,scrollTop:Math.max(b,0),viewportHeight:p}),r?.(i?no("column-gap",getComputedStyle(h).columnGap,a):no("row-gap",getComputedStyle(h).rowGap,a)),d!==null&&e(d)},[e,t,a,r,l,o,i]);return As(u,s,c)}function Ku(e,t,s,o){const a=e.length;if(a===0)return null;const r=[];for(let l=0;l<a;l++){const i=e.item(l);if(i.dataset.index===void 0)continue;const c=parseInt(i.dataset.index),u=parseFloat(i.dataset.knownSize),h=t(i,s);if(h===0&&o("Zero-sized element, this should not happen",{child:i},Ge.ERROR),h===u)continue;const d=r[r.length-1];r.length===0||d.size!==h||d.endIndex!==c-1?r.push({endIndex:c,size:h,startIndex:c}):r[r.length-1].endIndex++}return r}function no(e,t,s){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&s(`${e} was not resolved to pixel value correctly`,t,Ge.WARN),t==="normal"?0:parseInt(t??"0",10)}function qo(e,t,s){const o=S.useRef(null),a=S.useCallback(c=>{if(!(c!=null&&c.offsetParent))return;const u=c.getBoundingClientRect(),h=u.width;let d,m;if(t){const f=t.getBoundingClientRect(),g=u.top-f.top;m=f.height-Math.max(0,g),d=g+t.scrollTop}else{const f=l.current.ownerDocument.defaultView;m=f.innerHeight-Math.max(0,u.top),d=u.top+f.scrollY}o.current={offsetTop:d,visibleHeight:m,visibleWidth:h},e(o.current)},[e,t]),{callbackRef:r,ref:l}=As(a,!0,s),i=S.useCallback(()=>{a(l.current)},[a,l]);return S.useEffect(()=>{var c;if(t){t.addEventListener("scroll",i);const u=new ResizeObserver(()=>{requestAnimationFrame(i)});return u.observe(t),()=>{t.removeEventListener("scroll",i),u.unobserve(t)}}else{const u=(c=l.current)==null?void 0:c.ownerDocument.defaultView;return u?.addEventListener("scroll",i),u?.addEventListener("resize",i),()=>{u?.removeEventListener("scroll",i),u?.removeEventListener("resize",i)}}},[i,t,l]),r}const $e=re(()=>{const e=ne(),t=ne(),s=O(0),o=ne(),a=O(0),r=ne(),l=ne(),i=O(0),c=O(0),u=O(0),h=O(0),d=ne(),m=ne(),f=O(!1),g=O(!1),b=O(!1);return z(E(e,D(({scrollTop:v})=>v)),t),z(E(e,D(({scrollHeight:v})=>v)),l),z(t,a),{deviation:s,fixedFooterHeight:u,fixedHeaderHeight:c,footerHeight:h,headerHeight:i,horizontalDirection:g,scrollBy:m,scrollContainerState:e,scrollHeight:l,scrollingInProgress:f,scrollTo:d,scrollTop:t,skipAnimationFrameInResizeObserver:b,smoothScrollTargetReached:o,statefulScrollTop:a,viewportHeight:r}},[],{singleton:!0}),dn={lvl:0};function Yo(e,t){const s=e.length;if(s===0)return[];let{index:o,value:a}=t(e[0]);const r=[];for(let l=1;l<s;l++){const{index:i,value:c}=t(e[l]);r.push({end:i-1,start:o,value:a}),o=i,a=c}return r.push({end:1/0,start:o,value:a}),r}function me(e){return e===dn}function mn(e,t){if(!me(e))return t===e.k?e.v:t<e.k?mn(e.l,t):mn(e.r,t)}function ct(e,t,s="k"){if(me(e))return[-1/0,void 0];if(Number(e[s])===t)return[e.k,e.v];if(Number(e[s])<t){const o=ct(e.r,t,s);return o[0]===-1/0?[e.k,e.v]:o}return ct(e.l,t,s)}function Xe(e,t,s){return me(e)?Qo(t,s,1):t===e.k?Ee(e,{k:t,v:s}):t<e.k?so(Ee(e,{l:Xe(e.l,t,s)})):so(Ee(e,{r:Xe(e.r,t,s)}))}function Kt(){return dn}function Xn(e,t,s){if(me(e))return[];const o=ct(e,t)[0];return Qu(fs(e,o,s))}function hs(e,t){if(me(e))return dn;const{k:s,l:o,r:a}=e;if(t===s){if(me(o))return a;if(me(a))return o;{const[r,l]=Ko(o);return Dn(Ee(e,{k:r,l:Xo(o),v:l}))}}else return t<s?Dn(Ee(e,{l:hs(o,t)})):Dn(Ee(e,{r:hs(a,t)}))}function $t(e){return me(e)?[]:[...$t(e.l),{k:e.k,v:e.v},...$t(e.r)]}function fs(e,t,s){if(me(e))return[];const{k:o,l:a,r,v:l}=e;let i=[];return o>t&&(i=i.concat(fs(a,t,s))),o>=t&&o<=s&&i.push({k:o,v:l}),o<=s&&(i=i.concat(fs(r,t,s))),i}function Dn(e){const{l:t,lvl:s,r:o}=e;if(o.lvl>=s-1&&t.lvl>=s-1)return e;if(s>o.lvl+1){if(Zn(t))return Jo(Ee(e,{lvl:s-1}));if(!me(t)&&!me(t.r))return Ee(t.r,{l:Ee(t,{r:t.r.l}),lvl:s,r:Ee(e,{l:t.r.r,lvl:s-1})});throw new Error("Unexpected empty nodes")}else{if(Zn(e))return ps(Ee(e,{lvl:s-1}));if(!me(o)&&!me(o.l)){const a=o.l,r=Zn(a)?o.lvl-1:o.lvl;return Ee(a,{l:Ee(e,{lvl:s-1,r:a.l}),lvl:a.lvl+1,r:ps(Ee(o,{l:a.r,lvl:r}))})}else throw new Error("Unexpected empty nodes")}}function Ee(e,t){return Qo(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function Xo(e){return me(e.r)?e.l:Dn(Ee(e,{r:Xo(e.r)}))}function Zn(e){return me(e)||e.lvl>e.r.lvl}function Ko(e){return me(e.r)?[e.k,e.v]:Ko(e.r)}function Qo(e,t,s,o=dn,a=dn){return{k:e,l:o,lvl:s,r:a,v:t}}function so(e){return ps(Jo(e))}function Jo(e){const{l:t}=e;return!me(t)&&t.lvl===e.lvl?Ee(t,{r:Ee(e,{l:t.r})}):e}function ps(e){const{lvl:t,r:s}=e;return!me(s)&&!me(s.r)&&s.lvl===t&&s.r.lvl===t?Ee(s,{l:Ee(e,{r:s.l}),lvl:t+1}):e}function Qu(e){return Yo(e,({k:t,v:s})=>({index:t,value:s}))}function Zo(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function hn(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const Os=re(()=>({recalcInProgress:O(!1)}),[],{singleton:!0});function ea(e,t,s){return e[Pn(e,t,s)]}function Pn(e,t,s,o=0){let a=e.length-1;for(;o<=a;){const r=Math.floor((o+a)/2),l=e[r],i=s(l,t);if(i===0)return r;if(i===-1){if(a-o<2)return r-1;a=r-1}else{if(a===o)return r;o=r+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function Ju(e,t,s,o){const a=Pn(e,t,o),r=Pn(e,s,o,a);return e.slice(a,r+1)}function kt(e,t){return Math.round(e.getBoundingClientRect()[t])}function Kn(e){return!me(e.groupOffsetTree)}function Hs({index:e},t){return t===e?0:t<e?-1:1}function Zu(){return{groupIndices:[],groupOffsetTree:Kt(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Kt()}}function ed(e,t){let s=me(e)?0:1/0;for(const o of t){const{endIndex:a,size:r,startIndex:l}=o;if(s=Math.min(s,l),me(e)){e=Xe(e,0,r);continue}const i=Xn(e,l-1,a+1);if(i.some(id(o)))continue;let c=!1,u=!1;for(const{end:h,start:d,value:m}of i)c?(a>=d||r===m)&&(e=hs(e,d)):(u=m!==r,c=!0),h>a&&a>=d&&m!==r&&(e=Xe(e,a+1,m));u&&(e=Xe(e,l,r))}return[e,s]}function td(e){return typeof e.groupIndex<"u"}function nd({offset:e},t){return t===e?0:t<e?-1:1}function fn(e,t,s){if(t.length===0)return 0;const{index:o,offset:a,size:r}=ea(t,e,Hs),l=e-o,i=r*l+(l-1)*s+a;return i>0?i+s:i}function ta(e,t){if(!Kn(t))return e;let s=0;for(;t.groupIndices[s]<=e+s;)s++;return e+s}function na(e,t,s){if(td(e))return t.groupIndices[e.groupIndex]+1;{const o=e.index==="LAST"?s:e.index;let a=ta(o,t);return a=Math.max(0,a,Math.min(s,a)),a}}function sd(e,t,s,o=0){return o>0&&(t=Math.max(t,ea(e,o,Hs).offset)),Yo(Ju(e,t,s,nd),rd)}function od(e,[t,s,o,a]){t.length>0&&o("received item sizes",t,Ge.DEBUG);const r=e.sizeTree;let l=r,i=0;if(s.length>0&&me(r)&&t.length===2){const m=t[0].size,f=t[1].size;l=s.reduce((g,b)=>Xe(Xe(g,b,m),b+1,f),l)}else[l,i]=ed(l,t);if(l===r)return e;const{lastIndex:c,lastOffset:u,lastSize:h,offsetTree:d}=gs(e.offsetTree,i,l,a);return{groupIndices:s,groupOffsetTree:s.reduce((m,f)=>Xe(m,f,fn(f,d,a)),Kt()),lastIndex:c,lastOffset:u,lastSize:h,offsetTree:d,sizeTree:l}}function ad(e){return $t(e).map(({k:t,v:s},o,a)=>{const r=a[o+1];return{endIndex:r?r.k-1:1/0,size:s,startIndex:t}})}function oo(e,t){let s=0,o=0;for(;s<e;)s+=t[o+1]-t[o]-1,o++;return o-(s===e?0:1)}function gs(e,t,s,o){let a=e,r=0,l=0,i=0,c=0;if(t!==0){c=Pn(a,t-1,Hs),i=a[c].offset;const u=ct(s,t-1);r=u[0],l=u[1],a.length&&a[c].size===ct(s,t)[1]&&(c-=1),a=a.slice(0,c+1)}else a=[];for(const{start:u,value:h}of Xn(s,t,1/0)){const d=u-r,m=d*l+i+d*o;a.push({index:u,offset:m,size:h}),r=u,i=m,l=h}return{lastIndex:r,lastOffset:i,lastSize:l,offsetTree:a}}function rd(e){return{index:e.index,value:e}}function id(e){const{endIndex:t,size:s,startIndex:o}=e;return a=>a.start===o&&(a.end===t||a.end===1/0)&&a.value===s}const ld={offsetHeight:"height",offsetWidth:"width"},bt=re(([{log:e},{recalcInProgress:t}])=>{const s=ne(),o=ne(),a=De(o,0),r=ne(),l=ne(),i=O(0),c=O([]),u=O(void 0),h=O(void 0),d=O((w,y)=>kt(w,ld[y])),m=O(void 0),f=O(0),g=Zu(),b=De(E(s,J(c,e,f),vt(od,g),xe()),g),v=De(E(c,xe(),vt((w,y)=>({current:y,prev:w.current}),{current:[],prev:[]}),D(({prev:w})=>w)),[]);z(E(c,q(w=>w.length>0),J(b,f),D(([w,y,C])=>{const T=w.reduce((N,H,A)=>Xe(N,H,fn(H,y.offsetTree,C)||A),Kt());return{...y,groupIndices:w,groupOffsetTree:T}})),b),z(E(o,J(b),q(([w,{lastIndex:y}])=>w<y),D(([w,{lastIndex:y,lastSize:C}])=>[{endIndex:y,size:C,startIndex:w}])),s),z(u,h);const p=De(E(u,D(w=>w===void 0)),!0);z(E(h,q(w=>w!==void 0&&me(Se(b).sizeTree)),D(w=>[{endIndex:0,size:w,startIndex:0}])),s);const x=Ke(E(s,J(b),vt(({sizes:w},[y,C])=>({changed:C!==w,sizes:C}),{changed:!1,sizes:g}),D(w=>w.changed)));le(E(i,vt((w,y)=>({diff:w.prev-y,prev:y}),{diff:0,prev:0}),D(w=>w.diff)),w=>{const{groupIndices:y}=Se(b);if(w>0)X(t,!0),X(r,w+oo(w,y));else if(w<0){const C=Se(v);C.length>0&&(w-=oo(-w,C)),X(l,w)}}),le(E(i,J(e)),([w,y])=>{w<0&&y("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:i},Ge.ERROR)});const k=Ke(r);z(E(r,J(b),D(([w,y])=>{const C=y.groupIndices.length>0,T=[],N=y.lastSize;if(C){const H=mn(y.sizeTree,0);let A=0,P=0;for(;A<w;){const L=y.groupIndices[P],$=y.groupIndices.length===P+1?1/0:y.groupIndices[P+1]-L-1;T.push({endIndex:L,size:H,startIndex:L}),T.push({endIndex:L+1+$-1,size:N,startIndex:L+1}),P++,A+=$+1}const M=$t(y.sizeTree);return A!==w&&M.shift(),M.reduce((L,{k:$,v:se})=>{let W=L.ranges;return L.prevSize!==0&&(W=[...L.ranges,{endIndex:$+w-1,size:L.prevSize,startIndex:L.prevIndex}]),{prevIndex:$+w,prevSize:se,ranges:W}},{prevIndex:w,prevSize:0,ranges:T}).ranges}return $t(y.sizeTree).reduce((H,{k:A,v:P})=>({prevIndex:A+w,prevSize:P,ranges:[...H.ranges,{endIndex:A+w-1,size:H.prevSize,startIndex:H.prevIndex}]}),{prevIndex:0,prevSize:N,ranges:[]}).ranges})),s);const _=Ke(E(l,J(b,f),D(([w,{offsetTree:y},C])=>{const T=-w;return fn(T,y,C)})));return z(E(l,J(b,f),D(([w,y,C])=>{if(y.groupIndices.length>0){if(me(y.sizeTree))return y;let T=Kt();const N=Se(v);let H=0,A=0,P=0;for(;H<-w;){P=N[A];const M=N[A+1]-P-1;A++,H+=M+1}if(T=$t(y.sizeTree).reduce((M,{k:L,v:$})=>Xe(M,Math.max(0,L+w),$),T),H!==-w){const M=mn(y.sizeTree,P);T=Xe(T,0,M);const L=ct(y.sizeTree,-w+1)[1];T=Xe(T,1,L)}return{...y,sizeTree:T,...gs(y.offsetTree,0,T,C)}}else{const T=$t(y.sizeTree).reduce((N,{k:H,v:A})=>Xe(N,Math.max(0,H+w),A),Kt());return{...y,sizeTree:T,...gs(y.offsetTree,0,T,C)}}})),b),{beforeUnshiftWith:k,data:m,defaultItemSize:h,firstItemIndex:i,fixedItemSize:u,gap:f,groupIndices:c,itemSize:d,listRefresh:x,shiftWith:l,shiftWithOffset:_,sizeRanges:s,sizes:b,statefulTotalCount:a,totalCount:o,trackItemSizes:p,unshiftWith:r}},be(Nt,Os),{singleton:!0});function cd(e){return e.reduce((t,s)=>(t.groupIndices.push(t.totalCount),t.totalCount+=s+1,t),{groupIndices:[],totalCount:0})}const sa=re(([{groupIndices:e,sizes:t,totalCount:s},{headerHeight:o,scrollTop:a}])=>{const r=ne(),l=ne(),i=Ke(E(r,D(cd)));return z(E(i,D(c=>c.totalCount)),s),z(E(i,D(c=>c.groupIndices)),e),z(E(Ie(a,t,o),q(([c,u])=>Kn(u)),D(([c,u,h])=>ct(u.groupOffsetTree,Math.max(c-h,0),"v")[0]),xe(),D(c=>[c])),l),{groupCounts:r,topItemsIndexes:l}},be(bt,$e)),Rt=re(([{log:e}])=>{const t=O(!1),s=Ke(E(t,q(o=>o),xe()));return le(t,o=>{o&&Se(e)("props updated",{},Ge.DEBUG)}),{didMount:s,propsReady:t}},be(Nt),{singleton:!0}),ud=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function oa(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!ud)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const xn=re(([{gap:e,listRefresh:t,sizes:s,totalCount:o},{fixedFooterHeight:a,fixedHeaderHeight:r,footerHeight:l,headerHeight:i,scrollingInProgress:c,scrollTo:u,smoothScrollTargetReached:h,viewportHeight:d},{log:m}])=>{const f=ne(),g=ne(),b=O(0);let v=null,p=null,x=null;function k(){v&&(v(),v=null),x&&(x(),x=null),p&&(clearTimeout(p),p=null),X(c,!1)}return z(E(f,J(s,d,o,b,i,l,m),J(e,r,a),D(([[_,w,y,C,T,N,H,A],P,M,L])=>{const $=oa(_),{align:se,behavior:W,offset:K}=$,ce=C-1,ie=na($,w,ce);let he=fn(ie,w.offsetTree,P)+N;se==="end"?(he+=M+ct(w.sizeTree,ie)[1]-y+L,ie===ce&&(he+=H)):se==="center"?he+=(M+ct(w.sizeTree,ie)[1]-y+L)/2:he-=T,K&&(he+=K);const Qe=je=>{k(),je?(A("retrying to scroll to",{location:_},Ge.DEBUG),X(f,_)):(X(g,!0),A("list did not change, scroll successful",{},Ge.DEBUG))};if(k(),W==="smooth"){let je=!1;x=le(t,Je=>{je=je||Je}),v=it(h,()=>{Qe(je)})}else v=it(E(t,dd(150)),Qe);return p=setTimeout(()=>{k()},1200),X(c,!0),A("scrolling from index to",{behavior:W,index:ie,top:he},Ge.DEBUG),{behavior:W,top:he}})),u),{scrollTargetReached:g,scrollToIndex:f,topListHeight:b}},be(bt,$e,Nt),{singleton:!0});function dd(e){return t=>{const s=setTimeout(()=>{t(!1)},e);return o=>{o&&(t(!0),clearTimeout(s))}}}function Ms(e,t){e==0?t():requestAnimationFrame(()=>{Ms(e-1,t)})}function Ls(e,t){const s=t-1;return typeof e=="number"?e:e.index==="LAST"?s:e.index}const bn=re(([{defaultItemSize:e,listRefresh:t,sizes:s},{scrollTop:o},{scrollTargetReached:a,scrollToIndex:r},{didMount:l}])=>{const i=O(!0),c=O(0),u=O(!0);return z(E(l,J(c),q(([h,d])=>!!d),gt(!1)),i),z(E(l,J(c),q(([h,d])=>!!d),gt(!1)),u),le(E(Ie(t,l),J(i,s,e,u),q(([[,h],d,{sizeTree:m},f,g])=>h&&(!me(m)||Rs(f))&&!d&&!g),J(c)),([,h])=>{it(a,()=>{X(u,!0)}),Ms(4,()=>{it(o,()=>{X(i,!0)}),X(r,h)})}),{initialItemFinalLocationReached:u,initialTopMostItemIndex:c,scrolledToInitialItem:i}},be(bt,$e,xn,Rt),{singleton:!0});function aa(e,t){return Math.abs(e-t)<1.01}const pn="up",cn="down",md="none",hd={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},fd=0,yn=re(([{footerHeight:e,headerHeight:t,scrollBy:s,scrollContainerState:o,scrollTop:a,viewportHeight:r}])=>{const l=O(!1),i=O(!0),c=ne(),u=ne(),h=O(4),d=O(fd),m=De(E(ms(E(G(a),Wt(1),gt(!0)),E(G(a),Wt(1),gt(!1),to(100))),xe()),!1),f=De(E(ms(E(s,gt(!0)),E(s,gt(!1),to(200))),xe()),!1);z(E(Ie(G(a),G(d)),D(([x,k])=>x<=k),xe()),i),z(E(i,Ct(50)),u);const g=Ke(E(Ie(o,G(r),G(t),G(e),G(h)),vt((x,[{scrollHeight:k,scrollTop:_},w,y,C,T])=>{const N=_+w-k>-T,H={scrollHeight:k,scrollTop:_,viewportHeight:w};if(N){let P,M;return _>x.state.scrollTop?(P="SCROLLED_DOWN",M=x.state.scrollTop-_):(P="SIZE_DECREASED",M=x.state.scrollTop-_||x.scrollTopDelta),{atBottom:!0,atBottomBecause:P,scrollTopDelta:M,state:H}}let A;return H.scrollHeight>x.state.scrollHeight?A="SIZE_INCREASED":w<x.state.viewportHeight?A="VIEWPORT_HEIGHT_DECREASING":_<x.state.scrollTop?A="SCROLLING_UPWARDS":A="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:A,state:H}},hd),xe((x,k)=>x&&x.atBottom===k.atBottom))),b=De(E(o,vt((x,{scrollHeight:k,scrollTop:_,viewportHeight:w})=>{if(aa(x.scrollHeight,k))return{changed:!1,jump:0,scrollHeight:k,scrollTop:_};{const y=k-(_+w)<1;return x.scrollTop!==_&&y?{changed:!0,jump:x.scrollTop-_,scrollHeight:k,scrollTop:_}:{changed:!0,jump:0,scrollHeight:k,scrollTop:_}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),q(x=>x.changed),D(x=>x.jump)),0);z(E(g,D(x=>x.atBottom)),l),z(E(l,Ct(50)),c);const v=O(cn);z(E(o,D(({scrollTop:x})=>x),xe(),vt((x,k)=>Se(f)?{direction:x.direction,prevScrollTop:k}:{direction:k<x.prevScrollTop?pn:cn,prevScrollTop:k},{direction:cn,prevScrollTop:0}),D(x=>x.direction)),v),z(E(o,Ct(50),gt(md)),v);const p=O(0);return z(E(m,q(x=>!x),gt(0)),p),z(E(a,Ct(100),J(m),q(([x,k])=>!!k),vt(([x,k],[_])=>[k,_],[0,0]),D(([x,k])=>k-x)),p),{atBottomState:g,atBottomStateChange:c,atBottomThreshold:h,atTopStateChange:u,atTopThreshold:d,isAtBottom:l,isAtTop:i,isScrolling:m,lastJumpDueToItemResize:b,scrollDirection:v,scrollVelocity:p}},be($e)),$n="top",Fn="bottom",ao="none";function ro(e,t,s){return typeof e=="number"?s===pn&&t===$n||s===cn&&t===Fn?e:0:s===pn?t===$n?e.main:e.reverse:t===Fn?e.main:e.reverse}function io(e,t){var s;return typeof e=="number"?e:(s=e[t])!=null?s:0}const Bs=re(([{deviation:e,fixedHeaderHeight:t,headerHeight:s,scrollTop:o,viewportHeight:a}])=>{const r=ne(),l=O(0),i=O(0),c=O(0),u=De(E(Ie(G(o),G(a),G(s),G(r,hn),G(c),G(l),G(t),G(e),G(i)),D(([h,d,m,[f,g],b,v,p,x,k])=>{const _=h-x,w=v+p,y=Math.max(m-_,0);let C=ao;const T=io(k,$n),N=io(k,Fn);return f-=x,f+=m+p,g+=m+p,g-=x,f>h+w-T&&(C=pn),g<h-y+d+N&&(C=cn),C!==ao?[Math.max(_-m-ro(b,$n,C)-T,0),_-y-p+d+ro(b,Fn,C)+N]:null}),q(h=>h!=null),xe(hn)),[0,0]);return{increaseViewportBy:i,listBoundary:r,overscan:c,topListHeight:l,visibleRange:u}},be($e),{singleton:!0});function pd(e,t,s){if(Kn(t)){const o=ta(e,t);return[{index:ct(t.groupOffsetTree,o)[0],offset:0,size:0},{data:s?.[0],index:o,offset:0,size:0}]}return[{data:s?.[0],index:e,offset:0,size:0}]}const es={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function zn(e,t,s,o,a,r){const{lastIndex:l,lastOffset:i,lastSize:c}=a;let u=0,h=0;if(e.length>0){u=e[0].offset;const b=e[e.length-1];h=b.offset+b.size}const d=s-l,m=i+d*c+(d-1)*o,f=u,g=m-h;return{bottom:h,firstItemIndex:r,items:lo(e,a,r),offsetBottom:g,offsetTop:u,top:f,topItems:lo(t,a,r),topListHeight:t.reduce((b,v)=>v.size+b,0),totalCount:s}}function ra(e,t,s,o,a,r){let l=0;if(s.groupIndices.length>0)for(const h of s.groupIndices){if(h-l>=e)break;l++}const i=e+l,c=Ls(t,i),u=Array.from({length:i}).map((h,d)=>({data:r[d+c],index:d+c,offset:0,size:0}));return zn(u,[],i,a,s,o)}function lo(e,t,s){if(e.length===0)return[];if(!Kn(t))return e.map(u=>({...u,index:u.index+s,originalIndex:u.index}));const o=e[0].index,a=e[e.length-1].index,r=[],l=Xn(t.groupOffsetTree,o,a);let i,c=0;for(const u of e){(!i||i.end<u.index)&&(i=l.shift(),c=t.groupIndices.indexOf(i.start));let h;u.index===i.start?h={index:c,type:"group"}:h={groupIndex:c,index:u.index-(c+1)+s},r.push({...h,data:u.data,offset:u.offset,originalIndex:u.index,size:u.size})}return r}const Ut=re(([{data:e,firstItemIndex:t,gap:s,sizes:o,totalCount:a},r,{listBoundary:l,topListHeight:i,visibleRange:c},{initialTopMostItemIndex:u,scrolledToInitialItem:h},{topListHeight:d},m,{didMount:f},{recalcInProgress:g}])=>{const b=O([]),v=O(0),p=ne();z(r.topItemsIndexes,b);const x=De(E(Ie(f,g,G(c,hn),G(a),G(o),G(u),h,G(b),G(t),G(s),e),q(([y,C,,T,,,,,,,N])=>{const H=N&&N.length!==T;return y&&!C&&!H}),D(([,,[y,C],T,N,H,A,P,M,L,$])=>{const se=N,{offsetTree:W,sizeTree:K}=se,ce=Se(v);if(T===0)return{...es,totalCount:T};if(y===0&&C===0)return ce===0?{...es,totalCount:T}:ra(ce,H,N,M,L,$||[]);if(me(K))return ce>0?null:zn(pd(Ls(H,T),se,$),[],T,L,se,M);const ie=[];if(P.length>0){const qe=P[0],Me=P[P.length-1];let Le=0;for(const I of Xn(K,qe,Me)){const B=I.value,Q=Math.max(I.start,qe),fe=Math.min(I.end,Me);for(let de=Q;de<=fe;de++)ie.push({data:$?.[de],index:de,offset:Le,size:B}),Le+=B}}if(!A)return zn([],ie,T,L,se,M);const he=P.length>0?P[P.length-1]+1:0,Qe=sd(W,y,C,he);if(Qe.length===0)return null;const je=T-1,Je=Yn([],qe=>{for(const Me of Qe){const Le=Me.value;let I=Le.offset,B=Me.start;const Q=Le.size;if(Le.offset<y){B+=Math.floor((y-Le.offset+L)/(Q+L));const de=B-Me.start;I+=de*Q+de*L}B<he&&(I+=(he-B)*Q,B=he);const fe=Math.min(Me.end,je);for(let de=B;de<=fe&&!(I>=C);de++)qe.push({data:$?.[de],index:de,offset:I,size:Q}),I+=Q+L}});return zn(Je,ie,T,L,se,M)}),q(y=>y!==null),xe()),es);z(E(e,q(Rs),D(y=>y?.length)),a),z(E(x,D(y=>y.topListHeight)),d),z(d,i),z(E(x,D(y=>[y.top,y.bottom])),l),z(E(x,D(y=>y.items)),p);const k=Ke(E(x,q(({items:y})=>y.length>0),J(a,e),q(([{items:y},C])=>y[y.length-1].originalIndex===C-1),D(([,y,C])=>[y-1,C]),xe(hn),D(([y])=>y))),_=Ke(E(x,Ct(200),q(({items:y,topItems:C})=>y.length>0&&y[0].originalIndex===C.length),D(({items:y})=>y[0].index),xe())),w=Ke(E(x,q(({items:y})=>y.length>0),D(({items:y})=>{let C=0,T=y.length-1;for(;y[C].type==="group"&&C<T;)C++;for(;y[T].type==="group"&&T>C;)T--;return{endIndex:y[T].index,startIndex:y[C].index}}),xe(Zo)));return{endReached:k,initialItemCount:v,itemsRendered:p,listState:x,rangeChanged:w,startReached:_,topItemsIndexes:b,...m}},be(bt,sa,Bs,bn,xn,yn,Rt,Os),{singleton:!0}),ia=re(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:s,headerHeight:o},{listState:a}])=>{const r=ne(),l=De(E(Ie(s,e,o,t,a),D(([i,c,u,h,d])=>i+c+u+h+d.offsetBottom+d.bottom)),0);return z(G(l),r),{totalListHeight:l,totalListHeightChanged:r}},be($e,Ut),{singleton:!0}),gd=re(([{viewportHeight:e},{totalListHeight:t}])=>{const s=O(!1),o=De(E(Ie(s,e,t),q(([a])=>a),D(([,a,r])=>Math.max(0,a-r)),Ct(0),xe()),0);return{alignToBottom:s,paddingTopAddition:o}},be($e,ia),{singleton:!0}),la=re(()=>({context:O(null)})),vd=({itemBottom:e,itemTop:t,locationParams:{align:s,behavior:o,...a},viewportBottom:r,viewportTop:l})=>t<l?{...a,align:s??"start",behavior:o}:e>r?{...a,align:s??"end",behavior:o}:null,ca=re(([{gap:e,sizes:t,totalCount:s},{fixedFooterHeight:o,fixedHeaderHeight:a,headerHeight:r,scrollingInProgress:l,scrollTop:i,viewportHeight:c},{scrollToIndex:u}])=>{const h=ne();return z(E(h,J(t,c,s,r,a,o,i),J(e),D(([[d,m,f,g,b,v,p,x],k])=>{const{align:_,behavior:w,calculateViewLocation:y=vd,done:C,...T}=d,N=na(d,m,g-1),H=fn(N,m.offsetTree,k)+b+v,A=H+ct(m.sizeTree,N)[1],P=x+v,M=x+f-p,L=y({itemBottom:A,itemTop:H,locationParams:{align:_,behavior:w,...T},viewportBottom:M,viewportTop:P});return L?C&&it(E(l,q($=>!$),Wt(Se(l)?1:2)),C):C&&C(),L}),q(d=>d!==null)),u),{scrollIntoView:h}},be(bt,$e,xn,Ut,Nt),{singleton:!0});function co(e){return e?e==="smooth"?"smooth":"auto":!1}const xd=(e,t)=>typeof e=="function"?co(e(t)):t&&co(e),bd=re(([{listRefresh:e,totalCount:t,fixedItemSize:s,data:o},{atBottomState:a,isAtBottom:r},{scrollToIndex:l},{scrolledToInitialItem:i},{didMount:c,propsReady:u},{log:h},{scrollingInProgress:d},{context:m},{scrollIntoView:f}])=>{const g=O(!1),b=ne();let v=null;function p(w){X(l,{align:"end",behavior:w,index:"LAST"})}le(E(Ie(E(G(t),Wt(1)),c),J(G(g),r,i,d),D(([[w,y],C,T,N,H])=>{let A=y&&N,P="auto";return A&&(P=xd(C,T||H),A=A&&!!P),{followOutputBehavior:P,shouldFollow:A,totalCount:w}}),q(({shouldFollow:w})=>w)),({followOutputBehavior:w,totalCount:y})=>{v&&(v(),v=null),Se(s)?requestAnimationFrame(()=>{Se(h)("following output to ",{totalCount:y},Ge.DEBUG),p(w)}):v=it(e,()=>{Se(h)("following output to ",{totalCount:y},Ge.DEBUG),p(w),v=null})});function x(w){const y=it(a,C=>{w&&!C.atBottom&&C.notAtBottomBecause==="SIZE_INCREASED"&&!v&&(Se(h)("scrolling to bottom due to increased size",{},Ge.DEBUG),p("auto"))});setTimeout(y,100)}le(E(Ie(G(g),t,u),q(([w,,y])=>w&&y),vt(({value:w},[,y])=>({refreshed:w===y,value:y}),{refreshed:!1,value:0}),q(({refreshed:w})=>w),J(g,t)),([,w])=>{Se(i)&&x(w!==!1)}),le(b,()=>{x(Se(g)!==!1)}),le(Ie(G(g),a),([w,y])=>{w&&!y.atBottom&&y.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&p("auto")});const k=O(null),_=ne();return z(ms(E(G(o),D(w=>{var y;return(y=w?.length)!=null?y:0})),E(G(t))),_),le(E(Ie(E(_,Wt(1)),c),J(G(k),i,d,m),D(([[w,y],C,T,N,H])=>y&&T&&C?.({context:H,totalCount:w,scrollingInProgress:N})),q(w=>!!w),Ct(0)),w=>{v&&(v(),v=null),Se(s)?requestAnimationFrame(()=>{Se(h)("scrolling into view",{}),X(f,w)}):v=it(e,()=>{Se(h)("scrolling into view",{}),X(f,w),v=null})}),{autoscrollToBottom:b,followOutput:g,scrollIntoViewOnChange:k}},be(bt,yn,xn,bn,Rt,Nt,$e,la,ca)),yd=re(([{data:e,firstItemIndex:t,gap:s,sizes:o},{initialTopMostItemIndex:a},{initialItemCount:r,listState:l},{didMount:i}])=>(z(E(i,J(r),q(([,c])=>c!==0),J(a,o,t,s,e),D(([[,c],u,h,d,m,f=[]])=>ra(c,u,h,d,m,f))),l),{}),be(bt,bn,Ut,Rt),{singleton:!0}),wd=re(([{didMount:e},{scrollTo:t},{listState:s}])=>{const o=O(0);return le(E(e,J(o),q(([,a])=>a!==0),D(([,a])=>({top:a}))),a=>{it(E(s,Wt(1),q(r=>r.items.length>1)),()=>{requestAnimationFrame(()=>{X(t,a)})})}),{initialScrollTop:o}},be(Rt,$e,Ut),{singleton:!0}),ua=re(([{scrollVelocity:e}])=>{const t=O(!1),s=ne(),o=O(!1);return z(E(e,J(o,t,s),q(([a,r])=>!!r),D(([a,r,l,i])=>{const{enter:c,exit:u}=r;if(l){if(u(a,i))return!1}else if(c(a,i))return!0;return l}),xe()),t),le(E(Ie(t,e,s),J(o)),([[a,r,l],i])=>{a&&i&&i.change&&i.change(r,l)}),{isSeeking:t,scrollSeekConfiguration:o,scrollSeekRangeChanged:s,scrollVelocity:e}},be(yn),{singleton:!0}),Ds=re(([{scrollContainerState:e,scrollTo:t}])=>{const s=ne(),o=ne(),a=ne(),r=O(!1),l=O(void 0);return z(E(Ie(s,o),D(([{scrollHeight:i,scrollTop:c,viewportHeight:u},{offsetTop:h}])=>({scrollHeight:i,scrollTop:Math.max(0,c-h),viewportHeight:u}))),e),z(E(t,J(o),D(([i,{offsetTop:c}])=>({...i,top:i.top+c}))),a),{customScrollParent:l,useWindowScroll:r,windowScrollContainerState:s,windowScrollTo:a,windowViewportRect:o}},be($e)),Cd=re(([{sizeRanges:e,sizes:t},{headerHeight:s,scrollTop:o},{initialTopMostItemIndex:a},{didMount:r},{useWindowScroll:l,windowScrollContainerState:i,windowViewportRect:c}])=>{const u=ne(),h=O(void 0),d=O(null),m=O(null);return z(i,d),z(c,m),le(E(u,J(t,o,l,d,m,s)),([f,g,b,v,p,x,k])=>{const _=ad(g.sizeTree);v&&p!==null&&x!==null&&(b=p.scrollTop-x.offsetTop),b-=k,f({ranges:_,scrollTop:b})}),z(E(h,q(Rs),D(_d)),a),z(E(r,J(h),q(([,f])=>f!==void 0),xe(),D(([,f])=>f.ranges)),e),{getState:u,restoreStateFrom:h}},be(bt,$e,bn,Rt,Ds));function _d(e){return{align:"start",index:0,offset:e.scrollTop}}const Sd=re(([{topItemsIndexes:e}])=>{const t=O(0);return z(E(t,q(s=>s>=0),D(s=>Array.from({length:s}).map((o,a)=>a))),e),{topItemCount:t}},be(Ut));function da(e){let t=!1,s;return()=>(t||(t=!0,s=e()),s)}const jd=da(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),Td=re(([{deviation:e,scrollBy:t,scrollingInProgress:s,scrollTop:o},{isAtBottom:a,isScrolling:r,lastJumpDueToItemResize:l,scrollDirection:i},{listState:c},{beforeUnshiftWith:u,gap:h,shiftWithOffset:d,sizes:m},{log:f},{recalcInProgress:g}])=>{const b=Ke(E(c,J(l),vt(([,p,x,k],[{bottom:_,items:w,offsetBottom:y,totalCount:C},T])=>{const N=_+y;let H=0;return x===C&&p.length>0&&w.length>0&&(w[0].originalIndex===0&&p[0].originalIndex===0||(H=N-k,H!==0&&(H+=T))),[H,w,C,N]},[0,[],0,0]),q(([p])=>p!==0),J(o,i,s,a,f,g),q(([,p,x,k,,,_])=>!_&&!k&&p!==0&&x===pn),D(([[p],,,,,x])=>(x("Upward scrolling compensation",{amount:p},Ge.DEBUG),p))));function v(p){p>0?(X(t,{behavior:"auto",top:-p}),X(e,0)):(X(e,0),X(t,{behavior:"auto",top:-p}))}return le(E(b,J(e,r)),([p,x,k])=>{k&&jd()?X(e,x-p):v(-p)}),le(E(Ie(De(r,!1),e,g),q(([p,x,k])=>!p&&!k&&x!==0),D(([p,x])=>x),Ct(1)),v),z(E(d,D(p=>({top:-p}))),t),le(E(u,J(m,h),D(([p,{groupIndices:x,lastSize:k,sizeTree:_},w])=>{function y(C){return C*(k+w)}if(x.length===0)return y(p);{let C=0;const T=mn(_,0);let N=0,H=0;for(;N<p;){N++,C+=T;let A=x.length===H+1?1/0:x[H+1]-x[H]-1;N+A>p&&(C-=T,A=p-N+1),N+=A,C+=y(A),H++}return C}})),p=>{X(e,p),requestAnimationFrame(()=>{X(t,{top:p}),requestAnimationFrame(()=>{X(e,0),X(g,!1)})})}),{deviation:e}},be($e,yn,Ut,bt,Nt,Os)),kd=re(([e,t,s,o,a,r,l,i,c,u,h])=>({...e,...t,...s,...o,...a,...r,...l,...i,...c,...u,...h}),be(Bs,yd,Rt,ua,ia,wd,gd,Ds,ca,Nt,la)),ma=re(([{data:e,defaultItemSize:t,firstItemIndex:s,fixedItemSize:o,gap:a,groupIndices:r,itemSize:l,sizeRanges:i,sizes:c,statefulTotalCount:u,totalCount:h,trackItemSizes:d},{initialItemFinalLocationReached:m,initialTopMostItemIndex:f,scrolledToInitialItem:g},b,v,p,{listState:x,topItemsIndexes:k,..._},{scrollToIndex:w},y,{topItemCount:C},{groupCounts:T},N])=>(z(_.rangeChanged,N.scrollSeekRangeChanged),z(E(N.windowViewportRect,D(H=>H.visibleHeight)),b.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:s,fixedItemHeight:o,gap:a,groupCounts:T,initialItemFinalLocationReached:m,initialTopMostItemIndex:f,scrolledToInitialItem:g,sizeRanges:i,topItemCount:C,topItemsIndexes:k,totalCount:h,...p,groupIndices:r,itemSize:l,listState:x,scrollToIndex:w,statefulTotalCount:u,trackItemSizes:d,..._,...N,...b,sizes:c,...v}),be(bt,bn,$e,Cd,bd,Ut,xn,Td,Sd,sa,kd));function Id(e,t){const s={},o={};let a=0;const r=e.length;for(;a<r;)o[e[a]]=1,a+=1;for(const l in t)Object.hasOwn(o,l)||(s[l]=t[l]);return s}const On=typeof document<"u"?S.useLayoutEffect:S.useEffect;function ha(e,t,s){const o=Object.keys(t.required||{}),a=Object.keys(t.optional||{}),r=Object.keys(t.methods||{}),l=Object.keys(t.events||{}),i=S.createContext({});function c(v,p){v.propsReady&&X(v.propsReady,!1);for(const x of o){const k=v[t.required[x]];X(k,p[x])}for(const x of a)if(x in p){const k=v[t.optional[x]];X(k,p[x])}v.propsReady&&X(v.propsReady,!0)}function u(v){return r.reduce((p,x)=>(p[x]=k=>{const _=v[t.methods[x]];X(_,k)},p),{})}function h(v){return l.reduce((p,x)=>(p[x]=Vu(v[t.events[x]]),p),{})}const d=S.forwardRef((v,p)=>{const{children:x,...k}=v,[_]=S.useState(()=>Yn(Uu(e),C=>{c(C,k)})),[w]=S.useState(eo(h,_));On(()=>{for(const C of l)C in k&&le(w[C],k[C]);return()=>{Object.values(w).map(Es)}},[k,w,_]),On(()=>{c(_,k)}),S.useImperativeHandle(p,Zs(u(_)));const y=s;return n.jsx(i.Provider,{value:_,children:s?n.jsx(y,{...Id([...o,...a,...l],k),children:x}):x})}),m=v=>{const p=S.useContext(i);return S.useCallback(x=>{X(p[v],x)},[p,v])},f=v=>{const p=S.useContext(i)[v],x=S.useCallback(k=>le(p,k),[p]);return S.useSyncExternalStore(x,()=>Se(p),()=>Se(p))},g=v=>{const p=S.useContext(i)[v],[x,k]=S.useState(eo(Se,p));return On(()=>le(p,_=>{_!==x&&k(Zs(_))}),[p,x]),x},b=S.version.startsWith("18")?f:g;return{Component:d,useEmitter:(v,p)=>{const x=S.useContext(i)[v];On(()=>le(x,p),[p,x])},useEmitterValue:b,usePublisher:m}}const fa=S.createContext(void 0),pa=S.createContext(void 0),ga=typeof document<"u"?S.useLayoutEffect:S.useEffect;function ts(e){return"self"in e}function Nd(e){return"body"in e}function va(e,t,s,o=Zt,a,r){const l=S.useRef(null),i=S.useRef(null),c=S.useRef(null),u=S.useCallback(m=>{let f,g,b;const v=m.target;if(Nd(v)||ts(v)){const x=ts(v)?v:v.defaultView;b=r?x.scrollX:x.scrollY,f=r?x.document.documentElement.scrollWidth:x.document.documentElement.scrollHeight,g=r?x.innerWidth:x.innerHeight}else b=r?v.scrollLeft:v.scrollTop,f=r?v.scrollWidth:v.scrollHeight,g=r?v.offsetWidth:v.offsetHeight;const p=()=>{e({scrollHeight:f,scrollTop:Math.max(b,0),viewportHeight:g})};m.suppressFlushSync?p():sr.flushSync(p),i.current!==null&&(b===i.current||b<=0||b===f-g)&&(i.current=null,t(!0),c.current&&(clearTimeout(c.current),c.current=null))},[e,t,r]);S.useEffect(()=>{const m=a||l.current;return o(a||l.current),u({suppressFlushSync:!0,target:m}),m.addEventListener("scroll",u,{passive:!0}),()=>{o(null),m.removeEventListener("scroll",u)}},[l,u,s,o,a]);function h(m){const f=l.current;if(!f||(r?"offsetWidth"in f&&f.offsetWidth===0:"offsetHeight"in f&&f.offsetHeight===0))return;const g=m.behavior==="smooth";let b,v,p;ts(f)?(v=Math.max(kt(f.document.documentElement,r?"width":"height"),r?f.document.documentElement.scrollWidth:f.document.documentElement.scrollHeight),b=r?f.innerWidth:f.innerHeight,p=r?window.scrollX:window.scrollY):(v=f[r?"scrollWidth":"scrollHeight"],b=kt(f,r?"width":"height"),p=f[r?"scrollLeft":"scrollTop"]);const x=v-b;if(m.top=Math.ceil(Math.max(Math.min(x,m.top),0)),aa(b,v)||m.top===p){e({scrollHeight:v,scrollTop:p,viewportHeight:b}),g&&t(!0);return}g?(i.current=m.top,c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{c.current=null,i.current=null,t(!0)},1e3)):i.current=null,r&&(m={behavior:m.behavior,left:m.top}),f.scrollTo(m)}function d(m){r&&(m={behavior:m.behavior,left:m.top}),l.current.scrollBy(m)}return{scrollByCallback:d,scrollerRef:l,scrollToCallback:h}}const ns="-webkit-sticky",uo="sticky",zs=da(()=>{if(typeof document>"u")return uo;const e=document.createElement("div");return e.style.position=ns,e.style.position===ns?ns:uo});function Ps(e){return e}const Rd=re(()=>{const e=O(i=>`Item ${i}`),t=O(i=>`Group ${i}`),s=O({}),o=O(Ps),a=O("div"),r=O(Zt),l=(i,c=null)=>De(E(s,D(u=>u[i]),xe()),c);return{components:s,computeItemKey:o,EmptyPlaceholder:l("EmptyPlaceholder"),FooterComponent:l("Footer"),GroupComponent:l("Group","div"),groupContent:t,HeaderComponent:l("Header"),HeaderFooterTag:a,ItemComponent:l("Item","div"),itemContent:e,ListComponent:l("List","div"),ScrollerComponent:l("Scroller","div"),scrollerRef:r,ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),TopItemListComponent:l("TopItemList")}}),Ed=re(([e,t])=>({...e,...t}),be(ma,Rd)),Ad=({height:e})=>n.jsx("div",{style:{height:e}}),Od={overflowAnchor:"none",position:zs(),zIndex:1},xa={overflowAnchor:"none"},Hd={...xa,display:"inline-block",height:"100%"},mo=S.memo(function({showTopList:e=!1}){const t=Y("listState"),s=tt("sizeRanges"),o=Y("useWindowScroll"),a=Y("customScrollParent"),r=tt("windowScrollContainerState"),l=tt("scrollContainerState"),i=a||o?r:l,c=Y("itemContent"),u=Y("context"),h=Y("groupContent"),d=Y("trackItemSizes"),m=Y("itemSize"),f=Y("log"),g=tt("gap"),b=Y("horizontalDirection"),{callbackRef:v}=Xu(s,m,d,e?Zt:i,f,g,a,b,Y("skipAnimationFrameInResizeObserver")),[p,x]=S.useState(0);$s("deviation",L=>{p!==L&&x(L)});const k=Y("EmptyPlaceholder"),_=Y("ScrollSeekPlaceholder")||Ad,w=Y("ListComponent"),y=Y("ItemComponent"),C=Y("GroupComponent"),T=Y("computeItemKey"),N=Y("isSeeking"),H=Y("groupIndices").length>0,A=Y("alignToBottom"),P=Y("initialItemFinalLocationReached"),M=e?{}:{boxSizing:"border-box",...b?{display:"inline-block",height:"100%",marginLeft:p!==0?p:A?"auto":0,paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,whiteSpace:"nowrap"}:{marginTop:p!==0?p:A?"auto":0,paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},...P?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&k?n.jsx(k,{...Be(k,u)}):n.jsx(w,{...Be(w,u),"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",ref:v,style:M,children:(e?t.topItems:t.items).map(L=>{const $=L.originalIndex,se=T($+t.firstItemIndex,L.data,u);return N?j.createElement(_,{...Be(_,u),height:L.size,index:L.index,key:se,type:L.type||"item",...L.type==="group"?{}:{groupIndex:L.groupIndex}}):L.type==="group"?j.createElement(C,{...Be(C,u),"data-index":$,"data-item-index":L.index,"data-known-size":L.size,key:se,style:Od},h(L.index,u)):j.createElement(y,{...Be(y,u),...Dd(y,L.data),"data-index":$,"data-item-group-index":L.groupIndex,"data-item-index":L.index,"data-known-size":L.size,key:se,style:b?Hd:xa},H?c(L.index,L.groupIndex,L.data,u):c(L.index,L.data,u))})})}),Md={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Ld={outline:"none",overflowX:"auto",position:"relative"},Qn=e=>({height:"100%",position:"absolute",top:0,width:"100%",...e?{display:"flex",flexDirection:"column"}:{}}),Bd={position:zs(),top:0,width:"100%",zIndex:1};function Be(e,t){if(typeof e!="string")return{context:t}}function Dd(e,t){return{item:typeof e=="string"?void 0:t}}const zd=S.memo(function(){const e=Y("HeaderComponent"),t=tt("headerHeight"),s=Y("HeaderFooterTag"),o=Gt(S.useMemo(()=>r=>{t(kt(r,"height"))},[t]),!0,Y("skipAnimationFrameInResizeObserver")),a=Y("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...Be(e,a)})}):null}),Pd=S.memo(function(){const e=Y("FooterComponent"),t=tt("footerHeight"),s=Y("HeaderFooterTag"),o=Gt(S.useMemo(()=>r=>{t(kt(r,"height"))},[t]),!0,Y("skipAnimationFrameInResizeObserver")),a=Y("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...Be(e,a)})}):null});function ba({useEmitter:e,useEmitterValue:t,usePublisher:s}){return S.memo(function({children:o,style:a,context:r,...l}){const i=s("scrollContainerState"),c=t("ScrollerComponent"),u=s("smoothScrollTargetReached"),h=t("scrollerRef"),d=t("horizontalDirection")||!1,{scrollByCallback:m,scrollerRef:f,scrollToCallback:g}=va(i,u,c,h,void 0,d);return e("scrollTo",g),e("scrollBy",m),n.jsx(c,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:f,style:{...d?Ld:Md,...a},tabIndex:0,...l,...Be(c,r),children:o})})}function ya({useEmitter:e,useEmitterValue:t,usePublisher:s}){return S.memo(function({children:o,style:a,context:r,...l}){const i=s("windowScrollContainerState"),c=t("ScrollerComponent"),u=s("smoothScrollTargetReached"),h=t("totalListHeight"),d=t("deviation"),m=t("customScrollParent"),f=S.useRef(null),g=t("scrollerRef"),{scrollByCallback:b,scrollerRef:v,scrollToCallback:p}=va(i,u,c,g,m);return ga(()=>{var x;return v.current=m||((x=f.current)==null?void 0:x.ownerDocument.defaultView),()=>{v.current=null}},[v,m]),e("windowScrollTo",p),e("scrollBy",b),n.jsx(c,{ref:f,"data-virtuoso-scroller":!0,style:{position:"relative",...a,...h!==0?{height:h+d}:{}},...l,...Be(c,r),children:o})})}const $d=({children:e})=>{const t=S.useContext(fa),s=tt("viewportHeight"),o=tt("fixedItemHeight"),a=Y("alignToBottom"),r=Y("horizontalDirection"),l=S.useMemo(()=>Go(s,c=>kt(c,r?"width":"height")),[s,r]),i=Gt(l,!0,Y("skipAnimationFrameInResizeObserver"));return S.useEffect(()=>{t&&(s(t.viewportHeight),o(t.itemHeight))},[t,s,o]),n.jsx("div",{"data-viewport-type":"element",ref:i,style:Qn(a),children:e})},Fd=({children:e})=>{const t=S.useContext(fa),s=tt("windowViewportRect"),o=tt("fixedItemHeight"),a=Y("customScrollParent"),r=qo(s,a,Y("skipAnimationFrameInResizeObserver")),l=Y("alignToBottom");return S.useEffect(()=>{t&&(o(t.itemHeight),s({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))},[t,s,o]),n.jsx("div",{"data-viewport-type":"window",ref:r,style:Qn(l),children:e})},Wd=({children:e})=>{const t=Y("TopItemListComponent")||"div",s=Y("headerHeight"),o={...Bd,marginTop:`${s}px`},a=Y("context");return n.jsx(t,{style:o,...Be(t,a),children:e})},Vd=S.memo(function(e){const t=Y("useWindowScroll"),s=Y("topItemsIndexes").length>0,o=Y("customScrollParent"),a=Y("context");return n.jsxs(o||t?qd:Ud,{...e,context:a,children:[s&&n.jsx(Wd,{children:n.jsx(mo,{showTopList:!0})}),n.jsxs(o||t?Fd:$d,{children:[n.jsx(zd,{}),n.jsx(mo,{}),n.jsx(Pd,{})]})]})}),{Component:Gd,useEmitter:$s,useEmitterValue:Y,usePublisher:tt}=ha(Ed,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",scrollIntoViewOnChange:"scrollIntoViewOnChange",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Vd),Ud=ba({useEmitter:$s,useEmitterValue:Y,usePublisher:tt}),qd=ya({useEmitter:$s,useEmitterValue:Y,usePublisher:tt}),Yd=Gd,Xd=re(()=>{const e=O(u=>n.jsxs("td",{children:["Item $",u]})),t=O(null),s=O(u=>n.jsxs("td",{colSpan:1e3,children:["Group ",u]})),o=O(null),a=O(null),r=O({}),l=O(Ps),i=O(Zt),c=(u,h=null)=>De(E(r,D(d=>d[u]),xe()),h);return{components:r,computeItemKey:l,context:t,EmptyPlaceholder:c("EmptyPlaceholder"),FillerRow:c("FillerRow"),fixedFooterContent:a,fixedHeaderContent:o,itemContent:e,groupContent:s,ScrollerComponent:c("Scroller","div"),scrollerRef:i,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder"),TableBodyComponent:c("TableBody","tbody"),TableComponent:c("Table","table"),TableFooterComponent:c("TableFoot","tfoot"),TableHeadComponent:c("TableHead","thead"),TableRowComponent:c("TableRow","tr"),GroupComponent:c("Group","tr")}});be(ma,Xd);zs();const ho={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},Kd={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:fo,floor:Wn,max:un,min:ss,round:po}=Math;function go(e,t,s){return Array.from({length:t-e+1}).map((o,a)=>({data:s===null?null:s[a+e],index:a+e}))}function Qd(e){return{...Kd,items:e}}function Hn(e,t){return e&&e.width===t.width&&e.height===t.height}function Jd(e,t){return e&&e.column===t.column&&e.row===t.row}const Zd=re(([{increaseViewportBy:e,listBoundary:t,overscan:s,visibleRange:o},{footerHeight:a,headerHeight:r,scrollBy:l,scrollContainerState:i,scrollTo:c,scrollTop:u,smoothScrollTargetReached:h,viewportHeight:d},m,f,{didMount:g,propsReady:b},{customScrollParent:v,useWindowScroll:p,windowScrollContainerState:x,windowScrollTo:k,windowViewportRect:_},w])=>{const y=O(0),C=O(0),T=O(ho),N=O({height:0,width:0}),H=O({height:0,width:0}),A=ne(),P=ne(),M=O(0),L=O(null),$=O({column:0,row:0}),se=ne(),W=ne(),K=O(!1),ce=O(0),ie=O(!0),he=O(!1),Qe=O(!1);le(E(g,J(ce),q(([I,B])=>!!B)),()=>{X(ie,!1)}),le(E(Ie(g,ie,H,N,ce,he),q(([I,B,Q,fe,,de])=>I&&!B&&Q.height!==0&&fe.height!==0&&!de)),([,,,,I])=>{X(he,!0),Ms(1,()=>{X(A,I)}),it(E(u),()=>{X(t,[0,0]),X(ie,!0)})}),z(E(W,q(I=>I!=null&&I.scrollTop>0),gt(0)),C),le(E(g,J(W),q(([,I])=>I!=null)),([,I])=>{I&&(X(N,I.viewport),X(H,I.item),X($,I.gap),I.scrollTop>0&&(X(K,!0),it(E(u,Wt(1)),B=>{X(K,!1)}),X(c,{top:I.scrollTop})))}),z(E(N,D(({height:I})=>I)),d),z(E(Ie(G(N,Hn),G(H,Hn),G($,(I,B)=>I&&I.column===B.column&&I.row===B.row),G(u)),D(([I,B,Q,fe])=>({gap:Q,item:B,scrollTop:fe,viewport:I}))),se),z(E(Ie(G(y),o,G($,Jd),G(H,Hn),G(N,Hn),G(L),G(C),G(K),G(ie),G(ce)),q(([,,,,,,,I])=>!I),D(([I,[B,Q],fe,de,Ye,V,st,,Et,Ze])=>{const{column:ut,row:At}=fe,{height:ot,width:qt}=de,{width:Cn}=Ye;if(st===0&&(I===0||Cn===0))return ho;if(qt===0){const kn=Ls(Ze,I),Ht=kn+Math.max(st-1,0);return Qd(go(kn,Ht,V))}const dt=wa(Cn,qt,ut);let _t,mt;Et?B===0&&Q===0&&st>0?(_t=0,mt=st-1):(_t=dt*Wn((B+At)/(ot+At)),mt=dt*fo((Q+At)/(ot+At))-1,mt=ss(I-1,un(mt,dt-1)),_t=ss(mt,un(0,_t))):(_t=0,mt=-1);const _n=go(_t,mt,V),{bottom:Sn,top:Ot}=vo(Ye,fe,de,_n),jn=fo(I/dt),Tn=jn*ot+(jn-1)*At-Sn;return{bottom:Sn,itemHeight:ot,items:_n,itemWidth:qt,offsetBottom:Tn,offsetTop:Ot,top:Ot}})),T),z(E(L,q(I=>I!==null),D(I=>I.length)),y),z(E(Ie(N,H,T,$),q(([I,B,{items:Q}])=>Q.length>0&&B.height!==0&&I.height!==0),D(([I,B,{items:Q},fe])=>{const{bottom:de,top:Ye}=vo(I,fe,B,Q);return[Ye,de]}),xe(hn)),t);const je=O(!1);z(E(u,J(je),D(([I,B])=>B||I!==0)),je);const Je=Ke(E(Ie(T,y),q(([{items:I}])=>I.length>0),J(je),q(([[I,B],Q])=>{const fe=I.items[I.items.length-1].index===B-1;return(Q||I.bottom>0&&I.itemHeight>0&&I.offsetBottom===0&&I.items.length===B)&&fe}),D(([[,I]])=>I-1),xe())),qe=Ke(E(G(T),q(({items:I})=>I.length>0&&I[0].index===0),gt(0),xe())),Me=Ke(E(G(T),J(K),q(([{items:I},B])=>I.length>0&&!B),D(([{items:I}])=>({endIndex:I[I.length-1].index,startIndex:I[0].index})),xe(Zo),Ct(0)));z(Me,f.scrollSeekRangeChanged),z(E(A,J(N,H,y,$),D(([I,B,Q,fe,de])=>{const Ye=oa(I),{align:V,behavior:st,offset:Et}=Ye;let Ze=Ye.index;Ze==="LAST"&&(Ze=fe-1),Ze=un(0,Ze,ss(fe-1,Ze));let ut=vs(B,de,Q,Ze);return V==="end"?ut=po(ut-B.height+Q.height):V==="center"&&(ut=po(ut-B.height/2+Q.height/2)),Et&&(ut+=Et),{behavior:st,top:ut}})),c);const Le=De(E(T,D(I=>I.offsetBottom+I.bottom)),0);return z(E(_,D(I=>({height:I.visibleHeight,width:I.visibleWidth}))),N),{customScrollParent:v,data:L,deviation:M,footerHeight:a,gap:$,headerHeight:r,increaseViewportBy:e,initialItemCount:C,itemDimensions:H,overscan:s,restoreStateFrom:W,scrollBy:l,scrollContainerState:i,scrollHeight:P,scrollTo:c,scrollToIndex:A,scrollTop:u,smoothScrollTargetReached:h,totalCount:y,useWindowScroll:p,viewportDimensions:N,windowScrollContainerState:x,windowScrollTo:k,windowViewportRect:_,...f,gridState:T,horizontalDirection:Qe,initialTopMostItemIndex:ce,totalListHeight:Le,...m,endReached:Je,propsReady:b,rangeChanged:Me,startReached:qe,stateChanged:se,stateRestoreInProgress:K,...w}},be(Bs,$e,yn,ua,Rt,Ds,Nt));function wa(e,t,s){return un(1,Wn((e+s)/(Wn(t)+s)))}function vo(e,t,s,o){const{height:a}=s;if(a===void 0||o.length===0)return{bottom:0,top:0};const r=vs(e,t,s,o[0].index);return{bottom:vs(e,t,s,o[o.length-1].index)+a,top:r}}function vs(e,t,s,o){const a=wa(e.width,s.width,t.column),r=Wn(o/a),l=r*s.height+un(0,r-1)*t.row;return l>0?l+t.row:l}const em=re(()=>{const e=O(d=>`Item ${d}`),t=O({}),s=O(null),o=O("virtuoso-grid-item"),a=O("virtuoso-grid-list"),r=O(Ps),l=O("div"),i=O(Zt),c=(d,m=null)=>De(E(t,D(f=>f[d]),xe()),m),u=O(!1),h=O(!1);return z(G(h),u),{components:t,computeItemKey:r,context:s,FooterComponent:c("Footer"),HeaderComponent:c("Header"),headerFooterTag:l,itemClassName:o,ItemComponent:c("Item","div"),itemContent:e,listClassName:a,ListComponent:c("List","div"),readyStateChanged:u,reportReadyState:h,ScrollerComponent:c("Scroller","div"),scrollerRef:i,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder","div")}}),tm=re(([e,t])=>({...e,...t}),be(Zd,em)),nm=S.memo(function(){const e=ye("gridState"),t=ye("listClassName"),s=ye("itemClassName"),o=ye("itemContent"),a=ye("computeItemKey"),r=ye("isSeeking"),l=nt("scrollHeight"),i=ye("ItemComponent"),c=ye("ListComponent"),u=ye("ScrollSeekPlaceholder"),h=ye("context"),d=nt("itemDimensions"),m=nt("gap"),f=ye("log"),g=ye("stateRestoreInProgress"),b=nt("reportReadyState"),v=Gt(S.useMemo(()=>p=>{const x=p.parentElement.parentElement.scrollHeight;l(x);const k=p.firstChild;if(k){const{height:_,width:w}=k.getBoundingClientRect();d({height:_,width:w})}m({column:xo("column-gap",getComputedStyle(p).columnGap,f),row:xo("row-gap",getComputedStyle(p).rowGap,f)})},[l,d,m,f]),!0,!1);return ga(()=>{e.itemHeight>0&&e.itemWidth>0&&b(!0)},[e]),g?null:n.jsx(c,{className:t,ref:v,...Be(c,h),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(p=>{const x=a(p.index,p.data,h);return r?n.jsx(u,{...Be(u,h),height:e.itemHeight,index:p.index,width:e.itemWidth},x):j.createElement(i,{...Be(i,h),className:s,"data-index":p.index,key:x},o(p.index,p.data,h))})})}),sm=S.memo(function(){const e=ye("HeaderComponent"),t=nt("headerHeight"),s=ye("headerFooterTag"),o=Gt(S.useMemo(()=>r=>{t(kt(r,"height"))},[t]),!0,!1),a=ye("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...Be(e,a)})}):null}),om=S.memo(function(){const e=ye("FooterComponent"),t=nt("footerHeight"),s=ye("headerFooterTag"),o=Gt(S.useMemo(()=>r=>{t(kt(r,"height"))},[t]),!0,!1),a=ye("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...Be(e,a)})}):null}),am=({children:e})=>{const t=S.useContext(pa),s=nt("itemDimensions"),o=nt("viewportDimensions"),a=Gt(S.useMemo(()=>r=>{o(r.getBoundingClientRect())},[o]),!0,!1);return S.useEffect(()=>{t&&(o({height:t.viewportHeight,width:t.viewportWidth}),s({height:t.itemHeight,width:t.itemWidth}))},[t,o,s]),n.jsx("div",{ref:a,style:Qn(!1),children:e})},rm=({children:e})=>{const t=S.useContext(pa),s=nt("windowViewportRect"),o=nt("itemDimensions"),a=ye("customScrollParent"),r=qo(s,a,!1);return S.useEffect(()=>{t&&(o({height:t.itemHeight,width:t.itemWidth}),s({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,s,o]),n.jsx("div",{ref:r,style:Qn(!1),children:e})},im=S.memo(function({...e}){const t=ye("useWindowScroll"),s=ye("customScrollParent"),o=s||t?cm:lm,a=s||t?rm:am,r=ye("context");return n.jsx(o,{...e,...Be(o,r),children:n.jsxs(a,{children:[n.jsx(sm,{}),n.jsx(nm,{}),n.jsx(om,{})]})})}),{useEmitter:Ca,useEmitterValue:ye,usePublisher:nt}=ha(tm,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},im),lm=ba({useEmitter:Ca,useEmitterValue:ye,usePublisher:nt}),cm=ya({useEmitter:Ca,useEmitterValue:ye,usePublisher:nt});function xo(e,t,s){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&s(`${e} was not resolved to pixel value correctly`,t,Ge.WARN),t==="normal"?0:parseInt(t??"0",10)}const _a=Qt({status:"idle"}),um=Qt("random"),Sa=Qt(new Set),ja=Qt(""),dm=Qt(()=>[...new Set(Mo.map(t=>t.location))].map(t=>({id:t,name:t})).sort((t,s)=>t.name.localeCompare(s.name))),mm=(e,t)=>{if(!t)return e;const s=t.toLowerCase();return e.filter(o=>o.name.toLowerCase().includes(s))},hm=Qt(e=>{const t=e(ja),s=e(dm),o=e(Lo),a=e(Bo);if(!o||!a)return[];const r=s.filter(l=>{const i=Tr(l.name);return i?.groupId===a&&i?.unitId===o});return mm(r,t)}),fm="_wrapper_1hwna_5",pm="_focused_1hwna_61",gm="_searchIcon_1hwna_103",vm="_clearButton_1hwna_149",xm="_visuallyHidden_1hwna_159",sn={wrapper:fm,focused:pm,searchIcon:gm,clearButton:vm,visuallyHidden:xm},Ta=({value:e,onChange:t,placeholder:s,variant:o,autoFocus:a=!1})=>{const[r,l]=j.useState(!1),i=j.useRef(null),c=S.useId();j.useEffect(()=>{a&&i.current&&i.current.focus()},[a]);const u=`${sn.wrapper} ${r?sn.focused:""}`;return n.jsxs("div",{className:u,"data-variant":o,children:[n.jsx("label",{htmlFor:c,className:sn.visuallyHidden,children:s}),n.jsx("input",{ref:i,id:c,type:"text",placeholder:s,value:e,onChange:h=>t(h.target.value),onFocus:()=>l(!0),onBlur:()=>l(!1)}),o==="standalone"&&e&&n.jsx(ae,{variant:"quaternary",size:"xs",iconOnly:!0,onClick:()=>t(""),"aria-label":"Clear search",className:sn.clearButton,children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})}),n.jsx("span",{className:`material-symbols-rounded ${sn.searchIcon}`,children:"search"})]})};function bm(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}const ka=S.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),wn=()=>{const e=S.useContext(ka);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};bm(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function ym(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function wm(){return Fs(/^Mac/)}function Cm(){return Fs(/^iPhone/)}function bo(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function _m(){return Fs(/^iPad/)||wm()&&navigator.maxTouchPoints>1}function Ia(){return Cm()||_m()}function Fs(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const Sm=24,jm=typeof window<"u"?j.useLayoutEffect:j.useEffect;function yo(...e){return(...t)=>{for(let s of e)typeof s=="function"&&s(...t)}}const os=typeof document<"u"&&window.visualViewport;function wo(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function Na(e){for(wo(e)&&(e=e.parentElement);e&&!wo(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const Tm=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Mn=0,as;function km(e={}){let{isDisabled:t}=e;jm(()=>{if(!t)return Mn++,Mn===1&&Ia()&&(as=Im()),()=>{Mn--,Mn===0&&as?.()}},[t])}function Im(){let e,t=0,s=d=>{e=Na(d.target),!(e===document.documentElement&&e===document.body)&&(t=d.changedTouches[0].pageY)},o=d=>{if(!e||e===document.documentElement||e===document.body){d.preventDefault();return}let m=d.changedTouches[0].pageY,f=e.scrollTop,g=e.scrollHeight-e.clientHeight;g!==0&&((f<=0&&m>t||f>=g&&m<t)&&d.preventDefault(),t=m)},a=d=>{let m=d.target;xs(m)&&m!==document.activeElement&&(d.preventDefault(),m.style.transform="translateY(-2000px)",m.focus(),requestAnimationFrame(()=>{m.style.transform=""}))},r=d=>{let m=d.target;xs(m)&&(m.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{m.style.transform="",os&&(os.height<window.innerHeight?requestAnimationFrame(()=>{Co(m)}):os.addEventListener("resize",()=>Co(m),{once:!0}))}))},l=()=>{window.scrollTo(0,0)},i=window.pageXOffset,c=window.pageYOffset,u=yo(Nm(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let h=yo(on(document,"touchstart",s,{passive:!1,capture:!0}),on(document,"touchmove",o,{passive:!1,capture:!0}),on(document,"touchend",a,{passive:!1,capture:!0}),on(document,"focus",r,!0),on(window,"scroll",l));return()=>{u(),h(),window.scrollTo(i,c)}}function Nm(e,t,s){let o=e.style[t];return e.style[t]=s,()=>{e.style[t]=o}}function on(e,t,s,o){return e.addEventListener(t,s,o),()=>{e.removeEventListener(t,s,o)}}function Co(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let s=Na(e);if(s!==document.documentElement&&s!==document.body&&s!==e){let o=s.getBoundingClientRect().top,a=e.getBoundingClientRect().top,r=e.getBoundingClientRect().bottom;const l=s.getBoundingClientRect().bottom+Sm;r>l&&(s.scrollTop+=a-o)}e=s.parentElement}}function xs(e){return e instanceof HTMLInputElement&&!Tm.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function Rm(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Em(...e){return t=>e.forEach(s=>Rm(s,t))}function Ra(...e){return j.useCallback(Em(...e),e)}const Ea=new WeakMap;function Re(e,t,s=!1){if(!e||!(e instanceof HTMLElement))return;let o={};Object.entries(t).forEach(([a,r])=>{if(a.startsWith("--")){e.style.setProperty(a,r);return}o[a]=e.style[a],e.style[a]=r}),!s&&Ea.set(e,o)}function Am(e,t){if(!e||!(e instanceof HTMLElement))return;let s=Ea.get(e);s&&(e.style[t]=s[t])}const ke=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Ln(e,t){if(!e)return null;const s=window.getComputedStyle(e),o=s.transform||s.webkitTransform||s.mozTransform;let a=o.match(/^matrix3d\((.+)\)$/);return a?parseFloat(a[1].split(", ")[ke(t)?13:12]):(a=o.match(/^matrix\((.+)\)$/),a?parseFloat(a[1].split(", ")[ke(t)?5:4]):null)}function Om(e){return 8*(Math.log(e+1)-2)}function rs(e,t){if(!e)return()=>{};const s=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=s}}function Hm(...e){return(...t)=>{for(const s of e)typeof s=="function"&&s(...t)}}const we={DURATION:.5,EASE:[.32,.72,0,1]},Aa=.4,Mm=.25,Lm=100,Oa=8,Dt=16,bs=26,is="vaul-dragging";function Ha(e){const t=S.useRef(e);return S.useEffect(()=>{t.current=e}),S.useMemo(()=>(...s)=>t.current==null?void 0:t.current.call(t,...s),[])}function Bm({defaultProp:e,onChange:t}){const s=S.useState(e),[o]=s,a=S.useRef(o),r=Ha(t);return S.useEffect(()=>{a.current!==o&&(r(o),a.current=o)},[o,a,r]),s}function Ma({prop:e,defaultProp:t,onChange:s=()=>{}}){const[o,a]=Bm({defaultProp:t,onChange:s}),r=e!==void 0,l=r?e:o,i=Ha(s),c=S.useCallback(u=>{if(r){const d=typeof u=="function"?u(e):u;d!==e&&i(d)}else a(u)},[r,e,a,i]);return[l,c]}function Dm({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:s,drawerRef:o,overlayRef:a,fadeFromIndex:r,onSnapPointChange:l,direction:i="bottom",container:c,snapToSequentialPoint:u}){const[h,d]=Ma({prop:e,defaultProp:s?.[0],onChange:t}),[m,f]=S.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);S.useEffect(()=>{function C(){f({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]);const g=S.useMemo(()=>h===s?.[s.length-1]||null,[s,h]),b=S.useMemo(()=>{var C;return(C=s?.findIndex(T=>T===h))!=null?C:null},[s,h]),v=s&&s.length>0&&(r||r===0)&&!Number.isNaN(r)&&s[r]===h||!s,p=S.useMemo(()=>{const C=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var T;return(T=s?.map(N=>{const H=typeof N=="string";let A=0;if(H&&(A=parseInt(N,10)),ke(i)){const M=H?A:m?N*C.height:0;return m?i==="bottom"?C.height-M:-C.height+M:M}const P=H?A:m?N*C.width:0;return m?i==="right"?C.width-P:-C.width+P:P}))!=null?T:[]},[s,m,c]),x=S.useMemo(()=>b!==null?p?.[b]:null,[p,b]),k=S.useCallback(C=>{var T;const N=(T=p?.findIndex(H=>H===C))!=null?T:null;l(N),Re(o.current,{transition:`transform ${we.DURATION}s cubic-bezier(${we.EASE.join(",")})`,transform:ke(i)?`translate3d(0, ${C}px, 0)`:`translate3d(${C}px, 0, 0)`}),p&&N!==p.length-1&&r!==void 0&&N!==r&&N<r?Re(a.current,{transition:`opacity ${we.DURATION}s cubic-bezier(${we.EASE.join(",")})`,opacity:"0"}):Re(a.current,{transition:`opacity ${we.DURATION}s cubic-bezier(${we.EASE.join(",")})`,opacity:"1"}),d(s?.[Math.max(N,0)])},[o.current,s,p,r,a,d]);S.useEffect(()=>{if(h||e){var C;const T=(C=s?.findIndex(N=>N===e||N===h))!=null?C:-1;p&&T!==-1&&typeof p[T]=="number"&&k(p[T])}},[h,e,s,p,k]);function _({draggedDistance:C,closeDrawer:T,velocity:N,dismissible:H}){if(r===void 0)return;const A=i==="bottom"||i==="right"?(x??0)-C:(x??0)+C,P=b===r-1,M=b===0,L=C>0;if(P&&Re(a.current,{transition:`opacity ${we.DURATION}s cubic-bezier(${we.EASE.join(",")})`}),!u&&N>2&&!L){H?T():k(p[0]);return}if(!u&&N>2&&L&&p&&s){k(p[s.length-1]);return}const $=p?.reduce((W,K)=>typeof W!="number"||typeof K!="number"?W:Math.abs(K-A)<Math.abs(W-A)?K:W),se=ke(i)?window.innerHeight:window.innerWidth;if(N>Aa&&Math.abs(C)<se*.4){const W=L?1:-1;if(W>0&&g&&s){k(p[s.length-1]);return}if(M&&W<0&&H&&T(),b===null)return;k(p[b+W]);return}k($)}function w({draggedDistance:C}){if(x===null)return;const T=i==="bottom"||i==="right"?x-C:x+C;(i==="bottom"||i==="right")&&T<p[p.length-1]||(i==="top"||i==="left")&&T>p[p.length-1]||Re(o.current,{transform:ke(i)?`translate3d(0, ${T}px, 0)`:`translate3d(${T}px, 0, 0)`})}function y(C,T){if(!s||typeof b!="number"||!p||r===void 0)return null;const N=b===r-1;if(b>=r&&T)return 0;if(N&&!T)return 1;if(!v&&!N)return null;const A=N?b+1:b-1,P=N?p[A]-p[A-1]:p[A+1]-p[A],M=C/Math.abs(P);return N?1-M:M}return{isLastSnapPoint:g,activeSnapPoint:h,shouldFade:v,getPercentageDragged:y,setActiveSnapPoint:d,activeSnapPointIndex:b,onRelease:_,onDrag:w,snapPointsOffset:p}}const zm=()=>()=>{};function Pm(){const{direction:e,isOpen:t,shouldScaleBackground:s,setBackgroundColorOnScale:o,noBodyStyles:a}=wn(),r=S.useRef(null),l=j.useMemo(()=>document.body.style.backgroundColor,[]);function i(){return(window.innerWidth-bs)/window.innerWidth}S.useEffect(()=>{if(t&&s){r.current&&clearTimeout(r.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;Hm(o&&!a?rs(document.body,{background:"black"}):zm,rs(c,{transformOrigin:ke(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${we.DURATION}s`,transitionTimingFunction:`cubic-bezier(${we.EASE.join(",")})`}));const u=rs(c,{borderRadius:`${Oa}px`,overflow:"hidden",...ke(e)?{transform:`scale(${i()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${i()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),r.current=window.setTimeout(()=>{l?document.body.style.background=l:document.body.style.removeProperty("background")},we.DURATION*1e3)}}},[t,s,l])}let an=null;function $m({isOpen:e,modal:t,nested:s,hasBeenOpened:o,preventScrollRestoration:a,noBodyStyles:r}){const[l,i]=S.useState(()=>typeof window<"u"?window.location.href:""),c=S.useRef(0),u=S.useCallback(()=>{if(bo()&&an===null&&e&&!r){an={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:d,innerHeight:m}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-d}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const f=m-window.innerHeight;f&&c.current>=m&&(document.body.style.top=`${-(c.current+f)}px`)}),300)}},[e]),h=S.useCallback(()=>{if(bo()&&an!==null&&!r){const d=-parseInt(document.body.style.top,10),m=-parseInt(document.body.style.left,10);Object.assign(document.body.style,an),window.requestAnimationFrame(()=>{if(a&&l!==window.location.href){i(window.location.href);return}window.scrollTo(m,d)}),an=null}},[l]);return S.useEffect(()=>{function d(){c.current=window.scrollY}return d(),window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d)}},[]),S.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||h()}},[t,h]),S.useEffect(()=>{s||!o||(e?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{h()},500)):h())},[e,o,l,t,s,u,h]),{restorePositionSetting:h}}function Fm({open:e,onOpenChange:t,children:s,onDrag:o,onRelease:a,snapPoints:r,shouldScaleBackground:l=!1,setBackgroundColorOnScale:i=!0,closeThreshold:c=Mm,scrollLockTimeout:u=Lm,dismissible:h=!0,handleOnly:d=!1,fadeFromIndex:m=r&&r.length-1,activeSnapPoint:f,setActiveSnapPoint:g,fixed:b,modal:v=!0,onClose:p,nested:x,noBodyStyles:k=!1,direction:_="bottom",defaultOpen:w=!1,disablePreventScroll:y=!0,snapToSequentialPoint:C=!1,preventScrollRestoration:T=!1,repositionInputs:N=!0,onAnimationEnd:H,container:A,autoFocus:P=!1}){var M,L;const[$=!1,se]=Ma({defaultProp:w,prop:e,onChange:U=>{t?.(U),!U&&!x&&Sn(),setTimeout(()=>{H?.(U)},we.DURATION*1e3),U&&!v&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),U||(document.body.style.pointerEvents="auto")}}),[W,K]=S.useState(!1),[ce,ie]=S.useState(!1),[he,Qe]=S.useState(!1),je=S.useRef(null),Je=S.useRef(null),qe=S.useRef(null),Me=S.useRef(null),Le=S.useRef(null),I=S.useRef(!1),B=S.useRef(null),Q=S.useRef(0),fe=S.useRef(!1),de=S.useRef(!w),Ye=S.useRef(0),V=S.useRef(null),st=S.useRef(((M=V.current)==null?void 0:M.getBoundingClientRect().height)||0),Et=S.useRef(((L=V.current)==null?void 0:L.getBoundingClientRect().width)||0),Ze=S.useRef(0),ut=S.useCallback(U=>{r&&U===dt.length-1&&(Je.current=new Date)},[]),{activeSnapPoint:At,activeSnapPointIndex:ot,setActiveSnapPoint:qt,onRelease:Cn,snapPointsOffset:dt,onDrag:_t,shouldFade:mt,getPercentageDragged:_n}=Dm({snapPoints:r,activeSnapPointProp:f,setActiveSnapPointProp:g,drawerRef:V,fadeFromIndex:m,overlayRef:je,onSnapPointChange:ut,direction:_,container:A,snapToSequentialPoint:C});km({isDisabled:!$||ce||!v||he||!W||!N||!y});const{restorePositionSetting:Sn}=$m({isOpen:$,modal:v,nested:x??!1,hasBeenOpened:W,preventScrollRestoration:T,noBodyStyles:k});function Ot(){return(window.innerWidth-bs)/window.innerWidth}function jn(U){var ue,pe;!h&&!r||V.current&&!V.current.contains(U.target)||(st.current=((ue=V.current)==null?void 0:ue.getBoundingClientRect().height)||0,Et.current=((pe=V.current)==null?void 0:pe.getBoundingClientRect().width)||0,ie(!0),qe.current=new Date,Ia()&&window.addEventListener("touchend",()=>I.current=!1,{once:!0}),U.target.setPointerCapture(U.pointerId),Q.current=ke(_)?U.pageY:U.pageX)}function Tn(U,ue){var pe;let oe=U;const _e=(pe=window.getSelection())==null?void 0:pe.toString(),Fe=V.current?Ln(V.current,_):null,ze=new Date;if(oe.tagName==="SELECT"||oe.hasAttribute("data-vaul-no-drag")||oe.closest("[data-vaul-no-drag]"))return!1;if(_==="right"||_==="left")return!0;if(Je.current&&ze.getTime()-Je.current.getTime()<500)return!1;if(Fe!==null&&(_==="bottom"?Fe>0:Fe<0))return!0;if(_e&&_e.length>0)return!1;if(Le.current&&ze.getTime()-Le.current.getTime()<u&&Fe===0||ue)return Le.current=ze,!1;for(;oe;){if(oe.scrollHeight>oe.clientHeight){if(oe.scrollTop!==0)return Le.current=new Date,!1;if(oe.getAttribute("role")==="dialog")return!0}oe=oe.parentNode}return!0}function kn(U){if(V.current&&ce){const ue=_==="bottom"||_==="right"?1:-1,pe=(Q.current-(ke(_)?U.pageY:U.pageX))*ue,oe=pe>0,_e=r&&!h&&!oe;if(_e&&ot===0)return;const Fe=Math.abs(pe),ze=document.querySelector("[data-vaul-drawer-wrapper]"),St=_==="bottom"||_==="top"?st.current:Et.current;let at=Fe/St;const Mt=_n(Fe,oe);if(Mt!==null&&(at=Mt),_e&&at>=1||!I.current&&!Tn(U.target,oe))return;if(V.current.classList.add(is),I.current=!0,Re(V.current,{transition:"none"}),Re(je.current,{transition:"none"}),r&&_t({draggedDistance:pe}),oe&&!r){const ht=Om(pe),In=Math.min(ht*-1,0)*ue;Re(V.current,{transform:ke(_)?`translate3d(0, ${In}px, 0)`:`translate3d(${In}px, 0, 0)`});return}const jt=1-at;if((mt||m&&ot===m-1)&&(o?.(U,at),Re(je.current,{opacity:`${jt}`,transition:"none"},!0)),ze&&je.current&&l){const ht=Math.min(Ot()+at*(1-Ot()),1),In=8-at*8,Vs=Math.max(0,14-at*14);Re(ze,{borderRadius:`${In}px`,transform:ke(_)?`scale(${ht}) translate3d(0, ${Vs}px, 0)`:`scale(${ht}) translate3d(${Vs}px, 0, 0)`,transition:"none"},!0)}if(!r){const ht=Fe*ue;Re(V.current,{transform:ke(_)?`translate3d(0, ${ht}px, 0)`:`translate3d(${ht}px, 0, 0)`})}}}S.useEffect(()=>{window.requestAnimationFrame(()=>{de.current=!0})},[]),S.useEffect(()=>{var U;function ue(){if(!V.current||!N)return;const pe=document.activeElement;if(xs(pe)||fe.current){var oe;const _e=((oe=window.visualViewport)==null?void 0:oe.height)||0,Fe=window.innerHeight;let ze=Fe-_e;const St=V.current.getBoundingClientRect().height||0,at=St>Fe*.8;Ze.current||(Ze.current=St);const Mt=V.current.getBoundingClientRect().top;if(Math.abs(Ye.current-ze)>60&&(fe.current=!fe.current),r&&r.length>0&&dt&&ot){const jt=dt[ot]||0;ze+=jt}if(Ye.current=ze,St>_e||fe.current){const jt=V.current.getBoundingClientRect().height;let ht=jt;jt>_e&&(ht=_e-(at?Mt:bs)),b?V.current.style.height=`${jt-Math.max(ze,0)}px`:V.current.style.height=`${Math.max(ht,_e-Mt)}px`}else ym()||(V.current.style.height=`${Ze.current}px`);r&&r.length>0&&!fe.current?V.current.style.bottom="0px":V.current.style.bottom=`${Math.max(ze,0)}px`}}return(U=window.visualViewport)==null||U.addEventListener("resize",ue),()=>{var pe;return(pe=window.visualViewport)==null?void 0:pe.removeEventListener("resize",ue)}},[ot,r,dt]);function Ht(U){Pa(),p?.(),U||se(!1),setTimeout(()=>{r&&qt(r[0])},we.DURATION*1e3)}function Ws(){if(!V.current)return;const U=document.querySelector("[data-vaul-drawer-wrapper]"),ue=Ln(V.current,_);Re(V.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${we.DURATION}s cubic-bezier(${we.EASE.join(",")})`}),Re(je.current,{transition:`opacity ${we.DURATION}s cubic-bezier(${we.EASE.join(",")})`,opacity:"1"}),l&&ue&&ue>0&&$&&Re(U,{borderRadius:`${Oa}px`,overflow:"hidden",...ke(_)?{transform:`scale(${Ot()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ot()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${we.DURATION}s`,transitionTimingFunction:`cubic-bezier(${we.EASE.join(",")})`},!0)}function Pa(){!ce||!V.current||(V.current.classList.remove(is),I.current=!1,ie(!1),Me.current=new Date)}function $a(U){if(!ce||!V.current)return;V.current.classList.remove(is),I.current=!1,ie(!1),Me.current=new Date;const ue=Ln(V.current,_);if(!U||!Tn(U.target,!1)||!ue||Number.isNaN(ue)||qe.current===null)return;const pe=Me.current.getTime()-qe.current.getTime(),oe=Q.current-(ke(_)?U.pageY:U.pageX),_e=Math.abs(oe)/pe;if(_e>.05&&(Qe(!0),setTimeout(()=>{Qe(!1)},200)),r){Cn({draggedDistance:oe*(_==="bottom"||_==="right"?1:-1),closeDrawer:Ht,velocity:_e,dismissible:h}),a?.(U,!0);return}if(_==="bottom"||_==="right"?oe>0:oe<0){Ws(),a?.(U,!0);return}if(_e>Aa){Ht(),a?.(U,!1);return}var Fe;const ze=Math.min((Fe=V.current.getBoundingClientRect().height)!=null?Fe:0,window.innerHeight);var St;const at=Math.min((St=V.current.getBoundingClientRect().width)!=null?St:0,window.innerWidth),Mt=_==="left"||_==="right";if(Math.abs(ue)>=(Mt?at:ze)*c){Ht(),a?.(U,!1);return}a?.(U,!0),Ws()}S.useEffect(()=>($&&(Re(document.documentElement,{scrollBehavior:"auto"}),Je.current=new Date),()=>{Am(document.documentElement,"scrollBehavior")}),[$]);function Fa(U){const ue=U?(window.innerWidth-Dt)/window.innerWidth:1,pe=U?-Dt:0;B.current&&window.clearTimeout(B.current),Re(V.current,{transition:`transform ${we.DURATION}s cubic-bezier(${we.EASE.join(",")})`,transform:ke(_)?`scale(${ue}) translate3d(0, ${pe}px, 0)`:`scale(${ue}) translate3d(${pe}px, 0, 0)`}),!U&&V.current&&(B.current=setTimeout(()=>{const oe=Ln(V.current,_);Re(V.current,{transition:"none",transform:ke(_)?`translate3d(0, ${oe}px, 0)`:`translate3d(${oe}px, 0, 0)`})},500))}function Wa(U,ue){if(ue<0)return;const pe=(window.innerWidth-Dt)/window.innerWidth,oe=pe+ue*(1-pe),_e=-Dt+ue*Dt;Re(V.current,{transform:ke(_)?`scale(${oe}) translate3d(0, ${_e}px, 0)`:`scale(${oe}) translate3d(${_e}px, 0, 0)`,transition:"none"})}function Va(U,ue){const pe=ke(_)?window.innerHeight:window.innerWidth,oe=ue?(pe-Dt)/pe:1,_e=ue?-Dt:0;ue&&Re(V.current,{transition:`transform ${we.DURATION}s cubic-bezier(${we.EASE.join(",")})`,transform:ke(_)?`scale(${oe}) translate3d(0, ${_e}px, 0)`:`scale(${oe}) translate3d(${_e}px, 0, 0)`})}return S.useEffect(()=>{v||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[v]),S.createElement(or,{defaultOpen:w,onOpenChange:U=>{!h&&!U||(U?K(!0):Ht(!0),se(U))},open:$},S.createElement(ka.Provider,{value:{activeSnapPoint:At,snapPoints:r,setActiveSnapPoint:qt,drawerRef:V,overlayRef:je,onOpenChange:t,onPress:jn,onRelease:$a,onDrag:kn,dismissible:h,shouldAnimate:de,handleOnly:d,isOpen:$,isDragging:ce,shouldFade:mt,closeDrawer:Ht,onNestedDrag:Wa,onNestedOpenChange:Fa,onNestedRelease:Va,keyboardIsOpen:fe,modal:v,snapPointsOffset:dt,activeSnapPointIndex:ot,direction:_,shouldScaleBackground:l,setBackgroundColorOnScale:i,noBodyStyles:k,container:A,autoFocus:P}},s))}const La=S.forwardRef(function({...e},t){const{overlayRef:s,snapPoints:o,onRelease:a,shouldFade:r,isOpen:l,modal:i,shouldAnimate:c}=wn(),u=Ra(t,s),h=o&&o.length>0;if(!i)return null;const d=S.useCallback(m=>a(m),[a]);return S.createElement(rr,{onMouseUp:d,ref:u,"data-vaul-overlay":"","data-vaul-snap-points":l&&h?"true":"false","data-vaul-snap-points-overlay":l&&r?"true":"false","data-vaul-animate":c?.current?"true":"false",...e})});La.displayName="Drawer.Overlay";const Ba=S.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:s,...o},a){const{drawerRef:r,onPress:l,onRelease:i,onDrag:c,keyboardIsOpen:u,snapPointsOffset:h,activeSnapPointIndex:d,modal:m,isOpen:f,direction:g,snapPoints:b,container:v,handleOnly:p,shouldAnimate:x,autoFocus:k}=wn(),[_,w]=S.useState(!1),y=Ra(a,r),C=S.useRef(null),T=S.useRef(null),N=S.useRef(!1),H=b&&b.length>0;Pm();const A=(M,L,$=0)=>{if(N.current)return!0;const se=Math.abs(M.y),W=Math.abs(M.x),K=W>se,ce=["bottom","right"].includes(L)?1:-1;if(L==="left"||L==="right"){if(!(M.x*ce<0)&&W>=0&&W<=$)return K}else if(!(M.y*ce<0)&&se>=0&&se<=$)return!K;return N.current=!0,!0};S.useEffect(()=>{H&&window.requestAnimationFrame(()=>{w(!0)})},[]);function P(M){C.current=null,N.current=!1,i(M)}return S.createElement(ir,{"data-vaul-drawer-direction":g,"data-vaul-drawer":"","data-vaul-delayed-snap-points":_?"true":"false","data-vaul-snap-points":f&&H?"true":"false","data-vaul-custom-container":v?"true":"false","data-vaul-animate":x?.current?"true":"false",...o,ref:y,style:h&&h.length>0?{"--snap-point-height":`${h[d??0]}px`,...t}:t,onPointerDown:M=>{p||(o.onPointerDown==null||o.onPointerDown.call(o,M),C.current={x:M.pageX,y:M.pageY},l(M))},onOpenAutoFocus:M=>{s?.(M),k||M.preventDefault()},onPointerDownOutside:M=>{if(e?.(M),!m||M.defaultPrevented){M.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:M=>{if(!m){M.preventDefault();return}},onPointerMove:M=>{if(T.current=M,p||(o.onPointerMove==null||o.onPointerMove.call(o,M),!C.current))return;const L=M.pageY-C.current.y,$=M.pageX-C.current.x,se=M.pointerType==="touch"?10:2;A({x:$,y:L},g,se)?c(M):(Math.abs($)>se||Math.abs(L)>se)&&(C.current=null)},onPointerUp:M=>{o.onPointerUp==null||o.onPointerUp.call(o,M),C.current=null,N.current=!1,i(M)},onPointerOut:M=>{o.onPointerOut==null||o.onPointerOut.call(o,M),P(T.current)},onContextMenu:M=>{o.onContextMenu==null||o.onContextMenu.call(o,M),T.current&&P(T.current)}})});Ba.displayName="Drawer.Content";const Wm=250,Vm=120,Gm=S.forwardRef(function({preventCycle:e=!1,children:t,...s},o){const{closeDrawer:a,isDragging:r,snapPoints:l,activeSnapPoint:i,setActiveSnapPoint:c,dismissible:u,handleOnly:h,isOpen:d,onPress:m,onDrag:f}=wn(),g=S.useRef(null),b=S.useRef(!1);function v(){if(b.current){k();return}window.setTimeout(()=>{p()},Vm)}function p(){if(r||e||b.current){k();return}if(k(),!l||l.length===0){u||a();return}if(i===l[l.length-1]&&u){a();return}const w=l.findIndex(C=>C===i);if(w===-1)return;const y=l[w+1];c(y)}function x(){g.current=window.setTimeout(()=>{b.current=!0},Wm)}function k(){g.current&&window.clearTimeout(g.current),b.current=!1}return S.createElement("div",{onClick:v,onPointerCancel:k,onPointerDown:_=>{h&&m(_),x()},onPointerMove:_=>{h&&f(_)},ref:o,"data-vaul-drawer-visible":d?"true":"false","data-vaul-handle":"","aria-hidden":"true",...s},S.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});Gm.displayName="Drawer.Handle";function Um(e){const t=wn(),{container:s=t.container,...o}=e;return S.createElement(ar,{container:s,...o})}const Tt={Root:Fm,Content:Ba,Overlay:La,Portal:Um},qm="_overlay_1tcxf_7",Ym="_contentWrapper_1tcxf_25",Xm="_content_1tcxf_25",Km="_handleContainer_1tcxf_83",Qm="_handle_1tcxf_83",Jm="_iconContainer_1tcxf_115",Zm="_nfcIcon_1tcxf_133",eh="_title_1tcxf_183",th="_description_1tcxf_197",nh="_buttonGroup_1tcxf_213",sh="_cancelButton_1tcxf_229",oh="_actionButton_1tcxf_239",ah="_devToolsContainer_1tcxf_249",rh="_devToolsLabel_1tcxf_269",ih="_devButtons_1tcxf_287",He={overlay:qm,contentWrapper:Ym,content:Xm,handleContainer:Km,handle:Qm,iconContainer:Jm,nfcIcon:Zm,title:eh,description:th,buttonGroup:nh,cancelButton:sh,actionButton:oh,devToolsContainer:ah,devToolsLabel:rh,devButtons:ih},lh=()=>{const[e,t]=ee(_a),s=Z(Sa),[o]=ee(um),{trigger:a}=Ue(),[r,l]=j.useState(!1);j.useEffect(()=>{e.status!=="idle"&&e.status!=="selecting"?l(!0):l(!1)},[e.status]);const i=d=>{l(d),d||setTimeout(()=>{e.status!=="idle"&&t({status:"idle"})},300)},c=d=>{a("light"),t(m=>m.status==="ready"||m.status==="error"?{status:"writing",roomId:m.roomId,roomName:m.roomName}:m),setTimeout(()=>{if(d==="success"){if("roomId"in e){const{roomId:m,roomName:f}=e;t({status:"success",roomId:m,roomName:f}),s(g=>new Set(g).add(m)),a("success")}}else if(d==="net-error"){if("roomId"in e){const{roomId:m,roomName:f}=e;t({status:"error",roomId:m,roomName:f,error:{code:"WRITE_FAILED",message:"Network connection lost"}}),a("error")}}else if(d==="locked-error"&&"roomId"in e){const{roomId:m,roomName:f}=e;t({status:"error",roomId:m,roomName:f,error:{code:"TAG_LOCKED",message:"Tag is write-locked"}}),a("error")}},500)};if(j.useEffect(()=>{let d;return e.status==="writing"&&(d=setTimeout(()=>{const m=o==="forceSuccess"||o==="random"&&Math.random()>.2;if("roomId"in e){const{roomId:f,roomName:g}=e;m?(t({status:"success",roomId:f,roomName:g}),s(b=>new Set(b).add(f)),a("success")):(t({status:"error",roomId:f,roomName:g,error:{code:"WRITE_FAILED",message:"Tag connection lost"}}),a("error"))}},2e3)),e.status==="success"&&(d=setTimeout(()=>{l(!1),t({status:"idle"})},1500)),()=>clearTimeout(d)},[e,o,t,s,a]),e.status==="idle"||e.status==="selecting")return null;const h=(()=>{switch(e.status){case"ready":return{icon:"nfc",title:"Ready to Write",desc:`Hold device near tag to provision ${"roomName"in e?e.roomName:"room"}.`};case"writing":return{icon:"nfc",title:"Writing...",desc:"Keep device steady."};case"success":return{icon:"check_circle",title:"Success",desc:"Tag written successfully."};case"error":return{icon:"error",title:"Write Failed",desc:"error"in e?e.error.message:"Unknown error"};default:return{icon:"nfc",title:"",desc:""}}})();return n.jsx(Tt.Root,{open:r,onOpenChange:i,dismissible:e.status!=="writing",children:n.jsxs(Tt.Portal,{children:[n.jsx(Tt.Overlay,{className:He.overlay}),n.jsx(Tt.Content,{className:He.contentWrapper,children:n.jsxs("div",{className:He.content,children:[n.jsx("div",{className:He.handleContainer,children:n.jsx("div",{className:He.handle})}),n.jsx("div",{className:He.iconContainer,children:n.jsx("span",{className:`material-symbols-rounded ${He.nfcIcon}`,"data-state":e.status,children:h.icon})}),n.jsx("h3",{className:He.title,children:h.title}),n.jsx("p",{className:He.description,children:h.desc}),e.status==="error"&&n.jsxs("div",{className:He.buttonGroup,children:[n.jsx(ae,{variant:"primary",onClick:()=>t({status:"writing",roomId:e.roomId,roomName:e.roomName}),className:He.actionButton,children:"Retry"}),n.jsx(ae,{variant:"secondary",onClick:()=>l(!1),className:He.actionButton,children:"Cancel"})]}),e.status==="ready"&&n.jsx("div",{className:He.buttonGroup,children:n.jsx(ae,{variant:"secondary",onClick:()=>l(!1),className:He.cancelButton,children:"Cancel"})}),e.status==="ready"&&n.jsxs("div",{className:He.devToolsContainer,children:[n.jsx("span",{className:He.devToolsLabel,children:"Developer Controls"}),n.jsxs("div",{className:He.devButtons,children:[n.jsx(ae,{variant:"tertiary",size:"s",onClick:()=>c("success"),children:"Success"}),n.jsx(ae,{variant:"tertiary",size:"s",onClick:()=>c("net-error"),children:"Net Error"}),n.jsx(ae,{variant:"tertiary",size:"s",onClick:()=>c("locked-error"),children:"Locked"})]})]})]})})]})})},ch="_viewContainer_9ldfb_5",uh="_header_9ldfb_29",dh="_controlsHeader_9ldfb_75",mh="_listContainer_9ldfb_103",Bn={viewContainer:ch,header:uh,controlsHeader:dh,listContainer:mh},hh=()=>{const e=Z(xt),t=Z(_a),s=Z(Sa),o=Z(ws),[a,r]=ee(ja),l=F(hm),i=F(Cs),c=F(_s),[u,h]=ee(Bo),[d,m]=ee(Lo);j.useEffect(()=>{h(i),m(c)},[i,c,h,m]),j.useEffect(()=>()=>{r(""),s(new Set),h(null),m(null),t({status:"idle"})},[r,s,h,m,t]);const f=()=>{e({view:"none"})},g=(b,v)=>{t({status:"ready",roomId:b,roomName:v})};return n.jsxs(te.div,{className:Bn.viewContainer,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsxs("header",{className:Bn.header,children:[n.jsx("h3",{children:"Write NFC tags"}),n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:f,"aria-label":"Close",children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),n.jsxs("div",{className:Bn.controlsHeader,children:[n.jsx(Po,{groupId:u,unitId:d,onClick:()=>o(!0)}),n.jsx(Ta,{variant:"standalone",placeholder:"Search for a room...",value:a,onChange:r})]}),n.jsx("main",{className:Bn.listContainer,children:l.length>0?n.jsx(Yd,{data:l,itemContent:(b,v)=>n.jsx(wt,{label:v.name,onClick:()=>g(v.id,v.name)},v.id)}):n.jsx(us,{title:"No Rooms Found",message:"Select a facility group and unit to see a list of rooms to provision."})}),n.jsx(lh,{})]})},fh="_overlay_1kbxu_5",ph="_contentWrapper_1kbxu_19",gh="_content_1kbxu_19",vh="_handleContainer_1kbxu_67",xh="_handle_1kbxu_67",bh="_sheetHeader_1kbxu_105",yh="_sheetTitle_1kbxu_127",wh="_searchContainer_1kbxu_143",Ch="_listContainer_1kbxu_163",_h="_listContent_1kbxu_177",Sh="_sectionHeader_1kbxu_201",rt={overlay:fh,contentWrapper:ph,content:gh,handleContainer:vh,handle:xh,sheetHeader:bh,sheetTitle:yh,searchContainer:wh,listContainer:Ch,listContent:_h,sectionHeader:Sh},jh=()=>{const[e,t]=ee(kr),[s,o]=ee(Ir),[a,r]=ee(Nr),l=F(Rr),i=F(Er),c=Z(xt),u=m=>{t(m),m||setTimeout(()=>{o(""),r(!1)},300)},h=m=>{t(!1),setTimeout(()=>{c({view:"form",type:"scheduled",method:"manual",checkId:m.id,roomName:m.residents[0]?.location||"Unknown Room",residents:m.residents,specialClassifications:m.specialClassifications})},300)},d=(m,f)=>{const g=new Set(f?.map(b=>b.residentId));return n.jsx("span",{style:{display:"flex",flexWrap:"wrap",gap:"var(--spacing-1)",alignItems:"center"},children:m.map((b,v)=>n.jsxs("span",{style:{display:"inline-flex",alignItems:"center",color:"inherit"},children:[g.has(b.id)&&n.jsx("span",{className:"material-symbols-rounded",style:{marginRight:"var(--spacing-0p5)",fontVariationSettings:"'FILL' 1",color:"var(--surface-fg-primary)"},children:"warning"}),b.name,v<m.length-1?",":""]},b.id))})};return n.jsx(Tt.Root,{open:e,onOpenChange:u,children:n.jsxs(Tt.Portal,{children:[n.jsx(Tt.Overlay,{className:rt.overlay}),n.jsx(Tt.Content,{className:rt.contentWrapper,children:n.jsxs("div",{className:rt.content,children:[n.jsx("div",{className:rt.handleContainer,children:n.jsx("div",{className:rt.handle})}),n.jsxs("div",{className:rt.sheetHeader,children:[n.jsx("h3",{className:rt.sheetTitle,children:"Add Manual Check"}),n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:()=>t(!1),children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),n.jsx("div",{className:rt.searchContainer,children:n.jsx(Ta,{placeholder:"Search room or resident...",value:s,onChange:o,variant:"standalone"})}),n.jsx("div",{className:rt.listContainer,children:n.jsx("div",{className:rt.listContent,children:l.length>0?n.jsxs(n.Fragment,{children:[s&&n.jsx("div",{className:rt.sectionHeader,children:"Matching Results"}),l.map(m=>n.jsx(wt,{label:m.residents[0]?.location||"Unknown Room",subLabel:d(m.residents,m.specialClassifications),onClick:()=>h(m)},m.id))]}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"var(--spacing-8) 0",textAlign:"center",color:"var(--surface-fg-secondary)"},children:[n.jsx("span",{className:"material-symbols-rounded",style:{marginBottom:"var(--spacing-2)",opacity:.5},children:"search_off"}),n.jsx("p",{children:"No rooms found."}),!a&&s&&n.jsx("div",{style:{marginTop:"var(--spacing-4)"},children:n.jsxs(ae,{variant:"secondary",size:"s",onClick:()=>r(!0),children:["Search All Facilities (",i.count,")"]})})]})})})]})})]})})},Th="_modalWrapper_1mcmc_5",kh="_backdrop_1mcmc_21",Ih="_modalContainer_1mcmc_33",Nh="_header_1mcmc_57",Rh="_rightActionContainer_1mcmc_301",Eh="_content_1mcmc_325",Yt={modalWrapper:Th,backdrop:kh,modalContainer:Ih,header:Nh,rightActionContainer:Rh,content:Eh},Ah={hidden:e=>({x:e==="slide-horizontal"?"100%":0,y:e==="slide-vertical"?"100%":0}),visible:{x:0,y:0},exit:({type:e,direction:t})=>e==="slide-horizontal"&&t?{x:t==="left"?"-100%":"100%",transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]}}:{x:e==="slide-horizontal"?"100%":0,y:e==="slide-vertical"?"100%":0,transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]}}},ln=({isOpen:e,onClose:t,title:s,children:o,actionType:a="back",leftIcon:r="arrow_back",rightAction:l,transitionType:i="slide-horizontal",exitDirection:c})=>n.jsx(lt,{custom:{type:i,direction:c},children:e&&n.jsxs(te.div,{className:Yt.modalWrapper,custom:{type:i,direction:c},variants:Ah,initial:"hidden",animate:"visible",exit:"exit",transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsx("div",{className:Yt.backdrop}),n.jsxs("div",{className:Yt.modalContainer,children:[n.jsxs("header",{className:Yt.header,children:[a==="back"?n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:t,"aria-label":"Back",children:n.jsx("span",{className:"material-symbols-rounded",children:r})}):null,n.jsx("h2",{style:{marginLeft:a==="close"?"8px":"0"},children:s}),n.jsx("div",{className:Yt.rightActionContainer,children:l||(a==="close"?n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:t,"aria-label":"Close",children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})}):null)})]}),n.jsx("main",{className:Yt.content,children:o})]})]})}),Oh="_switchRoot_u1li9_5",Hh="_switchThumb_u1li9_83",_o={switchRoot:Oh,switchThumb:Hh},ve=({checked:e,onCheckedChange:t,disabled:s,id:o})=>n.jsx(lr,{className:_o.switchRoot,checked:e,onCheckedChange:t,disabled:s,id:o,children:n.jsx(cr,{className:_o.switchThumb})}),Mh="_container_993sg_5",Lh="_label_993sg_19",Bh="_controlRow_993sg_31",Dh="_trackWrapper_993sg_49",zh="_trackGradient_993sg_75",Ph="_thumb_993sg_105",$h="_swatch_993sg_165",zt={container:Mh,label:Lh,controlRow:Bh,trackWrapper:Dh,trackGradient:zh,thumb:Ph,swatch:$h},Da=({value:e,onChange:t,label:s,id:o})=>{const a=j.useId(),r=o||a,l=j.useRef(null),[i,c]=j.useState(!1),u=e/360*100,h=j.useCallback(v=>{if(!l.current)return;const p=l.current.getBoundingClientRect(),x=v-p.left,k=Math.max(0,Math.min(1,x/p.width)),_=Math.round(k*360);t(_)},[t]),d=v=>{c(!0),h(v);const p=k=>{const _="touches"in k?k.touches[0].clientX:k.clientX;h(_)},x=()=>{c(!1),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",x)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",x),document.addEventListener("touchmove",p,{passive:!0}),document.addEventListener("touchend",x)},m=v=>{v.preventDefault(),d(v.clientX)},f=v=>{d(v.touches[0].clientX)},g=v=>{let p=e;switch(v.key){case"ArrowRight":case"ArrowUp":p=Math.min(360,e+5);break;case"ArrowLeft":case"ArrowDown":p=Math.max(0,e-5);break;case"Home":p=0;break;case"End":p=360;break;default:return}v.preventDefault(),t(p)},b=`oklch(0.65 0.18 ${e})`;return n.jsxs("div",{className:zt.container,children:[n.jsx("label",{htmlFor:r,className:zt.label,children:s}),n.jsxs("div",{className:zt.controlRow,children:[n.jsxs("div",{ref:l,className:zt.trackWrapper,onMouseDown:m,onTouchStart:f,children:[n.jsx("div",{className:zt.trackGradient}),n.jsx("div",{className:zt.thumb,style:{left:`${u}%`},role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":e,"aria-label":s,tabIndex:0,onKeyDown:g,"data-dragging":i})]}),n.jsx("div",{className:zt.swatch,style:{backgroundColor:b},"aria-hidden":"true"})]})]})},Fh="_settingsContainer_10x12_5",Wh="_settingsSection_10x12_23",Vh="_sectionTitle_10x12_35",Gh="_settingsGroup_10x12_57",Uh="_settingsItem_10x12_79",qh="_itemLabel_10x12_145",Yh="_logoutButton_10x12_195",Ne={settingsContainer:Fh,settingsSection:Wh,sectionTitle:Vh,settingsGroup:Gh,settingsItem:Uh,itemLabel:qh,logoutButton:Yh},Xh=[{value:"qr",label:"QR Code",icon:"qr_code_2"},{value:"nfc",label:"NFC",icon:"nfc"}],Kh=()=>{const[e,t]=ee(Pe),[s]=ee(Vt),[o,a]=ee(Ss),r=F(Ft),l=Z(Ft),{trigger:i}=Ue(),{theme:c,setTheme:u}=Do(),h=r.user,d=b=>{i("light"),t(v=>({...v,hapticsEnabled:b}))},m=b=>{h&&a(v=>({...v,[h.username]:{...v[h.username],avatarHue:b}}))},f=()=>{l({isAuthenticated:!1,user:null})},g=h?o[h.username]?.avatarHue??ks(h.username):0;return n.jsxs(te.div,{className:Ne.settingsContainer,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:Ne.settingsSection,children:[n.jsx("h3",{className:Ne.sectionTitle,children:"Preferences"}),n.jsxs("div",{className:Ne.settingsGroup,children:[n.jsxs("div",{className:Ne.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:Ne.itemLabel,children:"Scan Mode"}),n.jsx(Ve,{id:"scan-mode-toggle",options:Xh,value:e.scanMode,onValueChange:b=>{i("selection"),t(v=>({...v,scanMode:b}))},itemDirection:"column"})]}),s.useHapticsEnabled&&n.jsxs("div",{className:Ne.settingsItem,children:[n.jsx("label",{htmlFor:"haptics-switch",className:Ne.itemLabel,children:"Haptic Feedback"}),n.jsx(ve,{id:"haptics-switch",checked:e.hapticsEnabled,onCheckedChange:d})]}),s.useSoundEnabled&&n.jsxs("div",{className:Ne.settingsItem,children:[n.jsx("label",{htmlFor:"audio-switch",className:Ne.itemLabel,children:"Audio Feedback"}),n.jsx(ve,{id:"audio-switch",checked:e.audioEnabled,onCheckedChange:b=>t(v=>({...v,audioEnabled:b}))})]}),s.enableDarkMode&&n.jsxs("div",{className:Ne.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:Ne.itemLabel,children:"Theme"}),n.jsx(Ve,{id:"theme-toggle",options:[{value:"light",label:"Light"},{value:"dark-a",label:"Dark A"},{value:"dark-b",label:"Dark B"},{value:"dark-c",label:"Dark C"}],value:c,onValueChange:b=>{i("selection"),u(b)}})]})]})]}),s.enableEnhancedAvatarDropdown&&n.jsxs("div",{className:Ne.settingsSection,children:[n.jsx("h3",{className:Ne.sectionTitle,children:"Appearance"}),n.jsx("div",{className:Ne.settingsGroup,children:n.jsx("div",{className:Ne.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},"data-no-hover":"true",children:n.jsx(Da,{label:"Avatar Color",value:g,onChange:m})})})]}),n.jsxs("div",{className:Ne.settingsSection,children:[n.jsx("h3",{className:Ne.sectionTitle,children:"Account"}),n.jsx(ae,{variant:"secondary",onClick:f,className:Ne.logoutButton,children:"Log Out"})]})]})},Qh="_container_2lxl6_5",Jh="_settingSection_2lxl6_23",Zh="_sectionHeader_2lxl6_35",ef="_subsectionHeader_2lxl6_59",tf="_warningBlock_2lxl6_77",nf="_settingsGroup_2lxl6_105",sf="_settingsItem_2lxl6_123",of="_itemLabel_2lxl6_149",af="_disabledGroup_2lxl6_161",rf="_toastGrid_2lxl6_175",lf="_toastPlaygroundItem_2lxl6_309",cf="_toastDescription_2lxl6_321",uf="_shortcutHint_2lxl6_335",df="_ringTestContainer_2lxl6_349",mf="_ringTestPreview_2lxl6_367",hf="_ringTestLabel_2lxl6_391",ff="_ringTestControls_2lxl6_413",pf="_ringTestHeader_2lxl6_433",gf="_ringTestActions_2lxl6_461",vf="_ringTestSliders_2lxl6_491",xf="_ringTestSlider_2lxl6_491",bf="_phaseViz_2lxl6_569",yf="_phaseVizLabel_2lxl6_583",wf="_phaseVizGrid_2lxl6_597",Cf="_phaseVizRing_2lxl6_609",_f="_phaseVizIndex_2lxl6_623",Sf="_phaseVizBar_2lxl6_637",jf="_phaseVizConveyor_2lxl6_653",Tf="_phaseVizShimmer_2lxl6_665",kf="_recipeSection_2lxl6_679",If="_recipeLabel_2lxl6_687",Nf="_recipeGrid_2lxl6_701",Rf="_recipeButton_2lxl6_713",R={container:Qh,settingSection:Jh,sectionHeader:Zh,subsectionHeader:ef,warningBlock:tf,settingsGroup:nf,settingsItem:sf,itemLabel:of,disabledGroup:af,toastGrid:rf,toastPlaygroundItem:lf,toastDescription:cf,shortcutHint:uf,ringTestContainer:df,ringTestPreview:mf,ringTestLabel:hf,ringTestControls:ff,ringTestHeader:pf,ringTestActions:gf,ringTestSliders:vf,ringTestSlider:xf,phaseViz:bf,phaseVizLabel:yf,phaseVizGrid:wf,phaseVizRing:Cf,phaseVizIndex:_f,phaseVizBar:Sf,phaseVizConveyor:jf,phaseVizShimmer:Tf,recipeSection:kf,recipeLabel:If,recipeGrid:Nf,recipeButton:Rf},Ef=[{label:"Sync Complete",message:"Data synced",icon:"cloud_done",variant:"success",logic:"Reconnection after offline."},{label:"Missed Check",message:"Check for Room 101 missed",icon:"history",variant:"warning",logic:"Ticker passes due + interval.",stableId:"lifecycle-missed-check"},{label:"Camera Error",message:`Camera not responding.
Try restarting your device.`,icon:"no_photography",variant:"alert",logic:"Simulated camera failure."},{label:"NFC Error",message:`Tag not read.
Hold phone steady against the tag.`,icon:"wifi_tethering_error",variant:"alert",logic:"Simulated NFC read failure."}],Af=()=>{const[e,t]=ee(Pe),[s,o]=ee(Ts),[a,r]=ee(gn),l=Z(Gn),i=Z(Vn),c=F(Ar),{trigger:u}=Ue(),h=f=>g=>{u("light"),f(g)},d=()=>{u("warning"),l({type:"RESET_DATA"}),i({message:"Application data reset to defaults.",icon:"delete",variant:"neutral"})},m=f=>{u("medium");let g=f.message;if(f.stableId==="lifecycle-missed-check"){const b=c.find(v=>v.stableId===f.stableId);if(b){let v=1;const p=b.message.match(/^(\d+)\s+checks\s+missed/i);p&&(v=parseInt(p[1],10)),v++,g=`${v} checks missed`}}i({message:g,icon:f.icon,variant:f.variant,stableId:f.stableId})};return n.jsxs(te.div,{className:R.container,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:R.settingSection,children:[n.jsx("h3",{className:R.sectionHeader,children:"Data Management"}),n.jsxs(ae,{variant:"secondary",onClick:d,children:[n.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"}),"Reset Application Data"]}),n.jsx("span",{className:R.shortcutHint,children:"Shortcut: Ctrl+Backspace"})]}),n.jsxs("div",{className:R.settingSection,children:[n.jsx("h3",{className:R.sectionHeader,children:"Workflow"}),n.jsxs("div",{className:R.settingsGroup,children:[n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"simple-submit-switch",className:R.itemLabel,children:"Simple submit"}),n.jsx(ve,{id:"simple-submit-switch",checked:e.simpleSubmitEnabled,onCheckedChange:h(f=>t(g=>({...g,simpleSubmitEnabled:f})))})]}),n.jsxs("div",{className:e.simpleSubmitEnabled?R.disabledGroup:"",children:[n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"mark-multiple-switch",className:R.itemLabel,children:"Mark multiple"}),n.jsx(ve,{id:"mark-multiple-switch",checked:e.markMultipleEnabled,onCheckedChange:h(f=>t(g=>({...g,markMultipleEnabled:f})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"check-type-switch",className:R.itemLabel,children:"Show check type"}),n.jsx(ve,{id:"check-type-switch",checked:e.isCheckTypeEnabled,onCheckedChange:h(f=>t(g=>({...g,isCheckTypeEnabled:f})))})]})]}),n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Status count"}),n.jsx(Ve,{id:"resident-status-count-toggle",options:[{value:"set-2",label:"2"},{value:"set-3",label:"3"},{value:"set-4",label:"4"},{value:"set-5",label:"5"},{value:"set-6",label:"6"},{value:"set-7",label:"7"}],value:e.residentStatusSet,onValueChange:f=>{u("selection"),t(g=>({...g,residentStatusSet:f}))}})]}),n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Status layout"}),n.jsx(Ve,{id:"status-layout-toggle",options:[{value:"row",label:"Row"},{value:"column",label:"Column"},{value:"grid",label:"Grid"}],value:e.markMultipleLayout,onValueChange:f=>{u("selection"),t(g=>({...g,markMultipleLayout:f}))}})]})]})]}),n.jsxs("div",{className:R.settingSection,children:[n.jsx("h3",{className:R.sectionHeader,children:"App Style"}),n.jsx("div",{className:R.settingsGroup,children:n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"status-indicators-switch",className:R.itemLabel,children:"Show status indicators"}),n.jsx(ve,{id:"status-indicators-switch",checked:e.showStatusIndicators,onCheckedChange:h(f=>t(g=>({...g,showStatusIndicators:f})))})]})})]}),n.jsxs("div",{className:R.settingSection,children:[n.jsx("h3",{className:R.sectionHeader,children:"Simulation"}),n.jsxs("div",{className:R.settingsGroup,children:[n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Connectivity"}),n.jsx(Ve,{id:"connectivity-toggle",options:[{value:"online",label:"Online",icon:"cloud"},{value:"offline",label:"Offline",icon:"cloud_off"}],value:a==="offline"?"offline":"online",onValueChange:f=>{u("selection"),r(f)},itemDirection:"column"})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"camera-fail-switch",className:R.itemLabel,children:"Force Camera Failure"}),n.jsx(ve,{id:"camera-fail-switch",checked:s.cameraFails,onCheckedChange:h(f=>o(g=>({...g,cameraFails:f})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"nfc-fail-switch",className:R.itemLabel,children:"Force NFC Failure"}),n.jsx(ve,{id:"nfc-fail-switch",checked:s.nfcFails,onCheckedChange:h(f=>o(g=>({...g,nfcFails:f})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"nfc-blocked-switch",className:R.itemLabel,children:"Force NFC Blocked"}),n.jsx(ve,{id:"nfc-blocked-switch",checked:s.nfcBlocked,onCheckedChange:h(f=>o(g=>({...g,nfcBlocked:f})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"nfc-off-switch",className:R.itemLabel,children:"Force NFC Turned Off"}),n.jsx(ve,{id:"nfc-off-switch",checked:s.nfcTurnedOff,onCheckedChange:h(f=>o(g=>({...g,nfcTurnedOff:f})))})]}),n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Scan timeout"}),n.jsx(Ve,{id:"nfc-timeout-toggle",options:[{value:"off",label:"Off"},{value:"5000",label:"5s"},{value:"10000",label:"10s"},{value:"15000",label:"15s"},{value:"30000",label:"30s"}],value:e.nfcTimeoutEnabled?String(e.nfcScanTimeout):"off",onValueChange:f=>{u("selection"),t(f==="off"?g=>({...g,nfcTimeoutEnabled:!1}):g=>({...g,nfcTimeoutEnabled:!0,nfcScanTimeout:Number(f)}))}})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"slow-load-switch",className:R.itemLabel,children:"Simulate slow loading"}),n.jsx(ve,{id:"slow-load-switch",checked:e.isSlowLoadEnabled,onCheckedChange:h(f=>t(g=>({...g,isSlowLoadEnabled:f})))})]})]})]}),n.jsxs("div",{className:R.settingSection,children:[n.jsx("h3",{className:R.sectionHeader,children:"Toast Playground"}),n.jsx("div",{className:R.toastGrid,children:Ef.map((f,g)=>n.jsxs("div",{className:R.toastPlaygroundItem,children:[n.jsxs(ae,{variant:"secondary",onClick:()=>m(f),children:[n.jsx("span",{className:"material-symbols-rounded",children:f.icon}),f.label]}),n.jsx("p",{className:R.toastDescription,children:f.logic})]},g))})]})]})},Of=()=>{const[e,t]=ee(Vt),[s,o]=ee(Pe),a=Z(zo),{trigger:r}=Ue(),l=i=>c=>{r("light"),i(c)};return n.jsx(te.div,{className:R.container,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:n.jsxs("div",{className:R.settingSection,children:[n.jsxs("div",{className:R.warningBlock,children:[n.jsx("strong",{children:"Experimental Features"}),n.jsx("br",{}),"These are just conceptual ideas for a potential future version.  Nothing here is expected for v1."]}),n.jsx("h3",{className:R.sectionHeader,children:"Ring Animation"}),n.jsx("div",{className:R.settingsGroup,children:n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"ring-animation-switch",className:R.itemLabel,children:"Enable Ring Animation"}),n.jsx(ve,{id:"ring-animation-switch",checked:e.feat_ring_animation,onCheckedChange:l(i=>t(c=>({...c,feat_ring_animation:i})))})]})}),e.feat_ring_animation&&n.jsxs(ae,{variant:"secondary",onClick:()=>{r("light"),a(!0)},children:[n.jsx("span",{className:"material-symbols-rounded",children:"animation"}),"Ring Animation Sandbox"]}),n.jsxs("div",{className:R.settingsGroup,children:[n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"use-sound-switch",className:R.itemLabel,children:"Use Sound"}),n.jsx(ve,{id:"use-sound-switch",checked:e.useSoundEnabled,onCheckedChange:l(i=>t(c=>({...c,useSoundEnabled:i})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"use-haptics-switch",className:R.itemLabel,children:"Use Haptics"}),n.jsx(ve,{id:"use-haptics-switch",checked:e.useHapticsEnabled,onCheckedChange:l(i=>t(c=>({...c,useHapticsEnabled:i})))})]}),e.useHapticsEnabled&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Success pattern"}),n.jsx(Ve,{id:"haptic-success-toggle",options:[{value:"light",label:"Light"},{value:"medium",label:"Medium"},{value:"heavy",label:"Heavy"}],value:s.hapticPatternSuccess,onValueChange:i=>{o(c=>({...c,hapticPatternSuccess:i})),setTimeout(()=>{r("success")},50)}})]}),n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Error pattern"}),n.jsx(Ve,{id:"haptic-error-toggle",options:[{value:"simple",label:"Simple"},{value:"double",label:"Double"},{value:"grind",label:"Grind"},{value:"stutter",label:"Stutter"}],value:s.hapticPatternError,onValueChange:i=>{o(c=>({...c,hapticPatternError:i})),setTimeout(()=>{r("error")},50)}})]})]})]}),n.jsxs("div",{className:R.settingsGroup,children:[n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"enable-dark-mode-switch",className:R.itemLabel,children:"Enable Dark Mode"}),n.jsx(ve,{id:"enable-dark-mode-switch",checked:e.enableDarkMode,onCheckedChange:l(i=>t(c=>({...c,enableDarkMode:i})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"enable-enhanced-avatar-switch",className:R.itemLabel,children:"Enhanced Avatar Dropdown"}),n.jsx(ve,{id:"enable-enhanced-avatar-switch",checked:e.enableEnhancedAvatarDropdown,onCheckedChange:l(i=>t(c=>({...c,enableEnhancedAvatarDropdown:i})))})]})]}),n.jsx("h3",{className:R.sectionHeader,children:"Late Check Concepts"}),n.jsx("div",{className:R.settingsGroup,children:n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-vignette-switch",className:R.itemLabel,children:"Active Vignette"}),n.jsx(ve,{id:"feat-vignette-switch",checked:e.feat_vignette,onCheckedChange:l(i=>t(c=>({...c,feat_vignette:i})))})]})}),n.jsx("h4",{className:R.subsectionHeader,children:"Pulse Effects"}),n.jsxs("div",{className:R.settingsGroup,children:[n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Glass Pulse Style"}),n.jsx(Ve,{id:"glass-pulse-style",options:[{value:"none",label:"None"},{value:"basic",label:"Basic"},{value:"gradient",label:"Gradient"}],value:e.feat_glass_pulse,onValueChange:i=>{r("light"),t(c=>({...c,feat_glass_pulse:i}))}})]}),n.jsxs("div",{className:R.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:R.itemLabel,children:"Card Pulse Style"}),n.jsx(Ve,{id:"card-pulse-style",options:[{value:"none",label:"None"},{value:"basic",label:"Basic"},{value:"gradient",label:"Gradient"}],value:e.feat_card_pulse,onValueChange:i=>{r("light"),t(c=>({...c,feat_card_pulse:i}))}})]})]}),n.jsx("h4",{className:R.subsectionHeader,children:"Other Card Effects"}),n.jsxs("div",{className:R.settingsGroup,children:[n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-card-border-switch",className:R.itemLabel,children:"Fluid Borders"}),n.jsx(ve,{id:"feat-card-border-switch",checked:e.feat_card_border,onCheckedChange:l(i=>t(c=>({...c,feat_card_border:i})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-hazard-texture-switch",className:R.itemLabel,children:"Hazard Texture"}),n.jsx(ve,{id:"feat-hazard-texture-switch",checked:e.feat_hazard_texture,onCheckedChange:l(i=>t(c=>({...c,feat_hazard_texture:i})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-invert-card-switch",className:R.itemLabel,children:"Invert Card"}),n.jsx(ve,{id:"feat-invert-card-switch",checked:e.feat_invert_card,onCheckedChange:l(i=>t(c=>({...c,feat_invert_card:i})))})]}),n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-invert-badge-switch",className:R.itemLabel,children:"Invert Badge"}),n.jsx(ve,{id:"feat-invert-badge-switch",checked:e.feat_invert_badge,onCheckedChange:l(i=>t(c=>({...c,feat_invert_badge:i})))})]})]}),n.jsx("div",{className:R.settingsGroup,children:n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-badge-pulse-switch",className:R.itemLabel,children:"Badge Pulse"}),n.jsx(ve,{id:"feat-badge-pulse-switch",checked:e.feat_badge_mode==="pulse",onCheckedChange:l(i=>t(c=>({...c,feat_badge_mode:i?"pulse":"none"})))})]})}),n.jsx("div",{className:R.settingsGroup,children:n.jsxs("div",{className:R.settingsItem,children:[n.jsx("label",{htmlFor:"feat-jump-fab-switch",className:R.itemLabel,children:"Jump FAB"}),n.jsx(ve,{id:"feat-jump-fab-switch",checked:e.feat_jump_fab,onCheckedChange:l(i=>t(c=>({...c,feat_jump_fab:i})))})]})})]})})},Hf="_userSettingsContainer_1oi7l_5",Mf="_profileHeader_1oi7l_25",Lf="_avatarLarge_1oi7l_45",Bf="_userName_1oi7l_69",Df="_settingsSection_1oi7l_87",zf="_sectionTitle_1oi7l_99",Pf="_settingsGroup_1oi7l_119",$f="_settingsItem_1oi7l_137",Ff="_itemLabel_1oi7l_203",Wf="_logoutButton_1oi7l_215",Ce={userSettingsContainer:Hf,profileHeader:Mf,avatarLarge:Lf,userName:Bf,settingsSection:Df,sectionTitle:zf,settingsGroup:Pf,settingsItem:$f,itemLabel:Ff,logoutButton:Wf},Vf=()=>{const e=F(Ft),t=Z(Ft),[s,o]=ee(Pe),[a,r]=ee(Ss),[l]=ee(Vt),{theme:i,setTheme:c}=Do(),{trigger:u}=Ue();if(!e.user)return null;const{username:h,initials:d,displayName:m}=e.user,f=a[h]?.avatarHue,g=f!==void 0?f:ks(h),b=`oklch(0.65 0.18 ${g})`,v=()=>{t({isAuthenticated:!1,user:null})},p=_=>{u("light"),c(_)},x=_=>{u("light"),o(w=>({...w,scanMode:_}))},k=_=>{r(w=>({...w,[h]:{...w[h],avatarHue:_}}))};return n.jsxs(te.div,{className:Ce.userSettingsContainer,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:Ce.profileHeader,children:[n.jsx("div",{className:Ce.avatarLarge,style:{backgroundColor:b},children:d}),n.jsx("h2",{className:Ce.userName,children:m})]}),n.jsxs("div",{className:Ce.settingsSection,children:[n.jsx("h3",{className:Ce.sectionTitle,children:"Appearance"}),n.jsxs("div",{className:Ce.settingsGroup,children:[n.jsxs("div",{className:Ce.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:Ce.itemLabel,children:"Theme"}),n.jsx(Ve,{id:"user-theme-toggle",options:[{value:"light",label:"Light"},{value:"dark-c",label:"Dark"}],value:i==="light"?"light":"dark-c",onValueChange:p,layout:"row"})]}),n.jsx("div",{className:Ce.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},"data-no-hover":"true",children:n.jsx(Da,{label:"Avatar Color",value:g,onChange:k})})]})]}),n.jsxs("div",{className:Ce.settingsSection,children:[n.jsx("h3",{className:Ce.sectionTitle,children:"Preferences"}),n.jsxs("div",{className:Ce.settingsGroup,children:[n.jsxs("div",{className:Ce.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:Ce.itemLabel,children:"Scan Mode"}),n.jsx(Ve,{id:"user-scan-mode-toggle",options:[{value:"qr",label:"QR",icon:"qr_code_2"},{value:"nfc",label:"NFC",icon:"nfc"}],value:s.scanMode,onValueChange:x,itemDirection:"column"})]}),l.useHapticsEnabled&&n.jsxs("div",{className:Ce.settingsItem,children:[n.jsx("label",{htmlFor:"user-haptics-switch",className:Ce.itemLabel,children:"Haptic Feedback"}),n.jsx(ve,{id:"user-haptics-switch",checked:s.hapticsEnabled,onCheckedChange:_=>{u("light"),o(w=>({...w,hapticsEnabled:_}))}})]}),l.useSoundEnabled&&n.jsxs("div",{className:Ce.settingsItem,children:[n.jsx("label",{htmlFor:"user-audio-switch",className:Ce.itemLabel,children:"Audio Feedback"}),n.jsx(ve,{id:"user-audio-switch",checked:s.audioEnabled,onCheckedChange:_=>o(w=>({...w,audioEnabled:_}))})]})]})]}),n.jsxs("div",{className:Ce.settingsSection,children:[n.jsx("h3",{className:Ce.sectionTitle,children:"Account"}),n.jsxs(ae,{variant:"secondary",onClick:v,className:Ce.logoutButton,children:[n.jsx("span",{className:"material-symbols-rounded",children:"logout"}),n.jsx("span",{children:"Log Out"})]})]})]})},Gf="_container_4z875_5",Uf="_contextBanner_4z875_25",qf="_viewWrapper_4z875_61",Yf="_listContainer_4z875_87",Xt={container:Gf,contextBanner:Uf,viewWrapper:qf,listContainer:Yf},So={enter:e=>({x:e===0?0:e>0?"100%":"-100%",opacity:1}),center:{x:0,opacity:1},exit:e=>({x:e<0?"100%":"-100%",opacity:1})},Xf=()=>{const[e,t]=ee(Or),[s,o]=ee(ws),[a,r]=ee(Cs),[l,i]=ee(_s),c=Z(Hr),u=Z(js),h=Z(ko),{trigger:d}=Ue(),[m,f]=j.useState("group"),[g,b]=j.useState(0),[v,p]=j.useState(a),[x,k]=j.useState("right"),_=e||s;j.useEffect(()=>{_&&(f("group"),b(0),p(a),k("right"))},[_,a]);const w=()=>{if(m==="unit"){b(-1),f("group");return}k("right"),e?c():o(!1)},y=A=>{d("selection"),p(A),b(1),f("unit")},C=A=>{d("selection"),v&&(k("left"),(v!==a||A!==l)&&h(!0),r(v),i(A),u("dashboardTime"),e&&t(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!1)})}))},T=cs.find(A=>A.id===v),N=T?.units||[],H=()=>m==="group"?"Select Facility":"Select Unit";return n.jsx(ln,{isOpen:_,onClose:w,title:H(),transitionType:"slide-horizontal",exitDirection:x,children:n.jsx("div",{className:Xt.container,children:n.jsx(lt,{initial:!1,custom:g,mode:"popLayout",children:m==="group"?n.jsx(te.div,{className:Xt.viewWrapper,custom:g,variants:So,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:n.jsx("div",{className:Xt.listContainer,style:{borderTop:"none"},children:cs.map(A=>n.jsx(wt,{label:A.name,leadingIcon:"domain",onClick:()=>y(A.id),showChevron:!0},A.id))})},"group-list"):n.jsxs(te.div,{className:Xt.viewWrapper,custom:g,variants:So,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:Xt.contextBanner,children:[n.jsx("span",{className:"material-symbols-rounded",children:"domain"}),T?.name]}),n.jsx("div",{className:Xt.listContainer,children:N.map(A=>n.jsx(wt,{label:A.name,onClick:()=>C(A.id),showChevron:!0},A.id))})]},"unit-list")})})})},Kf=[{key:"ringCount",label:"Ring Count",min:5,max:15,step:1},{key:"conveyorDuration",label:"Conveyor Duration",min:20,max:120,step:5,unit:"s"},{key:"baseOpacity",label:"Base Opacity",min:.1,max:.6,step:.05},{key:"fadeInPercent",label:"Fade In %",min:.05,max:.3,step:.05},{key:"fadeOutPercent",label:"Fade Out %",min:.05,max:.3,step:.05},{key:"baseStrokeWidth",label:"Base Stroke",min:1,max:4,step:.5,unit:"px"},{key:"shimmerPeriod",label:"Shimmer Period",min:2,max:15,step:.5,unit:"s"},{key:"shimmerDuration",label:"Shimmer Duration",min:.5,max:5,step:.25,unit:"s"},{key:"shimmerOpacityBoost",label:"Shimmer Opacity+",min:.1,max:1,step:.05},{key:"shimmerStrokeBoost",label:"Shimmer Stroke+",min:.5,max:3,step:.25,unit:"px"}],Qf=[{name:"Gentle Breath",description:"60s conveyor / 6s shimmer (10 cycles) - slow, meditative",params:{ringCount:10,conveyorDuration:60,shimmerPeriod:6,shimmerDuration:2,baseOpacity:.25,shimmerOpacityBoost:.4}},{name:"Heartbeat",description:"40s conveyor / 5s shimmer (8 cycles) - rhythmic pulse",params:{ringCount:8,conveyorDuration:40,shimmerPeriod:5,shimmerDuration:1.5,baseOpacity:.3,shimmerOpacityBoost:.5}},{name:"Radar Sweep",description:"30s conveyor / 3s shimmer (10 cycles) - quick, active",params:{ringCount:10,conveyorDuration:30,shimmerPeriod:3,shimmerDuration:1,baseOpacity:.2,shimmerOpacityBoost:.6,shimmerStrokeBoost:2}},{name:"Ocean Tide",description:"90s conveyor / 9s shimmer (10 cycles) - very slow, calming",params:{ringCount:12,conveyorDuration:90,shimmerPeriod:9,shimmerDuration:3,baseOpacity:.2,fadeInPercent:.2,fadeOutPercent:.2,shimmerOpacityBoost:.35}},{name:"Perfect Sync",description:"50s conveyor / 5s shimmer (10 cycles) - 10 rings, each shimmer = 1 ring",params:{ringCount:10,conveyorDuration:50,shimmerPeriod:5,shimmerDuration:2,baseOpacity:.3,shimmerOpacityBoost:.5}}],Jf=({params:e,mountKey:t})=>{const[s,o]=j.useState([]),a=j.useRef(0),r=j.useRef(0);return j.useEffect(()=>{a.current=performance.now(),r.current=performance.now();const l=()=>{const c=performance.now(),u=(c-a.current)/1e3;(c-r.current)/1e3>=e.shimmerPeriod&&(r.current=c);const d=Array.from({length:e.ringCount},(m,f)=>{const g=f/e.ringCount*e.conveyorDuration,b=(u+g)%e.conveyorDuration/e.conveyorDuration,v=f/e.ringCount*e.shimmerDuration,p=(c-r.current)/1e3,x=Math.max(0,Math.min(1,(p-v)/.8));return{conveyor:b,shimmer:x<1&&x>0?x:0}});o(d)},i=setInterval(l,100);return l(),()=>clearInterval(i)},[e,t]),n.jsxs("div",{className:R.phaseViz,children:[n.jsx("div",{className:R.phaseVizLabel,children:"Phase Alignment (Ring 0 = inner)"}),n.jsx("div",{className:R.phaseVizGrid,children:s.map((l,i)=>n.jsxs("div",{className:R.phaseVizRing,children:[n.jsx("span",{className:R.phaseVizIndex,children:i}),n.jsx("div",{className:R.phaseVizBar,children:n.jsx("div",{className:R.phaseVizConveyor,style:{width:`${l.conveyor*100}%`}})}),n.jsx("div",{className:R.phaseVizBar,children:n.jsx("div",{className:R.phaseVizShimmer,style:{width:l.shimmer>0?`${(1-Math.abs(l.shimmer-.5)*2)*100}%`:"0%",opacity:l.shimmer>0?1:.3}})})]},i))})]})},Zf=({onClose:e})=>{const[t,s]=j.useState(ds),[o,a]=j.useState(0),[r,l]=j.useState(!0),i=j.useCallback((d,m)=>{s(f=>({...f,[d]:m}))},[]),c=j.useCallback(()=>{s(ds),a(d=>d+1)},[]),u=j.useCallback(()=>{a(d=>d+1)},[]),h=j.useCallback(()=>{const d=JSON.stringify(t,null,2);navigator.clipboard.writeText(d),console.log("[RingAnimationTest] Config copied:",d)},[t]);return n.jsxs(te.div,{className:R.ringTestContainer,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[n.jsxs("div",{className:R.ringTestPreview,children:[n.jsx(Wo,{isEnabled:!0,params:t},o),n.jsx("div",{className:R.ringTestLabel,children:"Ring Animation Sandbox"})]}),n.jsxs("div",{className:R.ringTestControls,children:[n.jsxs("div",{className:R.ringTestHeader,children:[n.jsx("h3",{children:"Parameters"}),n.jsxs("div",{className:R.ringTestActions,children:[n.jsxs(ae,{variant:"tertiary",size:"s",onClick:()=>l(d=>!d),children:[n.jsx("span",{className:"material-symbols-rounded",children:"monitoring"}),"Phase"]}),n.jsxs(ae,{variant:"tertiary",size:"s",onClick:u,children:[n.jsx("span",{className:"material-symbols-rounded",children:"refresh"}),"Remount"]}),n.jsxs(ae,{variant:"tertiary",size:"s",onClick:c,children:[n.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"}),"Reset"]}),n.jsxs(ae,{variant:"tertiary",size:"s",onClick:h,children:[n.jsx("span",{className:"material-symbols-rounded",children:"content_copy"}),"Copy"]}),n.jsx(ae,{variant:"tertiary",size:"s",onClick:e,children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})]}),r&&n.jsx(Jf,{params:t,mountKey:o}),n.jsxs("div",{className:R.recipeSection,children:[n.jsx("div",{className:R.recipeLabel,children:"Sync Recipes"}),n.jsx("div",{className:R.recipeGrid,children:Qf.map(d=>n.jsx("button",{className:R.recipeButton,onClick:()=>{s(m=>({...m,...d.params})),a(m=>m+1)},title:d.description,children:d.name},d.name))})]}),n.jsx("div",{className:R.ringTestSliders,children:Kf.map(d=>n.jsxs("div",{className:R.ringTestSlider,children:[n.jsxs("label",{children:[d.label,": ",t[d.key],d.unit||""]}),n.jsx("input",{type:"range",min:d.min,max:d.max,step:d.step,value:t[d.key],onChange:m=>i(d.key,parseFloat(m.target.value))})]},d.key))})]})]})},za=j.createContext(null),ep=()=>{const e=j.useContext(za);if(!e)throw new Error("useGestureContext must be used within a GestureProvider");return e},tp=({children:e})=>{const t=Us(0),s=Us(0);return n.jsx(za.Provider,{value:{filmStripProgress:t,sideMenuProgress:s},children:e})},np=()=>{j.useEffect(()=>{if(!window.visualViewport)return;const e=()=>{requestAnimationFrame(()=>{const t=window.visualViewport?.height;t&&document.documentElement.style.setProperty("--visual-viewport-height",`${t}px`)})};return e(),window.visualViewport.addEventListener("resize",e),window.visualViewport.addEventListener("scroll",e),()=>{window.visualViewport?.removeEventListener("resize",e),window.visualViewport?.removeEventListener("scroll",e),document.documentElement.style.removeProperty("--visual-viewport-height")}},[])},sp="_appContainer_1q3pp_5",op="_sideMenuContainer_1q3pp_25",ap="_mainViewWrapper_1q3pp_49",rp="_backdrop_1q3pp_71",ip="_chromeContainer_1q3pp_105",rn={appContainer:sp,sideMenuContainer:op,mainViewWrapper:ap,backdrop:rp,chromeContainer:ip},ls={type:"spring",stiffness:400,damping:40,restDelta:.001},lp=()=>{const[e,t]=ee(js),s=F(xt),o=F(gn),[a,r]=ee(Io),[l,i]=ee(No),[c,u]=ee(Ro),[h,d]=ee(Eo),[m,f]=ee(zo),g=j.useCallback(()=>{u(!1)},[u]),[b,v]=j.useState(0),p=j.useRef(null),x=j.useRef(null),{filmStripProgress:k,sideMenuProgress:_}=ep(),w=j.useRef(!1),y=j.useRef(0),C=j.useRef(0),T=j.useRef(0);j.useEffect(()=>{p.current&&v(p.current.offsetWidth)},[]),j.useEffect(()=>{w.current||(e==="sideMenu"?Jn(_,1,ls):Jn(_,0,ls))},[e,_]),j.useEffect(()=>{s.view!=="none"&&(_.get()>0&&_.set(0),e==="sideMenu"&&t("dashboardTime"))},[s.view,_,e,t]),np(),j.useEffect(()=>{s.view==="form"&&"residents"in s&&s.residents.length>0?document.title=`Safety Check - ${s.residents[0].location}`:document.title="Safety Check App"},[s]);const N=()=>{t("dashboardTime")},H=W=>{s.view==="none"&&(y.current=W.clientX,C.current=W.clientY,T.current=k.get(),w.current=!1)},A=W=>{if(s.view==="none"){if(w.current){const K=W.clientX-y.current,ce=window.innerWidth,ie=K/ce;if(e==="sideMenu"){const he=Math.max(0,Math.min(1,1+K/b));_.set(he);return}if(e==="dashboardTime"&&K>0){const he=Math.max(0,Math.min(1,K/b));_.set(he);return}if(_.get()===0){const he=Math.max(0,Math.min(1,T.current-ie));k.set(he)}return}if(W.buttons>0||W.pointerType==="touch"){const K=Math.abs(W.clientX-y.current),ce=Math.abs(W.clientY-C.current);K>10&&K>ce&&(w.current=!0,W.currentTarget.setPointerCapture(W.pointerId))}}},P=W=>{if(!w.current)return;w.current=!1,W.currentTarget.releasePointerCapture(W.pointerId);const K=W.clientX-y.current,ce=_.get();let ie=!1;e==="sideMenu"?ie=!(ce<.8||K<-50):ie=ce>.2||K>50,Jn(_,ie?1:0,ls),t(ie?"sideMenu":"dashboardTime")},M=Nn(_,[0,1],[0,b]),L=Nn(_,[0,1],[-b,0]),$=Nn(_,[0,1],[0,1]),se=Nn(_,W=>W>0?"auto":"none");return n.jsxs("div",{className:rn.appContainer,onPointerDown:H,onPointerMove:A,onPointerUp:P,onPointerCancel:P,onPointerLeave:P,style:{touchAction:"pan-y"},children:[n.jsx(te.div,{ref:p,className:rn.sideMenuContainer,style:{x:L},children:n.jsx(fl,{})}),n.jsxs(te.div,{className:rn.mainViewWrapper,style:{x:M},children:[n.jsx(Vi,{}),n.jsx(te.div,{className:rn.backdrop,style:{opacity:$,pointerEvents:se},onClick:N}),n.jsxs("div",{ref:x,className:rn.chromeContainer,children:[o!=="online"&&n.jsx(bc,{}),n.jsx(El,{})]}),n.jsx(cc,{})]}),n.jsxs(lt,{children:[s.view==="scanning"&&n.jsx(Lc,{}),s.view==="form"&&n.jsx(Du,{checkData:s}),s.view==="provisioning"&&n.jsx(hh,{})]}),n.jsx(jh,{}),n.jsx(Xf,{}),n.jsx(ln,{isOpen:a,onClose:()=>r(!1),title:"Settings",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(Kh,{})}),n.jsx(ln,{isOpen:l,onClose:()=>i(!1),title:"Developer Tools",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(Af,{})}),n.jsx(ln,{isOpen:c,onClose:g,title:"Future Ideas",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(Of,{})}),n.jsx(ln,{isOpen:h,onClose:()=>d(!1),title:"User Settings",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(Vf,{})}),n.jsx(lt,{children:m&&n.jsx(Zf,{onClose:()=>f(!1)})})]})},fp=()=>n.jsx(tp,{children:n.jsx(lp,{})});export{fp as AppShell};
