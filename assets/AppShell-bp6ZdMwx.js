import{j as n,a as Ya,b as Ka,T as Xa,c as Za,d as Qa,A as Ja,e as er,f as tr,g as nr,h as sr,i as or,I as ar,k as rr,l as ir,m as lr,n as cr,o as ur,O as dr,p as mr,q as hr,r as fr}from"./vendor-ui-Cnq7BlVG.js";import{u as F,a as S,R as k,e as K,f as oe,d as Kt}from"./vendor-react-B_tfjPbg.js";import{s as ko,f as pr,t as gr,a as Fn,w as ct,r as Io,b as De,B as ae,c as ws,d as vr,i as No,e as Ks,g as xr,h as yr,p as wr,j as cs,k as Ro,l as Eo,m as bs,n as _s,o as rn,q as Cs,u as Ss,v as br,x as hn,A as _r,y as js,z as Ao,C as Wn,D as Cr,E as Oo,F as Ts,G as Bo,H as Sr,I as jr,J as zo,K as Tr,L as ks,M as Is,N as Ns,O as Mo,P as Ho,Q as Lo,R as Do,S as kr,T as Ir,U as Nr,V as Po,W as $o,X as Rr,Y as Er,Z as Ar,_ as Or,$ as Br,a0 as zr,a1 as Mr,a2 as Hr,a3 as Fo,a4 as Lr,a5 as Dr,a6 as Pr}from"./main-CngioS5q.js";import{m as U,A as qe,M as $r,u as Fr,a as Xs,b as Zn,c as Tn}from"./vendor-heavy-Bn5Puirq.js";import{g as Wo,a as Vo,u as Wr}from"./useScrollToFocused-Crgc76CO.js";const Vr=(e,t)=>{const s=(e.getTime()-t)/1e3;if(s<0){const l=Math.abs(s)/60,c=Math.floor(l/60),u=Math.floor(l%60);if(l<1)return"Overdue";const f=[];return c>0&&f.push(`${c}h`),u>0&&f.push(`${u}m`),`Overdue ${f.join(" ")}`}if(s<60)return`${Math.max(0,s).toFixed(1)}s`;if(s<300){const l=Math.floor(s/60),c=Math.floor(s%60);return`${l}m ${String(c).padStart(2,"0")}s`}if(s<3600)return`${Math.ceil(s/60)}m`;const o=s/60,a=Math.floor(o/60),r=Math.round(o%60),i=[];return a>0&&i.push(`${a}h`),r>0&&i.push(`${r}m`),i.join(" ")},Gr=(e,t)=>{const s=t==="early"||t==="pending"||t==="due"||t==="missed"||t==="queued",o=Date.now(),a=(e.getTime()-o)/1e3;let r=ko;t!=="missed"&&(a<60&&a>-60?r=pr:a<300&&(r=gr));const i=F(r);if(!s)return"";if(t==="missed"){const l=(i-e.getTime())/1e3,c=Math.floor(l/60),u=Math.floor(c/60),f=c%60;if(c<1)return"Overdue";const m=[];return u>0&&m.push(`${u}h`),f>0&&m.push(`${f}m`),`Overdue ${m.join(" ")}`}return Vr(e,i)},qr=["pulse-basic","pulse-gradient","magma-flow","border-pulse","hazard-fade","card-pulse-basic","card-pulse-gradient","indicator-pulse","badge-pulse","glass-tint-pulse","pulseRingExpand","shimmerOpacity"];function fn(e,t){const{isEnabled:s,animationNames:o=qr}=t,a=S.useRef(!1);typeof window<"u"&&(a.current=window.matchMedia("(prefers-reduced-motion: reduce)").matches),S.useLayoutEffect(()=>{if(!s||!e.current||a.current)return;const r=e.current,i=u=>{if("animationName"in u){const f=u.animationName;o.some(m=>f.includes(m))&&(u.startTime=0,console.log(`[useWaapiSync] Synced '${f}' to startTime=0`))}};r.getAnimations({subtree:!0}).forEach(i);const c=u=>{if(o.some(f=>u.animationName.includes(f))){const m=r.getAnimations({subtree:!0}).find(d=>d.animationName===u.animationName);m&&i(m)}};return r.addEventListener("animationstart",c),()=>{r.removeEventListener("animationstart",c)}},[s,e,o])}const Ur="_badge_bru6w_5",Yr="_badgeIcon_bru6w_37",Kr="_badgePulse_bru6w_161",Xr="_badgeInvert_bru6w_197",Zr="_badgeInvertForCard_bru6w_219",Qt={badge:Ur,badgeIcon:Yr,badgePulse:Kr,badgeInvert:Xr,badgeInvertForCard:Zr},Qr=e=>{switch(e){case"due":return{label:"Due",icon:"schedule"};case"missed":return{label:"Missed",icon:"notifications_active"};case"completing":return{label:"Completed",icon:"check_circle"};case"complete":return{label:"Completed",icon:"check_circle"};case"queued":return{label:"Queued",icon:"share_eta"};default:return{label:"",icon:null}}},Jr=(e,t)=>{const s=new Date(e).getTime(),o=(t-s)/(60*1e3),a=Math.max(1,Math.ceil(o/15));return a===1?"Missed":`${a} Missed`},ei=({status:e,type:t,dueDate:s})=>{const o=F(ko),{feat_badge_mode:a,feat_invert_badge:r,feat_invert_card:i}=F(Fn),l=k.useRef(null),c=a==="pulse"&&e==="missed";if(fn(l,{isEnabled:c}),e==="pending"||e==="early")return null;const u=Qr(e);let f=u.label,m=e;t==="supplemental"&&(f="Supplemental",m="supplemental"),e==="missed"&&s&&(f=Jr(s,o));const d=e==="missed"&&r&&!i,g=e==="missed"&&i,_=[Qt.badge,c?Qt.badgePulse:"",d?Qt.badgeInvert:"",g?Qt.badgeInvertForCard:""].filter(Boolean).join(" ");return n.jsxs("div",{className:_,"data-status":m,ref:l,children:[u.icon&&n.jsx("span",{className:`material-symbols-rounded ${Qt.badgeIcon}`,children:u.icon}),f]})},ti="_checkCard_1hw6v_117",ni="_statusIndicator_1hw6v_273",si="_mainContent_1hw6v_353",oi="_topRow_1hw6v_369",ai="_bottomRow_1hw6v_383",ri="_locationInfo_1hw6v_397",ii="_locationText_1hw6v_411",li="_residentList_1hw6v_429",ci="_residentListItem_1hw6v_453",ui="_warningIcon_1hw6v_475",di="_timeDisplay_1hw6v_487",mi="_isEstimated_1hw6v_509",hi="_cardGradient_1hw6v_569",fi="_cardBorder_1hw6v_651",pi="_cardHazard_1hw6v_691",gi="_cardPulseBasic_1hw6v_757",vi="_cardInvert_1hw6v_957",Re={checkCard:ti,statusIndicator:ni,mainContent:si,topRow:oi,bottomRow:ai,locationInfo:ri,locationText:ii,residentList:li,residentListItem:ci,warningIcon:ui,timeDisplay:di,isEstimated:mi,cardGradient:hi,cardBorder:fi,cardHazard:pi,cardPulseBasic:gi,cardInvert:vi},xi=({resident:e,check:t})=>{const s=t.specialClassifications?.some(o=>o.residentId===e.id);return n.jsxs("li",{className:Re.residentListItem,children:[s&&n.jsx("span",{className:`material-symbols-rounded ${Re.warningIcon}`,children:"warning"}),e.name]})},yi=({check:e,transition:t,isReadOnly:s=!1})=>{const o=K(ct),a=F(Io),{showStatusIndicators:r}=F(De),{feat_card_pulse:i,feat_card_gradient:l,feat_card_border:c,feat_hazard_texture:u,feat_invert_card:f}=F(Fn),m=a===e.id,d=e.status==="missed",g=S.useRef(null);fn(g,{isEnabled:d&&(i!=="none"||l||c||u)});const w=S.useMemo(()=>new Date(e.dueDate),[e.dueDate]),x=Gr(w,e.status),p=!["complete","supplemental","completing","queued"].includes(e.status)&&!s,h=()=>{p&&!s&&o({view:"form",type:"scheduled",method:"manual",checkId:e.id,roomName:e.residents[0].location,residents:e.residents,specialClassifications:e.specialClassifications})},{residents:v}=e,C=v[0]?.location||"N/A",y=!["complete","supplemental","completing","queued"].includes(e.status),b=d&&i==="basic"?Re.cardPulseBasic:d&&i==="gradient"?Re.cardGradient:"",j=d&&i==="none"&&l?Re.cardGradient:"",I=[Re.checkCard,m?Re.isCompleting:"",b,j,d&&c?Re.cardBorder:"",d&&u?Re.cardHazard:"",d&&f?Re.cardInvert:""].filter(Boolean).join(" "),T=s?{cursor:"default"}:void 0;return n.jsx(U.div,{initial:{height:"auto",marginBottom:"var(--space-3)"},animate:{height:"auto",marginBottom:"var(--space-3)"},exit:{height:0,marginBottom:0,overflow:"hidden",transition:{delay:.1,duration:.2,ease:"linear"}},children:n.jsxs(U.div,{ref:g,transition:t,initial:{opacity:0,x:0},animate:{opacity:1,x:0},exit:{x:"100%",opacity:0,transition:{x:{duration:.2,ease:[.25,1,.5,1]},opacity:{duration:.2,ease:"easeOut"}}},className:I,style:T,"data-status":e.status,"data-check-id":e.id,"data-indicators-visible":r,onClick:h,"aria-disabled":!p||!!s,whileTap:p&&!s?{scale:.98}:{},children:[r&&y&&n.jsx("div",{className:Re.statusIndicator,"data-status":e.status}),n.jsxs("div",{className:Re.mainContent,children:[n.jsxs("div",{className:Re.topRow,children:[n.jsx("div",{className:Re.locationInfo,children:n.jsx("span",{className:Re.locationText,children:C})}),n.jsx(ei,{status:e.status,type:e.type,dueDate:e.dueDate})]}),n.jsxs("div",{className:Re.bottomRow,children:[n.jsx("ul",{className:Re.residentList,children:v.map(O=>n.jsx(xi,{resident:O,check:e},O.id))}),n.jsx("div",{className:`${Re.timeDisplay} ${e.isEstimated?Re.isEstimated:""}`,children:["complete","supplemental","completing"].includes(e.status)?null:n.jsxs(n.Fragment,{children:[e.isEstimated?"Estimated in ":"",x]})})]})]})]})})},wi="_shimmer_1m0k7_23",bi="_cardWrapper_1m0k7_49",_i="_indicator_1m0k7_89",Ci="_mainContent_1m0k7_109",Si="_topRow_1m0k7_123",ji="_bottomRow_1m0k7_125",Ti="_location_1m0k7_153",ki="_badge_1m0k7_155",Ii="_resident_1m0k7_157",Ni="_residentShort_1m0k7_159",pt={shimmer:wi,cardWrapper:bi,indicator:_i,mainContent:Ci,topRow:Si,bottomRow:ji,location:Ti,badge:ki,resident:Ii,residentShort:Ni},Ri=()=>n.jsxs("div",{className:pt.cardWrapper,children:[n.jsx("div",{className:pt.shimmer}),n.jsx("div",{className:pt.indicator}),n.jsxs("div",{className:pt.mainContent,children:[n.jsxs("div",{className:pt.topRow,children:[n.jsx("div",{className:pt.location}),n.jsx("div",{className:pt.badge})]}),n.jsxs("div",{className:pt.bottomRow,children:[n.jsx("div",{className:pt.resident}),n.jsx("div",{className:pt.residentShort})]})]})]}),Ei="_emptyStateContainer_11y9y_3",Ai="_emptyStateMessage_11y9y_47",kn={emptyStateContainer:Ei,emptyStateMessage:Ai},us=({icon:e="search_off",title:t,message:s,action:o})=>n.jsxs("div",{className:kn.emptyStateContainer,children:[n.jsx("span",{className:"material-symbols-rounded large-feature-icon",children:e}),n.jsx("h3",{className:kn.emptyStateTitle,children:t}),s&&n.jsx("p",{className:kn.emptyStateMessage,children:s}),o&&n.jsx("div",{className:kn.actionContainer,children:o})]}),Oi="_chipContainer_5af65_5",Bi="_chipContent_5af65_19",zi="_chipText_5af65_43",Mi="_clearButton_5af65_63",In={chipContainer:Oi,chipContent:Bi,chipText:zi,clearButton:Mi},Hi=({filterLabel:e,onClear:t})=>n.jsx(U.div,{layout:!0,className:In.chipContainer,initial:{y:-20,opacity:0,height:0},animate:{y:0,opacity:1,height:"auto"},exit:{y:-20,opacity:0,height:0},transition:{type:"tween",duration:.25,ease:"easeInOut"},children:n.jsxs("div",{className:In.chipContent,children:[n.jsxs("span",{className:In.chipText,children:["Showing: ",n.jsx("strong",{children:e})]}),n.jsx(ae,{variant:"quaternary",size:"xs",iconOnly:!0,onClick:t,"aria-label":"Clear filter",className:In.clearButton,children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})}),Li="_emptyStateContainer_1yck0_3",Nn={emptyStateContainer:Li},Di=({filterLabel:e,onClear:t})=>n.jsxs("div",{className:Nn.emptyStateContainer,children:[n.jsx("div",{className:Nn.iconWrapper,children:n.jsx("span",{className:"material-symbols-rounded",children:"filter_list_off"})}),n.jsxs("h3",{className:Nn.title,children:['No "',e,'" checks']}),n.jsx("p",{className:Nn.message,children:"There are no checks that match the current filter. Try clearing the filter to see all upcoming checks."}),n.jsx(ae,{variant:"secondary",size:"m",onClick:t,children:"Clear Filter"})]}),Pi="_scrollContainer_1khaw_5",$i="_headerWrapper_1khaw_49",Fi="_priorityGroupHeader_1khaw_57",Jt={scrollContainer:Pi,headerWrapper:$i,priorityGroupHeader:Fi},Zs={type:"tween",duration:.25,ease:[.25,1,.5,1]},Wi=8,Qs={missed:"Missed",due:"Due",queued:"Queued"},Vi=e=>{const t={Missed:[],Due:[],Upcoming:[]};return e.forEach(s=>{if(["complete","supplemental","queued"].includes(s.status))return;let o=s.status;if(s.status==="completing"){const a=s.baseInterval*60*1e3,i=new Date(s.dueDate).getTime()-a,c=(Date.now()-i)/(60*1e3);c<13?o="pending":c<15?o="due":o="missed"}switch(o){case"missed":t.Missed.push(s);break;case"due":t.Due.push(s);break;case"early":case"pending":default:t.Upcoming.push(s);break}}),Object.entries(t).map(([s,o])=>({title:s,checks:o})).filter(s=>s.checks.length>0)},Gi=e=>{const t=e.filter(o=>!["complete","supplemental","missed","queued"].includes(o.status)),s=[];return t.length>0&&s.push({title:"Walking Order",checks:t}),s},qi=({viewType:e})=>{const t=F(e==="time"?ws:vr),s=F(De),{isSlowLoadEnabled:o}=s,[a,r]=oe(No),i=F(Ks),l=F(xr),[c,u]=oe(yr),f=K(Ks);S.useEffect(()=>{if(a){const w=setTimeout(()=>r(!1),o?3e3:750);return()=>clearTimeout(w)}},[a,r,o]);const m=()=>{f(!0),u("all"),setTimeout(()=>f(!1),500)},d=a,g=c!=="all",_=()=>{if(d)return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Jt.headerWrapper,children:n.jsx("div",{className:Jt.priorityGroupHeader,style:{width:"100px",height:"1.5rem",backgroundColor:"transparent",marginBottom:"var(--spacing-2)"},children:n.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"var(--surface-bg-tertiary)",borderRadius:"var(--radius-sm)",opacity:.3}})})}),Array.from({length:Wi}).map((x,p)=>n.jsx(Ri,{},p))]});if(t.length===0)return l?n.jsx(us,{title:"No Results Found",message:`Your search for "${l}" did not return any results.`}):g?n.jsx(Di,{filterLabel:Qs[c],onClear:m}):n.jsx(us,{title:"All Checks Complete",message:"There are no checks due at this time."});const w=e==="time"?Vi(t):Gi(t);return n.jsxs(n.Fragment,{children:[n.jsx(qe,{children:w.flatMap(x=>[n.jsx(U.div,{className:Jt.headerWrapper,layout:!0,transition:Zs,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n.jsx("h2",{className:Jt.priorityGroupHeader,children:x.title})},x.title),...x.checks.map(p=>n.jsx(yi,{check:p,transition:Zs,isReadOnly:s.isViewOnlyMode},p.id))])}),n.jsx("div",{style:{height:"calc(var(--footer-height, 96px) + var(--spacing-4))"}})]})};return n.jsxs("div",{className:Jt.scrollContainer,"data-refreshing":i,children:[n.jsx("div",{style:{height:"var(--header-height)"}}),n.jsx(qe,{mode:"wait",children:g&&n.jsx(Hi,{filterLabel:Qs[c],onClear:m},c)}),_()]})},Ui="_container_r0gas_5",Yi={container:Ui},Ki=()=>n.jsx("div",{className:Yi.container,children:n.jsx(qi,{viewType:"time"})}),Xi={light:[50],medium:[100],heavy:[150]},Zi={simple:[200],double:[300,100,300],grind:[50,50,50,50,50,50],stutter:[50,100,50,100,200]},Qi={warning:[100,50,100],light:10,medium:40,heavy:60,selection:5},Ji=150,Ue=()=>{const e=F(De),t=S.useRef(0);return{trigger:S.useCallback(o=>{if(e.hapticsEnabled&&window.navigator&&"vibrate"in window.navigator){const a=Date.now();if(a-t.current<Ji)return;try{let r;o==="success"?r=Xi[e.hapticPatternSuccess]:o==="error"?r=Zi[e.hapticPatternError]:r=Qi[o],window.navigator.vibrate(r),t.current=a}catch{}}},[e.hapticsEnabled,e.hapticPatternSuccess,e.hapticPatternError])}},Rs=()=>{const{audioEnabled:e}=F(De),t=F(wr);return{play:S.useCallback((o,a)=>{!e||!t||t(o,a)},[e,t])}},el=(e,t=7,s=3e3)=>{const o=S.useRef(0),a=S.useRef(0),r=S.useRef(e);return r.current=e,{onTap:S.useCallback(()=>{const l=Date.now();l-a.current>s&&(o.current=0,a.current=l),o.current+=1,o.current===1&&(a.current=l),o.current>=t&&(o.current=0,r.current())},[t,s]),currentCount:o.current}},tl="_contextCard_17t6w_5",nl="_stackedContainer_17t6w_43",sl="_stackItem_17t6w_57",ol="_label_17t6w_69",al="_value_17t6w_85",rl="_actionIcon_17t6w_97",bt={contextCard:tl,stackedContainer:nl,stackItem:sl,label:ol,value:al,actionIcon:rl},Go=({groupId:e,unitId:t,onClick:s})=>{const o=cs.find(l=>l.id===e),a=o?.units.find(l=>l.id===t),r=o?.name||"Select Group",i=a?.name||"Select Unit";return n.jsxs("button",{className:bt.contextCard,onClick:s,type:"button",children:[n.jsxs("div",{className:bt.stackedContainer,children:[n.jsxs("div",{className:bt.stackItem,children:[n.jsx("span",{className:bt.label,children:"Group"}),n.jsx("span",{className:bt.value,children:r})]}),n.jsxs("div",{className:bt.stackItem,children:[n.jsx("span",{className:bt.label,children:"Unit"}),n.jsx("span",{className:bt.value,children:i})]})]}),n.jsx("div",{className:bt.actionIcon,children:n.jsx("span",{className:"material-symbols-rounded",children:"swap_horiz"})})]})},_t=({label:e,subLabel:t,leadingIcon:s,leadingElement:o,trailingIcon:a,trailingElement:r,isSelected:i,disabled:l,onClick:c,indent:u=!1,showChevron:f=!0})=>{let m=o;!m&&s?m=n.jsx("span",{className:"material-symbols-rounded",children:s}):!m&&i&&(m=n.jsx("span",{className:"material-symbols-rounded",children:"check"}));let d=r;return!d&&a?d=n.jsx("span",{className:"material-symbols-rounded",children:a}):!d&&c&&f&&!i&&(d=n.jsx("span",{className:"material-symbols-rounded",children:"chevron_right"})),n.jsxs("button",{className:"list-item-root",onClick:c,disabled:l,"aria-selected":i,"data-has-leading":!!m||u,type:"button",children:[(m||u)&&n.jsx("div",{className:"list-item-leading",children:m}),n.jsxs("div",{className:"list-item-content",children:[n.jsxs("div",{className:"list-item-text-group",children:[n.jsx("span",{className:"list-item-label",children:e}),t&&n.jsx("span",{className:"list-item-sublabel",children:t})]}),d&&n.jsx("div",{className:"list-item-trailing",children:d})]})]})},il="_sideMenu_k272g_5",ll="_header_k272g_29",cl="_titleRow_k272g_49",ul="_title_k272g_49",dl="_envBanner_k272g_85",ml="_version_k272g_113",hl="_headerSeparator_k272g_143",fl="_content_k272g_155",pl="_separator_k272g_173",gl="_menuList_k272g_283",vl="_footer_k272g_303",xl="_userProfileCard_k272g_319",yl="_userName_k272g_391",$e={sideMenu:il,header:ll,titleRow:cl,title:ul,envBanner:dl,version:ml,headerSeparator:hl,content:fl,separator:pl,menuList:gl,footer:vl,userProfileCard:xl,userName:yl},wl=()=>{const e=K(Ro),t=K(Eo),s=K(bs),o=K(ct),a=K(_s),r=K(rn),i=F(rn),l=F(Cs),c=F(Ss),u=F(De),{toggle:f,isUnlocked:m}=br(),d=K(hn),{trigger:g}=Ue(),{play:_}=Rs(),w=S.useCallback(()=>{const h=!m;f(),g(h?"success":"light"),h&&_("success"),d({message:h?"Future Ideas Unlocked":"Future Ideas Hidden",icon:h?"lightbulb":"lightbulb_outline",variant:"neutral"})},[f,m,d,g,_]),{onTap:x}=el(w,7,3e3),p=()=>{r({isAuthenticated:!1,user:null})};return n.jsxs("aside",{className:$e.sideMenu,children:[n.jsxs("header",{className:$e.header,children:[n.jsxs("div",{className:$e.titleRow,children:[n.jsx("h1",{className:$e.title,onClick:x,children:"Safeguard"}),n.jsx("span",{className:$e.version,children:_r})]}),u.showEnvironmentName&&n.jsx("div",{className:$e.envBanner,children:u.environmentName||"https://vicbc-qa-symphony.logan-symphony.com"}),n.jsx("div",{className:$e.headerSeparator})]}),n.jsxs("main",{className:$e.content,children:[n.jsx(Go,{groupId:l,unitId:c,onClick:()=>a(!0)}),n.jsx("div",{className:$e.separator}),n.jsxs("div",{className:$e.menuList,children:[n.jsx(_t,{label:"Write NFC tags",leadingIcon:"nfc",onClick:()=>o({view:"provisioning"}),showChevron:!1}),n.jsx(_t,{label:"Developer tools",leadingIcon:"code",onClick:()=>e(!0),showChevron:!1}),m&&n.jsx(_t,{label:"Future Ideas",leadingIcon:"lightbulb",onClick:()=>t(!0),showChevron:!1})]})]}),n.jsxs("footer",{className:$e.footer,children:[n.jsx("div",{className:$e.menuList,children:n.jsx(_t,{label:"Log out",leadingIcon:"logout",onClick:p,showChevron:!1})}),n.jsx("div",{className:$e.separator}),n.jsxs("button",{className:$e.userProfileCard,onClick:()=>s(!0),"aria-label":"Settings",children:[n.jsx("span",{className:$e.userName,children:i.user?.displayName||"Unknown User"}),n.jsx("span",{className:"material-symbols-rounded",children:"settings"})]})]})]})},bl=e=>{const t=K(e),s=S.useRef(null),o=S.useRef(0),a=S.useRef(0);return S.useLayoutEffect(()=>{const r=()=>{if(s.current){const l=s.current.offsetHeight;o.current!==l&&(cancelAnimationFrame(a.current),a.current=requestAnimationFrame(()=>{o.current=l,t(l)}))}};r();const i=new ResizeObserver(r);return s.current&&i.observe(s.current),()=>{i.disconnect(),cancelAnimationFrame(a.current)}},[t]),s},Es=()=>{const[e,t]=oe(js),s=F(Ao),o=K(Wn),{trigger:a}=Ue(),r=()=>{e!=="offline"&&(a("selection"),t("offline"))},i=()=>{e==="online"||e==="syncing"||e==="connected"||e==="synced"||(s>0?(t("syncing"),a("medium"),setTimeout(()=>{o({type:"SYNC_QUEUED_CHECKS",payload:{syncTime:new Date().toISOString()}}),a("success"),t("synced"),setTimeout(()=>t("online"),1e3)},1500)):(a("success"),t("connected"),setTimeout(()=>t("online"),1e3)))};return{status:e,goOffline:r,goOnline:i,toggleConnection:()=>{e==="online"||e==="syncing"||e==="connected"||e==="synced"?r():i()}}},_l=({children:e,content:t,delay:s=300,side:o="top"})=>t?n.jsx(Ya,{children:n.jsxs(Ka,{delayDuration:s,children:[n.jsx(Xa,{asChild:!0,children:e}),n.jsx(Za,{children:n.jsxs(Qa,{className:"tooltip-content",side:o,sideOffset:5,children:[t,n.jsx(Ja,{className:"tooltip-arrow"})]})})]})}):e,qo=({trigger:e,children:t,open:s,onOpenChange:o,variant:a="default"})=>{const r=a==="tooltip"?"popover-content-tooltip":"popover-content";return n.jsxs(er,{open:s,onOpenChange:o,children:[n.jsx(tr,{asChild:!0,children:e}),n.jsx(nr,{children:n.jsx(sr,{className:r,sideOffset:5,collisionPadding:8,children:t})})]})},Cl="_statusBar_99qv7_7",Sl="_contentContainer_99qv7_19",jl="_statusPill_99qv7_29",Tl="_icon_99qv7_99",kl="_count_99qv7_109",Il="_popoverContent_99qv7_123",Pt={statusBar:Cl,contentContainer:Sl,statusPill:jl,icon:Tl,count:kl,popoverContent:Il},Js=({count:e,icon:t,status:s,variant:o,tooltipContent:a})=>{const r=e===0,i=n.jsxs("div",{className:Pt.statusPill,"data-status":s,"data-variant":o,"data-active":"false","data-empty":r?"true":void 0,children:[n.jsx("span",{className:`material-symbols-rounded ${Pt.icon}`,children:t}),n.jsx("span",{className:Pt.count,children:e})]});return a?n.jsx(qo,{trigger:i,variant:"tooltip",children:a}):i},Nl=({variant:e="default"})=>{const t=F(Cr),s=n.jsx("div",{className:Pt.popoverContent,children:n.jsxs("span",{children:[t.missed," Missed"]})}),o=n.jsx("div",{className:Pt.popoverContent,children:n.jsxs("span",{children:[t.due," Due"]})});return n.jsx(U.div,{className:Pt.statusBar,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",duration:.2,ease:[.32,.72,0,1]},"data-variant":e,children:n.jsxs("div",{className:Pt.contentContainer,"data-variant":e,children:[n.jsx(Js,{count:t.missed,icon:"notifications_active",status:"missed",variant:e,tooltipContent:s}),n.jsx(Js,{count:t.due,icon:"schedule",status:"due",variant:e,tooltipContent:o})]})})},Rl="_avatar_1totu_5",El={avatar:Rl},Al=({className:e})=>{const t=F(rn),s=F(Oo),o=K(bs);if(!t.user)return null;const{initials:a,displayName:r,username:i}=t.user,l=s[i]?.avatarHue,c=l!==void 0?l:Wo(i),u=Vo(c),f=()=>{o(!0)};return n.jsx("div",{className:`${El.avatar} ${e||""}`,"aria-label":`User: ${r}`,style:u?{backgroundColor:u}:void 0,onClick:f,role:"button",tabIndex:0,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),f())},children:a})},Ol="_header_1z0hn_5",Bl="_offlineBar_1z0hn_303",zl="_spinning_1z0hn_311",Ml="_headerContent_1z0hn_321",Hl="_leftActions_1z0hn_349",Ll="_centerContent_1z0hn_377",Dl="_statusBadgesWrapper_1z0hn_413",Pl="_offlinePillWrapper_1z0hn_427",$l="_rightActions_1z0hn_443",Fl="_offlineBarContent_1z0hn_685",Wl="_offlineContentRow_1z0hn_715",Vl="_offlineTimer_1z0hn_739",Gl="_queuedText_1z0hn_757",ql="_divider_1z0hn_801",Ul="_offlineAvatar_1z0hn_811",Yl="_offlineButton_1z0hn_825",Se={header:Ol,offlineBar:Bl,spinning:zl,headerContent:Ml,leftActions:Hl,centerContent:Ll,statusBadgesWrapper:Dl,offlinePillWrapper:Pl,rightActions:$l,offlineBarContent:Fl,offlineContentRow:Wl,offlineTimer:Vl,queuedText:Gl,divider:ql,offlineAvatar:Ul,offlineButton:Yl},Kl=e=>{const t=Math.floor(e/1e3),s=Math.floor(t/60),o=t%60;return`${s}:${o.toString().padStart(2,"0")}`},Xl=()=>{const[e,t]=oe(Ts),s=F(Bo),{status:o,toggleConnection:a}=Es(),r=F(Sr),i=F(Ao),l=F(De),[c,u]=S.useState("0:00"),f=bl(jr),m=S.useRef(null),d=S.useCallback(p=>{f.current=p,m.current=p},[f]);fn(m,{isEnabled:s>0&&o==="online"}),S.useEffect(()=>{if(o!=="offline"||!r){u("0:00");return}const p=()=>{u(Kl(Date.now()-r))};p();const h=setInterval(p,1e3);return()=>clearInterval(h)},[o,r]);const g=()=>{t(e==="sideMenu"?"dashboardTime":"sideMenu")},_=()=>{a()},w=o==="offline",x=o==="offline"||o==="syncing"||o==="connected"||o==="synced";return n.jsx("header",{className:Se.header,ref:d,"data-offline":w,"data-status":o,"data-header-style":l.headerStyle,"data-shadow":l.showChromeShadow,"aria-live":"polite",children:n.jsxs("div",{className:Se.headerContent,children:[n.jsx("div",{className:Se.leftActions,children:n.jsx(_l,{content:"Open navigation",children:n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:g,"aria-label":"Open navigation menu",className:w?Se.offlineButton:"",children:n.jsx("span",{className:"material-symbols-rounded",children:"menu"})})})}),n.jsxs("div",{className:Se.centerContent,children:[n.jsx(U.div,{className:Se.statusBadgesWrapper,animate:{y:w?-2:0},transition:{duration:.5,ease:[.16,1,.3,1]},children:n.jsx(Nl,{variant:w?"solid":"default"})}),n.jsx(qe,{children:x&&n.jsx(U.div,{className:Se.offlinePillWrapper,initial:{y:12,opacity:0,height:0},animate:{y:-6,opacity:1,height:"auto"},exit:{y:12,opacity:0,height:0},transition:{duration:.5,ease:[.16,1,.3,1]},children:n.jsx("button",{className:Se.offlineBar,onClick:o==="offline"?_:void 0,"aria-label":o==="offline"?"Offline: Click to sync":"Back online","data-status":o,children:n.jsx("div",{className:Se.offlineBarContent,children:n.jsx(qe,{mode:"wait",children:o==="syncing"?n.jsxs(U.div,{className:Se.offlineContentRow,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.4,ease:[.16,1,.3,1]}},exit:{opacity:0,transition:{duration:.05}},children:[n.jsx("span",{className:`material-symbols-rounded ${Se.spinning}`,style:{color:"var(--surface-fg-on-solid)",marginRight:"6px"},children:"sync"}),n.jsxs("span",{className:Se.offlineTimer,children:["Uploading ",i," checks"]})]},"syncing"):o==="connected"||o==="synced"?n.jsxs(U.div,{className:Se.offlineContentRow,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.4,ease:[.16,1,.3,1]}},exit:{opacity:0,transition:{duration:.05}},children:[n.jsx("span",{className:"material-symbols-rounded",style:{color:"var(--surface-fg-on-solid)",marginLeft:"-4px",marginRight:"2px"},children:"check"}),n.jsx("span",{className:Se.offlineTimer,children:o==="synced"?"Complete":"Connected"})]},"success-state"):n.jsxs(U.div,{className:Se.offlineContentRow,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.4,ease:[.16,1,.3,1]}},exit:{opacity:0,transition:{duration:.05}},children:[n.jsxs("span",{className:Se.offlineTimer,children:["Offline: ",c]}),n.jsx("svg",{width:"12",height:"1",viewBox:"0 0 12 1",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:Se.divider,children:n.jsx("rect",{width:"12",height:"1",fill:"currentColor"})}),n.jsxs("span",{className:Se.queuedText,children:[i," Queued"]})]},"offline-content")})})})},"offline-pill")})]}),n.jsx("div",{className:Se.rightActions,children:n.jsx(Al,{className:w?Se.offlineAvatar:""})})]})})},Vn=()=>{const e=K(Wn),t=K(Io),s=K(zo),o=F(js),a=F(De),{trigger:r}=Ue(),{play:i}=Rs();return{completeCheck:({checkId:c,statuses:u,notes:f,onSuccess:m})=>{const d=a.scanMode==="nfc"&&a.simpleSubmitEnabled;r("success"),i("success"),e({type:"CHECK_SET_COMPLETING",payload:{checkId:c}}),t(c);const g=d?0:1e3;a.scanMode==="nfc"&&!a.simpleSubmitEnabled&&s("scanning"),setTimeout(()=>{const _={checkId:c,statuses:u,notes:f,completionTime:new Date().toISOString()};e(o==="offline"?{type:"CHECK_SET_QUEUED",payload:_}:{type:"CHECK_COMPLETE",payload:_}),t(null),m?.()},g)}}},As=()=>{const[e,t]=oe(zo),[s,o]=oe(Tr),a=F(De),r=F(ks),i=F(ws),l=F(ct),c=K(ct),{trigger:u}=Ue(),{completeCheck:f}=Vn(),m=K(Is),d=K(Ns),g=S.useRef(null);S.useEffect(()=>()=>{g.current&&clearTimeout(g.current)},[]),S.useEffect(()=>{r.nfcBlocked?e!=="blocked"&&(u("warning"),t("blocked"),g.current&&clearTimeout(g.current)):r.nfcTurnedOff?e!=="hardwareOff"&&(u("warning"),t("hardwareOff"),g.current&&clearTimeout(g.current)):(e==="blocked"||e==="hardwareOff")&&t("idle")},[r.nfcBlocked,r.nfcTurnedOff,e,t,u]);const _=S.useCallback(()=>{e!=="idle"&&(g.current&&(clearTimeout(g.current),g.current=null),u("light"),t("idle"),o(null))},[e,t,o,u]),w=S.useCallback(()=>{if(e!=="scanning")return;if(r.nfcFails){u("warning"),t("readError");return}const I=i.find(T=>T.status!=="complete"&&T.type!=="supplemental");if(I&&a.simpleSubmitEnabled){if(I.status==="early"){d(I),m(!0),t("idle"),o(null);return}const T=I.residents.reduce((O,E)=>(O[E.id]="Awake",O),{});f({checkId:I.id,statuses:T,notes:"",onSuccess:()=>{}})}t("success"),o(null),u("success")},[e,r.nfcFails,t,o,u,i,a.simpleSubmitEnabled,f,m,d]),x=S.useCallback(()=>{if(!(e!=="idle"&&e!=="readError"&&e!=="timeout"&&e!=="blocked"&&e!=="hardwareOff"&&e!=="success")){if(r.nfcBlocked){u("warning"),t("blocked");return}if(r.nfcTurnedOff){u("warning"),t("hardwareOff");return}u("light"),t("scanning"),o(Date.now()),a.nfcTimeoutEnabled&&(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{t("timeout"),o(null),u("warning")},a.nfcScanTimeout))}},[e,r,a.nfcScanTimeout,a.nfcTimeoutEnabled,t,o,u]),p=S.useCallback(()=>{if(r.nfcBlocked){u("warning"),t("blocked");return}if(r.nfcTurnedOff){u("warning"),t("hardwareOff");return}u("light"),t("scanning"),o(Date.now()),a.nfcTimeoutEnabled&&(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{t("timeout"),o(null),u("warning")},a.nfcScanTimeout))},[r,a.nfcTimeoutEnabled,a.nfcScanTimeout,t,o,u]),h=S.useCallback(()=>{e==="timeout"&&t("idle")},[e,t]),v=S.useCallback(()=>{w()},[w]),C=S.useCallback(()=>{if(e==="formComplete"){p();return}if(e==="success")if(a.simpleSubmitEnabled)p();else{if(l.view==="form"){t("idle");return}const I=i.find(T=>T.status!=="complete"&&T.type!=="supplemental");t("idle"),I&&c({view:"form",type:"scheduled",method:"scan",checkId:I.id,roomName:I.residents[0].location,residents:I.residents,specialClassifications:I.specialClassifications})}},[e,a.simpleSubmitEnabled,t,p,i,c,l.view]),y=S.useCallback(()=>{if(!s||e!=="scanning")return a.nfcScanTimeout;const I=Date.now()-s;return Math.max(0,a.nfcScanTimeout-I)},[e,s,a.nfcScanTimeout]),j=i.find(I=>I.status!=="complete"&&I.type!=="supplemental")?.residents[0]?.location||"Room";return{scanState:e,startScan:x,stopScan:_,resetFromTimeout:h,simulateTagRead:v,finalizeSuccess:C,getRemainingTime:y,targetRoom:j,config:{timeout:a.nfcScanTimeout,timeoutEnabled:a.nfcTimeoutEnabled,showCountdown:a.nfcShowCountdown}}},ds={ringCount:15,conveyorDuration:40,minRadius:8,maxRadius:80,baseOpacity:.3,fadeInPercent:.2,fadeOutPercent:.3,baseStrokeWidth:2,shimmerPeriod:4,shimmerDuration:1,shimmerOpacityBoost:.55,shimmerStrokeBoost:1};function Zl(e){const{minRadius:t,maxRadius:s,baseOpacity:o,fadeInPercent:a,fadeOutPercent:r,baseStrokeWidth:i}=e,l=o*.3;return[{r:t,opacity:0,strokeWidth:i,offset:0},{r:t+(s-t)*a,opacity:o,strokeWidth:i,offset:a},{r:t+(s-t)*(1-r),opacity:l,strokeWidth:i,offset:1-r},{r:s,opacity:0,strokeWidth:i,offset:1}]}function Ql(e){return[{opacity:0,offset:0},{opacity:e,offset:.3},{opacity:0,offset:1}]}function Jl(e){return[{strokeWidth:0,offset:0},{strokeWidth:e,offset:.3},{strokeWidth:0,offset:1}]}function ec(e,t,s){const o=S.useRef([]),a=S.useRef(null),r=S.useRef(0),i=S.useCallback(()=>{if(!e.current)return;const l=e.current.querySelectorAll("circle.ring"),u=performance.now()-r.current,f=t.conveyorDuration*1e3;l.forEach((m,d)=>{const g=o.current[d];g?.shimmerOpacityAnim&&g.shimmerOpacityAnim.cancel(),g?.shimmerStrokeAnim&&g.shimmerStrokeAnim.cancel();const _=d/t.ringCount,w=(u/f+_)%1,x=w*t.shimmerDuration*1e3,p=1-t.fadeOutPercent;let h=1;w>p&&(h=1-(w-p)/t.fadeOutPercent),w<t.fadeInPercent&&(h=w/t.fadeInPercent);const v=t.shimmerOpacityBoost*h,C=t.shimmerStrokeBoost*h,y=m.animate(Ql(v),{duration:800,easing:"ease-in-out",delay:x,fill:"forwards",composite:"add"}),b=m.animate(Jl(C),{duration:800,easing:"ease-in-out",delay:x,fill:"forwards",composite:"add"});o.current[d]&&(o.current[d].shimmerOpacityAnim=y,o.current[d].shimmerStrokeAnim=b)}),console.log("[RingAnimation] Shimmer wave triggered at elapsed:",u)},[e,t]);S.useLayoutEffect(()=>{if(!e.current||!s)return;const c=e.current.querySelectorAll("circle.ring");return r.current=Number(document.timeline?.currentTime??performance.now()),console.log("[RingAnimation] Mount time:",r.current),o.current=[],c.forEach((u,f)=>{const m=f/t.ringCount,d=-m*t.conveyorDuration*1e3,g=u.animate(Zl(t),{duration:t.conveyorDuration*1e3,iterations:1/0,easing:"linear"});g.currentTime=-d,o.current.push({conveyorAnim:g,shimmerOpacityAnim:null,shimmerStrokeAnim:null}),console.log(`[RingAnimation] Ring ${f} conveyor started, phase offset: ${m}`)}),a.current=setInterval(()=>{i()},t.shimmerPeriod*1e3),i(),()=>{o.current.forEach(u=>{u.conveyorAnim?.cancel(),u.shimmerOpacityAnim?.cancel(),u.shimmerStrokeAnim?.cancel()}),o.current=[],a.current&&(clearInterval(a.current),a.current=null),console.log("[RingAnimation] Cleanup complete")}},[e,s,t,i])}function tc(e){const t=[],{ringCount:s,minRadius:o,maxRadius:a}=e;for(let r=0;r<s;r++){const i=r/s;t.push(o+(a-o)*i)}return t}const nc="_nfcWrapper_3qo7z_5",sc="_buttonContainer_3qo7z_27",oc="_startButton_3qo7z_49",ac="_timeoutButton_3qo7z_51",rc="_visualizerWrapper_3qo7z_137",ic="_visualizerContainer_3qo7z_179",lc="_feedbackWrapper_3qo7z_195",cc="_feedbackBackground_3qo7z_217",uc="_feedbackBackgroundSuccess_3qo7z_231",dc="_feedbackBackgroundError_3qo7z_239",mc="_errorToast_3qo7z_249",hc="_errorToastIcon_3qo7z_275",fc="_errorToastContent_3qo7z_287",pc="_errorToastPrimary_3qo7z_301",gc="_errorToastSecondary_3qo7z_315",vc="_feedbackTextContainer_3qo7z_333",xc="_primaryText_3qo7z_351",yc="_secondaryText_3qo7z_367",wc="_ringsSvg_3qo7z_383",bc="_scanningLabel_3qo7z_407",_c="_scanningLabelSmall_3qo7z_583",Cc="_waveBarsContainer_3qo7z_591",Sc="_waveTopContainer_3qo7z_593",jc="_waveBarsSvg_3qo7z_631",Tc="_waveTopSvg_3qo7z_705",kc="_nfcIconContainer_3qo7z_777",Ic="_nfcIconSvg_3qo7z_799",Nc="_nfcIconLabel_3qo7z_817",Rc="_nfcIconDot_3qo7z_849",te={nfcWrapper:nc,buttonContainer:sc,startButton:oc,timeoutButton:ac,visualizerWrapper:rc,visualizerContainer:ic,feedbackWrapper:lc,feedbackBackground:cc,feedbackBackgroundSuccess:uc,feedbackBackgroundError:dc,errorToast:mc,errorToastIcon:hc,errorToastContent:fc,errorToastPrimary:pc,errorToastSecondary:gc,feedbackTextContainer:vc,primaryText:xc,secondaryText:yc,ringsSvg:wc,scanningLabel:bc,scanningLabelSmall:_c,waveBarsContainer:Cc,waveTopContainer:Sc,waveBarsSvg:jc,waveTopSvg:Tc,nfcIconContainer:kc,nfcIconSvg:Ic,nfcIconLabel:Nc,nfcIconDot:Rc},Uo=({isEnabled:e,params:t})=>{const s=S.useRef(null),o=S.useMemo(()=>({...ds,...t}),[t]),a=S.useMemo(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches,[]),r=tc(o);ec(s,o,e&&!a);const i="var(--surface-border-info)";return n.jsx("svg",{ref:s,className:te.ringsSvg,viewBox:"0 0 200 200",children:a?r.map((l,c)=>n.jsx("circle",{cx:"100",cy:"100",r:l,fill:"none",stroke:i,strokeWidth:o.baseStrokeWidth,opacity:o.baseOpacity,vectorEffect:"non-scaling-stroke"},`static-ring-${c}`)):Array.from({length:o.ringCount},(l,c)=>n.jsx("circle",{className:"ring",cx:"100",cy:"100",r:o.minRadius,fill:"none",stroke:i,strokeWidth:o.baseStrokeWidth,opacity:0,vectorEffect:"non-scaling-stroke"},`ring-${c}`))})},Gn={pathCount:4,pulseInterval:2e3,pulseDuration:1400,pathStagger:300,restOpacity:.15,peakOpacity:.35};function Ec(e,t){return[{opacity:e,offset:0},{opacity:t,offset:.3},{opacity:e,offset:1}]}function Os(e,t=Gn,s){const o=S.useRef([]),a=S.useRef(null),r=S.useCallback(()=>{if(!e.current)return;e.current.querySelectorAll("path.wave-path").forEach((l,c)=>{const f=c%t.pathCount*t.pathStagger,m=l.animate(Ec(t.restOpacity,t.peakOpacity),{duration:t.pulseDuration,easing:"ease-out",delay:f,fill:"forwards"});o.current.push(m),m.onfinish=()=>{const d=o.current.indexOf(m);d>-1&&o.current.splice(d,1)}})},[e,t]);S.useLayoutEffect(()=>{if(!(!e.current||!s||window.matchMedia("(prefers-reduced-motion: reduce)").matches))return r(),a.current=setInterval(()=>{r()},t.pulseInterval),()=>{o.current.forEach(l=>l.cancel()),o.current=[],a.current&&(clearInterval(a.current),a.current=null)}},[e,s,t,r])}const Ac=({isEnabled:e,params:t})=>{const s=S.useRef(null),o=S.useMemo(()=>({...Gn,...t}),[t]);Os(s,o,e);const a=["M22.4216 13.8162c-.6032-.6032-1.5936-.6091-2.0883.0857a9.2659 9.2659 0 0 0-1.0121 8.9185 9.267 9.267 0 0 0 1.0121 1.8278c.4947.6948 1.4851.6889 2.0883.0858.6031-.6032.5822-1.575.1471-2.3086a6.1749 6.1749 0 0 1-.3938-5.5137 6.1749 6.1749 0 0 1 .3938-.787c.4351-.7336.456-1.7054-.1471-2.3085Z","M18.0542 9.2707c-.603-.603-1.5875-.6074-2.1273.0528a15.4426 15.4426 0 0 0-3.487 9.7737 15.4403 15.4403 0 0 0 3.487 9.7736c.5398.6602 1.5243.6558 2.1273.0528.603-.603.5941-1.5755.071-2.249a12.3539 12.3539 0 0 1-2.5972-7.5774 12.3543 12.3543 0 0 1 2.5972-7.5775c.5231-.6735.532-1.646-.071-2.249Z","M13.6661 4.8835c-.5909-.591-1.5535-.5943-2.1017.0366a21.617 21.617 0 0 0 0 28.3579c.5482.6308 1.5108.6275 2.1017.0366.591-.5909.5856-1.5453.0447-2.1823A18.5902 18.5902 0 0 1 9.291 19.099a18.59 18.59 0 0 1 4.4198-12.0332c.5409-.637.5463-1.5914-.0447-2.1823Z","M9.2323.4496c-.603-.603-1.5842-.6058-2.1528.0298a27.7931 27.7931 0 0 0 0 37.0625c.5686.6355 1.5498.6328 2.1528.0298s.599-1.5776.0348-2.2171a24.7051 24.7051 0 0 1 0-32.688c.5642-.6394.5682-1.614-.0348-2.217Z"],r=i=>n.jsx("svg",{className:te.waveBarsSvg,"data-side":i,viewBox:"0 0 23 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.map((l,c)=>n.jsx("path",{className:"wave-path",d:l,style:{opacity:o.restOpacity}},`${i}-path-${c}`))});return n.jsxs("div",{ref:s,className:te.waveBarsContainer,children:[r("left"),r("right")]})},Oc=({isEnabled:e,params:t})=>{const s=S.useRef(null),o=S.useMemo(()=>({...Gn,...t}),[t]);Os(s,o,e);const a=["M22.4216 13.8162c-.6032-.6032-1.5936-.6091-2.0883.0857a9.2659 9.2659 0 0 0-1.0121 8.9185 9.267 9.267 0 0 0 1.0121 1.8278c.4947.6948 1.4851.6889 2.0883.0858.6031-.6032.5822-1.575.1471-2.3086a6.1749 6.1749 0 0 1-.3938-5.5137 6.1749 6.1749 0 0 1 .3938-.787c.4351-.7336.456-1.7054-.1471-2.3085Z","M18.0542 9.2707c-.603-.603-1.5875-.6074-2.1273.0528a15.4426 15.4426 0 0 0-3.487 9.7737 15.4403 15.4403 0 0 0 3.487 9.7736c.5398.6602 1.5243.6558 2.1273.0528.603-.603.5941-1.5755.071-2.249a12.3539 12.3539 0 0 1-2.5972-7.5774 12.3543 12.3543 0 0 1 2.5972-7.5775c.5231-.6735.532-1.646-.071-2.249Z","M13.6661 4.8835c-.5909-.591-1.5535-.5943-2.1017.0366a21.617 21.617 0 0 0 0 28.3579c.5482.6308 1.5108.6275 2.1017.0366.591-.5909.5856-1.5453.0447-2.1823A18.5902 18.5902 0 0 1 9.291 19.099a18.59 18.59 0 0 1 4.4198-12.0332c.5409-.637.5463-1.5914-.0447-2.1823Z","M9.2323.4496c-.603-.603-1.5842-.6058-2.1528.0298a27.7931 27.7931 0 0 0 0 37.0625c.5686.6355 1.5498.6328 2.1528.0298s.599-1.5776.0348-2.2171a24.7051 24.7051 0 0 1 0-32.688c.5642-.6394.5682-1.614-.0348-2.217Z"];return n.jsxs("div",{ref:s,className:te.waveTopContainer,children:[n.jsx("svg",{className:te.waveTopSvg,viewBox:"0 0 23 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.map((r,i)=>n.jsx("path",{className:"wave-path",d:r,style:{opacity:o.restOpacity}},`top-path-${i}`))}),n.jsx(U.div,{className:te.scanningLabelSmall,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},children:"Hold near tag"})]})},Bc=({isEnabled:e})=>{const t=S.useRef(null),s=S.useRef([]),o=S.useRef(null),a=S.useCallback(()=>{if(!t.current)return;const i=t.current.querySelector(".pulse-circle"),l=t.current.querySelectorAll(".pulse-inner"),c=t.current.querySelectorAll(".pulse-outer"),u=.67,f=1,m=800;if(i){const d=i.animate([{opacity:u},{opacity:f},{opacity:u}],{duration:m,easing:"ease-in-out",fill:"forwards"});s.current.push(d)}l.forEach(d=>{const g=d.animate([{opacity:u},{opacity:f},{opacity:u}],{duration:m,delay:m*.6,easing:"ease-in-out",fill:"forwards"});s.current.push(g)}),c.forEach(d=>{const g=d.animate([{opacity:u},{opacity:f},{opacity:u}],{duration:m,delay:m*1.2,easing:"ease-in-out",fill:"forwards"});s.current.push(g)})},[]);if(S.useLayoutEffect(()=>{if(!e||!t.current||window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;a();const i=2400;return o.current=setInterval(a,i),()=>{s.current.forEach(l=>l.cancel()),s.current=[],o.current&&(clearInterval(o.current),o.current=null)}},[e,a]),!e)return null;const r=.67;return n.jsxs("div",{ref:t,className:te.nfcIconContainer,children:[n.jsxs("svg",{className:te.nfcIconSvg,xmlns:"http://www.w3.org/2000/svg",width:"27",height:"18",viewBox:"0 0 27 18",fill:"none",children:[n.jsx("path",{className:"pulse-outer",fill:"currentColor",style:{opacity:r},d:"M2.433 8.9334c0 1.2888.2 2.5111.6 3.6666.4222 1.1333 1.0111 2.1556 1.7667 3.0667.2222.2889.3333.6.3333.9333 0 .3333-.1222.6222-.3667.8667-.2444.2444-.5444.3666-.9.3666-.3555-.0222-.6444-.1777-.8666-.4666-.9556-1.1556-1.7-2.4445-2.2334-3.8667-.511-1.4222-.7666-2.9444-.7666-4.5666 0-1.6223.2555-3.1445.7666-4.5667C1.2997 2.9222 2.0441 1.6334 2.9997.5c.2222-.2889.511-.4333.8666-.4333.3556-.0222.6556.0889.9.3333.2445.2445.3667.5333.3667.8667 0 .3333-.1111.6444-.3333.9333-.7556.9333-1.3445 1.9667-1.7667 3.1-.4 1.1334-.6 2.3445-.6 3.6334Z"}),n.jsx("path",{className:"pulse-inner",fill:"currentColor",style:{opacity:r},d:"M7.7663 8.9334c0 .5555.0778 1.0888.2334 1.5999.1555.4889.3777.9445.6666 1.3667.1778.2889.2556.6111.2334.9667 0 .3333-.1222.6222-.3667.8666-.2444.2445-.5333.3667-.8667.3667-.3333-.0222-.6-.1667-.8-.4333-.4889-.6667-.8666-1.4-1.1333-2.2a8.1612 8.1612 0 0 1-.4-2.5333c0-.889.1333-1.7334.4-2.5334.2667-.8.6444-1.5333 1.1333-2.2.2-.2667.4667-.4.8-.4.3556-.0222.6556.0889.9.3334.2445.2444.3667.5444.3667.9.0222.3333-.0667.6444-.2667.9333-.2889.4222-.511.8889-.6666 1.4-.1556.4889-.2334 1.011-.2334 1.5667Z"}),n.jsx("path",{className:"pulse-circle",fill:"currentColor",style:{opacity:r},d:"M13.333 11.6c-.7333 0-1.3667-.2555-1.9-.7667-.5111-.5333-.7667-1.1666-.7667-1.9 0-.7333.2556-1.3555.7667-1.8666.5333-.5333 1.1667-.8 1.9-.8.7333 0 1.3556.2667 1.8667.8.5333.511.8 1.1333.8 1.8667 0 .7333-.2667 1.3666-.8 1.8999-.5111.5112-1.1334.7667-1.8667.7667Z"}),n.jsx("path",{className:"pulse-inner",fill:"currentColor",style:{opacity:r},d:"M18.8997 8.9334c0-.5556-.0778-1.0778-.2334-1.5667-.1555-.5111-.3777-.9778-.6666-1.4-.1778-.289-.2667-.6-.2667-.9333.0222-.3556.1556-.6556.4-.9.2445-.2445.5333-.3556.8667-.3334.3333 0 .6.1334.8.4.4889.6667.8666 1.4 1.1333 2.2.2667.8.4 1.6445.4 2.5334a8.1603 8.1603 0 0 1-.4 2.5333c-.2667.8-.6444 1.5222-1.1333 2.1666-.2.2889-.4778.4334-.8334.4334-.3333 0-.6222-.1222-.8666-.3667-.2445-.2444-.3778-.5333-.4-.8667 0-.3333.1-.6444.3-.9333a5.196 5.196 0 0 0 .6666-1.3667c.1556-.5111.2334-1.0444.2334-1.6Z"}),n.jsx("path",{className:"pulse-outer",fill:"currentColor",style:{opacity:r},d:"M24.233 8.9334c0-1.289-.2111-2.5-.6333-3.6334-.4-1.1555-.9778-2.1889-1.7334-3.1-.2222-.2889-.3444-.6-.3666-.9333 0-.3556.1222-.6556.3666-.9.2445-.2445.5445-.3556.9-.3334.3778.0223.6778.1778.9.4667.9556 1.1334 1.6889 2.4222 2.2 3.8667.5334 1.4222.8 2.9444.8 4.5667 0 1.6222-.2666 3.1444-.8 4.5666-.5111 1.4222-1.2444 2.7111-2.2 3.8667-.2222.2889-.5111.4444-.8666.4666-.3556 0-.6556-.1222-.9-.3666-.2445-.2445-.3667-.5334-.3667-.8667 0-.3333.1111-.6444.3333-.9333a10.3843 10.3843 0 0 0 1.7334-3.1c.4222-1.1334.6333-2.3445.6333-3.6334Z"})]}),n.jsx(U.span,{className:te.nfcIconLabel,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},children:"Hold near tag"})]})},zc=({isEnabled:e,params:t})=>{const s=S.useRef(null),o=S.useMemo(()=>({...Gn,pathCount:3,restOpacity:.5,peakOpacity:1,...t}),[t]);return Os(s,o,e),e?n.jsxs("div",{ref:s,className:te.nfcIconContainer,children:[n.jsxs("svg",{className:te.nfcIconSvg,xmlns:"http://www.w3.org/2000/svg",width:"28",height:"17",viewBox:"-1.5 0 28 17",fill:"none",children:[n.jsxs("g",{transform:"translate(-1.5, 0)",children:[n.jsx("path",{className:"wave-path",fill:"currentColor",style:{opacity:o.restOpacity},d:"M9.8837 5.4232c-.369-.349-.9749-.3524-1.2775.0497a5.283 5.283 0 0 0-.6191 1.0575 5.1099 5.1099 0 0 0-.4314 2.0515 5.11 5.11 0 0 0 .4314 2.0514c.164.3744.3718.729.6191 1.0576.3026.402.9085.3986 1.2775.0496.3689-.349.3562-.9113.09-1.3358a3.498 3.498 0 0 1-.241-.4553 3.4063 3.4063 0 0 1-.2875-1.3675c0-.4693.0977-.934.2876-1.3675a3.5009 3.5009 0 0 1 .2409-.4554c.2662-.4245.2789-.9868-.09-1.3358Z"}),n.jsx("path",{className:"wave-path",fill:"currentColor",style:{opacity:o.restOpacity},d:"M7.212 2.7931c-.3689-.3489-.9711-.3514-1.3013.0306-.5833.6747-1.0602 1.428-1.4141 2.2362-.4747 1.084-.719 2.2458-.719 3.419 0 1.1733.2443 2.3351.719 3.4191.354.8082.8308 1.5614 1.414 2.2362.3303.382.9325.3794 1.3014.0305.3689-.3489.3635-.9116.0434-1.3013a7.0672 7.0672 0 0 1-1.0135-1.6492c-.3798-.8672-.5752-1.7966-.5752-2.7353 0-.9386.1954-1.868.5752-2.7352a7.0666 7.0666 0 0 1 1.0135-1.6493c.32-.3897.3255-.9524-.0434-1.3013Z"}),n.jsx("path",{className:"wave-path",fill:"currentColor",style:{opacity:o.restOpacity},d:"M4.5277.2546c-.3615-.342-.9503-.3439-1.2857.0211C2.3083 1.2921 1.553 2.446 1.0066 3.6934.342 5.2109 0 6.8374 0 8.48c0 1.6426.342 3.2691 1.0066 4.7867.5463 1.2475 1.3017 2.4013 2.2354 3.4176.3354.365.9242.3631 1.2857.0212.3615-.342.3582-.8942.0273-1.2628-.7641-.8512-1.3848-1.8112-1.838-2.8462-.5715-1.3051-.8657-2.7039-.8657-4.1165 0-1.4126.2942-2.8114.8657-4.1165.4532-1.035 1.0739-1.995 1.838-2.8462.331-.3686.3342-.9208-.0273-1.2627Z"})]}),n.jsx("circle",{cx:"12.168",cy:"8.429",r:"2",fill:"currentColor",className:te.nfcIconDot}),n.jsxs("g",{transform:"translate(1.5, 0)",children:[n.jsx("path",{className:"wave-path",fill:"currentColor",style:{opacity:o.restOpacity},d:"M14.4513 5.4232c.3689-.349.9748-.3524 1.2774.0497.2473.3285.4552.6832.6192 1.0575a5.11 5.11 0 0 1 .4314 2.0515c0 .704-.1466 1.401-.4314 2.0514a5.2863 5.2863 0 0 1-.6192 1.0576c-.3026.402-.9085.3986-1.2774.0496-.3689-.349-.3562-.9113-.09-1.3358.0914-.1458.172-.298.2409-.4553a3.4055 3.4055 0 0 0 .2876-1.3675c0-.4693-.0977-.934-.2876-1.3675a3.5055 3.5055 0 0 0-.2409-.4554c-.2662-.4245-.2789-.9868.09-1.3358Z"}),n.jsx("path",{className:"wave-path",fill:"currentColor",style:{opacity:o.restOpacity},d:"M17.1229 2.7931c.3689-.3489.9712-.3514 1.3014.0306.5833.6747 1.0601 1.428 1.4141 2.2362.4747 1.084.719 2.2458.719 3.419 0 1.1733-.2443 2.3351-.719 3.4191-.354.8082-.8308 1.5614-1.4141 2.2362-.3302.382-.9325.3794-1.3014.0305-.3688-.3489-.3634-.9116-.0434-1.3013a7.0677 7.0677 0 0 0 1.0136-1.6492c.3797-.8672.5752-1.7966.5752-2.7353 0-.9386-.1955-1.868-.5752-2.7352a7.0668 7.0668 0 0 0-1.0136-1.6493c-.32-.3897-.3254-.9524.0434-1.3013Z"}),n.jsx("path",{className:"wave-path",fill:"currentColor",style:{opacity:o.restOpacity},d:"M19.8073.2546c.3615-.342.9503-.3439 1.2856.0211.9337 1.0164 1.6892 2.1702 2.2355 3.4177.6645 1.5175 1.0066 3.144 1.0066 4.7866 0 1.6426-.3421 3.2691-1.0066 4.7867-.5463 1.2475-1.3018 2.4013-2.2355 3.4176-.3353.365-.9241.3631-1.2856.0212-.3615-.342-.3583-.8942-.0274-1.2628.7642-.8512 1.3848-1.8112 1.8381-2.8462.5715-1.3051.8656-2.7039.8656-4.1165 0-1.4126-.2941-2.8114-.8656-4.1165-.4533-1.035-1.0739-1.995-1.8381-2.8462-.3309-.3686-.3341-.9208.0274-1.2627Z"})]})]}),n.jsx(U.span,{className:te.nfcIconLabel,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},children:"Hold near tag"})]}):null},Mc=({onClick:e})=>n.jsxs("button",{className:te.startButton,onClick:e,children:[n.jsx("span",{className:"material-symbols-rounded",children:"sensors"}),n.jsx("span",{children:"Start Scan"})]}),Hc=({type:e})=>{const t={success:"var(--surface-fg-success-primary)",alert:"var(--surface-fg-alert-primary)",warning:"var(--surface-fg-warning-primary)",info:"var(--surface-fg-info-primary)"}[e],s={success:"M 97 100 L 99 102 L 103 98",alert:"M 100 96.9 L 100 100.1 M 100 103 L 100 103.1",warning:"M 100 96.9 L 100 100.1 M 100 103 L 100 103.1",info:"M 100 104 L 100 99 M 100 96 L 100 96.1"}[e];return n.jsx("svg",{className:te.ringsSvg,viewBox:"0 0 200 200",children:n.jsxs(U.g,{children:[n.jsx(U.circle,{cx:"100",cy:"100",initial:{r:20,stroke:"var(--surface-border-primary)",opacity:.5},animate:{r:5.5,stroke:t,opacity:1,strokeWidth:3},transition:{duration:.4,ease:[.16,1,.3,1]},fill:"none",style:{vectorEffect:"non-scaling-stroke"}}),n.jsx(U.path,{d:s,fill:"none",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.4,delay:.1,ease:"easeOut"}})]})})},eo=({primary:e,secondary:t})=>n.jsxs("div",{className:te.feedbackTextContainer,children:[n.jsx(U.div,{className:te.primaryText,initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.25,delay:.7},children:e}),t&&n.jsx(U.div,{className:te.secondaryText,initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.25,delay:.7},children:t})]}),Lc=()=>{const{scanState:e,finalizeSuccess:t,targetRoom:s,startScan:o}=As(),a=F(Fn),r=F(De),i=S.useRef(s);S.useEffect(()=>{e==="success"&&(i.current=s)},[e,s]);const l=!r.simpleSubmitEnabled,c=S.useRef(t);S.useEffect(()=>{c.current=t},[t]),S.useEffect(()=>{if(e==="success"){const y=setTimeout(()=>c.current(),l?800:2e3);return()=>clearTimeout(y)}if(e==="formComplete"){const C=setTimeout(()=>c.current(),1700);return()=>clearTimeout(C)}},[e]);const u=e==="scanning",m=F(Mo)?a.feat_scan_animation:"E",d=m==="B"&&u,g=m==="C"&&u,_=m==="D"&&u,w=m==="E"&&u,x=m==="F"&&u,p=(C,y,b="success")=>{const j=b==="success"?te.feedbackBackgroundSuccess:te.feedbackBackgroundError;return n.jsxs(U.div,{className:te.feedbackWrapper,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.98,y:-4,transition:{duration:l?0:.2,ease:"easeIn"}},children:[n.jsx("div",{className:`${te.feedbackBackground} ${j}`}),n.jsx(U.div,{animate:l&&!C?{opacity:1}:{opacity:[1,1,0]},transition:l&&!C?{}:{times:[0,.6,1],duration:1,ease:"easeInOut"},children:n.jsx(Hc,{type:b})}),n.jsx(eo,{primary:C,secondary:y})]},`feedback-${b}`)},h=()=>n.jsxs(U.div,{className:te.feedbackWrapper,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.98,y:-4,transition:{duration:.2,ease:"easeIn"}},children:[n.jsx("div",{className:`${te.feedbackBackground} ${te.feedbackBackgroundSuccess}`}),n.jsx(eo,{primary:`${i.current} Complete`})]},"formComplete"),v=(C,y,b)=>n.jsxs(U.div,{className:te.errorToast,initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-4,transition:{duration:.2,ease:"easeIn"}},children:[n.jsx("span",{className:`material-symbols-rounded ${te.errorToastIcon}`,children:C}),n.jsxs("div",{className:te.errorToastContent,children:[n.jsx("span",{className:te.errorToastPrimary,children:y}),n.jsx("span",{className:te.errorToastSecondary,children:b})]})]},`errorToast-${C}`);return n.jsxs("div",{className:te.visualizerContainer,onClick:e==="readError"?o:void 0,style:{cursor:e==="readError"?"pointer":"default"},children:[d&&n.jsx(Uo,{isEnabled:!0}),g&&n.jsx(Ac,{isEnabled:!0}),_&&n.jsx(Oc,{isEnabled:!0}),w&&n.jsx(Bc,{isEnabled:!0}),x&&n.jsx(zc,{isEnabled:!0}),n.jsxs(qe,{mode:"wait",children:[e==="scanning"&&!_&&!w&&!x&&n.jsx(U.div,{className:te.scanningLabel,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},children:"Hold near tag"},"scanning"),e==="success"&&p(l?"":`${i.current} Complete`,void 0,"success"),e==="formComplete"&&h(),e==="readError"&&p("Tag not read","Tap to retry","alert"),e==="blocked"&&v("block","NFC Blocked","Allow in app settings"),e==="hardwareOff"&&v("sensors_off","NFC is turned off","Open NFC Settings to turn on")]})]})},Dc=()=>{const{scanState:e,startScan:t,stopScan:s,simulateTagRead:o}=As();return n.jsx("div",{className:te.nfcWrapper,children:n.jsx($r,{transition:{type:"tween",ease:[.16,1,.3,1],duration:.4},children:n.jsxs(qe,{mode:"wait",children:[e==="idle"&&n.jsx(U.div,{className:te.buttonContainer,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:n.jsx(Mc,{onClick:t})},"idle"),e!=="idle"&&e!=="timeout"&&n.jsx(U.div,{className:te.visualizerWrapper,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e==="scanning"?o:void 0,style:{cursor:e==="scanning"?"pointer":"default",pointerEvents:"auto"},children:n.jsx(Lc,{})},"visualizer"),e==="timeout"&&n.jsx(U.div,{className:te.buttonContainer,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:n.jsxs("button",{className:te.timeoutButton,onClick:()=>{s(),t()},children:[n.jsx("span",{className:"material-symbols-rounded",children:"timer_off"}),n.jsx("span",{children:"Timed out  Tap to retry"})]})},"timeout")]})})})},Pc="_footer_kt2wg_5",$c="_scanButton_kt2wg_357",Fc="_viewOnlyBar_kt2wg_445",Qn={footer:Pc,scanButton:$c,viewOnlyBar:Fc},Wc=()=>{const e=K(ct),t=F(De),s=F(Bo),o=S.useRef(null),{trigger:a}=Ue();fn(o,{isEnabled:s>0}),S.useLayoutEffect(()=>{const i=()=>{if(o.current){const c=o.current.offsetHeight;document.documentElement.style.setProperty("--footer-height",`${c}px`)}};i();const l=new ResizeObserver(i);return o.current&&l.observe(o.current),()=>{l.disconnect(),document.documentElement.style.removeProperty("--footer-height")}},[t.scanMode]);const r=()=>{a("heavy"),e({view:"scanning",isManualSelectionOpen:!1})};return n.jsx("footer",{className:Qn.footer,ref:o,"data-footer-style":t.headerStyle,"data-shadow":t.showChromeShadow,"data-view-only":t.isViewOnlyMode,children:t.isViewOnlyMode?n.jsx(qo,{trigger:n.jsx("div",{className:Qn.viewOnlyBar,children:n.jsx("span",{children:"Read only"})}),variant:"tooltip",children:n.jsx("p",{style:{margin:0,fontWeight:500,fontSize:"var(--font-size-sm)"},children:"You do not have permissions to perform room checks"})}):t.scanMode==="nfc"?n.jsx(Dc,{}):n.jsxs(ae,{variant:"primary",className:Qn.scanButton,onClick:r,children:[n.jsx("span",{className:"material-symbols-rounded",children:"qr_code_scanner"}),n.jsx("span",{children:"Scan"})]})})},Vc="_fab_1h0bl_5",Gc={fab:Vc},qc=()=>{const e=F(Ho),{status:t,toggleConnection:s}=Es(),o=()=>{s()};return n.jsx(qe,{children:e&&n.jsx(U.button,{className:Gc.fab,"data-status":t,onClick:o,initial:{scale:0,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:0,opacity:0,y:20},transition:{type:"spring",stiffness:400,damping:25},"aria-label":`Toggle connectivity: currently ${t}`,children:n.jsx("span",{className:"material-symbols-rounded",children:t==="online"?"cloud":"cloud_off"})})})},Uc="_scanView_ax5b5_65",Yc="_header_ax5b5_87",Kc="_preScanAlert_ax5b5_127",Xc="_alertSeparator_ax5b5_197",Zc="_cameraContainer_ax5b5_211",Qc="_viewfinder_ax5b5_233",Jc="_statusOverlay_ax5b5_291",eu="_processingState_ax5b5_325",tu="_spinner_ax5b5_333",nu="_successState_ax5b5_345",su="_failState_ax5b5_353",ou="_helperText_ax5b5_363",au="_footer_ax5b5_373",ru="_devControlsContainer_ax5b5_421",iu="_devControlsHeader_ax5b5_441",lu="_devControls_ax5b5_421",je={scanView:Uc,header:Yc,preScanAlert:Kc,alertSeparator:Xc,cameraContainer:Zc,viewfinder:Qc,statusOverlay:Jc,processingState:eu,spinner:tu,successState:nu,failState:su,helperText:ou,footer:au,devControlsContainer:ru,devControlsHeader:iu,devControls:lu},cu=()=>{const[e,t]=oe(ct),s=F(Lo),o=F(De),a=F(ws),r=F(ks),i=K(hn),{trigger:l}=Ue(),{play:c}=Rs(),{completeCheck:u}=Vn(),f=K(Is),m=K(Ns),[d,g]=S.useState("scanning"),[_,w]=S.useState(null),x=S.useRef(null),p=S.useRef(0);S.useEffect(()=>{if(e.view==="scanning"&&g("scanning"),e.view==="scanning"&&e.targetCheckId){const O=s.find(E=>E.id===e.targetCheckId)?.specialClassifications?.[0];if(O){const E=Do.find(D=>D.id===O.residentId);E&&w({residentName:E.name,classificationType:O.type})}}else w(null)},[e,s]);const h=S.useCallback(()=>{l("error"),c("error"),g("fail"),setTimeout(()=>{g("scanning")},1500)},[l,c]),v=T=>{d==="scanning"&&(x.current===T&&Date.now()-p.current<2e3||(x.current=T,p.current=Date.now(),g("processing"),setTimeout(()=>{const O=T.startsWith("room:")?T.split(":")[1]:T;let E=s.find(D=>D.id===O&&D.status!=="complete");if(E||(E=s.find(D=>D.status!=="complete"&&(D.residents[0]?.location===O||D.id.startsWith(`chk_${O.toLowerCase().replace(/[\s']/g,"_")}`)))),E){if(l("success"),c("success"),g("success"),o.simpleSubmitEnabled){if(E.status==="early"){m(E),f(!0),g("scanning");return}const D=E.residents.reduce((M,B)=>(M[B.id]="Awake",M),{});t({view:"none"}),u({checkId:E.id,statuses:D,notes:"",onSuccess:()=>{i({message:"Check completed",icon:"check_circle",variant:"success"})}});return}setTimeout(()=>{t({view:"form",type:"scheduled",method:"scan",checkId:E.id,roomName:E.residents[0].location,residents:E.residents,specialClassifications:E.specialClassifications})},800)}else h()},300)))},C=T=>{T instanceof Error?console.log("QR Scanner Error:",T.message):console.log("An unknown QR scanner error occurred:",T)},y=()=>t({view:"none"}),b=()=>{if(e.view==="scanning"&&e.targetCheckId){v(e.targetCheckId);return}const T=a.find(O=>O.status!=="complete"&&O.type!=="supplemental");if(T)v(T.id);else{const O=s.find(E=>E.status!=="complete");O?v(O.id):i({message:"No incomplete checks found to simulate.",icon:"info",variant:"neutral"})}},j=()=>v("invalid-qr-code-id"),I=()=>{if(r.cameraFails)return n.jsxs("div",{className:`${je.statusOverlay} ${je.failState}`,children:[n.jsx("span",{className:"material-symbols-rounded",children:"no_photography"}),"Camera Error"]});switch(d){case"scanning":return n.jsx(Fr,{onScan:T=>{T&&T.length>0&&v(T[0].rawValue)},onError:C,constraints:{facingMode:"environment"},scanDelay:500});case"processing":return n.jsxs("div",{className:`${je.statusOverlay} ${je.processingState}`,children:[n.jsx("span",{className:`material-symbols-rounded ${je.spinner}`,children:"progress_activity"}),"Processing..."]});case"success":return n.jsxs("div",{className:`${je.statusOverlay} ${je.successState}`,children:[n.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),"Success!"]});case"fail":return n.jsxs("div",{className:`${je.statusOverlay} ${je.failState}`,children:[n.jsx("span",{className:"material-symbols-rounded",children:"error"}),"Scan Failed"]});default:return null}};return n.jsxs(U.div,{className:je.scanView,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsxs("header",{className:je.header,children:[n.jsx("h3",{children:"Scan Room QR Code"}),n.jsx(ae,{variant:"on-solid",size:"lg",iconOnly:!0,onClick:y,"aria-label":"Close scanner",children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),n.jsx(qe,{children:_&&n.jsxs(U.div,{className:je.preScanAlert,initial:{y:"-100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"-100%",opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.35},children:[n.jsx("span",{className:"material-symbols-rounded",children:"warning"}),n.jsxs("p",{children:[n.jsx("span",{children:_.residentName}),n.jsx("span",{className:je.alertSeparator,children:"|"}),n.jsx("span",{children:_.classificationType})]})]})}),n.jsxs("main",{className:je.cameraContainer,children:[n.jsx("div",{className:je.viewfinder,"data-scan-state":d,children:I()}),n.jsx("p",{className:je.helperText,children:r.cameraFails?"Camera hardware is not responding.":"Point your camera at the room's QR code"})]}),n.jsx("footer",{className:je.footer,children:n.jsxs("div",{className:je.devControlsContainer,children:[n.jsx("p",{className:je.devControlsHeader,children:"Dev controls"}),n.jsxs("div",{className:je.devControls,children:[n.jsxs(ae,{variant:"on-solid",size:"s",onClick:b,disabled:r.cameraFails,children:[n.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),"Simulate success"]}),n.jsxs(ae,{variant:"on-solid",size:"s",onClick:j,disabled:r.cameraFails,children:[n.jsx("span",{className:"material-symbols-rounded",children:"error"}),"Simulate fail"]})]})]})})]})},uu="_segmentedControlItem_1kcz1_9",du="_itemColumn_1kcz1_69",mu="_segmentedControl_1kcz1_9",hu="_columnContainer_1kcz1_203",fu="_gridContainer_1kcz1_259",pu="_deadCell_1kcz1_357",Mt={segmentedControlItem:uu,itemColumn:du,segmentedControl:mu,columnContainer:hu,gridContainer:fu,deadCell:pu},Fe=({options:e,value:t,onValueChange:s,id:o,layout:a="row",itemDirection:r="row"})=>{const i=f=>{f&&s(f)};let l=Mt.segmentedControl;a==="column"?l=Mt.columnContainer:a==="grid"&&(l=Mt.gridContainer);const c=r==="column"?`${Mt.segmentedControlItem} ${Mt.itemColumn}`:Mt.segmentedControlItem,u=a==="grid"&&e.length%2!==0;return n.jsxs(or,{type:"single",className:l,value:t,onValueChange:i,"aria-label":o,id:o,children:[e.map(f=>n.jsxs(ar,{value:f.value,"aria-label":f.label,className:c,children:[f.icon&&n.jsx("span",{className:"material-symbols-rounded",children:f.icon}),n.jsx("span",{children:f.label})]},f.value)),u&&n.jsx("div",{className:Mt.deadCell,"aria-hidden":"true"})]})},gu=(e,t)=>{S.useLayoutEffect(()=>{if(e){e.style.height="0px";const s=e.scrollHeight;e.style.height=s+"px"}},[e,t])},vu="_container_tigow_5",xu="_header_tigow_27",yu="_residentName_tigow_39",wu="_warningIcon_tigow_59",bu="_controlSection_tigow_69",_u="_classificationDetails_tigow_99",Cu="_notesInput_tigow_125",Ht={container:vu,header:xu,residentName:yu,warningIcon:wu,controlSection:bu,classificationDetails:_u,notesInput:Cu},Su=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"}],ju=[{value:"Refused",label:"Refused"},{value:"Sleeping",label:"Sleeping"},{value:"Awake",label:"Awake"}],Tu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"}],ku=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"}],Iu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"}],Nu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"},{value:"Chilling",label:"Chilling"}],Ru=({resident:e,status:t,notes:s,onStatusChange:o,onNotesChange:a,classification:r})=>{const i=!!r,l=S.useRef(null),{residentStatusSet:c,markMultipleLayout:u}=F(De);gu(l.current,s);let f;const m=u;switch(c){case"set-2":f=Su;break;case"set-4":f=Tu;break;case"set-5":f=ku;break;case"set-6":f=Iu;break;case"set-7":f=Nu;break;case"set-3":default:f=ju;break}return n.jsxs("div",{className:Ht.container,"data-classified":i,children:[n.jsx("div",{className:Ht.header,children:n.jsxs("h4",{className:Ht.residentName,children:[i&&n.jsx("span",{className:`material-symbols-rounded ${Ht.warningIcon}`,"aria-label":"Special Classification",children:"warning"}),e.name]})}),i&&n.jsx("div",{className:Ht.classificationDetails,children:n.jsxs("p",{children:[n.jsxs("strong",{children:[r.type,":"]})," ",r.details]})}),n.jsx("div",{className:Ht.controlSection,children:n.jsx(Fe,{id:`status-group-${e.id}`,options:f,value:t,onValueChange:d=>o(e.id,d),layout:m})}),n.jsx("textarea",{ref:l,id:`notes-${e.id}`,value:s,onChange:d=>a(e.id,d.target.value),placeholder:"Enter optional notes","aria-label":`Notes for ${e.name}`,rows:1,className:Ht.notesInput})]})},Eu="_overlay_2b95s_5",Au="_content_2b95s_19",Ou="_handleContainer_2b95s_51",Bu="_handle_2b95s_51",zu="_header_2b95s_81",Mu="_headerTitle_2b95s_93",Hu="_listContainer_2b95s_107",Lu="_columnList_2b95s_125",Du="_rowContainer_2b95s_137",Pu="_gridButton_2b95s_153",$u="_gridContainer_2b95s_163",Fu="_deadCell_2b95s_233",tt={overlay:Eu,content:Au,handleContainer:Ou,handle:Bu,header:zu,headerTitle:Mu,listContainer:Hu,columnList:Lu,rowContainer:Du,gridButton:Pu,gridContainer:$u,deadCell:Fu},Wu=({isOpen:e,onClose:t,onSelect:s,options:o,layout:a})=>{const{trigger:r}=Ue(),i=S.useRef(null),l=S.useRef(null),c=d=>{r("selection"),s(d),t()},u=()=>{t()};S.useEffect(()=>{if(e){const d=setTimeout(()=>{l.current?.focus()},50),g=_=>{_.key==="Escape"&&(_.preventDefault(),t())};return document.addEventListener("keydown",g),()=>{clearTimeout(d),document.removeEventListener("keydown",g)}}},[e,t]);const f=a==="grid"&&o.length%2!==0,m=()=>{switch(a){case"row":return tt.rowContainer;case"column":return tt.columnList;case"grid":return tt.gridContainer}};return n.jsx(qe,{children:e&&n.jsxs(n.Fragment,{children:[n.jsx(U.div,{className:tt.overlay,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:u,"aria-hidden":"true"}),n.jsxs(U.div,{ref:i,className:tt.content,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},role:"dialog","aria-modal":"true","aria-labelledby":"status-sheet-title",children:[n.jsx("div",{className:tt.handleContainer,children:n.jsx("div",{className:tt.handle})}),n.jsx("div",{className:tt.header,children:n.jsx("h3",{id:"status-sheet-title",className:tt.headerTitle,children:"Select Status"})}),n.jsx("div",{className:tt.listContainer,children:a==="column"?n.jsx("div",{className:m(),children:o.map(d=>n.jsx(_t,{label:d.label,onClick:()=>c(d.value)},d.value))}):n.jsxs("div",{className:m(),children:[o.map((d,g)=>n.jsx("button",{ref:g===0?l:void 0,className:tt.gridButton,onClick:()=>c(d.value),children:d.label},d.value)),f&&n.jsx("div",{className:tt.deadCell})]})})]})]})})},Vu="_checkFormView_tpp19_5",Gu="_header_tpp19_27",qu="_headerTitle_tpp19_291",Uu="_formContent_tpp19_319",Yu="_roomHeader_tpp19_341",Ku="_badgeWrapper_tpp19_371",Xu="_statusLabel_tpp19_389",Zu="_warningBlock_tpp19_455",Qu="_sectionHeader_tpp19_509",Ju="_checkTypeSection_tpp19_527",ed="_markMultipleContainer_tpp19_547",td="_residentListContainer_tpp19_561",nd="_footer_tpp19_691",Oe={checkFormView:Vu,header:Gu,headerTitle:qu,formContent:Uu,roomHeader:Yu,badgeWrapper:Ku,statusLabel:Xu,warningBlock:Zu,sectionHeader:Qu,checkTypeSection:Ju,markMultipleContainer:ed,residentListContainer:td,footer:nd},sd=[{value:"Locked down",label:"Locked down"},{value:"Random",label:"Random"}],od=[{value:"Noise Complaint",label:"Noise Complaint"},{value:"Resident Request",label:"Resident Request"},{value:"Medical Alert",label:"Medical Alert"},{value:"Security Concern",label:"Security Concern"},{value:"Other",label:"Other"}],ad=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"}],rd=[{value:"Refused",label:"Refused"},{value:"Sleeping",label:"Sleeping"},{value:"Awake",label:"Awake"}],id=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"}],ld=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"}],cd=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"}],ud=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"},{value:"Chilling",label:"Chilling"}],dd=({checkData:e})=>{const t=K(ct),s=K(Wn),o=K(hn),a=F(kr),r=K(Ir),i=K(Nr),l=F(Lo),c=F(js),{isCheckTypeEnabled:u,markMultipleEnabled:f,residentStatusSet:m,markMultipleLayout:d}=F(De),{trigger:g}=Ue(),{completeCheck:_}=Vn(),{startScan:w}=As(),[x,p]=S.useState(!1);let h;switch(m){case"set-2":h=ad;break;case"set-4":h=id;break;case"set-5":h=ld;break;case"set-6":h=cd;break;case"set-7":h=ud;break;case"set-3":default:h=rd;break}const v=S.useRef(null),C=S.useRef(null),y=S.useRef(null),[b,j]=S.useState(!1);fn(y,{isEnabled:!0}),Wr({containerRef:C,footerOffsetVar:"--form-footer-height"});const I=e.type==="scheduled"?a[e.checkId]:void 0,[T,O]=S.useState(()=>I?.statuses||e.residents.reduce((R,H)=>({...R,[H.id]:""}),{})),[E,D]=S.useState(()=>I?.notes||e.residents.reduce((R,H)=>({...R,[H.id]:""}),{})),[M,B]=S.useState(I?.checkType||""),[P,Z]=S.useState(""),Q=e.type==="scheduled"&&e.method==="manual",ne=e.type==="supplemental",we=S.useMemo(()=>ne?"supplemental":e.type==="scheduled"&&l.find(H=>H.id===e.checkId)?.status||"pending",[l,e,ne]),xe=S.useRef(!1);S.useEffect(()=>()=>{!xe.current&&e.type==="scheduled"&&r({checkId:e.checkId,draft:{statuses:T,notes:E,checkType:M}})},[e,T,E,M,r]),S.useLayoutEffect(()=>{const R=v.current;if(R){const H=R.offsetHeight;document.documentElement.style.setProperty("--form-footer-height",`${H}px`)}return()=>{document.documentElement.style.removeProperty("--form-footer-height")}},[]),S.useLayoutEffect(()=>{const R=C.current;if(!R)return;const H=()=>{const{scrollTop:me,scrollHeight:ue,clientHeight:Ke}=R,W=ue-me<=Ke+1,ot=ue>Ke;j(ot&&!W)},J=new ResizeObserver(H);return J.observe(R),R.addEventListener("scroll",H,{passive:!0}),H(),()=>{J.disconnect(),R.removeEventListener("scroll",H)}},[]);const Ne=()=>{e.type==="scheduled"&&e.method==="scan"&&w(),t({view:"none"})},Qe=(R,H)=>{O(J=>({...J,[R]:H}))},Ce=(R,H)=>{D(J=>({...J,[R]:H}))},Je=R=>{if(!R)return;const H={...T};e.residents.forEach(J=>{H[J.id]=R}),O(H)},Ye=S.useMemo(()=>!(!e.residents.every(H=>T[H.id])||u&&!M||ne&&!P),[T,e.residents,u,M,ne,P]),ze=()=>{if(!Ye)return;xe.current=!0,e.type==="scheduled"&&i(e.checkId),g("success");const R=Object.values(E).filter(H=>H.trim()!=="").join(`
---
`);e.type==="scheduled"?(_({checkId:e.checkId,statuses:T,notes:R}),t({view:"none"})):e.type==="supplemental"&&(s({type:"CHECK_SUPPLEMENTAL_ADD",payload:{roomId:e.roomId,statuses:T,notes:R,incidentType:P}}),t({view:"none"}),c!=="offline"&&o({message:`Supplemental check for ${e.roomName} saved.`,icon:"task_alt",variant:"success"})),e.type==="scheduled"&&e.method==="scan"&&w()};return n.jsxs(U.div,{className:Oe.checkFormView,style:{height:"var(--visual-viewport-height, 100dvh)"},initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsxs("header",{className:Oe.header,ref:y,children:[n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:Ne,"aria-label":"Back",children:n.jsx("span",{className:"material-symbols-rounded",children:"arrow_back"})}),n.jsx("h3",{className:Oe.headerTitle,children:"Record Check"})]}),n.jsxs("main",{className:Oe.formContent,ref:C,children:[n.jsxs("h2",{className:Oe.roomHeader,children:[e.roomName,n.jsxs("div",{className:Oe.badgeWrapper,children:[Q&&n.jsx("span",{className:Oe.statusLabel,"data-variant":"info",children:"Manual"}),ne&&n.jsx("span",{className:Oe.statusLabel,"data-variant":"info",children:"Supplemental"})]})]}),!ne&&we==="early"&&n.jsxs("div",{className:Oe.warningBlock,role:"status",children:[n.jsx("span",{className:"material-symbols-rounded","aria-hidden":"true",children:"info"}),n.jsx("span",{children:"This room was checked recently. Are you sure you want to check now?"})]}),ne&&n.jsxs("div",{className:Oe.incidentTypeSection,children:[n.jsx("label",{htmlFor:"incident-type-select",className:Oe.sectionLabel,children:"Reason for Check"}),n.jsxs("select",{id:"incident-type-select",className:Oe.selectInput,value:P,onChange:R=>Z(R.target.value),children:[n.jsx("option",{value:"",disabled:!0,children:"Select a reason..."}),od.map(R=>n.jsx("option",{value:R.value,children:R.label},R.value))]})]}),u&&n.jsxs("div",{className:Oe.checkTypeSection,children:[n.jsx("label",{htmlFor:"check-type-control",className:Oe.sectionHeader,children:"Check type"}),n.jsx(Fe,{id:"check-type-control",options:sd,value:M,onValueChange:B})]}),f&&e.residents.length>1&&n.jsx("div",{className:Oe.markMultipleContainer,children:n.jsx(ae,{variant:"secondary",size:"m",onClick:()=>p(!0),children:"Mark all"})}),n.jsx(Wu,{isOpen:x,onClose:()=>p(!1),onSelect:Je,options:h,layout:d}),n.jsx("div",{className:Oe.residentListContainer,children:e.residents.map(R=>{const H=e.type==="scheduled"?e.specialClassifications?.find(J=>J.residentId===R.id):void 0;return n.jsx(Ru,{resident:R,status:T[R.id],notes:E[R.id],onStatusChange:Qe,onNotesChange:Ce,classification:H},R.id)})})]}),n.jsx("footer",{className:Oe.footer,ref:v,"data-scrolled":b,children:n.jsx(ae,{variant:"primary",size:"m",onClick:ze,disabled:!Ye,children:"Save"})})]})},qn=0,It=1,Xt=2,Yo=4;function to(e){return()=>e}function md(e){e()}function Ko(e,t){return s=>e(t(s))}function no(e,t){return()=>e(t)}function hd(e,t){return s=>e(t,s)}function Bs(e){return e!==void 0}function fd(...e){return()=>{e.map(md)}}function Zt(){}function Un(e,t){return t(e),e}function pd(e,t){return t(e)}function pe(...e){return e}function le(e,t){return e(It,t)}function X(e,t){e(qn,t)}function zs(e){e(Xt)}function _e(e){return e(Yo)}function $(e,t){return le(e,hd(t,qn))}function lt(e,t){const s=e(It,o=>{s(),t(o)});return s}function so(e){let t,s;return o=>a=>{t=a,s&&clearTimeout(s),s=setTimeout(()=>{o(t)},e)}}function Xo(e,t){return e===t}function fe(e=Xo){let t;return s=>o=>{e(t,o)||(t=o,s(o))}}function q(e){return t=>s=>{e(s)&&t(s)}}function L(e){return t=>Ko(t,e)}function vt(e){return t=>()=>{t(e)}}function A(e,...t){const s=gd(...t);return(o,a)=>{switch(o){case Xt:zs(e);return;case It:return le(e,s(a))}}}function yt(e,t){return s=>o=>{s(t=e(t,o))}}function Ft(e){return t=>s=>{e>0?e--:t(s)}}function Ct(e){let t=null,s;return o=>a=>{t=a,!s&&(s=setTimeout(()=>{s=void 0,o(t)},e))}}function ee(...e){const t=new Array(e.length);let s=0,o=null;const a=Math.pow(2,e.length)-1;return e.forEach((r,i)=>{const l=Math.pow(2,i);le(r,c=>{const u=s;s=s|l,t[i]=c,u!==a&&s===a&&o&&(o(),o=null)})}),r=>i=>{const l=()=>{r([i].concat(t))};s===a?l():o=l}}function gd(...e){return t=>e.reduceRight(pd,t)}function vd(e){let t,s;const o=()=>t?.();return function(a,r){switch(a){case It:return r?s===r?void 0:(o(),s=r,t=le(e,r),t):(o(),Zt);case Xt:o(),s=null;return}}}function z(e){let t=e;const s=se();return(o,a)=>{switch(o){case qn:t=a;break;case It:{a(t);break}case Yo:return t}return s(o,a)}}function Le(e,t){return Un(z(t),s=>$(e,s))}function se(){const e=[];return(t,s)=>{switch(t){case qn:e.slice().forEach(o=>{o(s)});return;case Xt:e.splice(0,e.length);return;case It:return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}}}function Ze(e){return Un(se(),t=>$(e,t))}function ie(e,t=[],{singleton:s}={singleton:!0}){return{constructor:e,dependencies:t,id:xd(),singleton:s}}const xd=()=>Symbol();function yd(e){const t=new Map,s=({constructor:o,dependencies:a,id:r,singleton:i})=>{if(i&&t.has(r))return t.get(r);const l=o(a.map(c=>s(c)));return i&&t.set(r,l),l};return s(e)}function Ie(...e){const t=se(),s=new Array(e.length);let o=0;const a=Math.pow(2,e.length)-1;return e.forEach((r,i)=>{const l=Math.pow(2,i);le(r,c=>{s[i]=c,o=o|l,o===a&&X(t,s)})}),function(r,i){switch(r){case Xt:{zs(t);return}case It:return o===a&&i(s),le(t,i)}}}function V(e,t=Xo){return A(e,fe(t))}function ms(...e){return function(t,s){switch(t){case Xt:return;case It:return fd(...e.map(o=>le(o,s)))}}}var Ge=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(Ge||{});const wd={0:"debug",3:"error",1:"log",2:"warn"},bd=()=>typeof globalThis>"u"?window:globalThis,Nt=ie(()=>{const e=z(3);return{log:z((t,s,o=1)=>{var a;const r=(a=bd().VIRTUOSO_LOG_LEVEL)!=null?a:_e(e);o>=r&&console[wd[o]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,s)}),logLevel:e}},[],{singleton:!0});function Wt(e,t,s){return Ms(e,t,s).callbackRef}function Ms(e,t,s){const o=k.useRef(null);let a=i=>{};const r=k.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(i=>{const l=()=>{const c=i[0].target;c.offsetParent!==null&&e(c)};s?l():requestAnimationFrame(l)}):null,[e,s]);return a=i=>{i&&t?(r?.observe(i),o.current=i):(o.current&&r?.unobserve(o.current),o.current=null)},{callbackRef:a,ref:o}}function _d(e,t,s,o,a,r,i,l,c){const u=k.useCallback(f=>{const m=Cd(f.children,t,l?"offsetWidth":"offsetHeight",a);let d=f.parentElement;for(;!d.dataset.virtuosoScroller;)d=d.parentElement;const g=d.lastElementChild.dataset.viewportType==="window";let _;g&&(_=d.ownerDocument.defaultView);const w=i?l?i.scrollLeft:i.scrollTop:g?l?_.scrollX||_.document.documentElement.scrollLeft:_.scrollY||_.document.documentElement.scrollTop:l?d.scrollLeft:d.scrollTop,x=i?l?i.scrollWidth:i.scrollHeight:g?l?_.document.documentElement.scrollWidth:_.document.documentElement.scrollHeight:l?d.scrollWidth:d.scrollHeight,p=i?l?i.offsetWidth:i.offsetHeight:g?l?_.innerWidth:_.innerHeight:l?d.offsetWidth:d.offsetHeight;o({scrollHeight:x,scrollTop:Math.max(w,0),viewportHeight:p}),r?.(l?oo("column-gap",getComputedStyle(f).columnGap,a):oo("row-gap",getComputedStyle(f).rowGap,a)),m!==null&&e(m)},[e,t,a,r,i,o,l]);return Ms(u,s,c)}function Cd(e,t,s,o){const a=e.length;if(a===0)return null;const r=[];for(let i=0;i<a;i++){const l=e.item(i);if(l.dataset.index===void 0)continue;const c=parseInt(l.dataset.index),u=parseFloat(l.dataset.knownSize),f=t(l,s);if(f===0&&o("Zero-sized element, this should not happen",{child:l},Ge.ERROR),f===u)continue;const m=r[r.length-1];r.length===0||m.size!==f||m.endIndex!==c-1?r.push({endIndex:c,size:f,startIndex:c}):r[r.length-1].endIndex++}return r}function oo(e,t,s){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&s(`${e} was not resolved to pixel value correctly`,t,Ge.WARN),t==="normal"?0:parseInt(t??"0",10)}function Zo(e,t,s){const o=k.useRef(null),a=k.useCallback(c=>{if(!(c!=null&&c.offsetParent))return;const u=c.getBoundingClientRect(),f=u.width;let m,d;if(t){const g=t.getBoundingClientRect(),_=u.top-g.top;d=g.height-Math.max(0,_),m=_+t.scrollTop}else{const g=i.current.ownerDocument.defaultView;d=g.innerHeight-Math.max(0,u.top),m=u.top+g.scrollY}o.current={offsetTop:m,visibleHeight:d,visibleWidth:f},e(o.current)},[e,t]),{callbackRef:r,ref:i}=Ms(a,!0,s),l=k.useCallback(()=>{a(i.current)},[a,i]);return k.useEffect(()=>{var c;if(t){t.addEventListener("scroll",l);const u=new ResizeObserver(()=>{requestAnimationFrame(l)});return u.observe(t),()=>{t.removeEventListener("scroll",l),u.unobserve(t)}}else{const u=(c=i.current)==null?void 0:c.ownerDocument.defaultView;return u?.addEventListener("scroll",l),u?.addEventListener("resize",l),()=>{u?.removeEventListener("scroll",l),u?.removeEventListener("resize",l)}}},[l,t,i]),r}const We=ie(()=>{const e=se(),t=se(),s=z(0),o=se(),a=z(0),r=se(),i=se(),l=z(0),c=z(0),u=z(0),f=z(0),m=se(),d=se(),g=z(!1),_=z(!1),w=z(!1);return $(A(e,L(({scrollTop:x})=>x)),t),$(A(e,L(({scrollHeight:x})=>x)),i),$(t,a),{deviation:s,fixedFooterHeight:u,fixedHeaderHeight:c,footerHeight:f,headerHeight:l,horizontalDirection:_,scrollBy:d,scrollContainerState:e,scrollHeight:i,scrollingInProgress:g,scrollTo:m,scrollTop:t,skipAnimationFrameInResizeObserver:w,smoothScrollTargetReached:o,statefulScrollTop:a,viewportHeight:r}},[],{singleton:!0}),ln={lvl:0};function Qo(e,t){const s=e.length;if(s===0)return[];let{index:o,value:a}=t(e[0]);const r=[];for(let i=1;i<s;i++){const{index:l,value:c}=t(e[i]);r.push({end:l-1,start:o,value:a}),o=l,a=c}return r.push({end:1/0,start:o,value:a}),r}function de(e){return e===ln}function cn(e,t){if(!de(e))return t===e.k?e.v:t<e.k?cn(e.l,t):cn(e.r,t)}function ut(e,t,s="k"){if(de(e))return[-1/0,void 0];if(Number(e[s])===t)return[e.k,e.v];if(Number(e[s])<t){const o=ut(e.r,t,s);return o[0]===-1/0?[e.k,e.v]:o}return ut(e.l,t,s)}function Xe(e,t,s){return de(e)?ta(t,s,1):t===e.k?Ae(e,{k:t,v:s}):t<e.k?ao(Ae(e,{l:Xe(e.l,t,s)})):ao(Ae(e,{r:Xe(e.r,t,s)}))}function Yt(){return ln}function Yn(e,t,s){if(de(e))return[];const o=ut(e,t)[0];return Sd(fs(e,o,s))}function hs(e,t){if(de(e))return ln;const{k:s,l:o,r:a}=e;if(t===s){if(de(o))return a;if(de(a))return o;{const[r,i]=ea(o);return zn(Ae(e,{k:r,l:Jo(o),v:i}))}}else return t<s?zn(Ae(e,{l:hs(o,t)})):zn(Ae(e,{r:hs(a,t)}))}function $t(e){return de(e)?[]:[...$t(e.l),{k:e.k,v:e.v},...$t(e.r)]}function fs(e,t,s){if(de(e))return[];const{k:o,l:a,r,v:i}=e;let l=[];return o>t&&(l=l.concat(fs(a,t,s))),o>=t&&o<=s&&l.push({k:o,v:i}),o<=s&&(l=l.concat(fs(r,t,s))),l}function zn(e){const{l:t,lvl:s,r:o}=e;if(o.lvl>=s-1&&t.lvl>=s-1)return e;if(s>o.lvl+1){if(Jn(t))return na(Ae(e,{lvl:s-1}));if(!de(t)&&!de(t.r))return Ae(t.r,{l:Ae(t,{r:t.r.l}),lvl:s,r:Ae(e,{l:t.r.r,lvl:s-1})});throw new Error("Unexpected empty nodes")}else{if(Jn(e))return ps(Ae(e,{lvl:s-1}));if(!de(o)&&!de(o.l)){const a=o.l,r=Jn(a)?o.lvl-1:o.lvl;return Ae(a,{l:Ae(e,{lvl:s-1,r:a.l}),lvl:a.lvl+1,r:ps(Ae(o,{l:a.r,lvl:r}))})}else throw new Error("Unexpected empty nodes")}}function Ae(e,t){return ta(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function Jo(e){return de(e.r)?e.l:zn(Ae(e,{r:Jo(e.r)}))}function Jn(e){return de(e)||e.lvl>e.r.lvl}function ea(e){return de(e.r)?[e.k,e.v]:ea(e.r)}function ta(e,t,s,o=ln,a=ln){return{k:e,l:o,lvl:s,r:a,v:t}}function ao(e){return ps(na(e))}function na(e){const{l:t}=e;return!de(t)&&t.lvl===e.lvl?Ae(t,{r:Ae(e,{l:t.r})}):e}function ps(e){const{lvl:t,r:s}=e;return!de(s)&&!de(s.r)&&s.lvl===t&&s.r.lvl===t?Ae(s,{l:Ae(e,{r:s.l}),lvl:t+1}):e}function Sd(e){return Qo(e,({k:t,v:s})=>({index:t,value:s}))}function sa(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function un(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const Hs=ie(()=>({recalcInProgress:z(!1)}),[],{singleton:!0});function oa(e,t,s){return e[Ln(e,t,s)]}function Ln(e,t,s,o=0){let a=e.length-1;for(;o<=a;){const r=Math.floor((o+a)/2),i=e[r],l=s(i,t);if(l===0)return r;if(l===-1){if(a-o<2)return r-1;a=r-1}else{if(a===o)return r;o=r+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function jd(e,t,s,o){const a=Ln(e,t,o),r=Ln(e,s,o,a);return e.slice(a,r+1)}function kt(e,t){return Math.round(e.getBoundingClientRect()[t])}function Kn(e){return!de(e.groupOffsetTree)}function Ls({index:e},t){return t===e?0:t<e?-1:1}function Td(){return{groupIndices:[],groupOffsetTree:Yt(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Yt()}}function kd(e,t){let s=de(e)?0:1/0;for(const o of t){const{endIndex:a,size:r,startIndex:i}=o;if(s=Math.min(s,i),de(e)){e=Xe(e,0,r);continue}const l=Yn(e,i-1,a+1);if(l.some(Bd(o)))continue;let c=!1,u=!1;for(const{end:f,start:m,value:d}of l)c?(a>=m||r===d)&&(e=hs(e,m)):(u=d!==r,c=!0),f>a&&a>=m&&d!==r&&(e=Xe(e,a+1,d));u&&(e=Xe(e,i,r))}return[e,s]}function Id(e){return typeof e.groupIndex<"u"}function Nd({offset:e},t){return t===e?0:t<e?-1:1}function dn(e,t,s){if(t.length===0)return 0;const{index:o,offset:a,size:r}=oa(t,e,Ls),i=e-o,l=r*i+(i-1)*s+a;return l>0?l+s:l}function aa(e,t){if(!Kn(t))return e;let s=0;for(;t.groupIndices[s]<=e+s;)s++;return e+s}function ra(e,t,s){if(Id(e))return t.groupIndices[e.groupIndex]+1;{const o=e.index==="LAST"?s:e.index;let a=aa(o,t);return a=Math.max(0,a,Math.min(s,a)),a}}function Rd(e,t,s,o=0){return o>0&&(t=Math.max(t,oa(e,o,Ls).offset)),Qo(jd(e,t,s,Nd),Od)}function Ed(e,[t,s,o,a]){t.length>0&&o("received item sizes",t,Ge.DEBUG);const r=e.sizeTree;let i=r,l=0;if(s.length>0&&de(r)&&t.length===2){const d=t[0].size,g=t[1].size;i=s.reduce((_,w)=>Xe(Xe(_,w,d),w+1,g),i)}else[i,l]=kd(i,t);if(i===r)return e;const{lastIndex:c,lastOffset:u,lastSize:f,offsetTree:m}=gs(e.offsetTree,l,i,a);return{groupIndices:s,groupOffsetTree:s.reduce((d,g)=>Xe(d,g,dn(g,m,a)),Yt()),lastIndex:c,lastOffset:u,lastSize:f,offsetTree:m,sizeTree:i}}function Ad(e){return $t(e).map(({k:t,v:s},o,a)=>{const r=a[o+1];return{endIndex:r?r.k-1:1/0,size:s,startIndex:t}})}function ro(e,t){let s=0,o=0;for(;s<e;)s+=t[o+1]-t[o]-1,o++;return o-(s===e?0:1)}function gs(e,t,s,o){let a=e,r=0,i=0,l=0,c=0;if(t!==0){c=Ln(a,t-1,Ls),l=a[c].offset;const u=ut(s,t-1);r=u[0],i=u[1],a.length&&a[c].size===ut(s,t)[1]&&(c-=1),a=a.slice(0,c+1)}else a=[];for(const{start:u,value:f}of Yn(s,t,1/0)){const m=u-r,d=m*i+l+m*o;a.push({index:u,offset:d,size:f}),r=u,l=d,i=f}return{lastIndex:r,lastOffset:l,lastSize:i,offsetTree:a}}function Od(e){return{index:e.index,value:e}}function Bd(e){const{endIndex:t,size:s,startIndex:o}=e;return a=>a.start===o&&(a.end===t||a.end===1/0)&&a.value===s}const zd={offsetHeight:"height",offsetWidth:"width"},wt=ie(([{log:e},{recalcInProgress:t}])=>{const s=se(),o=se(),a=Le(o,0),r=se(),i=se(),l=z(0),c=z([]),u=z(void 0),f=z(void 0),m=z((y,b)=>kt(y,zd[b])),d=z(void 0),g=z(0),_=Td(),w=Le(A(s,ee(c,e,g),yt(Ed,_),fe()),_),x=Le(A(c,fe(),yt((y,b)=>({current:b,prev:y.current}),{current:[],prev:[]}),L(({prev:y})=>y)),[]);$(A(c,q(y=>y.length>0),ee(w,g),L(([y,b,j])=>{const I=y.reduce((T,O,E)=>Xe(T,O,dn(O,b.offsetTree,j)||E),Yt());return{...b,groupIndices:y,groupOffsetTree:I}})),w),$(A(o,ee(w),q(([y,{lastIndex:b}])=>y<b),L(([y,{lastIndex:b,lastSize:j}])=>[{endIndex:b,size:j,startIndex:y}])),s),$(u,f);const p=Le(A(u,L(y=>y===void 0)),!0);$(A(f,q(y=>y!==void 0&&de(_e(w).sizeTree)),L(y=>[{endIndex:0,size:y,startIndex:0}])),s);const h=Ze(A(s,ee(w),yt(({sizes:y},[b,j])=>({changed:j!==y,sizes:j}),{changed:!1,sizes:_}),L(y=>y.changed)));le(A(l,yt((y,b)=>({diff:y.prev-b,prev:b}),{diff:0,prev:0}),L(y=>y.diff)),y=>{const{groupIndices:b}=_e(w);if(y>0)X(t,!0),X(r,y+ro(y,b));else if(y<0){const j=_e(x);j.length>0&&(y-=ro(-y,j)),X(i,y)}}),le(A(l,ee(e)),([y,b])=>{y<0&&b("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},Ge.ERROR)});const v=Ze(r);$(A(r,ee(w),L(([y,b])=>{const j=b.groupIndices.length>0,I=[],T=b.lastSize;if(j){const O=cn(b.sizeTree,0);let E=0,D=0;for(;E<y;){const B=b.groupIndices[D],P=b.groupIndices.length===D+1?1/0:b.groupIndices[D+1]-B-1;I.push({endIndex:B,size:O,startIndex:B}),I.push({endIndex:B+1+P-1,size:T,startIndex:B+1}),D++,E+=P+1}const M=$t(b.sizeTree);return E!==y&&M.shift(),M.reduce((B,{k:P,v:Z})=>{let Q=B.ranges;return B.prevSize!==0&&(Q=[...B.ranges,{endIndex:P+y-1,size:B.prevSize,startIndex:B.prevIndex}]),{prevIndex:P+y,prevSize:Z,ranges:Q}},{prevIndex:y,prevSize:0,ranges:I}).ranges}return $t(b.sizeTree).reduce((O,{k:E,v:D})=>({prevIndex:E+y,prevSize:D,ranges:[...O.ranges,{endIndex:E+y-1,size:O.prevSize,startIndex:O.prevIndex}]}),{prevIndex:0,prevSize:T,ranges:[]}).ranges})),s);const C=Ze(A(i,ee(w,g),L(([y,{offsetTree:b},j])=>{const I=-y;return dn(I,b,j)})));return $(A(i,ee(w,g),L(([y,b,j])=>{if(b.groupIndices.length>0){if(de(b.sizeTree))return b;let I=Yt();const T=_e(x);let O=0,E=0,D=0;for(;O<-y;){D=T[E];const M=T[E+1]-D-1;E++,O+=M+1}if(I=$t(b.sizeTree).reduce((M,{k:B,v:P})=>Xe(M,Math.max(0,B+y),P),I),O!==-y){const M=cn(b.sizeTree,D);I=Xe(I,0,M);const B=ut(b.sizeTree,-y+1)[1];I=Xe(I,1,B)}return{...b,sizeTree:I,...gs(b.offsetTree,0,I,j)}}else{const I=$t(b.sizeTree).reduce((T,{k:O,v:E})=>Xe(T,Math.max(0,O+y),E),Yt());return{...b,sizeTree:I,...gs(b.offsetTree,0,I,j)}}})),w),{beforeUnshiftWith:v,data:d,defaultItemSize:f,firstItemIndex:l,fixedItemSize:u,gap:g,groupIndices:c,itemSize:m,listRefresh:h,shiftWith:i,shiftWithOffset:C,sizeRanges:s,sizes:w,statefulTotalCount:a,totalCount:o,trackItemSizes:p,unshiftWith:r}},pe(Nt,Hs),{singleton:!0});function Md(e){return e.reduce((t,s)=>(t.groupIndices.push(t.totalCount),t.totalCount+=s+1,t),{groupIndices:[],totalCount:0})}const ia=ie(([{groupIndices:e,sizes:t,totalCount:s},{headerHeight:o,scrollTop:a}])=>{const r=se(),i=se(),l=Ze(A(r,L(Md)));return $(A(l,L(c=>c.totalCount)),s),$(A(l,L(c=>c.groupIndices)),e),$(A(Ie(a,t,o),q(([c,u])=>Kn(u)),L(([c,u,f])=>ut(u.groupOffsetTree,Math.max(c-f,0),"v")[0]),fe(),L(c=>[c])),i),{groupCounts:r,topItemsIndexes:i}},pe(wt,We)),Rt=ie(([{log:e}])=>{const t=z(!1),s=Ze(A(t,q(o=>o),fe()));return le(t,o=>{o&&_e(e)("props updated",{},Ge.DEBUG)}),{didMount:s,propsReady:t}},pe(Nt),{singleton:!0}),Hd=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function la(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!Hd)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const pn=ie(([{gap:e,listRefresh:t,sizes:s,totalCount:o},{fixedFooterHeight:a,fixedHeaderHeight:r,footerHeight:i,headerHeight:l,scrollingInProgress:c,scrollTo:u,smoothScrollTargetReached:f,viewportHeight:m},{log:d}])=>{const g=se(),_=se(),w=z(0);let x=null,p=null,h=null;function v(){x&&(x(),x=null),h&&(h(),h=null),p&&(clearTimeout(p),p=null),X(c,!1)}return $(A(g,ee(s,m,o,w,l,i,d),ee(e,r,a),L(([[C,y,b,j,I,T,O,E],D,M,B])=>{const P=la(C),{align:Z,behavior:Q,offset:ne}=P,we=j-1,xe=ra(P,y,we);let Ne=dn(xe,y.offsetTree,D)+T;Z==="end"?(Ne+=M+ut(y.sizeTree,xe)[1]-b+B,xe===we&&(Ne+=O)):Z==="center"?Ne+=(M+ut(y.sizeTree,xe)[1]-b+B)/2:Ne-=I,ne&&(Ne+=ne);const Qe=Ce=>{v(),Ce?(E("retrying to scroll to",{location:C},Ge.DEBUG),X(g,C)):(X(_,!0),E("list did not change, scroll successful",{},Ge.DEBUG))};if(v(),Q==="smooth"){let Ce=!1;h=le(t,Je=>{Ce=Ce||Je}),x=lt(f,()=>{Qe(Ce)})}else x=lt(A(t,Ld(150)),Qe);return p=setTimeout(()=>{v()},1200),X(c,!0),E("scrolling from index to",{behavior:Q,index:xe,top:Ne},Ge.DEBUG),{behavior:Q,top:Ne}})),u),{scrollTargetReached:_,scrollToIndex:g,topListHeight:w}},pe(wt,We,Nt),{singleton:!0});function Ld(e){return t=>{const s=setTimeout(()=>{t(!1)},e);return o=>{o&&(t(!0),clearTimeout(s))}}}function Ds(e,t){e==0?t():requestAnimationFrame(()=>{Ds(e-1,t)})}function Ps(e,t){const s=t-1;return typeof e=="number"?e:e.index==="LAST"?s:e.index}const gn=ie(([{defaultItemSize:e,listRefresh:t,sizes:s},{scrollTop:o},{scrollTargetReached:a,scrollToIndex:r},{didMount:i}])=>{const l=z(!0),c=z(0),u=z(!0);return $(A(i,ee(c),q(([f,m])=>!!m),vt(!1)),l),$(A(i,ee(c),q(([f,m])=>!!m),vt(!1)),u),le(A(Ie(t,i),ee(l,s,e,u),q(([[,f],m,{sizeTree:d},g,_])=>f&&(!de(d)||Bs(g))&&!m&&!_),ee(c)),([,f])=>{lt(a,()=>{X(u,!0)}),Ds(4,()=>{lt(o,()=>{X(l,!0)}),X(r,f)})}),{initialItemFinalLocationReached:u,initialTopMostItemIndex:c,scrolledToInitialItem:l}},pe(wt,We,pn,Rt),{singleton:!0});function ca(e,t){return Math.abs(e-t)<1.01}const mn="up",on="down",Dd="none",Pd={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},$d=0,vn=ie(([{footerHeight:e,headerHeight:t,scrollBy:s,scrollContainerState:o,scrollTop:a,viewportHeight:r}])=>{const i=z(!1),l=z(!0),c=se(),u=se(),f=z(4),m=z($d),d=Le(A(ms(A(V(a),Ft(1),vt(!0)),A(V(a),Ft(1),vt(!1),so(100))),fe()),!1),g=Le(A(ms(A(s,vt(!0)),A(s,vt(!1),so(200))),fe()),!1);$(A(Ie(V(a),V(m)),L(([h,v])=>h<=v),fe()),l),$(A(l,Ct(50)),u);const _=Ze(A(Ie(o,V(r),V(t),V(e),V(f)),yt((h,[{scrollHeight:v,scrollTop:C},y,b,j,I])=>{const T=C+y-v>-I,O={scrollHeight:v,scrollTop:C,viewportHeight:y};if(T){let D,M;return C>h.state.scrollTop?(D="SCROLLED_DOWN",M=h.state.scrollTop-C):(D="SIZE_DECREASED",M=h.state.scrollTop-C||h.scrollTopDelta),{atBottom:!0,atBottomBecause:D,scrollTopDelta:M,state:O}}let E;return O.scrollHeight>h.state.scrollHeight?E="SIZE_INCREASED":y<h.state.viewportHeight?E="VIEWPORT_HEIGHT_DECREASING":C<h.state.scrollTop?E="SCROLLING_UPWARDS":E="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:E,state:O}},Pd),fe((h,v)=>h&&h.atBottom===v.atBottom))),w=Le(A(o,yt((h,{scrollHeight:v,scrollTop:C,viewportHeight:y})=>{if(ca(h.scrollHeight,v))return{changed:!1,jump:0,scrollHeight:v,scrollTop:C};{const b=v-(C+y)<1;return h.scrollTop!==C&&b?{changed:!0,jump:h.scrollTop-C,scrollHeight:v,scrollTop:C}:{changed:!0,jump:0,scrollHeight:v,scrollTop:C}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),q(h=>h.changed),L(h=>h.jump)),0);$(A(_,L(h=>h.atBottom)),i),$(A(i,Ct(50)),c);const x=z(on);$(A(o,L(({scrollTop:h})=>h),fe(),yt((h,v)=>_e(g)?{direction:h.direction,prevScrollTop:v}:{direction:v<h.prevScrollTop?mn:on,prevScrollTop:v},{direction:on,prevScrollTop:0}),L(h=>h.direction)),x),$(A(o,Ct(50),vt(Dd)),x);const p=z(0);return $(A(d,q(h=>!h),vt(0)),p),$(A(a,Ct(100),ee(d),q(([h,v])=>!!v),yt(([h,v],[C])=>[v,C],[0,0]),L(([h,v])=>v-h)),p),{atBottomState:_,atBottomStateChange:c,atBottomThreshold:f,atTopStateChange:u,atTopThreshold:m,isAtBottom:i,isAtTop:l,isScrolling:d,lastJumpDueToItemResize:w,scrollDirection:x,scrollVelocity:p}},pe(We)),Dn="top",Pn="bottom",io="none";function lo(e,t,s){return typeof e=="number"?s===mn&&t===Dn||s===on&&t===Pn?e:0:s===mn?t===Dn?e.main:e.reverse:t===Pn?e.main:e.reverse}function co(e,t){var s;return typeof e=="number"?e:(s=e[t])!=null?s:0}const $s=ie(([{deviation:e,fixedHeaderHeight:t,headerHeight:s,scrollTop:o,viewportHeight:a}])=>{const r=se(),i=z(0),l=z(0),c=z(0),u=Le(A(Ie(V(o),V(a),V(s),V(r,un),V(c),V(i),V(t),V(e),V(l)),L(([f,m,d,[g,_],w,x,p,h,v])=>{const C=f-h,y=x+p,b=Math.max(d-C,0);let j=io;const I=co(v,Dn),T=co(v,Pn);return g-=h,g+=d+p,_+=d+p,_-=h,g>f+y-I&&(j=mn),_<f-b+m+T&&(j=on),j!==io?[Math.max(C-d-lo(w,Dn,j)-I,0),C-b-p+m+lo(w,Pn,j)+T]:null}),q(f=>f!=null),fe(un)),[0,0]);return{increaseViewportBy:l,listBoundary:r,overscan:c,topListHeight:i,visibleRange:u}},pe(We),{singleton:!0});function Fd(e,t,s){if(Kn(t)){const o=aa(e,t);return[{index:ut(t.groupOffsetTree,o)[0],offset:0,size:0},{data:s?.[0],index:o,offset:0,size:0}]}return[{data:s?.[0],index:e,offset:0,size:0}]}const es={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function Mn(e,t,s,o,a,r){const{lastIndex:i,lastOffset:l,lastSize:c}=a;let u=0,f=0;if(e.length>0){u=e[0].offset;const w=e[e.length-1];f=w.offset+w.size}const m=s-i,d=l+m*c+(m-1)*o,g=u,_=d-f;return{bottom:f,firstItemIndex:r,items:uo(e,a,r),offsetBottom:_,offsetTop:u,top:g,topItems:uo(t,a,r),topListHeight:t.reduce((w,x)=>x.size+w,0),totalCount:s}}function ua(e,t,s,o,a,r){let i=0;if(s.groupIndices.length>0)for(const f of s.groupIndices){if(f-i>=e)break;i++}const l=e+i,c=Ps(t,l),u=Array.from({length:l}).map((f,m)=>({data:r[m+c],index:m+c,offset:0,size:0}));return Mn(u,[],l,a,s,o)}function uo(e,t,s){if(e.length===0)return[];if(!Kn(t))return e.map(u=>({...u,index:u.index+s,originalIndex:u.index}));const o=e[0].index,a=e[e.length-1].index,r=[],i=Yn(t.groupOffsetTree,o,a);let l,c=0;for(const u of e){(!l||l.end<u.index)&&(l=i.shift(),c=t.groupIndices.indexOf(l.start));let f;u.index===l.start?f={index:c,type:"group"}:f={groupIndex:c,index:u.index-(c+1)+s},r.push({...f,data:u.data,offset:u.offset,originalIndex:u.index,size:u.size})}return r}const Vt=ie(([{data:e,firstItemIndex:t,gap:s,sizes:o,totalCount:a},r,{listBoundary:i,topListHeight:l,visibleRange:c},{initialTopMostItemIndex:u,scrolledToInitialItem:f},{topListHeight:m},d,{didMount:g},{recalcInProgress:_}])=>{const w=z([]),x=z(0),p=se();$(r.topItemsIndexes,w);const h=Le(A(Ie(g,_,V(c,un),V(a),V(o),V(u),f,V(w),V(t),V(s),e),q(([b,j,,I,,,,,,,T])=>{const O=T&&T.length!==I;return b&&!j&&!O}),L(([,,[b,j],I,T,O,E,D,M,B,P])=>{const Z=T,{offsetTree:Q,sizeTree:ne}=Z,we=_e(x);if(I===0)return{...es,totalCount:I};if(b===0&&j===0)return we===0?{...es,totalCount:I}:ua(we,O,T,M,B,P||[]);if(de(ne))return we>0?null:Mn(Fd(Ps(O,I),Z,P),[],I,B,Z,M);const xe=[];if(D.length>0){const Ye=D[0],ze=D[D.length-1];let Me=0;for(const R of Yn(ne,Ye,ze)){const H=R.value,J=Math.max(R.start,Ye),me=Math.min(R.end,ze);for(let ue=J;ue<=me;ue++)xe.push({data:P?.[ue],index:ue,offset:Me,size:H}),Me+=H}}if(!E)return Mn([],xe,I,B,Z,M);const Ne=D.length>0?D[D.length-1]+1:0,Qe=Rd(Q,b,j,Ne);if(Qe.length===0)return null;const Ce=I-1,Je=Un([],Ye=>{for(const ze of Qe){const Me=ze.value;let R=Me.offset,H=ze.start;const J=Me.size;if(Me.offset<b){H+=Math.floor((b-Me.offset+B)/(J+B));const ue=H-ze.start;R+=ue*J+ue*B}H<Ne&&(R+=(Ne-H)*J,H=Ne);const me=Math.min(ze.end,Ce);for(let ue=H;ue<=me&&!(R>=j);ue++)Ye.push({data:P?.[ue],index:ue,offset:R,size:J}),R+=J+B}});return Mn(Je,xe,I,B,Z,M)}),q(b=>b!==null),fe()),es);$(A(e,q(Bs),L(b=>b?.length)),a),$(A(h,L(b=>b.topListHeight)),m),$(m,l),$(A(h,L(b=>[b.top,b.bottom])),i),$(A(h,L(b=>b.items)),p);const v=Ze(A(h,q(({items:b})=>b.length>0),ee(a,e),q(([{items:b},j])=>b[b.length-1].originalIndex===j-1),L(([,b,j])=>[b-1,j]),fe(un),L(([b])=>b))),C=Ze(A(h,Ct(200),q(({items:b,topItems:j})=>b.length>0&&b[0].originalIndex===j.length),L(({items:b})=>b[0].index),fe())),y=Ze(A(h,q(({items:b})=>b.length>0),L(({items:b})=>{let j=0,I=b.length-1;for(;b[j].type==="group"&&j<I;)j++;for(;b[I].type==="group"&&I>j;)I--;return{endIndex:b[I].index,startIndex:b[j].index}}),fe(sa)));return{endReached:v,initialItemCount:x,itemsRendered:p,listState:h,rangeChanged:y,startReached:C,topItemsIndexes:w,...d}},pe(wt,ia,$s,gn,pn,vn,Rt,Hs),{singleton:!0}),da=ie(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:s,headerHeight:o},{listState:a}])=>{const r=se(),i=Le(A(Ie(s,e,o,t,a),L(([l,c,u,f,m])=>l+c+u+f+m.offsetBottom+m.bottom)),0);return $(V(i),r),{totalListHeight:i,totalListHeightChanged:r}},pe(We,Vt),{singleton:!0}),Wd=ie(([{viewportHeight:e},{totalListHeight:t}])=>{const s=z(!1),o=Le(A(Ie(s,e,t),q(([a])=>a),L(([,a,r])=>Math.max(0,a-r)),Ct(0),fe()),0);return{alignToBottom:s,paddingTopAddition:o}},pe(We,da),{singleton:!0}),ma=ie(()=>({context:z(null)})),Vd=({itemBottom:e,itemTop:t,locationParams:{align:s,behavior:o,...a},viewportBottom:r,viewportTop:i})=>t<i?{...a,align:s??"start",behavior:o}:e>r?{...a,align:s??"end",behavior:o}:null,ha=ie(([{gap:e,sizes:t,totalCount:s},{fixedFooterHeight:o,fixedHeaderHeight:a,headerHeight:r,scrollingInProgress:i,scrollTop:l,viewportHeight:c},{scrollToIndex:u}])=>{const f=se();return $(A(f,ee(t,c,s,r,a,o,l),ee(e),L(([[m,d,g,_,w,x,p,h],v])=>{const{align:C,behavior:y,calculateViewLocation:b=Vd,done:j,...I}=m,T=ra(m,d,_-1),O=dn(T,d.offsetTree,v)+w+x,E=O+ut(d.sizeTree,T)[1],D=h+x,M=h+g-p,B=b({itemBottom:E,itemTop:O,locationParams:{align:C,behavior:y,...I},viewportBottom:M,viewportTop:D});return B?j&&lt(A(i,q(P=>!P),Ft(_e(i)?1:2)),j):j&&j(),B}),q(m=>m!==null)),u),{scrollIntoView:f}},pe(wt,We,pn,Vt,Nt),{singleton:!0});function mo(e){return e?e==="smooth"?"smooth":"auto":!1}const Gd=(e,t)=>typeof e=="function"?mo(e(t)):t&&mo(e),qd=ie(([{listRefresh:e,totalCount:t,fixedItemSize:s,data:o},{atBottomState:a,isAtBottom:r},{scrollToIndex:i},{scrolledToInitialItem:l},{didMount:c,propsReady:u},{log:f},{scrollingInProgress:m},{context:d},{scrollIntoView:g}])=>{const _=z(!1),w=se();let x=null;function p(y){X(i,{align:"end",behavior:y,index:"LAST"})}le(A(Ie(A(V(t),Ft(1)),c),ee(V(_),r,l,m),L(([[y,b],j,I,T,O])=>{let E=b&&T,D="auto";return E&&(D=Gd(j,I||O),E=E&&!!D),{followOutputBehavior:D,shouldFollow:E,totalCount:y}}),q(({shouldFollow:y})=>y)),({followOutputBehavior:y,totalCount:b})=>{x&&(x(),x=null),_e(s)?requestAnimationFrame(()=>{_e(f)("following output to ",{totalCount:b},Ge.DEBUG),p(y)}):x=lt(e,()=>{_e(f)("following output to ",{totalCount:b},Ge.DEBUG),p(y),x=null})});function h(y){const b=lt(a,j=>{y&&!j.atBottom&&j.notAtBottomBecause==="SIZE_INCREASED"&&!x&&(_e(f)("scrolling to bottom due to increased size",{},Ge.DEBUG),p("auto"))});setTimeout(b,100)}le(A(Ie(V(_),t,u),q(([y,,b])=>y&&b),yt(({value:y},[,b])=>({refreshed:y===b,value:b}),{refreshed:!1,value:0}),q(({refreshed:y})=>y),ee(_,t)),([,y])=>{_e(l)&&h(y!==!1)}),le(w,()=>{h(_e(_)!==!1)}),le(Ie(V(_),a),([y,b])=>{y&&!b.atBottom&&b.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&p("auto")});const v=z(null),C=se();return $(ms(A(V(o),L(y=>{var b;return(b=y?.length)!=null?b:0})),A(V(t))),C),le(A(Ie(A(C,Ft(1)),c),ee(V(v),l,m,d),L(([[y,b],j,I,T,O])=>b&&I&&j?.({context:O,totalCount:y,scrollingInProgress:T})),q(y=>!!y),Ct(0)),y=>{x&&(x(),x=null),_e(s)?requestAnimationFrame(()=>{_e(f)("scrolling into view",{}),X(g,y)}):x=lt(e,()=>{_e(f)("scrolling into view",{}),X(g,y),x=null})}),{autoscrollToBottom:w,followOutput:_,scrollIntoViewOnChange:v}},pe(wt,vn,pn,gn,Rt,Nt,We,ma,ha)),Ud=ie(([{data:e,firstItemIndex:t,gap:s,sizes:o},{initialTopMostItemIndex:a},{initialItemCount:r,listState:i},{didMount:l}])=>($(A(l,ee(r),q(([,c])=>c!==0),ee(a,o,t,s,e),L(([[,c],u,f,m,d,g=[]])=>ua(c,u,f,m,d,g))),i),{}),pe(wt,gn,Vt,Rt),{singleton:!0}),Yd=ie(([{didMount:e},{scrollTo:t},{listState:s}])=>{const o=z(0);return le(A(e,ee(o),q(([,a])=>a!==0),L(([,a])=>({top:a}))),a=>{lt(A(s,Ft(1),q(r=>r.items.length>1)),()=>{requestAnimationFrame(()=>{X(t,a)})})}),{initialScrollTop:o}},pe(Rt,We,Vt),{singleton:!0}),fa=ie(([{scrollVelocity:e}])=>{const t=z(!1),s=se(),o=z(!1);return $(A(e,ee(o,t,s),q(([a,r])=>!!r),L(([a,r,i,l])=>{const{enter:c,exit:u}=r;if(i){if(u(a,l))return!1}else if(c(a,l))return!0;return i}),fe()),t),le(A(Ie(t,e,s),ee(o)),([[a,r,i],l])=>{a&&l&&l.change&&l.change(r,i)}),{isSeeking:t,scrollSeekConfiguration:o,scrollSeekRangeChanged:s,scrollVelocity:e}},pe(vn),{singleton:!0}),Fs=ie(([{scrollContainerState:e,scrollTo:t}])=>{const s=se(),o=se(),a=se(),r=z(!1),i=z(void 0);return $(A(Ie(s,o),L(([{scrollHeight:l,scrollTop:c,viewportHeight:u},{offsetTop:f}])=>({scrollHeight:l,scrollTop:Math.max(0,c-f),viewportHeight:u}))),e),$(A(t,ee(o),L(([l,{offsetTop:c}])=>({...l,top:l.top+c}))),a),{customScrollParent:i,useWindowScroll:r,windowScrollContainerState:s,windowScrollTo:a,windowViewportRect:o}},pe(We)),Kd=ie(([{sizeRanges:e,sizes:t},{headerHeight:s,scrollTop:o},{initialTopMostItemIndex:a},{didMount:r},{useWindowScroll:i,windowScrollContainerState:l,windowViewportRect:c}])=>{const u=se(),f=z(void 0),m=z(null),d=z(null);return $(l,m),$(c,d),le(A(u,ee(t,o,i,m,d,s)),([g,_,w,x,p,h,v])=>{const C=Ad(_.sizeTree);x&&p!==null&&h!==null&&(w=p.scrollTop-h.offsetTop),w-=v,g({ranges:C,scrollTop:w})}),$(A(f,q(Bs),L(Xd)),a),$(A(r,ee(f),q(([,g])=>g!==void 0),fe(),L(([,g])=>g.ranges)),e),{getState:u,restoreStateFrom:f}},pe(wt,We,gn,Rt,Fs));function Xd(e){return{align:"start",index:0,offset:e.scrollTop}}const Zd=ie(([{topItemsIndexes:e}])=>{const t=z(0);return $(A(t,q(s=>s>=0),L(s=>Array.from({length:s}).map((o,a)=>a))),e),{topItemCount:t}},pe(Vt));function pa(e){let t=!1,s;return()=>(t||(t=!0,s=e()),s)}const Qd=pa(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),Jd=ie(([{deviation:e,scrollBy:t,scrollingInProgress:s,scrollTop:o},{isAtBottom:a,isScrolling:r,lastJumpDueToItemResize:i,scrollDirection:l},{listState:c},{beforeUnshiftWith:u,gap:f,shiftWithOffset:m,sizes:d},{log:g},{recalcInProgress:_}])=>{const w=Ze(A(c,ee(i),yt(([,p,h,v],[{bottom:C,items:y,offsetBottom:b,totalCount:j},I])=>{const T=C+b;let O=0;return h===j&&p.length>0&&y.length>0&&(y[0].originalIndex===0&&p[0].originalIndex===0||(O=T-v,O!==0&&(O+=I))),[O,y,j,T]},[0,[],0,0]),q(([p])=>p!==0),ee(o,l,s,a,g,_),q(([,p,h,v,,,C])=>!C&&!v&&p!==0&&h===mn),L(([[p],,,,,h])=>(h("Upward scrolling compensation",{amount:p},Ge.DEBUG),p))));function x(p){p>0?(X(t,{behavior:"auto",top:-p}),X(e,0)):(X(e,0),X(t,{behavior:"auto",top:-p}))}return le(A(w,ee(e,r)),([p,h,v])=>{v&&Qd()?X(e,h-p):x(-p)}),le(A(Ie(Le(r,!1),e,_),q(([p,h,v])=>!p&&!v&&h!==0),L(([p,h])=>h),Ct(1)),x),$(A(m,L(p=>({top:-p}))),t),le(A(u,ee(d,f),L(([p,{groupIndices:h,lastSize:v,sizeTree:C},y])=>{function b(j){return j*(v+y)}if(h.length===0)return b(p);{let j=0;const I=cn(C,0);let T=0,O=0;for(;T<p;){T++,j+=I;let E=h.length===O+1?1/0:h[O+1]-h[O]-1;T+E>p&&(j-=I,E=p-T+1),T+=E,j+=b(E),O++}return j}})),p=>{X(e,p),requestAnimationFrame(()=>{X(t,{top:p}),requestAnimationFrame(()=>{X(e,0),X(_,!1)})})}),{deviation:e}},pe(We,vn,Vt,wt,Nt,Hs)),em=ie(([e,t,s,o,a,r,i,l,c,u,f])=>({...e,...t,...s,...o,...a,...r,...i,...l,...c,...u,...f}),pe($s,Ud,Rt,fa,da,Yd,Wd,Fs,ha,Nt,ma)),ga=ie(([{data:e,defaultItemSize:t,firstItemIndex:s,fixedItemSize:o,gap:a,groupIndices:r,itemSize:i,sizeRanges:l,sizes:c,statefulTotalCount:u,totalCount:f,trackItemSizes:m},{initialItemFinalLocationReached:d,initialTopMostItemIndex:g,scrolledToInitialItem:_},w,x,p,{listState:h,topItemsIndexes:v,...C},{scrollToIndex:y},b,{topItemCount:j},{groupCounts:I},T])=>($(C.rangeChanged,T.scrollSeekRangeChanged),$(A(T.windowViewportRect,L(O=>O.visibleHeight)),w.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:s,fixedItemHeight:o,gap:a,groupCounts:I,initialItemFinalLocationReached:d,initialTopMostItemIndex:g,scrolledToInitialItem:_,sizeRanges:l,topItemCount:j,topItemsIndexes:v,totalCount:f,...p,groupIndices:r,itemSize:i,listState:h,scrollToIndex:y,statefulTotalCount:u,trackItemSizes:m,...C,...T,...w,sizes:c,...x}),pe(wt,gn,We,Kd,qd,Vt,pn,Jd,Zd,ia,em));function tm(e,t){const s={},o={};let a=0;const r=e.length;for(;a<r;)o[e[a]]=1,a+=1;for(const i in t)Object.hasOwn(o,i)||(s[i]=t[i]);return s}const Rn=typeof document<"u"?k.useLayoutEffect:k.useEffect;function va(e,t,s){const o=Object.keys(t.required||{}),a=Object.keys(t.optional||{}),r=Object.keys(t.methods||{}),i=Object.keys(t.events||{}),l=k.createContext({});function c(x,p){x.propsReady&&X(x.propsReady,!1);for(const h of o){const v=x[t.required[h]];X(v,p[h])}for(const h of a)if(h in p){const v=x[t.optional[h]];X(v,p[h])}x.propsReady&&X(x.propsReady,!0)}function u(x){return r.reduce((p,h)=>(p[h]=v=>{const C=x[t.methods[h]];X(C,v)},p),{})}function f(x){return i.reduce((p,h)=>(p[h]=vd(x[t.events[h]]),p),{})}const m=k.forwardRef((x,p)=>{const{children:h,...v}=x,[C]=k.useState(()=>Un(yd(e),j=>{c(j,v)})),[y]=k.useState(no(f,C));Rn(()=>{for(const j of i)j in v&&le(y[j],v[j]);return()=>{Object.values(y).map(zs)}},[v,y,C]),Rn(()=>{c(C,v)}),k.useImperativeHandle(p,to(u(C)));const b=s;return n.jsx(l.Provider,{value:C,children:s?n.jsx(b,{...tm([...o,...a,...i],v),children:h}):h})}),d=x=>{const p=k.useContext(l);return k.useCallback(h=>{X(p[x],h)},[p,x])},g=x=>{const p=k.useContext(l)[x],h=k.useCallback(v=>le(p,v),[p]);return k.useSyncExternalStore(h,()=>_e(p),()=>_e(p))},_=x=>{const p=k.useContext(l)[x],[h,v]=k.useState(no(_e,p));return Rn(()=>le(p,C=>{C!==h&&v(to(C))}),[p,h]),h},w=k.version.startsWith("18")?g:_;return{Component:m,useEmitter:(x,p)=>{const h=k.useContext(l)[x];Rn(()=>le(h,p),[p,h])},useEmitterValue:w,usePublisher:d}}const xa=k.createContext(void 0),ya=k.createContext(void 0),wa=typeof document<"u"?k.useLayoutEffect:k.useEffect;function ts(e){return"self"in e}function nm(e){return"body"in e}function ba(e,t,s,o=Zt,a,r){const i=k.useRef(null),l=k.useRef(null),c=k.useRef(null),u=k.useCallback(d=>{let g,_,w;const x=d.target;if(nm(x)||ts(x)){const h=ts(x)?x:x.defaultView;w=r?h.scrollX:h.scrollY,g=r?h.document.documentElement.scrollWidth:h.document.documentElement.scrollHeight,_=r?h.innerWidth:h.innerHeight}else w=r?x.scrollLeft:x.scrollTop,g=r?x.scrollWidth:x.scrollHeight,_=r?x.offsetWidth:x.offsetHeight;const p=()=>{e({scrollHeight:g,scrollTop:Math.max(w,0),viewportHeight:_})};d.suppressFlushSync?p():rr.flushSync(p),l.current!==null&&(w===l.current||w<=0||w===g-_)&&(l.current=null,t(!0),c.current&&(clearTimeout(c.current),c.current=null))},[e,t,r]);k.useEffect(()=>{const d=a||i.current;return o(a||i.current),u({suppressFlushSync:!0,target:d}),d.addEventListener("scroll",u,{passive:!0}),()=>{o(null),d.removeEventListener("scroll",u)}},[i,u,s,o,a]);function f(d){const g=i.current;if(!g||(r?"offsetWidth"in g&&g.offsetWidth===0:"offsetHeight"in g&&g.offsetHeight===0))return;const _=d.behavior==="smooth";let w,x,p;ts(g)?(x=Math.max(kt(g.document.documentElement,r?"width":"height"),r?g.document.documentElement.scrollWidth:g.document.documentElement.scrollHeight),w=r?g.innerWidth:g.innerHeight,p=r?window.scrollX:window.scrollY):(x=g[r?"scrollWidth":"scrollHeight"],w=kt(g,r?"width":"height"),p=g[r?"scrollLeft":"scrollTop"]);const h=x-w;if(d.top=Math.ceil(Math.max(Math.min(h,d.top),0)),ca(w,x)||d.top===p){e({scrollHeight:x,scrollTop:p,viewportHeight:w}),_&&t(!0);return}_?(l.current=d.top,c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{c.current=null,l.current=null,t(!0)},1e3)):l.current=null,r&&(d={behavior:d.behavior,left:d.top}),g.scrollTo(d)}function m(d){r&&(d={behavior:d.behavior,left:d.top}),i.current.scrollBy(d)}return{scrollByCallback:m,scrollerRef:i,scrollToCallback:f}}const ns="-webkit-sticky",ho="sticky",Ws=pa(()=>{if(typeof document>"u")return ho;const e=document.createElement("div");return e.style.position=ns,e.style.position===ns?ns:ho});function Vs(e){return e}const sm=ie(()=>{const e=z(l=>`Item ${l}`),t=z(l=>`Group ${l}`),s=z({}),o=z(Vs),a=z("div"),r=z(Zt),i=(l,c=null)=>Le(A(s,L(u=>u[l]),fe()),c);return{components:s,computeItemKey:o,EmptyPlaceholder:i("EmptyPlaceholder"),FooterComponent:i("Footer"),GroupComponent:i("Group","div"),groupContent:t,HeaderComponent:i("Header"),HeaderFooterTag:a,ItemComponent:i("Item","div"),itemContent:e,ListComponent:i("List","div"),ScrollerComponent:i("Scroller","div"),scrollerRef:r,ScrollSeekPlaceholder:i("ScrollSeekPlaceholder"),TopItemListComponent:i("TopItemList")}}),om=ie(([e,t])=>({...e,...t}),pe(ga,sm)),am=({height:e})=>n.jsx("div",{style:{height:e}}),rm={overflowAnchor:"none",position:Ws(),zIndex:1},_a={overflowAnchor:"none"},im={..._a,display:"inline-block",height:"100%"},fo=k.memo(function({showTopList:e=!1}){const t=Y("listState"),s=nt("sizeRanges"),o=Y("useWindowScroll"),a=Y("customScrollParent"),r=nt("windowScrollContainerState"),i=nt("scrollContainerState"),l=a||o?r:i,c=Y("itemContent"),u=Y("context"),f=Y("groupContent"),m=Y("trackItemSizes"),d=Y("itemSize"),g=Y("log"),_=nt("gap"),w=Y("horizontalDirection"),{callbackRef:x}=_d(s,d,m,e?Zt:l,g,_,a,w,Y("skipAnimationFrameInResizeObserver")),[p,h]=k.useState(0);Gs("deviation",B=>{p!==B&&h(B)});const v=Y("EmptyPlaceholder"),C=Y("ScrollSeekPlaceholder")||am,y=Y("ListComponent"),b=Y("ItemComponent"),j=Y("GroupComponent"),I=Y("computeItemKey"),T=Y("isSeeking"),O=Y("groupIndices").length>0,E=Y("alignToBottom"),D=Y("initialItemFinalLocationReached"),M=e?{}:{boxSizing:"border-box",...w?{display:"inline-block",height:"100%",marginLeft:p!==0?p:E?"auto":0,paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,whiteSpace:"nowrap"}:{marginTop:p!==0?p:E?"auto":0,paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},...D?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&v?n.jsx(v,{...He(v,u)}):n.jsx(y,{...He(y,u),"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",ref:x,style:M,children:(e?t.topItems:t.items).map(B=>{const P=B.originalIndex,Z=I(P+t.firstItemIndex,B.data,u);return T?S.createElement(C,{...He(C,u),height:B.size,index:B.index,key:Z,type:B.type||"item",...B.type==="group"?{}:{groupIndex:B.groupIndex}}):B.type==="group"?S.createElement(j,{...He(j,u),"data-index":P,"data-item-index":B.index,"data-known-size":B.size,key:Z,style:rm},f(B.index,u)):S.createElement(b,{...He(b,u),...dm(b,B.data),"data-index":P,"data-item-group-index":B.groupIndex,"data-item-index":B.index,"data-known-size":B.size,key:Z,style:w?im:_a},O?c(B.index,B.groupIndex,B.data,u):c(B.index,B.data,u))})})}),lm={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},cm={outline:"none",overflowX:"auto",position:"relative"},Xn=e=>({height:"100%",position:"absolute",top:0,width:"100%",...e?{display:"flex",flexDirection:"column"}:{}}),um={position:Ws(),top:0,width:"100%",zIndex:1};function He(e,t){if(typeof e!="string")return{context:t}}function dm(e,t){return{item:typeof e=="string"?void 0:t}}const mm=k.memo(function(){const e=Y("HeaderComponent"),t=nt("headerHeight"),s=Y("HeaderFooterTag"),o=Wt(k.useMemo(()=>r=>{t(kt(r,"height"))},[t]),!0,Y("skipAnimationFrameInResizeObserver")),a=Y("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...He(e,a)})}):null}),hm=k.memo(function(){const e=Y("FooterComponent"),t=nt("footerHeight"),s=Y("HeaderFooterTag"),o=Wt(k.useMemo(()=>r=>{t(kt(r,"height"))},[t]),!0,Y("skipAnimationFrameInResizeObserver")),a=Y("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...He(e,a)})}):null});function Ca({useEmitter:e,useEmitterValue:t,usePublisher:s}){return k.memo(function({children:o,style:a,context:r,...i}){const l=s("scrollContainerState"),c=t("ScrollerComponent"),u=s("smoothScrollTargetReached"),f=t("scrollerRef"),m=t("horizontalDirection")||!1,{scrollByCallback:d,scrollerRef:g,scrollToCallback:_}=ba(l,u,c,f,void 0,m);return e("scrollTo",_),e("scrollBy",d),n.jsx(c,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:g,style:{...m?cm:lm,...a},tabIndex:0,...i,...He(c,r),children:o})})}function Sa({useEmitter:e,useEmitterValue:t,usePublisher:s}){return k.memo(function({children:o,style:a,context:r,...i}){const l=s("windowScrollContainerState"),c=t("ScrollerComponent"),u=s("smoothScrollTargetReached"),f=t("totalListHeight"),m=t("deviation"),d=t("customScrollParent"),g=k.useRef(null),_=t("scrollerRef"),{scrollByCallback:w,scrollerRef:x,scrollToCallback:p}=ba(l,u,c,_,d);return wa(()=>{var h;return x.current=d||((h=g.current)==null?void 0:h.ownerDocument.defaultView),()=>{x.current=null}},[x,d]),e("windowScrollTo",p),e("scrollBy",w),n.jsx(c,{ref:g,"data-virtuoso-scroller":!0,style:{position:"relative",...a,...f!==0?{height:f+m}:{}},...i,...He(c,r),children:o})})}const fm=({children:e})=>{const t=k.useContext(xa),s=nt("viewportHeight"),o=nt("fixedItemHeight"),a=Y("alignToBottom"),r=Y("horizontalDirection"),i=k.useMemo(()=>Ko(s,c=>kt(c,r?"width":"height")),[s,r]),l=Wt(i,!0,Y("skipAnimationFrameInResizeObserver"));return k.useEffect(()=>{t&&(s(t.viewportHeight),o(t.itemHeight))},[t,s,o]),n.jsx("div",{"data-viewport-type":"element",ref:l,style:Xn(a),children:e})},pm=({children:e})=>{const t=k.useContext(xa),s=nt("windowViewportRect"),o=nt("fixedItemHeight"),a=Y("customScrollParent"),r=Zo(s,a,Y("skipAnimationFrameInResizeObserver")),i=Y("alignToBottom");return k.useEffect(()=>{t&&(o(t.itemHeight),s({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))},[t,s,o]),n.jsx("div",{"data-viewport-type":"window",ref:r,style:Xn(i),children:e})},gm=({children:e})=>{const t=Y("TopItemListComponent")||"div",s=Y("headerHeight"),o={...um,marginTop:`${s}px`},a=Y("context");return n.jsx(t,{style:o,...He(t,a),children:e})},vm=k.memo(function(e){const t=Y("useWindowScroll"),s=Y("topItemsIndexes").length>0,o=Y("customScrollParent"),a=Y("context");return n.jsxs(o||t?wm:ym,{...e,context:a,children:[s&&n.jsx(gm,{children:n.jsx(fo,{showTopList:!0})}),n.jsxs(o||t?pm:fm,{children:[n.jsx(mm,{}),n.jsx(fo,{}),n.jsx(hm,{})]})]})}),{Component:xm,useEmitter:Gs,useEmitterValue:Y,usePublisher:nt}=va(om,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",scrollIntoViewOnChange:"scrollIntoViewOnChange",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},vm),ym=Ca({useEmitter:Gs,useEmitterValue:Y,usePublisher:nt}),wm=Sa({useEmitter:Gs,useEmitterValue:Y,usePublisher:nt}),bm=xm,_m=ie(()=>{const e=z(u=>n.jsxs("td",{children:["Item $",u]})),t=z(null),s=z(u=>n.jsxs("td",{colSpan:1e3,children:["Group ",u]})),o=z(null),a=z(null),r=z({}),i=z(Vs),l=z(Zt),c=(u,f=null)=>Le(A(r,L(m=>m[u]),fe()),f);return{components:r,computeItemKey:i,context:t,EmptyPlaceholder:c("EmptyPlaceholder"),FillerRow:c("FillerRow"),fixedFooterContent:a,fixedHeaderContent:o,itemContent:e,groupContent:s,ScrollerComponent:c("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder"),TableBodyComponent:c("TableBody","tbody"),TableComponent:c("Table","table"),TableFooterComponent:c("TableFoot","tfoot"),TableHeadComponent:c("TableHead","thead"),TableRowComponent:c("TableRow","tr"),GroupComponent:c("Group","tr")}});pe(ga,_m);Ws();const po={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},Cm={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:go,floor:$n,max:an,min:ss,round:vo}=Math;function xo(e,t,s){return Array.from({length:t-e+1}).map((o,a)=>({data:s===null?null:s[a+e],index:a+e}))}function Sm(e){return{...Cm,items:e}}function En(e,t){return e&&e.width===t.width&&e.height===t.height}function jm(e,t){return e&&e.column===t.column&&e.row===t.row}const Tm=ie(([{increaseViewportBy:e,listBoundary:t,overscan:s,visibleRange:o},{footerHeight:a,headerHeight:r,scrollBy:i,scrollContainerState:l,scrollTo:c,scrollTop:u,smoothScrollTargetReached:f,viewportHeight:m},d,g,{didMount:_,propsReady:w},{customScrollParent:x,useWindowScroll:p,windowScrollContainerState:h,windowScrollTo:v,windowViewportRect:C},y])=>{const b=z(0),j=z(0),I=z(po),T=z({height:0,width:0}),O=z({height:0,width:0}),E=se(),D=se(),M=z(0),B=z(null),P=z({column:0,row:0}),Z=se(),Q=se(),ne=z(!1),we=z(0),xe=z(!0),Ne=z(!1),Qe=z(!1);le(A(_,ee(we),q(([R,H])=>!!H)),()=>{X(xe,!1)}),le(A(Ie(_,xe,O,T,we,Ne),q(([R,H,J,me,,ue])=>R&&!H&&J.height!==0&&me.height!==0&&!ue)),([,,,,R])=>{X(Ne,!0),Ds(1,()=>{X(E,R)}),lt(A(u),()=>{X(t,[0,0]),X(xe,!0)})}),$(A(Q,q(R=>R!=null&&R.scrollTop>0),vt(0)),j),le(A(_,ee(Q),q(([,R])=>R!=null)),([,R])=>{R&&(X(T,R.viewport),X(O,R.item),X(P,R.gap),R.scrollTop>0&&(X(ne,!0),lt(A(u,Ft(1)),H=>{X(ne,!1)}),X(c,{top:R.scrollTop})))}),$(A(T,L(({height:R})=>R)),m),$(A(Ie(V(T,En),V(O,En),V(P,(R,H)=>R&&R.column===H.column&&R.row===H.row),V(u)),L(([R,H,J,me])=>({gap:J,item:H,scrollTop:me,viewport:R}))),Z),$(A(Ie(V(b),o,V(P,jm),V(O,En),V(T,En),V(B),V(j),V(ne),V(xe),V(we)),q(([,,,,,,,R])=>!R),L(([R,[H,J],me,ue,Ke,W,ot,,Et,et])=>{const{column:dt,row:At}=me,{height:at,width:Gt}=ue,{width:yn}=Ke;if(ot===0&&(R===0||yn===0))return po;if(Gt===0){const Sn=Ps(et,R),Bt=Sn+Math.max(ot-1,0);return Sm(xo(Sn,Bt,W))}const mt=ja(yn,Gt,dt);let St,ht;Et?H===0&&J===0&&ot>0?(St=0,ht=ot-1):(St=mt*$n((H+At)/(at+At)),ht=mt*go((J+At)/(at+At))-1,ht=ss(R-1,an(ht,mt-1)),St=ss(ht,an(0,St))):(St=0,ht=-1);const wn=xo(St,ht,W),{bottom:bn,top:Ot}=yo(Ke,me,ue,wn),_n=go(R/mt),Cn=_n*at+(_n-1)*At-bn;return{bottom:bn,itemHeight:at,items:wn,itemWidth:Gt,offsetBottom:Cn,offsetTop:Ot,top:Ot}})),I),$(A(B,q(R=>R!==null),L(R=>R.length)),b),$(A(Ie(T,O,I,P),q(([R,H,{items:J}])=>J.length>0&&H.height!==0&&R.height!==0),L(([R,H,{items:J},me])=>{const{bottom:ue,top:Ke}=yo(R,me,H,J);return[Ke,ue]}),fe(un)),t);const Ce=z(!1);$(A(u,ee(Ce),L(([R,H])=>H||R!==0)),Ce);const Je=Ze(A(Ie(I,b),q(([{items:R}])=>R.length>0),ee(Ce),q(([[R,H],J])=>{const me=R.items[R.items.length-1].index===H-1;return(J||R.bottom>0&&R.itemHeight>0&&R.offsetBottom===0&&R.items.length===H)&&me}),L(([[,R]])=>R-1),fe())),Ye=Ze(A(V(I),q(({items:R})=>R.length>0&&R[0].index===0),vt(0),fe())),ze=Ze(A(V(I),ee(ne),q(([{items:R},H])=>R.length>0&&!H),L(([{items:R}])=>({endIndex:R[R.length-1].index,startIndex:R[0].index})),fe(sa),Ct(0)));$(ze,g.scrollSeekRangeChanged),$(A(E,ee(T,O,b,P),L(([R,H,J,me,ue])=>{const Ke=la(R),{align:W,behavior:ot,offset:Et}=Ke;let et=Ke.index;et==="LAST"&&(et=me-1),et=an(0,et,ss(me-1,et));let dt=vs(H,ue,J,et);return W==="end"?dt=vo(dt-H.height+J.height):W==="center"&&(dt=vo(dt-H.height/2+J.height/2)),Et&&(dt+=Et),{behavior:ot,top:dt}})),c);const Me=Le(A(I,L(R=>R.offsetBottom+R.bottom)),0);return $(A(C,L(R=>({height:R.visibleHeight,width:R.visibleWidth}))),T),{customScrollParent:x,data:B,deviation:M,footerHeight:a,gap:P,headerHeight:r,increaseViewportBy:e,initialItemCount:j,itemDimensions:O,overscan:s,restoreStateFrom:Q,scrollBy:i,scrollContainerState:l,scrollHeight:D,scrollTo:c,scrollToIndex:E,scrollTop:u,smoothScrollTargetReached:f,totalCount:b,useWindowScroll:p,viewportDimensions:T,windowScrollContainerState:h,windowScrollTo:v,windowViewportRect:C,...g,gridState:I,horizontalDirection:Qe,initialTopMostItemIndex:we,totalListHeight:Me,...d,endReached:Je,propsReady:w,rangeChanged:ze,startReached:Ye,stateChanged:Z,stateRestoreInProgress:ne,...y}},pe($s,We,vn,fa,Rt,Fs,Nt));function ja(e,t,s){return an(1,$n((e+s)/($n(t)+s)))}function yo(e,t,s,o){const{height:a}=s;if(a===void 0||o.length===0)return{bottom:0,top:0};const r=vs(e,t,s,o[0].index);return{bottom:vs(e,t,s,o[o.length-1].index)+a,top:r}}function vs(e,t,s,o){const a=ja(e.width,s.width,t.column),r=$n(o/a),i=r*s.height+an(0,r-1)*t.row;return i>0?i+t.row:i}const km=ie(()=>{const e=z(m=>`Item ${m}`),t=z({}),s=z(null),o=z("virtuoso-grid-item"),a=z("virtuoso-grid-list"),r=z(Vs),i=z("div"),l=z(Zt),c=(m,d=null)=>Le(A(t,L(g=>g[m]),fe()),d),u=z(!1),f=z(!1);return $(V(f),u),{components:t,computeItemKey:r,context:s,FooterComponent:c("Footer"),HeaderComponent:c("Header"),headerFooterTag:i,itemClassName:o,ItemComponent:c("Item","div"),itemContent:e,listClassName:a,ListComponent:c("List","div"),readyStateChanged:u,reportReadyState:f,ScrollerComponent:c("Scroller","div"),scrollerRef:l,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder","div")}}),Im=ie(([e,t])=>({...e,...t}),pe(Tm,km)),Nm=k.memo(function(){const e=ve("gridState"),t=ve("listClassName"),s=ve("itemClassName"),o=ve("itemContent"),a=ve("computeItemKey"),r=ve("isSeeking"),i=st("scrollHeight"),l=ve("ItemComponent"),c=ve("ListComponent"),u=ve("ScrollSeekPlaceholder"),f=ve("context"),m=st("itemDimensions"),d=st("gap"),g=ve("log"),_=ve("stateRestoreInProgress"),w=st("reportReadyState"),x=Wt(k.useMemo(()=>p=>{const h=p.parentElement.parentElement.scrollHeight;i(h);const v=p.firstChild;if(v){const{height:C,width:y}=v.getBoundingClientRect();m({height:C,width:y})}d({column:wo("column-gap",getComputedStyle(p).columnGap,g),row:wo("row-gap",getComputedStyle(p).rowGap,g)})},[i,m,d,g]),!0,!1);return wa(()=>{e.itemHeight>0&&e.itemWidth>0&&w(!0)},[e]),_?null:n.jsx(c,{className:t,ref:x,...He(c,f),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(p=>{const h=a(p.index,p.data,f);return r?n.jsx(u,{...He(u,f),height:e.itemHeight,index:p.index,width:e.itemWidth},h):S.createElement(l,{...He(l,f),className:s,"data-index":p.index,key:h},o(p.index,p.data,f))})})}),Rm=k.memo(function(){const e=ve("HeaderComponent"),t=st("headerHeight"),s=ve("headerFooterTag"),o=Wt(k.useMemo(()=>r=>{t(kt(r,"height"))},[t]),!0,!1),a=ve("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...He(e,a)})}):null}),Em=k.memo(function(){const e=ve("FooterComponent"),t=st("footerHeight"),s=ve("headerFooterTag"),o=Wt(k.useMemo(()=>r=>{t(kt(r,"height"))},[t]),!0,!1),a=ve("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...He(e,a)})}):null}),Am=({children:e})=>{const t=k.useContext(ya),s=st("itemDimensions"),o=st("viewportDimensions"),a=Wt(k.useMemo(()=>r=>{o(r.getBoundingClientRect())},[o]),!0,!1);return k.useEffect(()=>{t&&(o({height:t.viewportHeight,width:t.viewportWidth}),s({height:t.itemHeight,width:t.itemWidth}))},[t,o,s]),n.jsx("div",{ref:a,style:Xn(!1),children:e})},Om=({children:e})=>{const t=k.useContext(ya),s=st("windowViewportRect"),o=st("itemDimensions"),a=ve("customScrollParent"),r=Zo(s,a,!1);return k.useEffect(()=>{t&&(o({height:t.itemHeight,width:t.itemWidth}),s({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,s,o]),n.jsx("div",{ref:r,style:Xn(!1),children:e})},Bm=k.memo(function({...e}){const t=ve("useWindowScroll"),s=ve("customScrollParent"),o=s||t?Mm:zm,a=s||t?Om:Am,r=ve("context");return n.jsx(o,{...e,...He(o,r),children:n.jsxs(a,{children:[n.jsx(Rm,{}),n.jsx(Nm,{}),n.jsx(Em,{})]})})}),{useEmitter:Ta,useEmitterValue:ve,usePublisher:st}=va(Im,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},Bm),zm=Ca({useEmitter:Ta,useEmitterValue:ve,usePublisher:st}),Mm=Sa({useEmitter:Ta,useEmitterValue:ve,usePublisher:st});function wo(e,t,s){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&s(`${e} was not resolved to pixel value correctly`,t,Ge.WARN),t==="normal"?0:parseInt(t??"0",10)}const ka=Kt({status:"idle"}),Hm=Kt("random"),Ia=Kt(new Set),Na=Kt(""),Lm=Kt(()=>[...new Set(Do.map(t=>t.location))].map(t=>({id:t,name:t})).sort((t,s)=>t.name.localeCompare(s.name))),Dm=(e,t)=>{if(!t)return e;const s=t.toLowerCase();return e.filter(o=>o.name.toLowerCase().includes(s))},Pm=Kt(e=>{const t=e(Na),s=e(Lm),o=e(Po),a=e($o);if(!o||!a)return[];const r=s.filter(i=>{const l=Rr(i.name);return l?.groupId===a&&l?.unitId===o});return Dm(r,t)}),$m="_wrapper_1xeju_5",Fm="_focused_1xeju_57",Wm="_searchIcon_1xeju_99",Vm="_clearButton_1xeju_145",Gm="_visuallyHidden_1xeju_155",en={wrapper:$m,focused:Fm,searchIcon:Wm,clearButton:Vm,visuallyHidden:Gm},Ra=({value:e,onChange:t,placeholder:s,variant:o,autoFocus:a=!1})=>{const[r,i]=S.useState(!1),l=S.useRef(null),c=k.useId();S.useEffect(()=>{a&&l.current&&l.current.focus()},[a]);const u=`${en.wrapper} ${r?en.focused:""}`;return n.jsxs("div",{className:u,"data-variant":o,children:[n.jsx("label",{htmlFor:c,className:en.visuallyHidden,children:s}),n.jsx("input",{ref:l,id:c,type:"text",placeholder:s,value:e,onChange:f=>t(f.target.value),onFocus:()=>i(!0),onBlur:()=>i(!1)}),o==="standalone"&&e&&n.jsx(ae,{variant:"quaternary",size:"xs",iconOnly:!0,onClick:()=>t(""),"aria-label":"Clear search",className:en.clearButton,children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})}),n.jsx("span",{className:`material-symbols-rounded ${en.searchIcon}`,children:"search"})]})};function qm(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}const Ea=k.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),xn=()=>{const e=k.useContext(Ea);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};qm(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Um(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function Ym(){return qs(/^Mac/)}function Km(){return qs(/^iPhone/)}function bo(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Xm(){return qs(/^iPad/)||Ym()&&navigator.maxTouchPoints>1}function Aa(){return Km()||Xm()}function qs(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const Zm=24,Qm=typeof window<"u"?S.useLayoutEffect:S.useEffect;function _o(...e){return(...t)=>{for(let s of e)typeof s=="function"&&s(...t)}}const os=typeof document<"u"&&window.visualViewport;function Co(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function Oa(e){for(Co(e)&&(e=e.parentElement);e&&!Co(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const Jm=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let An=0,as;function eh(e={}){let{isDisabled:t}=e;Qm(()=>{if(!t)return An++,An===1&&Aa()&&(as=th()),()=>{An--,An===0&&as?.()}},[t])}function th(){let e,t=0,s=m=>{e=Oa(m.target),!(e===document.documentElement&&e===document.body)&&(t=m.changedTouches[0].pageY)},o=m=>{if(!e||e===document.documentElement||e===document.body){m.preventDefault();return}let d=m.changedTouches[0].pageY,g=e.scrollTop,_=e.scrollHeight-e.clientHeight;_!==0&&((g<=0&&d>t||g>=_&&d<t)&&m.preventDefault(),t=d)},a=m=>{let d=m.target;xs(d)&&d!==document.activeElement&&(m.preventDefault(),d.style.transform="translateY(-2000px)",d.focus(),requestAnimationFrame(()=>{d.style.transform=""}))},r=m=>{let d=m.target;xs(d)&&(d.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{d.style.transform="",os&&(os.height<window.innerHeight?requestAnimationFrame(()=>{So(d)}):os.addEventListener("resize",()=>So(d),{once:!0}))}))},i=()=>{window.scrollTo(0,0)},l=window.pageXOffset,c=window.pageYOffset,u=_o(nh(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let f=_o(tn(document,"touchstart",s,{passive:!1,capture:!0}),tn(document,"touchmove",o,{passive:!1,capture:!0}),tn(document,"touchend",a,{passive:!1,capture:!0}),tn(document,"focus",r,!0),tn(window,"scroll",i));return()=>{u(),f(),window.scrollTo(l,c)}}function nh(e,t,s){let o=e.style[t];return e.style[t]=s,()=>{e.style[t]=o}}function tn(e,t,s,o){return e.addEventListener(t,s,o),()=>{e.removeEventListener(t,s,o)}}function So(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let s=Oa(e);if(s!==document.documentElement&&s!==document.body&&s!==e){let o=s.getBoundingClientRect().top,a=e.getBoundingClientRect().top,r=e.getBoundingClientRect().bottom;const i=s.getBoundingClientRect().bottom+Zm;r>i&&(s.scrollTop+=a-o)}e=s.parentElement}}function xs(e){return e instanceof HTMLInputElement&&!Jm.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function sh(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function oh(...e){return t=>e.forEach(s=>sh(s,t))}function Ba(...e){return S.useCallback(oh(...e),e)}const za=new WeakMap;function Ee(e,t,s=!1){if(!e||!(e instanceof HTMLElement))return;let o={};Object.entries(t).forEach(([a,r])=>{if(a.startsWith("--")){e.style.setProperty(a,r);return}o[a]=e.style[a],e.style[a]=r}),!s&&za.set(e,o)}function ah(e,t){if(!e||!(e instanceof HTMLElement))return;let s=za.get(e);s&&(e.style[t]=s[t])}const ke=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function On(e,t){if(!e)return null;const s=window.getComputedStyle(e),o=s.transform||s.webkitTransform||s.mozTransform;let a=o.match(/^matrix3d\((.+)\)$/);return a?parseFloat(a[1].split(", ")[ke(t)?13:12]):(a=o.match(/^matrix\((.+)\)$/),a?parseFloat(a[1].split(", ")[ke(t)?5:4]):null)}function rh(e){return 8*(Math.log(e+1)-2)}function rs(e,t){if(!e)return()=>{};const s=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=s}}function ih(...e){return(...t)=>{for(const s of e)typeof s=="function"&&s(...t)}}const ye={DURATION:.5,EASE:[.32,.72,0,1]},Ma=.4,lh=.25,ch=100,Ha=8,Lt=16,ys=26,is="vaul-dragging";function La(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...s)=>t.current==null?void 0:t.current.call(t,...s),[])}function uh({defaultProp:e,onChange:t}){const s=k.useState(e),[o]=s,a=k.useRef(o),r=La(t);return k.useEffect(()=>{a.current!==o&&(r(o),a.current=o)},[o,a,r]),s}function Da({prop:e,defaultProp:t,onChange:s=()=>{}}){const[o,a]=uh({defaultProp:t,onChange:s}),r=e!==void 0,i=r?e:o,l=La(s),c=k.useCallback(u=>{if(r){const m=typeof u=="function"?u(e):u;m!==e&&l(m)}else a(u)},[r,e,a,l]);return[i,c]}function dh({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:s,drawerRef:o,overlayRef:a,fadeFromIndex:r,onSnapPointChange:i,direction:l="bottom",container:c,snapToSequentialPoint:u}){const[f,m]=Da({prop:e,defaultProp:s?.[0],onChange:t}),[d,g]=k.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);k.useEffect(()=>{function j(){g({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]);const _=k.useMemo(()=>f===s?.[s.length-1]||null,[s,f]),w=k.useMemo(()=>{var j;return(j=s?.findIndex(I=>I===f))!=null?j:null},[s,f]),x=s&&s.length>0&&(r||r===0)&&!Number.isNaN(r)&&s[r]===f||!s,p=k.useMemo(()=>{const j=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var I;return(I=s?.map(T=>{const O=typeof T=="string";let E=0;if(O&&(E=parseInt(T,10)),ke(l)){const M=O?E:d?T*j.height:0;return d?l==="bottom"?j.height-M:-j.height+M:M}const D=O?E:d?T*j.width:0;return d?l==="right"?j.width-D:-j.width+D:D}))!=null?I:[]},[s,d,c]),h=k.useMemo(()=>w!==null?p?.[w]:null,[p,w]),v=k.useCallback(j=>{var I;const T=(I=p?.findIndex(O=>O===j))!=null?I:null;i(T),Ee(o.current,{transition:`transform ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,transform:ke(l)?`translate3d(0, ${j}px, 0)`:`translate3d(${j}px, 0, 0)`}),p&&T!==p.length-1&&r!==void 0&&T!==r&&T<r?Ee(a.current,{transition:`opacity ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,opacity:"0"}):Ee(a.current,{transition:`opacity ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,opacity:"1"}),m(s?.[Math.max(T,0)])},[o.current,s,p,r,a,m]);k.useEffect(()=>{if(f||e){var j;const I=(j=s?.findIndex(T=>T===e||T===f))!=null?j:-1;p&&I!==-1&&typeof p[I]=="number"&&v(p[I])}},[f,e,s,p,v]);function C({draggedDistance:j,closeDrawer:I,velocity:T,dismissible:O}){if(r===void 0)return;const E=l==="bottom"||l==="right"?(h??0)-j:(h??0)+j,D=w===r-1,M=w===0,B=j>0;if(D&&Ee(a.current,{transition:`opacity ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`}),!u&&T>2&&!B){O?I():v(p[0]);return}if(!u&&T>2&&B&&p&&s){v(p[s.length-1]);return}const P=p?.reduce((Q,ne)=>typeof Q!="number"||typeof ne!="number"?Q:Math.abs(ne-E)<Math.abs(Q-E)?ne:Q),Z=ke(l)?window.innerHeight:window.innerWidth;if(T>Ma&&Math.abs(j)<Z*.4){const Q=B?1:-1;if(Q>0&&_&&s){v(p[s.length-1]);return}if(M&&Q<0&&O&&I(),w===null)return;v(p[w+Q]);return}v(P)}function y({draggedDistance:j}){if(h===null)return;const I=l==="bottom"||l==="right"?h-j:h+j;(l==="bottom"||l==="right")&&I<p[p.length-1]||(l==="top"||l==="left")&&I>p[p.length-1]||Ee(o.current,{transform:ke(l)?`translate3d(0, ${I}px, 0)`:`translate3d(${I}px, 0, 0)`})}function b(j,I){if(!s||typeof w!="number"||!p||r===void 0)return null;const T=w===r-1;if(w>=r&&I)return 0;if(T&&!I)return 1;if(!x&&!T)return null;const E=T?w+1:w-1,D=T?p[E]-p[E-1]:p[E+1]-p[E],M=j/Math.abs(D);return T?1-M:M}return{isLastSnapPoint:_,activeSnapPoint:f,shouldFade:x,getPercentageDragged:b,setActiveSnapPoint:m,activeSnapPointIndex:w,onRelease:C,onDrag:y,snapPointsOffset:p}}const mh=()=>()=>{};function hh(){const{direction:e,isOpen:t,shouldScaleBackground:s,setBackgroundColorOnScale:o,noBodyStyles:a}=xn(),r=k.useRef(null),i=S.useMemo(()=>document.body.style.backgroundColor,[]);function l(){return(window.innerWidth-ys)/window.innerWidth}k.useEffect(()=>{if(t&&s){r.current&&clearTimeout(r.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;ih(o&&!a?rs(document.body,{background:"black"}):mh,rs(c,{transformOrigin:ke(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${ye.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ye.EASE.join(",")})`}));const u=rs(c,{borderRadius:`${Ha}px`,overflow:"hidden",...ke(e)?{transform:`scale(${l()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${l()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{u(),r.current=window.setTimeout(()=>{i?document.body.style.background=i:document.body.style.removeProperty("background")},ye.DURATION*1e3)}}},[t,s,i])}let nn=null;function fh({isOpen:e,modal:t,nested:s,hasBeenOpened:o,preventScrollRestoration:a,noBodyStyles:r}){const[i,l]=k.useState(()=>typeof window<"u"?window.location.href:""),c=k.useRef(0),u=k.useCallback(()=>{if(bo()&&nn===null&&e&&!r){nn={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:m,innerHeight:d}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-m}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const g=d-window.innerHeight;g&&c.current>=d&&(document.body.style.top=`${-(c.current+g)}px`)}),300)}},[e]),f=k.useCallback(()=>{if(bo()&&nn!==null&&!r){const m=-parseInt(document.body.style.top,10),d=-parseInt(document.body.style.left,10);Object.assign(document.body.style,nn),window.requestAnimationFrame(()=>{if(a&&i!==window.location.href){l(window.location.href);return}window.scrollTo(d,m)}),nn=null}},[i]);return k.useEffect(()=>{function m(){c.current=window.scrollY}return m(),window.addEventListener("scroll",m),()=>{window.removeEventListener("scroll",m)}},[]),k.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||f()}},[t,f]),k.useEffect(()=>{s||!o||(e?(!window.matchMedia("(display-mode: standalone)").matches&&u(),t||window.setTimeout(()=>{f()},500)):f())},[e,o,i,t,s,u,f]),{restorePositionSetting:f}}function ph({open:e,onOpenChange:t,children:s,onDrag:o,onRelease:a,snapPoints:r,shouldScaleBackground:i=!1,setBackgroundColorOnScale:l=!0,closeThreshold:c=lh,scrollLockTimeout:u=ch,dismissible:f=!0,handleOnly:m=!1,fadeFromIndex:d=r&&r.length-1,activeSnapPoint:g,setActiveSnapPoint:_,fixed:w,modal:x=!0,onClose:p,nested:h,noBodyStyles:v=!1,direction:C="bottom",defaultOpen:y=!1,disablePreventScroll:b=!0,snapToSequentialPoint:j=!1,preventScrollRestoration:I=!1,repositionInputs:T=!0,onAnimationEnd:O,container:E,autoFocus:D=!1}){var M,B;const[P=!1,Z]=Da({defaultProp:y,prop:e,onChange:G=>{t?.(G),!G&&!h&&bn(),setTimeout(()=>{O?.(G)},ye.DURATION*1e3),G&&!x&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),G||(document.body.style.pointerEvents="auto")}}),[Q,ne]=k.useState(!1),[we,xe]=k.useState(!1),[Ne,Qe]=k.useState(!1),Ce=k.useRef(null),Je=k.useRef(null),Ye=k.useRef(null),ze=k.useRef(null),Me=k.useRef(null),R=k.useRef(!1),H=k.useRef(null),J=k.useRef(0),me=k.useRef(!1),ue=k.useRef(!y),Ke=k.useRef(0),W=k.useRef(null),ot=k.useRef(((M=W.current)==null?void 0:M.getBoundingClientRect().height)||0),Et=k.useRef(((B=W.current)==null?void 0:B.getBoundingClientRect().width)||0),et=k.useRef(0),dt=k.useCallback(G=>{r&&G===mt.length-1&&(Je.current=new Date)},[]),{activeSnapPoint:At,activeSnapPointIndex:at,setActiveSnapPoint:Gt,onRelease:yn,snapPointsOffset:mt,onDrag:St,shouldFade:ht,getPercentageDragged:wn}=dh({snapPoints:r,activeSnapPointProp:g,setActiveSnapPointProp:_,drawerRef:W,fadeFromIndex:d,overlayRef:Ce,onSnapPointChange:dt,direction:C,container:E,snapToSequentialPoint:j});eh({isDisabled:!P||we||!x||Ne||!Q||!T||!b});const{restorePositionSetting:bn}=fh({isOpen:P,modal:x,nested:h??!1,hasBeenOpened:Q,preventScrollRestoration:I,noBodyStyles:v});function Ot(){return(window.innerWidth-ys)/window.innerWidth}function _n(G){var ce,he;!f&&!r||W.current&&!W.current.contains(G.target)||(ot.current=((ce=W.current)==null?void 0:ce.getBoundingClientRect().height)||0,Et.current=((he=W.current)==null?void 0:he.getBoundingClientRect().width)||0,xe(!0),Ye.current=new Date,Aa()&&window.addEventListener("touchend",()=>R.current=!1,{once:!0}),G.target.setPointerCapture(G.pointerId),J.current=ke(C)?G.pageY:G.pageX)}function Cn(G,ce){var he;let re=G;const be=(he=window.getSelection())==null?void 0:he.toString(),Ve=W.current?On(W.current,C):null,Pe=new Date;if(re.tagName==="SELECT"||re.hasAttribute("data-vaul-no-drag")||re.closest("[data-vaul-no-drag]"))return!1;if(C==="right"||C==="left")return!0;if(Je.current&&Pe.getTime()-Je.current.getTime()<500)return!1;if(Ve!==null&&(C==="bottom"?Ve>0:Ve<0))return!0;if(be&&be.length>0)return!1;if(Me.current&&Pe.getTime()-Me.current.getTime()<u&&Ve===0||ce)return Me.current=Pe,!1;for(;re;){if(re.scrollHeight>re.clientHeight){if(re.scrollTop!==0)return Me.current=new Date,!1;if(re.getAttribute("role")==="dialog")return!0}re=re.parentNode}return!0}function Sn(G){if(W.current&&we){const ce=C==="bottom"||C==="right"?1:-1,he=(J.current-(ke(C)?G.pageY:G.pageX))*ce,re=he>0,be=r&&!f&&!re;if(be&&at===0)return;const Ve=Math.abs(he),Pe=document.querySelector("[data-vaul-drawer-wrapper]"),jt=C==="bottom"||C==="top"?ot.current:Et.current;let rt=Ve/jt;const zt=wn(Ve,re);if(zt!==null&&(rt=zt),be&&rt>=1||!R.current&&!Cn(G.target,re))return;if(W.current.classList.add(is),R.current=!0,Ee(W.current,{transition:"none"}),Ee(Ce.current,{transition:"none"}),r&&St({draggedDistance:he}),re&&!r){const ft=rh(he),jn=Math.min(ft*-1,0)*ce;Ee(W.current,{transform:ke(C)?`translate3d(0, ${jn}px, 0)`:`translate3d(${jn}px, 0, 0)`});return}const Tt=1-rt;if((ht||d&&at===d-1)&&(o?.(G,rt),Ee(Ce.current,{opacity:`${Tt}`,transition:"none"},!0)),Pe&&Ce.current&&i){const ft=Math.min(Ot()+rt*(1-Ot()),1),jn=8-rt*8,Ys=Math.max(0,14-rt*14);Ee(Pe,{borderRadius:`${jn}px`,transform:ke(C)?`scale(${ft}) translate3d(0, ${Ys}px, 0)`:`scale(${ft}) translate3d(${Ys}px, 0, 0)`,transition:"none"},!0)}if(!r){const ft=Ve*ce;Ee(W.current,{transform:ke(C)?`translate3d(0, ${ft}px, 0)`:`translate3d(${ft}px, 0, 0)`})}}}k.useEffect(()=>{window.requestAnimationFrame(()=>{ue.current=!0})},[]),k.useEffect(()=>{var G;function ce(){if(!W.current||!T)return;const he=document.activeElement;if(xs(he)||me.current){var re;const be=((re=window.visualViewport)==null?void 0:re.height)||0,Ve=window.innerHeight;let Pe=Ve-be;const jt=W.current.getBoundingClientRect().height||0,rt=jt>Ve*.8;et.current||(et.current=jt);const zt=W.current.getBoundingClientRect().top;if(Math.abs(Ke.current-Pe)>60&&(me.current=!me.current),r&&r.length>0&&mt&&at){const Tt=mt[at]||0;Pe+=Tt}if(Ke.current=Pe,jt>be||me.current){const Tt=W.current.getBoundingClientRect().height;let ft=Tt;Tt>be&&(ft=be-(rt?zt:ys)),w?W.current.style.height=`${Tt-Math.max(Pe,0)}px`:W.current.style.height=`${Math.max(ft,be-zt)}px`}else Um()||(W.current.style.height=`${et.current}px`);r&&r.length>0&&!me.current?W.current.style.bottom="0px":W.current.style.bottom=`${Math.max(Pe,0)}px`}}return(G=window.visualViewport)==null||G.addEventListener("resize",ce),()=>{var he;return(he=window.visualViewport)==null?void 0:he.removeEventListener("resize",ce)}},[at,r,mt]);function Bt(G){Wa(),p?.(),G||Z(!1),setTimeout(()=>{r&&Gt(r[0])},ye.DURATION*1e3)}function Us(){if(!W.current)return;const G=document.querySelector("[data-vaul-drawer-wrapper]"),ce=On(W.current,C);Ee(W.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`}),Ee(Ce.current,{transition:`opacity ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,opacity:"1"}),i&&ce&&ce>0&&P&&Ee(G,{borderRadius:`${Ha}px`,overflow:"hidden",...ke(C)?{transform:`scale(${Ot()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ot()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${ye.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ye.EASE.join(",")})`},!0)}function Wa(){!we||!W.current||(W.current.classList.remove(is),R.current=!1,xe(!1),ze.current=new Date)}function Va(G){if(!we||!W.current)return;W.current.classList.remove(is),R.current=!1,xe(!1),ze.current=new Date;const ce=On(W.current,C);if(!G||!Cn(G.target,!1)||!ce||Number.isNaN(ce)||Ye.current===null)return;const he=ze.current.getTime()-Ye.current.getTime(),re=J.current-(ke(C)?G.pageY:G.pageX),be=Math.abs(re)/he;if(be>.05&&(Qe(!0),setTimeout(()=>{Qe(!1)},200)),r){yn({draggedDistance:re*(C==="bottom"||C==="right"?1:-1),closeDrawer:Bt,velocity:be,dismissible:f}),a?.(G,!0);return}if(C==="bottom"||C==="right"?re>0:re<0){Us(),a?.(G,!0);return}if(be>Ma){Bt(),a?.(G,!1);return}var Ve;const Pe=Math.min((Ve=W.current.getBoundingClientRect().height)!=null?Ve:0,window.innerHeight);var jt;const rt=Math.min((jt=W.current.getBoundingClientRect().width)!=null?jt:0,window.innerWidth),zt=C==="left"||C==="right";if(Math.abs(ce)>=(zt?rt:Pe)*c){Bt(),a?.(G,!1);return}a?.(G,!0),Us()}k.useEffect(()=>(P&&(Ee(document.documentElement,{scrollBehavior:"auto"}),Je.current=new Date),()=>{ah(document.documentElement,"scrollBehavior")}),[P]);function Ga(G){const ce=G?(window.innerWidth-Lt)/window.innerWidth:1,he=G?-Lt:0;H.current&&window.clearTimeout(H.current),Ee(W.current,{transition:`transform ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,transform:ke(C)?`scale(${ce}) translate3d(0, ${he}px, 0)`:`scale(${ce}) translate3d(${he}px, 0, 0)`}),!G&&W.current&&(H.current=setTimeout(()=>{const re=On(W.current,C);Ee(W.current,{transition:"none",transform:ke(C)?`translate3d(0, ${re}px, 0)`:`translate3d(${re}px, 0, 0)`})},500))}function qa(G,ce){if(ce<0)return;const he=(window.innerWidth-Lt)/window.innerWidth,re=he+ce*(1-he),be=-Lt+ce*Lt;Ee(W.current,{transform:ke(C)?`scale(${re}) translate3d(0, ${be}px, 0)`:`scale(${re}) translate3d(${be}px, 0, 0)`,transition:"none"})}function Ua(G,ce){const he=ke(C)?window.innerHeight:window.innerWidth,re=ce?(he-Lt)/he:1,be=ce?-Lt:0;ce&&Ee(W.current,{transition:`transform ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,transform:ke(C)?`scale(${re}) translate3d(0, ${be}px, 0)`:`scale(${re}) translate3d(${be}px, 0, 0)`})}return k.useEffect(()=>{x||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[x]),k.createElement(cr,{defaultOpen:y,onOpenChange:G=>{!f&&!G||(G?ne(!0):Bt(!0),Z(G))},open:P},k.createElement(Ea.Provider,{value:{activeSnapPoint:At,snapPoints:r,setActiveSnapPoint:Gt,drawerRef:W,overlayRef:Ce,onOpenChange:t,onPress:_n,onRelease:Va,onDrag:Sn,dismissible:f,shouldAnimate:ue,handleOnly:m,isOpen:P,isDragging:we,shouldFade:ht,closeDrawer:Bt,onNestedDrag:qa,onNestedOpenChange:Ga,onNestedRelease:Ua,keyboardIsOpen:me,modal:x,snapPointsOffset:mt,activeSnapPointIndex:at,direction:C,shouldScaleBackground:i,setBackgroundColorOnScale:l,noBodyStyles:v,container:E,autoFocus:D}},s))}const Pa=k.forwardRef(function({...e},t){const{overlayRef:s,snapPoints:o,onRelease:a,shouldFade:r,isOpen:i,modal:l,shouldAnimate:c}=xn(),u=Ba(t,s),f=o&&o.length>0;if(!l)return null;const m=k.useCallback(d=>a(d),[a]);return k.createElement(dr,{onMouseUp:m,ref:u,"data-vaul-overlay":"","data-vaul-snap-points":i&&f?"true":"false","data-vaul-snap-points-overlay":i&&r?"true":"false","data-vaul-animate":c?.current?"true":"false",...e})});Pa.displayName="Drawer.Overlay";const $a=k.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:s,...o},a){const{drawerRef:r,onPress:i,onRelease:l,onDrag:c,keyboardIsOpen:u,snapPointsOffset:f,activeSnapPointIndex:m,modal:d,isOpen:g,direction:_,snapPoints:w,container:x,handleOnly:p,shouldAnimate:h,autoFocus:v}=xn(),[C,y]=k.useState(!1),b=Ba(a,r),j=k.useRef(null),I=k.useRef(null),T=k.useRef(!1),O=w&&w.length>0;hh();const E=(M,B,P=0)=>{if(T.current)return!0;const Z=Math.abs(M.y),Q=Math.abs(M.x),ne=Q>Z,we=["bottom","right"].includes(B)?1:-1;if(B==="left"||B==="right"){if(!(M.x*we<0)&&Q>=0&&Q<=P)return ne}else if(!(M.y*we<0)&&Z>=0&&Z<=P)return!ne;return T.current=!0,!0};k.useEffect(()=>{O&&window.requestAnimationFrame(()=>{y(!0)})},[]);function D(M){j.current=null,T.current=!1,l(M)}return k.createElement(mr,{"data-vaul-drawer-direction":_,"data-vaul-drawer":"","data-vaul-delayed-snap-points":C?"true":"false","data-vaul-snap-points":g&&O?"true":"false","data-vaul-custom-container":x?"true":"false","data-vaul-animate":h?.current?"true":"false",...o,ref:b,style:f&&f.length>0?{"--snap-point-height":`${f[m??0]}px`,...t}:t,onPointerDown:M=>{p||(o.onPointerDown==null||o.onPointerDown.call(o,M),j.current={x:M.pageX,y:M.pageY},i(M))},onOpenAutoFocus:M=>{s?.(M),v||M.preventDefault()},onPointerDownOutside:M=>{if(e?.(M),!d||M.defaultPrevented){M.preventDefault();return}u.current&&(u.current=!1)},onFocusOutside:M=>{if(!d){M.preventDefault();return}},onPointerMove:M=>{if(I.current=M,p||(o.onPointerMove==null||o.onPointerMove.call(o,M),!j.current))return;const B=M.pageY-j.current.y,P=M.pageX-j.current.x,Z=M.pointerType==="touch"?10:2;E({x:P,y:B},_,Z)?c(M):(Math.abs(P)>Z||Math.abs(B)>Z)&&(j.current=null)},onPointerUp:M=>{o.onPointerUp==null||o.onPointerUp.call(o,M),j.current=null,T.current=!1,l(M)},onPointerOut:M=>{o.onPointerOut==null||o.onPointerOut.call(o,M),D(I.current)},onContextMenu:M=>{o.onContextMenu==null||o.onContextMenu.call(o,M),I.current&&D(I.current)}})});$a.displayName="Drawer.Content";const gh=250,vh=120,xh=k.forwardRef(function({preventCycle:e=!1,children:t,...s},o){const{closeDrawer:a,isDragging:r,snapPoints:i,activeSnapPoint:l,setActiveSnapPoint:c,dismissible:u,handleOnly:f,isOpen:m,onPress:d,onDrag:g}=xn(),_=k.useRef(null),w=k.useRef(!1);function x(){if(w.current){v();return}window.setTimeout(()=>{p()},vh)}function p(){if(r||e||w.current){v();return}if(v(),!i||i.length===0){u||a();return}if(l===i[i.length-1]&&u){a();return}const y=i.findIndex(j=>j===l);if(y===-1)return;const b=i[y+1];c(b)}function h(){_.current=window.setTimeout(()=>{w.current=!0},gh)}function v(){_.current&&window.clearTimeout(_.current),w.current=!1}return k.createElement("div",{onClick:x,onPointerCancel:v,onPointerDown:C=>{f&&d(C),h()},onPointerMove:C=>{f&&g(C)},ref:o,"data-vaul-drawer-visible":m?"true":"false","data-vaul-handle":"","aria-hidden":"true",...s},k.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});xh.displayName="Drawer.Handle";function yh(e){const t=xn(),{container:s=t.container,...o}=e;return k.createElement(ur,{container:s,...o})}const xt={Root:ph,Content:$a,Overlay:Pa,Portal:yh,Title:ir,Description:lr},wh="_overlay_tknpz_7",bh="_contentWrapper_tknpz_25",_h="_content_tknpz_25",Ch="_handleContainer_tknpz_83",Sh="_handle_tknpz_83",jh="_iconContainer_tknpz_115",Th="_nfcIcon_tknpz_133",kh="_title_tknpz_183",Ih="_description_tknpz_197",Nh="_buttonGroup_tknpz_213",Rh="_cancelButton_tknpz_229",Eh="_actionButton_tknpz_239",Ah="_devToolsContainer_tknpz_249",Oh="_devToolsLabel_tknpz_269",Bh="_devButtons_tknpz_287",Be={overlay:wh,contentWrapper:bh,content:_h,handleContainer:Ch,handle:Sh,iconContainer:jh,nfcIcon:Th,title:kh,description:Ih,buttonGroup:Nh,cancelButton:Rh,actionButton:Eh,devToolsContainer:Ah,devToolsLabel:Oh,devButtons:Bh},zh=()=>{const[e,t]=oe(ka),s=K(Ia),[o]=oe(Hm),{trigger:a}=Ue(),[r,i]=S.useState(!1);S.useEffect(()=>{e.status!=="idle"&&e.status!=="selecting"?i(!0):i(!1)},[e.status]);const l=m=>{i(m),m||setTimeout(()=>{e.status!=="idle"&&t({status:"idle"})},300)},c=m=>{a("light"),t(d=>d.status==="ready"||d.status==="error"?{status:"writing",roomId:d.roomId,roomName:d.roomName}:d),setTimeout(()=>{if(m==="success"){if("roomId"in e){const{roomId:d,roomName:g}=e;t({status:"success",roomId:d,roomName:g}),s(_=>new Set(_).add(d)),a("success")}}else if(m==="net-error"){if("roomId"in e){const{roomId:d,roomName:g}=e;t({status:"error",roomId:d,roomName:g,error:{code:"WRITE_FAILED",message:"Network connection lost"}}),a("error")}}else if(m==="locked-error"&&"roomId"in e){const{roomId:d,roomName:g}=e;t({status:"error",roomId:d,roomName:g,error:{code:"TAG_LOCKED",message:"Tag is write-locked"}}),a("error")}},500)};if(S.useEffect(()=>{let m;return e.status==="writing"&&(m=setTimeout(()=>{const d=o==="forceSuccess"||o==="random"&&Math.random()>.2;if("roomId"in e){const{roomId:g,roomName:_}=e;d?(t({status:"success",roomId:g,roomName:_}),s(w=>new Set(w).add(g)),a("success")):(t({status:"error",roomId:g,roomName:_,error:{code:"WRITE_FAILED",message:"Tag connection lost"}}),a("error"))}},2e3)),e.status==="success"&&(m=setTimeout(()=>{i(!1),t({status:"idle"})},1500)),()=>clearTimeout(m)},[e,o,t,s,a]),e.status==="idle"||e.status==="selecting")return null;const f=(()=>{switch(e.status){case"ready":return{icon:"nfc",title:"Ready to Write",desc:`Hold device near tag to provision ${"roomName"in e?e.roomName:"room"}.`};case"writing":return{icon:"nfc",title:"Writing...",desc:"Keep device steady."};case"success":return{icon:"check_circle",title:"Success",desc:"Tag written successfully."};case"error":return{icon:"error",title:"Write Failed",desc:"error"in e?e.error.message:"Unknown error"};default:return{icon:"nfc",title:"",desc:""}}})();return n.jsx(xt.Root,{open:r,onOpenChange:l,dismissible:e.status!=="writing",children:n.jsxs(xt.Portal,{children:[n.jsx(xt.Overlay,{className:Be.overlay}),n.jsx(xt.Content,{className:Be.contentWrapper,children:n.jsxs("div",{className:Be.content,children:[n.jsx("div",{className:Be.handleContainer,children:n.jsx("div",{className:Be.handle})}),n.jsx("div",{className:Be.iconContainer,children:n.jsx("span",{className:`material-symbols-rounded ${Be.nfcIcon}`,"data-state":e.status,children:f.icon})}),n.jsx(xt.Title,{className:Be.title,children:f.title}),n.jsx(xt.Description,{className:Be.description,children:f.desc}),e.status==="error"&&n.jsxs("div",{className:Be.buttonGroup,children:[n.jsx(ae,{variant:"primary",onClick:()=>t({status:"writing",roomId:e.roomId,roomName:e.roomName}),className:Be.actionButton,children:"Retry"}),n.jsx(ae,{variant:"secondary",onClick:()=>i(!1),className:Be.actionButton,children:"Cancel"})]}),e.status==="ready"&&n.jsx("div",{className:Be.buttonGroup,children:n.jsx(ae,{variant:"secondary",onClick:()=>i(!1),className:Be.cancelButton,children:"Cancel"})}),e.status==="ready"&&n.jsxs("div",{className:Be.devToolsContainer,children:[n.jsx("span",{className:Be.devToolsLabel,children:"Developer Controls"}),n.jsxs("div",{className:Be.devButtons,children:[n.jsx(ae,{variant:"tertiary",size:"s",onClick:()=>c("success"),children:"Success"}),n.jsx(ae,{variant:"tertiary",size:"s",onClick:()=>c("net-error"),children:"Net Error"}),n.jsx(ae,{variant:"tertiary",size:"s",onClick:()=>c("locked-error"),children:"Locked"})]})]})]})})]})})},Mh="_viewContainer_25hb1_5",Hh="_header_25hb1_29",Lh="_controlsHeader_25hb1_77",Dh="_listContainer_25hb1_105",Bn={viewContainer:Mh,header:Hh,controlsHeader:Lh,listContainer:Dh},Ph=()=>{const e=K(ct),t=K(ka),s=K(Ia),o=K(_s),[a,r]=oe(Na),i=F(Pm),l=F(Cs),c=F(Ss),[u,f]=oe($o),[m,d]=oe(Po);S.useEffect(()=>{f(l),d(c)},[l,c,f,d]),S.useEffect(()=>()=>{r(""),s(new Set),f(null),d(null),t({status:"idle"})},[r,s,f,d,t]);const g=()=>{e({view:"none"})},_=(w,x)=>{t({status:"ready",roomId:w,roomName:x})};return n.jsxs(U.div,{className:Bn.viewContainer,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsxs("header",{className:Bn.header,children:[n.jsx("h3",{children:"Write NFC tags"}),n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:g,"aria-label":"Close",children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),n.jsxs("div",{className:Bn.controlsHeader,children:[n.jsx(Go,{groupId:u,unitId:m,onClick:()=>o(!0)}),n.jsx(Ra,{variant:"standalone",placeholder:"Search for a room...",value:a,onChange:r})]}),n.jsx("main",{className:Bn.listContainer,children:i.length>0?n.jsx(bm,{data:i,itemContent:(w,x)=>n.jsx(_t,{label:x.name,onClick:()=>_(x.id,x.name)},x.id)}):n.jsx(us,{title:"No Rooms Found",message:"Select a facility group and unit to see a list of rooms to provision."})}),n.jsx(zh,{})]})},$h="_overlay_1oath_5",Fh="_content_1oath_19",Wh="_handleContainer_1oath_53",Vh="_handle_1oath_53",Gh="_iconContainer_1oath_83",qh="_heroIcon_1oath_99",Uh="_title_1oath_111",Yh="_roomSubtitle_1oath_125",Kh="_description_1oath_139",Xh="_footer_1oath_155",gt={overlay:$h,content:Fh,handleContainer:Wh,handle:Vh,iconContainer:Gh,heroIcon:qh,title:Uh,roomSubtitle:Yh,description:Kh,footer:Xh},Zh=()=>{const[e,t]=oe(Is),[s,o]=oe(Ns),a=K(ct),r=K(hn),{trigger:i}=Ue(),{completeCheck:l}=Vn(),c=()=>{t(!1),o(null)},u=()=>{if(!s)return;i("success");const f=s.residents.reduce((m,d)=>(m[d.id]="Awake",m),{});a({view:"none"}),l({checkId:s.id,statuses:f,notes:"",onSuccess:()=>{r({message:"Check completed",icon:"check_circle",variant:"success"})}}),c()};return n.jsx(qe,{children:e&&s&&n.jsxs(n.Fragment,{children:[n.jsx(U.div,{className:gt.overlay,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:c,"aria-hidden":"true"}),n.jsxs(U.div,{className:gt.content,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},role:"dialog","aria-modal":"true","aria-labelledby":"dup-sheet-title",children:[n.jsx("div",{className:gt.handleContainer,children:n.jsx("div",{className:gt.handle})}),n.jsx("div",{className:gt.iconContainer,children:n.jsx("span",{className:`material-symbols-rounded ${gt.heroIcon}`,children:"schedule"})}),n.jsx("h3",{id:"dup-sheet-title",className:gt.title,children:"Recent Check Detected"}),n.jsx("p",{className:gt.roomSubtitle,children:s.residents[0].location}),n.jsx("p",{className:gt.description,children:"This room was checked recently. Are you sure you want to check now?"}),n.jsxs("footer",{className:gt.footer,children:[n.jsx(ae,{variant:"primary",size:"lg",onClick:u,children:"Confirm"}),n.jsx(ae,{variant:"secondary",size:"lg",onClick:c,children:"Cancel"})]})]})]})})},Qh="_overlay_1ea5i_5",Jh="_contentWrapper_1ea5i_19",ef="_content_1ea5i_19",tf="_handleContainer_1ea5i_67",nf="_handle_1ea5i_67",sf="_sheetHeader_1ea5i_105",of="_sheetTitle_1ea5i_127",af="_searchContainer_1ea5i_143",rf="_listContainer_1ea5i_163",lf="_listContent_1ea5i_177",cf="_sectionHeader_1ea5i_201",it={overlay:Qh,contentWrapper:Jh,content:ef,handleContainer:tf,handle:nf,sheetHeader:sf,sheetTitle:of,searchContainer:af,listContainer:rf,listContent:lf,sectionHeader:cf},uf=()=>{const[e,t]=oe(Er),[s,o]=oe(Ar),[a,r]=oe(Or),i=F(Br),l=F(zr),c=K(ct),u=d=>{t(d),d||setTimeout(()=>{o(""),r(!1)},300)},f=d=>{t(!1),setTimeout(()=>{c({view:"form",type:"scheduled",method:"manual",checkId:d.id,roomName:d.residents[0]?.location||"Unknown Room",residents:d.residents,specialClassifications:d.specialClassifications})},300)},m=(d,g)=>{const _=new Set(g?.map(w=>w.residentId));return n.jsx("span",{style:{display:"flex",flexWrap:"wrap",gap:"var(--spacing-1)",alignItems:"center"},children:d.map((w,x)=>n.jsxs("span",{style:{display:"inline-flex",alignItems:"center",color:"inherit"},children:[_.has(w.id)&&n.jsx("span",{className:"material-symbols-rounded",style:{marginRight:"var(--spacing-0p5)",fontVariationSettings:"'FILL' 1",color:"var(--surface-fg-primary)"},children:"warning"}),w.name,x<d.length-1?",":""]},w.id))})};return n.jsx(xt.Root,{open:e,onOpenChange:u,children:n.jsxs(xt.Portal,{children:[n.jsx(xt.Overlay,{className:it.overlay}),n.jsx(xt.Content,{className:it.contentWrapper,children:n.jsxs("div",{className:it.content,children:[n.jsx("div",{className:it.handleContainer,children:n.jsx("div",{className:it.handle})}),n.jsxs("div",{className:it.sheetHeader,children:[n.jsx("h3",{className:it.sheetTitle,children:"Add Manual Check"}),n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:()=>t(!1),children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),n.jsx("div",{className:it.searchContainer,children:n.jsx(Ra,{placeholder:"Search room or resident...",value:s,onChange:o,variant:"standalone"})}),n.jsx("div",{className:it.listContainer,children:n.jsx("div",{className:it.listContent,children:i.length>0?n.jsxs(n.Fragment,{children:[s&&n.jsx("div",{className:it.sectionHeader,children:"Matching Results"}),i.map(d=>n.jsx(_t,{label:d.residents[0]?.location||"Unknown Room",subLabel:m(d.residents,d.specialClassifications),onClick:()=>f(d)},d.id))]}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"var(--spacing-8) 0",textAlign:"center",color:"var(--surface-fg-secondary)"},children:[n.jsx("span",{className:"material-symbols-rounded",style:{marginBottom:"var(--spacing-2)",opacity:.5},children:"search_off"}),n.jsx("p",{children:"No rooms found."}),!a&&s&&n.jsx("div",{style:{marginTop:"var(--spacing-4)"},children:n.jsxs(ae,{variant:"secondary",size:"s",onClick:()=>r(!0),children:["Search All Facilities (",l.count,")"]})})]})})})]})})]})})},df="_modalWrapper_1mcmc_5",mf="_backdrop_1mcmc_21",hf="_modalContainer_1mcmc_33",ff="_header_1mcmc_57",pf="_rightActionContainer_1mcmc_301",gf="_content_1mcmc_325",qt={modalWrapper:df,backdrop:mf,modalContainer:hf,header:ff,rightActionContainer:pf,content:gf},vf={hidden:e=>({x:e==="slide-horizontal"?"100%":0,y:e==="slide-vertical"?"100%":0}),visible:{x:0,y:0},exit:({type:e,direction:t})=>e==="slide-horizontal"&&t?{x:t==="left"?"-100%":"100%",transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]}}:{x:e==="slide-horizontal"?"100%":0,y:e==="slide-vertical"?"100%":0,transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]}}},Hn=({isOpen:e,onClose:t,title:s,children:o,actionType:a="back",leftIcon:r="arrow_back",rightAction:i,transitionType:l="slide-horizontal",exitDirection:c})=>n.jsx(qe,{custom:{type:l,direction:c},children:e&&n.jsxs(U.div,{className:qt.modalWrapper,custom:{type:l,direction:c},variants:vf,initial:"hidden",animate:"visible",exit:"exit",transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsx("div",{className:qt.backdrop}),n.jsxs("div",{className:qt.modalContainer,children:[n.jsxs("header",{className:qt.header,children:[a==="back"?n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:t,"aria-label":"Back",children:n.jsx("span",{className:"material-symbols-rounded",children:r})}):null,n.jsx("h2",{style:{marginLeft:a==="back"?"0":"var(--spacing-2)"},children:s}),n.jsx("div",{className:qt.rightActionContainer,children:i||(a==="close"?n.jsx(ae,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:t,"aria-label":"Close",children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})}):null)})]}),n.jsx("main",{className:qt.content,children:o})]})]})}),xf="_switchRoot_u1li9_5",yf="_switchThumb_u1li9_83",jo={switchRoot:xf,switchThumb:yf},ge=({checked:e,onCheckedChange:t,disabled:s,id:o})=>n.jsx(hr,{className:jo.switchRoot,checked:e,onCheckedChange:t,disabled:s,id:o,children:n.jsx(fr,{className:jo.switchThumb})}),wf="_container_14ouh_5",bf="_settingSection_14ouh_23",_f="_sectionHeader_14ouh_35",Cf="_subsectionHeader_14ouh_59",Sf="_warningBlock_14ouh_77",jf="_settingsGroup_14ouh_105",Tf="_settingsItem_14ouh_123",kf="_itemLabel_14ouh_149",If="_disabledGroup_14ouh_161",Nf="_toastGrid_14ouh_175",Rf="_toastPlaygroundItem_14ouh_309",Ef="_toastDescription_14ouh_321",Af="_shortcutHint_14ouh_335",Of="_textInput_14ouh_347",Bf="_ringTestContainer_14ouh_385",zf="_ringTestPreview_14ouh_403",Mf="_ringTestLabel_14ouh_427",Hf="_ringTestControls_14ouh_449",Lf="_ringTestHeader_14ouh_469",Df="_ringTestActions_14ouh_497",Pf="_ringTestSliders_14ouh_527",$f="_ringTestSlider_14ouh_527",Ff="_phaseViz_14ouh_605",Wf="_phaseVizLabel_14ouh_619",Vf="_phaseVizGrid_14ouh_633",Gf="_phaseVizRing_14ouh_645",qf="_phaseVizIndex_14ouh_659",Uf="_phaseVizBar_14ouh_673",Yf="_phaseVizConveyor_14ouh_689",Kf="_phaseVizShimmer_14ouh_701",Xf="_recipeSection_14ouh_715",Zf="_recipeLabel_14ouh_723",Qf="_recipeGrid_14ouh_737",Jf="_recipeButton_14ouh_749",N={container:wf,settingSection:bf,sectionHeader:_f,subsectionHeader:Cf,warningBlock:Sf,settingsGroup:jf,settingsItem:Tf,itemLabel:kf,disabledGroup:If,toastGrid:Nf,toastPlaygroundItem:Rf,toastDescription:Ef,shortcutHint:Af,textInput:Of,ringTestContainer:Bf,ringTestPreview:zf,ringTestLabel:Mf,ringTestControls:Hf,ringTestHeader:Lf,ringTestActions:Df,ringTestSliders:Pf,ringTestSlider:$f,phaseViz:Ff,phaseVizLabel:Wf,phaseVizGrid:Vf,phaseVizRing:Gf,phaseVizIndex:qf,phaseVizBar:Uf,phaseVizConveyor:Yf,phaseVizShimmer:Kf,recipeSection:Xf,recipeLabel:Zf,recipeGrid:Qf,recipeButton:Jf},ep=[{label:"Sync Complete",message:"Data synced",icon:"cloud_done",variant:"success",logic:"Reconnection after offline."},{label:"Sync error: Fetch",message:"Unable to download updates. Retrying automatically.",icon:"sync_disabled",variant:"warning",logic:"Simulated incoming data failure."},{label:"Sync error: Push",message:"Unable to upload completed checks. Retrying automatically.",icon:"sync_problem",variant:"alert",logic:"Simulated outgoing data failure."},{label:"Missed Check",message:"Check for Room 101 missed",icon:"history",variant:"warning",logic:"Ticker passes due + interval.",stableId:"lifecycle-missed-check"},{label:"Camera Error",message:`Camera not responding.
Try restarting your device.`,icon:"no_photography",variant:"alert",logic:"Simulated camera failure."},{label:"NFC Error",message:`Tag not read.
Hold phone steady against the tag.`,icon:"wifi_tethering_error",variant:"alert",logic:"Simulated NFC read failure."}],tp=()=>{const[e,t]=oe(De),[s,o]=oe(ks),{status:a,goOnline:r,goOffline:i}=Es(),[l,c]=oe(Ho),[u,f]=oe(Mr),m=K(Wn),d=K(hn),g=F(Hr),{trigger:_}=Ue(),w=h=>v=>{_("light"),h(v)},x=()=>{_("warning"),m({type:"RESET_DATA"}),d({message:"Application data reset to defaults.",icon:"delete",variant:"neutral"})},p=h=>{_("medium");let v=h.message;if(h.stableId==="lifecycle-missed-check"){const C=g.find(y=>y.stableId===h.stableId);if(C){let y=1;const b=C.message.match(/^(\d+)\s+checks\s+missed/i);b&&(y=parseInt(b[1],10)),y++,v=`${y} checks missed`}}d({message:v,icon:h.icon,variant:h.variant,stableId:h.stableId,details:h.details})};return n.jsxs(U.div,{className:N.container,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:N.settingSection,children:[n.jsx("h3",{className:N.sectionHeader,children:"Data Management"}),n.jsxs(ae,{variant:"secondary",onClick:x,children:[n.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"}),"Reset Application Data"]}),n.jsx("span",{className:N.shortcutHint,children:"Shortcut: Ctrl+Backspace"})]}),n.jsxs("div",{className:N.settingSection,children:[n.jsx("h3",{className:N.sectionHeader,children:"Workflow"}),n.jsxs("div",{className:N.settingsGroup,children:[n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"simple-submit-switch",className:N.itemLabel,children:"Simple submit"}),n.jsx(ge,{id:"simple-submit-switch",checked:e.simpleSubmitEnabled,onCheckedChange:w(h=>t(v=>({...v,simpleSubmitEnabled:h})))})]}),n.jsxs("div",{className:e.simpleSubmitEnabled?N.disabledGroup:"",children:[n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"mark-multiple-switch",className:N.itemLabel,children:"Mark multiple"}),n.jsx(ge,{id:"mark-multiple-switch",checked:e.markMultipleEnabled,onCheckedChange:w(h=>t(v=>({...v,markMultipleEnabled:h})))})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"check-type-switch",className:N.itemLabel,children:"Show check type"}),n.jsx(ge,{id:"check-type-switch",checked:e.isCheckTypeEnabled,onCheckedChange:w(h=>t(v=>({...v,isCheckTypeEnabled:h})))})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"view-only-mode-switch",className:N.itemLabel,children:"View only mode"}),n.jsx(ge,{id:"view-only-mode-switch",checked:e.isViewOnlyMode,onCheckedChange:w(h=>t(v=>({...v,isViewOnlyMode:h})))})]})]}),n.jsxs("div",{className:N.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:N.itemLabel,children:"Status count"}),n.jsx(Fe,{id:"resident-status-count-toggle",options:[{value:"set-2",label:"2"},{value:"set-3",label:"3"},{value:"set-4",label:"4"},{value:"set-5",label:"5"},{value:"set-6",label:"6"},{value:"set-7",label:"7"}],value:e.residentStatusSet,onValueChange:h=>{_("selection"),t(v=>({...v,residentStatusSet:h}))}})]}),n.jsxs("div",{className:N.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:N.itemLabel,children:"Status layout"}),n.jsx(Fe,{id:"status-layout-toggle",options:[{value:"row",label:"Row"},{value:"column",label:"Column"},{value:"grid",label:"Grid"}],value:e.markMultipleLayout,onValueChange:h=>{_("selection"),t(v=>({...v,markMultipleLayout:h}))}})]})]})]}),n.jsxs("div",{className:N.settingSection,children:[n.jsx("h3",{className:N.sectionHeader,children:"App Style"}),n.jsxs("div",{className:N.settingsGroup,children:[n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"status-indicators-switch",className:N.itemLabel,children:"Show status indicators"}),n.jsx(ge,{id:"status-indicators-switch",checked:e.showStatusIndicators,onCheckedChange:w(h=>t(v=>({...v,showStatusIndicators:h})))})]}),n.jsxs("div",{className:N.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:N.itemLabel,children:"Header style"}),n.jsx(Fe,{id:"header-style-toggle",options:[{value:"secondary",label:"Secondary"},{value:"tertiary",label:"Tertiary"},{value:"quaternary",label:"Quaternary"}],value:e.headerStyle||"secondary",onValueChange:h=>{_("selection"),t(v=>({...v,headerStyle:h}))}})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"show-env-name-switch",className:N.itemLabel,children:"Show environment name"}),n.jsx(ge,{id:"show-env-name-switch",checked:e.showEnvironmentName,onCheckedChange:w(h=>t(v=>({...v,showEnvironmentName:h})))})]}),e.showEnvironmentName&&n.jsxs("div",{className:N.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{htmlFor:"env-name-input",className:N.itemLabel,children:"Environment name"}),n.jsx("input",{id:"env-name-input",className:N.textInput,type:"text",value:e.environmentName,onChange:h=>t(v=>({...v,environmentName:h.target.value})),placeholder:"e.g. https://vicbc-qa-symphony.logan-symphony.com"})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"chrome-shadow-switch",className:N.itemLabel,children:"Show chrome shadow"}),n.jsx(ge,{id:"chrome-shadow-switch",checked:e.showChromeShadow,onCheckedChange:w(h=>t(v=>({...v,showChromeShadow:h})))})]})]})]}),n.jsxs("div",{className:N.settingSection,children:[n.jsx("h3",{className:N.sectionHeader,children:"Simulation"}),n.jsxs("div",{className:N.settingsGroup,children:[n.jsxs("div",{className:N.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:N.itemLabel,children:"Connectivity"}),n.jsx(Fe,{id:"connectivity-toggle",options:[{value:"online",label:"Online",icon:"cloud"},{value:"offline",label:"Offline",icon:"cloud_off"}],value:a==="offline"?"offline":"online",onValueChange:h=>{h==="online"?r():i()},itemDirection:"column"})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"offline-toggle-visible-switch",className:N.itemLabel,children:"Show offline toggle"}),n.jsx(ge,{id:"offline-toggle-visible-switch",checked:l,onCheckedChange:w(h=>c(h))})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"camera-fail-switch",className:N.itemLabel,children:"Force Camera Failure"}),n.jsx(ge,{id:"camera-fail-switch",checked:s.cameraFails,onCheckedChange:w(h=>o(v=>({...v,cameraFails:h})))})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"nfc-fail-switch",className:N.itemLabel,children:"Force NFC Failure"}),n.jsx(ge,{id:"nfc-fail-switch",checked:s.nfcFails,onCheckedChange:w(h=>o(v=>({...v,nfcFails:h})))})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"nfc-blocked-switch",className:N.itemLabel,children:"Force NFC Blocked"}),n.jsx(ge,{id:"nfc-blocked-switch",checked:s.nfcBlocked,onCheckedChange:w(h=>o(v=>({...v,nfcBlocked:h})))})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"nfc-off-switch",className:N.itemLabel,children:"Force NFC Turned Off"}),n.jsx(ge,{id:"nfc-off-switch",checked:s.nfcTurnedOff,onCheckedChange:w(h=>o(v=>({...v,nfcTurnedOff:h})))})]}),n.jsxs("div",{className:N.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:N.itemLabel,children:"Forced blocking error"}),n.jsx(Fe,{id:"blocking-error-toggle",options:[{value:"none",label:"None"},{value:"forbidden",label:"403"},{value:"unavailable",label:"5xx"},{value:"offline",label:"Offline"},{value:"generic",label:"Error"}],value:u||"none",onValueChange:h=>{_("selection"),f(h==="none"?null:h)}})]}),n.jsxs("div",{className:N.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:N.itemLabel,children:"Scan timeout"}),n.jsx(Fe,{id:"nfc-timeout-toggle",options:[{value:"off",label:"Off"},{value:"5000",label:"5s"},{value:"10000",label:"10s"},{value:"15000",label:"15s"},{value:"30000",label:"30s"}],value:e.nfcTimeoutEnabled?String(e.nfcScanTimeout):"off",onValueChange:h=>{_("selection"),t(h==="off"?v=>({...v,nfcTimeoutEnabled:!1}):v=>({...v,nfcTimeoutEnabled:!0,nfcScanTimeout:Number(h)}))}})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"slow-load-switch",className:N.itemLabel,children:"Simulate slow loading"}),n.jsx(ge,{id:"slow-load-switch",checked:e.isSlowLoadEnabled,onCheckedChange:w(h=>t(v=>({...v,isSlowLoadEnabled:h})))})]})]})]}),n.jsxs("div",{className:N.settingSection,children:[n.jsx("h3",{className:N.sectionHeader,children:"Toast Playground"}),n.jsx("div",{className:N.toastGrid,children:ep.map((h,v)=>n.jsxs("div",{className:N.toastPlaygroundItem,children:[n.jsxs(ae,{variant:"secondary",onClick:()=>p(h),children:[n.jsx("span",{className:"material-symbols-rounded",children:h.icon}),h.label]}),n.jsx("p",{className:N.toastDescription,children:h.logic})]},v))})]})]})},np=()=>{const[e,t]=oe(Fn),[s,o]=oe(De),a=K(Fo),{trigger:r}=Ue(),i=l=>c=>{r("light"),l(c)};return n.jsx(U.div,{className:N.container,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:n.jsxs("div",{className:N.settingSection,children:[n.jsxs("div",{className:N.warningBlock,children:[n.jsx("strong",{children:"Experimental Features"}),n.jsx("br",{}),"These are just conceptual ideas for a potential future version.  Nothing here is expected for v1."]}),n.jsx("h3",{className:N.sectionHeader,children:"Scan Animation"}),n.jsx("div",{className:N.settingsGroup,children:n.jsxs("div",{className:N.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:N.itemLabel,children:"Animation Style"}),n.jsx(Fe,{id:"scan-animation-style",options:[{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"E",label:"E"},{value:"F",label:"F"}],value:e.feat_scan_animation,onValueChange:l=>{r("light"),t(c=>({...c,feat_scan_animation:l}))}})]})}),e.feat_scan_animation==="B"&&n.jsxs(ae,{variant:"secondary",onClick:()=>{r("light"),a(!0)},children:[n.jsx("span",{className:"material-symbols-rounded",children:"animation"}),"Ring Animation Sandbox"]}),n.jsxs("div",{className:N.settingsGroup,children:[n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"use-sound-switch",className:N.itemLabel,children:"Use Sound"}),n.jsx(ge,{id:"use-sound-switch",checked:e.useSoundEnabled,onCheckedChange:i(l=>t(c=>({...c,useSoundEnabled:l})))})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"use-haptics-switch",className:N.itemLabel,children:"Use Haptics"}),n.jsx(ge,{id:"use-haptics-switch",checked:e.useHapticsEnabled,onCheckedChange:i(l=>t(c=>({...c,useHapticsEnabled:l})))})]}),e.useHapticsEnabled&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:N.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:N.itemLabel,children:"Success pattern"}),n.jsx(Fe,{id:"haptic-success-toggle",options:[{value:"light",label:"Light"},{value:"medium",label:"Medium"},{value:"heavy",label:"Heavy"}],value:s.hapticPatternSuccess,onValueChange:l=>{o(c=>({...c,hapticPatternSuccess:l})),setTimeout(()=>{r("success")},50)}})]}),n.jsxs("div",{className:N.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:N.itemLabel,children:"Error pattern"}),n.jsx(Fe,{id:"haptic-error-toggle",options:[{value:"simple",label:"Simple"},{value:"double",label:"Double"},{value:"grind",label:"Grind"},{value:"stutter",label:"Stutter"}],value:s.hapticPatternError,onValueChange:l=>{o(c=>({...c,hapticPatternError:l})),setTimeout(()=>{r("error")},50)}})]})]})]}),n.jsx("h3",{className:N.sectionHeader,children:"Late Check Concepts"}),n.jsx("div",{className:N.settingsGroup,children:n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"feat-vignette-switch",className:N.itemLabel,children:"Active Vignette"}),n.jsx(ge,{id:"feat-vignette-switch",checked:e.feat_vignette,onCheckedChange:i(l=>t(c=>({...c,feat_vignette:l})))})]})}),n.jsx("h4",{className:N.subsectionHeader,children:"Pulse Effects"}),n.jsxs("div",{className:N.settingsGroup,children:[n.jsxs("div",{className:N.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:N.itemLabel,children:"Glass Pulse Style"}),n.jsx(Fe,{id:"glass-pulse-style",options:[{value:"none",label:"None"},{value:"basic",label:"Basic"},{value:"gradient",label:"Gradient"}],value:e.feat_glass_pulse,onValueChange:l=>{r("light"),t(c=>({...c,feat_glass_pulse:l}))}})]}),n.jsxs("div",{className:N.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:N.itemLabel,children:"Card Pulse Style"}),n.jsx(Fe,{id:"card-pulse-style",options:[{value:"none",label:"None"},{value:"basic",label:"Basic"},{value:"gradient",label:"Gradient"}],value:e.feat_card_pulse,onValueChange:l=>{r("light"),t(c=>({...c,feat_card_pulse:l}))}})]})]}),n.jsx("h4",{className:N.subsectionHeader,children:"Other Card Effects"}),n.jsxs("div",{className:N.settingsGroup,children:[n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"feat-card-border-switch",className:N.itemLabel,children:"Fluid Borders"}),n.jsx(ge,{id:"feat-card-border-switch",checked:e.feat_card_border,onCheckedChange:i(l=>t(c=>({...c,feat_card_border:l})))})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"feat-hazard-texture-switch",className:N.itemLabel,children:"Hazard Texture"}),n.jsx(ge,{id:"feat-hazard-texture-switch",checked:e.feat_hazard_texture,onCheckedChange:i(l=>t(c=>({...c,feat_hazard_texture:l})))})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"feat-invert-card-switch",className:N.itemLabel,children:"Invert Card"}),n.jsx(ge,{id:"feat-invert-card-switch",checked:e.feat_invert_card,onCheckedChange:i(l=>t(c=>({...c,feat_invert_card:l})))})]}),n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"feat-invert-badge-switch",className:N.itemLabel,children:"Invert Badge"}),n.jsx(ge,{id:"feat-invert-badge-switch",checked:e.feat_invert_badge,onCheckedChange:i(l=>t(c=>({...c,feat_invert_badge:l})))})]})]}),n.jsx("div",{className:N.settingsGroup,children:n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"feat-badge-pulse-switch",className:N.itemLabel,children:"Badge Pulse"}),n.jsx(ge,{id:"feat-badge-pulse-switch",checked:e.feat_badge_mode==="pulse",onCheckedChange:i(l=>t(c=>({...c,feat_badge_mode:l?"pulse":"none"})))})]})}),n.jsx("div",{className:N.settingsGroup,children:n.jsxs("div",{className:N.settingsItem,children:[n.jsx("label",{htmlFor:"feat-jump-fab-switch",className:N.itemLabel,children:"Jump FAB"}),n.jsx(ge,{id:"feat-jump-fab-switch",checked:e.feat_jump_fab,onCheckedChange:i(l=>t(c=>({...c,feat_jump_fab:l})))})]})})]})})},sp="_container_993sg_5",op="_label_993sg_19",ap="_controlRow_993sg_31",rp="_trackWrapper_993sg_49",ip="_trackGradient_993sg_75",lp="_thumb_993sg_105",cp="_swatch_993sg_165",Dt={container:sp,label:op,controlRow:ap,trackWrapper:rp,trackGradient:ip,thumb:lp,swatch:cp},up=({value:e,onChange:t,label:s,id:o})=>{const a=S.useId(),r=o||a,i=S.useRef(null),[l,c]=S.useState(!1),u=e/360*100,f=S.useCallback(x=>{if(!i.current)return;const p=i.current.getBoundingClientRect(),h=x-p.left,v=Math.max(0,Math.min(1,h/p.width)),C=Math.round(v*360);t(C)},[t]),m=x=>{c(!0),f(x);const p=v=>{const C="touches"in v?v.touches[0].clientX:v.clientX;f(C)},h=()=>{c(!1),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",h)};document.addEventListener("mousemove",p),document.addEventListener("mouseup",h),document.addEventListener("touchmove",p,{passive:!0}),document.addEventListener("touchend",h)},d=x=>{x.preventDefault(),m(x.clientX)},g=x=>{m(x.touches[0].clientX)},_=x=>{let p=e;switch(x.key){case"ArrowRight":case"ArrowUp":p=Math.min(360,e+5);break;case"ArrowLeft":case"ArrowDown":p=Math.max(0,e-5);break;case"Home":p=0;break;case"End":p=360;break;default:return}x.preventDefault(),t(p)},w=`oklch(0.65 0.18 ${e})`;return n.jsxs("div",{className:Dt.container,children:[n.jsx("label",{htmlFor:r,className:Dt.label,children:s}),n.jsxs("div",{className:Dt.controlRow,children:[n.jsxs("div",{ref:i,className:Dt.trackWrapper,onMouseDown:d,onTouchStart:g,children:[n.jsx("div",{className:Dt.trackGradient}),n.jsx("div",{className:Dt.thumb,style:{left:`${u}%`},role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":e,"aria-label":s,tabIndex:0,onKeyDown:_,"data-dragging":l})]}),n.jsx("div",{className:Dt.swatch,style:{backgroundColor:w},"aria-hidden":"true"})]})]})},dp="_userSettingsContainer_1vd2e_5",mp="_profileHeader_1vd2e_25",hp="_avatarLarge_1vd2e_45",fp="_userName_1vd2e_71",pp="_settingsSection_1vd2e_89",gp="_settingsGroup_1vd2e_103",vp="_settingsItem_1vd2e_121",xp="_itemLabel_1vd2e_187",yp="_logoutButton_1vd2e_199",Te={userSettingsContainer:dp,profileHeader:mp,avatarLarge:hp,userName:fp,settingsSection:pp,settingsGroup:gp,settingsItem:vp,itemLabel:xp,logoutButton:yp},wp=()=>{const e=F(rn),t=K(rn),[s,o]=oe(De),[a,r]=oe(Oo),i=F(Mo),{theme:l,setTheme:c}=Lr(),{trigger:u}=Ue();if(!e.user)return null;const{username:f,initials:m,displayName:d}=e.user,g=a[f]?.avatarHue,_=g!==void 0?g:Wo(f),w=Vo(_),x=()=>{t({isAuthenticated:!1,user:null})},p=C=>{u("light"),c(C)},h=C=>{u("light"),o(y=>({...y,scanMode:C}))},v=C=>{r(y=>({...y,[f]:{...y[f],avatarHue:C}}))};return n.jsxs(U.div,{className:Te.userSettingsContainer,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:Te.profileHeader,children:[n.jsx("div",{className:Te.avatarLarge,style:{backgroundColor:w},children:m}),n.jsx("h2",{className:Te.userName,children:d})]}),n.jsx("div",{className:Te.settingsSection,children:n.jsxs("div",{className:Te.settingsGroup,children:[n.jsxs("div",{className:Te.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:Te.itemLabel,children:"Theme"}),n.jsx(Fe,{id:"user-theme-toggle",options:[{value:"system",label:"System",icon:"desktop_windows"},{value:"light",label:"Light",icon:"light_mode"},{value:"dark",label:"Dark",icon:"dark_mode"}],value:l,onValueChange:p,layout:"row",itemDirection:"column"})]}),n.jsx("div",{className:Te.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},"data-no-hover":"true",children:n.jsx(up,{label:"Avatar Color",value:_,onChange:v})})]})}),n.jsx("div",{className:Te.settingsSection,children:n.jsxs("div",{className:Te.settingsGroup,children:[n.jsxs("div",{className:Te.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:Te.itemLabel,children:"Scan Mode"}),n.jsx(Fe,{id:"user-scan-mode-toggle",options:[{value:"qr",label:"QR",icon:"qr_code_2"},{value:"nfc",label:"NFC",icon:"nfc"}],value:s.scanMode,onValueChange:h,itemDirection:"column"})]}),i&&n.jsxs("div",{className:Te.experimentalSection,style:{marginTop:"var(--spacing-4)",display:"flex",flexDirection:"column",gap:"var(--spacing-3)"},children:[n.jsxs("div",{className:Te.settingsItem,children:[n.jsx("label",{htmlFor:"user-haptics-switch",className:Te.itemLabel,children:"Haptic Feedback"}),n.jsx(ge,{id:"user-haptics-switch",checked:s.hapticsEnabled,onCheckedChange:C=>{u("light"),o(y=>({...y,hapticsEnabled:C}))}})]}),n.jsxs("div",{className:Te.settingsItem,children:[n.jsx("label",{htmlFor:"user-audio-switch",className:Te.itemLabel,children:"Audio Feedback"}),n.jsx(ge,{id:"user-audio-switch",checked:s.audioEnabled,onCheckedChange:C=>{u("light"),o(y=>({...y,audioEnabled:C}))}})]})]})]})}),n.jsx("div",{className:Te.settingsSection,children:n.jsxs(ae,{variant:"secondary",onClick:x,className:Te.logoutButton,children:[n.jsx("span",{className:"material-symbols-rounded",children:"logout"}),n.jsx("span",{children:"Log Out"})]})})]})},bp="_container_4z875_5",_p="_contextBanner_4z875_25",Cp="_viewWrapper_4z875_61",Sp="_listContainer_4z875_87",Ut={container:bp,contextBanner:_p,viewWrapper:Cp,listContainer:Sp},To={enter:e=>({x:e===0?0:e>0?"100%":"-100%",opacity:1}),center:{x:0,opacity:1},exit:e=>({x:e<0?"100%":"-100%",opacity:1})},jp=()=>{const[e,t]=oe(Dr),[s,o]=oe(_s),[a,r]=oe(Cs),[i,l]=oe(Ss),c=K(Pr),u=K(Ts),f=K(No),{trigger:m}=Ue(),[d,g]=S.useState("group"),[_,w]=S.useState(0),[x,p]=S.useState(a),[h,v]=S.useState("right"),C=e||s;S.useEffect(()=>{C&&(g("group"),w(0),p(a),v("right"))},[C,a]);const y=()=>{if(d==="unit"){w(-1),g("group");return}v("right"),e?c():o(!1)},b=E=>{m("selection"),p(E),w(1),g("unit")},j=E=>{m("selection"),x&&(v("left"),(x!==a||E!==i)&&f(!0),r(x),l(E),u("dashboardTime"),e&&t(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!1)})}))},I=cs.find(E=>E.id===x),T=I?.units||[],O=()=>d==="group"?"Select Facility":"Select Unit";return n.jsx(Hn,{isOpen:C,onClose:y,title:O(),transitionType:"slide-horizontal",exitDirection:h,children:n.jsx("div",{className:Ut.container,children:n.jsx(qe,{initial:!1,custom:_,mode:"popLayout",children:d==="group"?n.jsx(U.div,{className:Ut.viewWrapper,custom:_,variants:To,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:n.jsx("div",{className:Ut.listContainer,style:{borderTop:"none"},children:cs.map(E=>n.jsx(_t,{label:E.name,leadingIcon:"domain",onClick:()=>b(E.id),showChevron:!0},E.id))})},"group-list"):n.jsxs(U.div,{className:Ut.viewWrapper,custom:_,variants:To,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:Ut.contextBanner,children:[n.jsx("span",{className:"material-symbols-rounded",children:"domain"}),I?.name]}),n.jsx("div",{className:Ut.listContainer,children:T.map(E=>n.jsx(_t,{label:E.name,onClick:()=>j(E.id),showChevron:!0},E.id))})]},"unit-list")})})})},Tp=[{key:"ringCount",label:"Ring Count",min:5,max:15,step:1},{key:"conveyorDuration",label:"Conveyor Duration",min:20,max:120,step:5,unit:"s"},{key:"baseOpacity",label:"Base Opacity",min:.1,max:.6,step:.05},{key:"fadeInPercent",label:"Fade In %",min:.05,max:.3,step:.05},{key:"fadeOutPercent",label:"Fade Out %",min:.05,max:.3,step:.05},{key:"baseStrokeWidth",label:"Base Stroke",min:1,max:4,step:.5,unit:"px"},{key:"shimmerPeriod",label:"Shimmer Period",min:2,max:15,step:.5,unit:"s"},{key:"shimmerDuration",label:"Shimmer Duration",min:.5,max:5,step:.25,unit:"s"},{key:"shimmerOpacityBoost",label:"Shimmer Opacity+",min:.1,max:1,step:.05},{key:"shimmerStrokeBoost",label:"Shimmer Stroke+",min:.5,max:3,step:.25,unit:"px"}],kp=[{name:"Gentle Breath",description:"60s conveyor / 6s shimmer (10 cycles) - slow, meditative",params:{ringCount:10,conveyorDuration:60,shimmerPeriod:6,shimmerDuration:2,baseOpacity:.25,shimmerOpacityBoost:.4}},{name:"Heartbeat",description:"40s conveyor / 5s shimmer (8 cycles) - rhythmic pulse",params:{ringCount:8,conveyorDuration:40,shimmerPeriod:5,shimmerDuration:1.5,baseOpacity:.3,shimmerOpacityBoost:.5}},{name:"Radar Sweep",description:"30s conveyor / 3s shimmer (10 cycles) - quick, active",params:{ringCount:10,conveyorDuration:30,shimmerPeriod:3,shimmerDuration:1,baseOpacity:.2,shimmerOpacityBoost:.6,shimmerStrokeBoost:2}},{name:"Ocean Tide",description:"90s conveyor / 9s shimmer (10 cycles) - very slow, calming",params:{ringCount:12,conveyorDuration:90,shimmerPeriod:9,shimmerDuration:3,baseOpacity:.2,fadeInPercent:.2,fadeOutPercent:.2,shimmerOpacityBoost:.35}},{name:"Perfect Sync",description:"50s conveyor / 5s shimmer (10 cycles) - 10 rings, each shimmer = 1 ring",params:{ringCount:10,conveyorDuration:50,shimmerPeriod:5,shimmerDuration:2,baseOpacity:.3,shimmerOpacityBoost:.5}}],Ip=({params:e,mountKey:t})=>{const[s,o]=S.useState([]),a=S.useRef(0),r=S.useRef(0);return S.useEffect(()=>{a.current=performance.now(),r.current=performance.now();const i=()=>{const c=performance.now(),u=(c-a.current)/1e3;(c-r.current)/1e3>=e.shimmerPeriod&&(r.current=c);const m=Array.from({length:e.ringCount},(d,g)=>{const _=g/e.ringCount*e.conveyorDuration,w=(u+_)%e.conveyorDuration/e.conveyorDuration,x=g/e.ringCount*e.shimmerDuration,p=(c-r.current)/1e3,h=Math.max(0,Math.min(1,(p-x)/.8));return{conveyor:w,shimmer:h<1&&h>0?h:0}});o(m)},l=setInterval(i,100);return i(),()=>clearInterval(l)},[e,t]),n.jsxs("div",{className:N.phaseViz,children:[n.jsx("div",{className:N.phaseVizLabel,children:"Phase Alignment (Ring 0 = inner)"}),n.jsx("div",{className:N.phaseVizGrid,children:s.map((i,l)=>n.jsxs("div",{className:N.phaseVizRing,children:[n.jsx("span",{className:N.phaseVizIndex,children:l}),n.jsx("div",{className:N.phaseVizBar,children:n.jsx("div",{className:N.phaseVizConveyor,style:{width:`${i.conveyor*100}%`}})}),n.jsx("div",{className:N.phaseVizBar,children:n.jsx("div",{className:N.phaseVizShimmer,style:{width:i.shimmer>0?`${(1-Math.abs(i.shimmer-.5)*2)*100}%`:"0%",opacity:i.shimmer>0?1:.3}})})]},l))})]})},Np=({onClose:e})=>{const[t,s]=S.useState(ds),[o,a]=S.useState(0),[r,i]=S.useState(!0),l=S.useCallback((m,d)=>{s(g=>({...g,[m]:d}))},[]),c=S.useCallback(()=>{s(ds),a(m=>m+1)},[]),u=S.useCallback(()=>{a(m=>m+1)},[]),f=S.useCallback(()=>{const m=JSON.stringify(t,null,2);navigator.clipboard.writeText(m),console.log("[RingAnimationTest] Config copied:",m)},[t]);return n.jsxs(U.div,{className:N.ringTestContainer,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[n.jsxs("div",{className:N.ringTestPreview,children:[n.jsx(Uo,{isEnabled:!0,params:t},o),n.jsx("div",{className:N.ringTestLabel,children:"Ring Animation Sandbox"})]}),n.jsxs("div",{className:N.ringTestControls,children:[n.jsxs("div",{className:N.ringTestHeader,children:[n.jsx("h3",{children:"Parameters"}),n.jsxs("div",{className:N.ringTestActions,children:[n.jsxs(ae,{variant:"tertiary",size:"s",onClick:()=>i(m=>!m),children:[n.jsx("span",{className:"material-symbols-rounded",children:"monitoring"}),"Phase"]}),n.jsxs(ae,{variant:"tertiary",size:"s",onClick:u,children:[n.jsx("span",{className:"material-symbols-rounded",children:"refresh"}),"Remount"]}),n.jsxs(ae,{variant:"tertiary",size:"s",onClick:c,children:[n.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"}),"Reset"]}),n.jsxs(ae,{variant:"tertiary",size:"s",onClick:f,children:[n.jsx("span",{className:"material-symbols-rounded",children:"content_copy"}),"Copy"]}),n.jsx(ae,{variant:"tertiary",size:"s",onClick:e,children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})]}),r&&n.jsx(Ip,{params:t,mountKey:o}),n.jsxs("div",{className:N.recipeSection,children:[n.jsx("div",{className:N.recipeLabel,children:"Sync Recipes"}),n.jsx("div",{className:N.recipeGrid,children:kp.map(m=>n.jsx("button",{className:N.recipeButton,onClick:()=>{s(d=>({...d,...m.params})),a(d=>d+1)},title:m.description,children:m.name},m.name))})]}),n.jsx("div",{className:N.ringTestSliders,children:Tp.map(m=>n.jsxs("div",{className:N.ringTestSlider,children:[n.jsxs("label",{children:[m.label,": ",t[m.key],m.unit||""]}),n.jsx("input",{type:"range",min:m.min,max:m.max,step:m.step,value:t[m.key],onChange:d=>l(m.key,parseFloat(d.target.value))})]},m.key))})]})]})},Fa=S.createContext(null),Rp=()=>{const e=S.useContext(Fa);if(!e)throw new Error("useGestureContext must be used within a GestureProvider");return e},Ep=({children:e})=>{const t=Xs(0),s=Xs(0);return n.jsx(Fa.Provider,{value:{filmStripProgress:t,sideMenuProgress:s},children:e})},Ap=()=>{S.useEffect(()=>{if(!window.visualViewport)return;const e=()=>{requestAnimationFrame(()=>{const t=window.visualViewport?.height;t&&document.documentElement.style.setProperty("--visual-viewport-height",`${t}px`)})};return e(),window.visualViewport.addEventListener("resize",e),window.visualViewport.addEventListener("scroll",e),()=>{window.visualViewport?.removeEventListener("resize",e),window.visualViewport?.removeEventListener("scroll",e),document.documentElement.style.removeProperty("--visual-viewport-height")}},[])},Op="_appContainer_fsty7_5",Bp="_sideMenuContainer_fsty7_25",zp="_mainViewWrapper_fsty7_49",Mp="_backdrop_fsty7_71",Hp="_chromeContainer_fsty7_101",sn={appContainer:Op,sideMenuContainer:Bp,mainViewWrapper:zp,backdrop:Mp,chromeContainer:Hp},ls={type:"spring",stiffness:400,damping:40,restDelta:.001},Lp=()=>{const[e,t]=oe(Ts),s=F(ct),[o,a]=oe(Ro),[r,i]=oe(Eo),[l,c]=oe(bs),[u,f]=oe(Fo),m=S.useCallback(()=>{i(!1)},[i]),[d,g]=S.useState(0),_=S.useRef(null),w=S.useRef(null),{filmStripProgress:x,sideMenuProgress:p}=Rp(),h=S.useRef(!1),v=S.useRef(0),C=S.useRef(0),y=S.useRef(0);S.useEffect(()=>{_.current&&g(_.current.offsetWidth)},[]),S.useEffect(()=>{h.current||(e==="sideMenu"?Zn(p,1,ls):Zn(p,0,ls))},[e,p]),S.useEffect(()=>{s.view!=="none"&&(p.get()>0&&p.set(0),e==="sideMenu"&&t("dashboardTime"))},[s.view,p,e,t]),Ap(),S.useEffect(()=>{s.view==="form"&&"residents"in s&&s.residents.length>0?document.title=`Safety Check - ${s.residents[0].location}`:document.title="Safety Check App"},[s]);const b=()=>{t("dashboardTime")},j=B=>{s.view==="none"&&(v.current=B.clientX,C.current=B.clientY,y.current=x.get(),h.current=!1)},I=B=>{if(s.view==="none"){if(h.current){const P=B.clientX-v.current,Z=window.innerWidth,Q=P/Z;if(e==="sideMenu"){const ne=Math.max(0,Math.min(1,1+P/d));p.set(ne);return}if(e==="dashboardTime"&&P>0){const ne=Math.max(0,Math.min(1,P/d));p.set(ne);return}if(p.get()===0){const ne=Math.max(0,Math.min(1,y.current-Q));x.set(ne)}return}if(B.buttons>0||B.pointerType==="touch"){const P=Math.abs(B.clientX-v.current),Z=Math.abs(B.clientY-C.current);P>10&&P>Z&&(h.current=!0,B.currentTarget.setPointerCapture(B.pointerId))}}},T=B=>{if(!h.current)return;h.current=!1,B.currentTarget.releasePointerCapture(B.pointerId);const P=B.clientX-v.current,Z=p.get();let Q=!1;e==="sideMenu"?Q=!(Z<.8||P<-50):Q=Z>.2||P>50,Zn(p,Q?1:0,ls),t(Q?"sideMenu":"dashboardTime")},O=Tn(p,[0,1],[0,d]),E=Tn(p,[0,1],[-d,0]),D=Tn(p,[0,1],[0,1]),M=Tn(p,B=>B>0?"auto":"none");return n.jsxs("div",{className:sn.appContainer,onPointerDown:j,onPointerMove:I,onPointerUp:T,onPointerCancel:T,onPointerLeave:T,style:{touchAction:"pan-y"},children:[n.jsx(U.div,{ref:_,className:sn.sideMenuContainer,style:{x:E},children:n.jsx(wl,{})}),n.jsxs(U.div,{className:sn.mainViewWrapper,style:{x:O},children:[n.jsx(Ki,{}),n.jsx(U.div,{className:sn.backdrop,style:{opacity:D,pointerEvents:M},onClick:b}),n.jsxs("div",{ref:w,className:sn.chromeContainer,children:[n.jsx(qc,{}),n.jsx(Xl,{})]}),n.jsx(Wc,{})]}),n.jsxs(qe,{children:[s.view==="scanning"&&n.jsx(cu,{}),s.view==="form"&&n.jsx(dd,{checkData:s}),s.view==="provisioning"&&n.jsx(Ph,{})]}),n.jsx(uf,{}),n.jsx(jp,{}),n.jsx(Zh,{}),n.jsx(Hn,{isOpen:o,onClose:()=>a(!1),title:"Developer Tools",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(tp,{})}),n.jsx(Hn,{isOpen:r,onClose:m,title:"Future Ideas",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(np,{})}),n.jsx(Hn,{isOpen:l,onClose:()=>c(!1),title:"User Settings",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(wp,{})}),n.jsx(qe,{children:u&&n.jsx(Np,{onClose:()=>f(!1)})})]})},Vp=()=>n.jsx(Ep,{children:n.jsx(Lp,{})});export{Vp as AppShell};
