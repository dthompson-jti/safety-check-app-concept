import{j as e,R as B,a as V,O as z,C as q,T as J,s as K}from"./vendor-ui-CNQZc5wN.js";import{R as G,a,c as I,u as Q}from"./vendor-react-2nSX3KhJ.js";import{f as W,d as X,p as Y}from"./Toast-D9OgrRVo.js";import{u as Z,A as $,f as k}from"./useScrollToFocused-Bob4zYYS.js";import{B as D}from"./Button-CXM-JyrO.js";import{J as ee,E as se}from"./main-dXsNHIMF.js";import{m as n}from"./vendor-heavy-C5Wxw-Im.js";const b=G.forwardRef(({isInvalid:o,...c},i)=>e.jsx("input",{ref:i,...c,"data-invalid":o})),p=({isOpen:o,onClose:c,children:i,width:j="auto",height:l="auto",title:m,description:r})=>e.jsx(B,{open:o,onOpenChange:u=>!u&&c(),children:e.jsxs(V,{children:[e.jsx(z,{className:"modal-backdrop"}),e.jsxs(q,{className:"modal-container",style:{width:j,height:l},onEscapeKeyDown:c,children:[e.jsx(J,{className:"visually-hidden",children:m}),r&&e.jsx(K,{className:"visually-hidden",children:r}),i]})]})}),te=({children:o})=>e.jsx("div",{className:"modal-header",children:o}),oe=({children:o})=>e.jsx("div",{className:"modal-content",children:o}),ae=({children:o})=>e.jsx("div",{className:"modal-footer",children:o});p.Header=te;p.Content=oe;p.Footer=ae;const ne="_viewportStack_7lacj_15",re="_scrollableContent_7lacj_53",ie="_loginFormCard_7lacj_95",le="_appTitle_7lacj_131",ce="_shortcutIcon_7lacj_191",de="_formFields_7lacj_225",pe="_supportLink_7lacj_243",me="_envDisplay_7lacj_285",ue="_errorMessage_7lacj_301",he="_formError_7lacj_315",fe="_pageFooter_7lacj_357",je="_footerLinks_7lacj_381",xe="_footerSeparator_7lacj_409",ve="_footerData_7lacj_419",ye="_versionDisplay_7lacj_433",ge="_copyright_7lacj_447",_e="_modalBodyLayout_7lacj_461",Ce="_modalTextContent_7lacj_469",Ne="_infoNote_7lacj_505",s={viewportStack:ne,scrollableContent:re,loginFormCard:ie,appTitle:le,shortcutIcon:ce,formFields:de,supportLink:pe,envDisplay:me,errorMessage:ue,formError:he,pageFooter:fe,footerLinks:je,footerSeparator:xe,footerData:ve,versionDisplay:ye,copyright:ge,modalBodyLayout:_e,modalTextContent:Ce,infoNote:Ne},be=()=>{const[o,c]=a.useState(""),[i,j]=a.useState(""),[l,m]=a.useState(""),[r,u]=a.useState(""),[h,f]=a.useState(""),[A,x]=a.useState(!1),[v,_]=a.useState(!1),[F,L]=a.useState(!1),[P,C]=a.useState(!1),N=I(Y),S=I(X),w=Q(W),T=a.useRef(null);Z({containerRef:T,offset:20});const R=t=>{t.preventDefault(),_(!0),m(""),u(""),f("");let g=!1;if(o.trim()===""&&(m("Username is required."),g=!0),i.trim()===""&&(u("Password is required."),g=!0),g)return;if(i.trim()!=="test"){f("Incorrect username or password.");return}const E=k(o.trim());E?(C(!0),setTimeout(()=>{S({type:"RESET_DATA"}),N({isAuthenticated:!0,user:E})},500)):f("Incorrect username or password.")},M=()=>{L(!0);const t=k("dthompson");t&&(C(!0),setTimeout(()=>{S({type:"RESET_DATA"}),N({isAuthenticated:!0,user:t})},500))},H=t=>{c(t),l&&m(""),h&&f("")},U=t=>{j(t),r&&u(""),h&&f("")},y={x:[0,-8,8,-8,8,0],transition:{duration:.4}},O={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.3}}},d={hidden:{opacity:0,y:12},visible:{opacity:1,y:0,transition:{duration:.3}}};return e.jsxs(e.Fragment,{children:[e.jsx(n.div,{className:s.viewportStack,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:e.jsxs("div",{className:s.scrollableContent,ref:T,children:[e.jsxs(n.div,{className:s.loginFormCard,variants:O,initial:"hidden",animate:"visible",children:[e.jsxs("div",{className:s.appTitle,children:[e.jsx(n.div,{layoutId:F?void 0:"app-logo",children:e.jsx(ee,{size:144,className:s.shortcutIcon,onClick:M,title:"Developer Shortcut Login"})}),e.jsx(n.h3,{variants:d,children:"Safeguard"})]}),e.jsxs(n.form,{onSubmit:R,className:s.formFields,noValidate:!0,variants:d,children:[e.jsx(n.div,{animate:v&&h?y:{},onAnimationComplete:()=>_(!1),children:h&&e.jsxs("div",{className:s.formError,children:[e.jsx(se,{size:20}),e.jsx("span",{children:h})]})}),e.jsxs(n.div,{variants:d,animate:v&&l?y:{},children:[e.jsx(b,{type:"text",placeholder:"Username","aria-label":"Username",value:o,onChange:t=>H(t.target.value),isInvalid:!!l,autoFocus:!0,autoCapitalize:"none",autoCorrect:"off",spellCheck:!1,autoComplete:"username",enterKeyHint:"next",className:s.usernameInput}),l&&e.jsx("div",{className:s.errorMessage,children:l})]}),e.jsxs(n.div,{variants:d,animate:v&&r?y:{},children:[e.jsx(b,{type:"password",placeholder:"Password","aria-label":"Password",value:i,onChange:t=>U(t.target.value),isInvalid:!!r,autoCapitalize:"none",autoCorrect:"off",autoComplete:"current-password",enterKeyHint:"go"}),r&&e.jsx("div",{className:s.errorMessage,children:r})]}),e.jsx(n.div,{variants:d,children:e.jsx(D,{type:"submit",variant:"primary",size:"m",loading:P,loadingText:"Signing in...",style:{width:"100%",marginTop:"var(--spacing-2)"},children:"Log In"})}),e.jsx(n.div,{variants:d,className:s.supportLink,children:e.jsx("button",{type:"button",onClick:()=>x(!0),children:"Trouble signing in?"})})]})]}),e.jsxs("footer",{className:s.pageFooter,children:[e.jsxs("div",{className:s.footerData,children:[w.showEnvironmentName&&e.jsx("div",{className:s.envDisplay,children:w.environmentName||"https://vicbc-qa-symphony.logan-symphony.com"}),e.jsxs("div",{className:s.versionDisplay,children:["v",$.replace("v","")]})]}),e.jsxs("p",{className:s.footerLinks,children:[e.jsx("a",{href:"#",onClick:t=>t.preventDefault(),children:"Privacy Policy"}),e.jsx("span",{className:s.footerSeparator,children:"·"}),e.jsx("a",{href:"#",onClick:t=>t.preventDefault(),children:"Terms of Use"})]}),e.jsx("p",{className:s.copyright,children:"© 2025 Journal Technologies Inc."})]})]})},"login-view"),e.jsxs(p,{isOpen:A,onClose:()=>x(!1),title:"How to Sign In",width:"90%",height:"auto",description:"Information on how to sign in to the prototype application.",children:[e.jsx(p.Content,{children:e.jsx("div",{className:s.modalBodyLayout,children:e.jsxs("div",{className:s.modalTextContent,children:[e.jsx("h3",{children:"How to Sign In"}),e.jsx("p",{children:"To sign-in, use your eSeries credentials. To change your password, go to eSeries and select reset password."}),e.jsxs("div",{className:s.infoNote,"data-appearance-type":"tertiary","data-bordered":"true",children:[e.jsx("h4",{children:"Password & Account Help"}),e.jsxs("ul",{children:[e.jsx("li",{children:"This prototype does not support actual password resets."}),e.jsx("li",{children:"In a production environment, this section would contain agency-specific instructions or links to a self-service portal."})]})]})]})})}),e.jsx(p.Footer,{children:e.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsx(D,{variant:"secondary",onClick:()=>x(!1),style:{width:"100%"},children:"Close"})})})]})]})};export{be as LoginView};
