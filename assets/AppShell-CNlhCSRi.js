import{j as n,p as $a,q as Wa,s as Fa,t as Va,u as Ga,g as qa,h as Ua,O as Ya,i as Ka}from"./vendor-ui-9q5mCFhr.js";import{u as W,a as T,R as j,c as ne,e as oe,d as Kt}from"./vendor-react-2nSX3KhJ.js";import{s as bo,r as Xa,u as Za,w as xt,y as Co,f as We,t as ps,z as Qa,A as _o,B as Ws,C as Ja,D as er,v as os,i as So,h as To,j as jo,m as gs,p as $t,b as vs,c as xs,o as ys,E as tr,F as ws,k as Io,g as bs,l as ko,G as Dn,H as nr,I as sr,d as Pn,J as No,K as or,L as Ro,M as ar,a as Eo,N as Ao,O as rr,P as ir,Q as lr,S as Oo,U as Mo,V as cr,n as ur,W as dr,X as mr,Y as fr,Z as hr,_ as Bo,$ as pr,a0 as gr}from"./Toast-DAxuMMZ-.js";import{f as Ft,p as vr,u as xr,h as yr,a as wr,b as Ho}from"./main-CoajhDPy.js";import{m as X,A as st,M as br,u as Cr,a as Fs,b as Un,c as Sn}from"./vendor-heavy-B2eKby53.js";import{B as me}from"./Button-CTMRy7h-.js";import{u as qe,T as _r,a as lt,S as Lo,b as $e,s as H,F as sn,D as Sr}from"./Tooltip-B301s7zL.js";import{A as Tr,g as Cs,a as jr,u as Ir}from"./useScrollToFocused-BqXg5PXE.js";const kr=(e,t)=>{const s=(e.getTime()-t)/1e3;if(s<0){const i=Math.abs(s)/60,c=Math.floor(i/60),d=Math.floor(i%60);if(i<1)return"Overdue";const f=[];return c>0&&f.push(`${c}h`),d>0&&f.push(`${d}m`),`Overdue ${f.join(" ")}`}if(s<60)return`${Math.max(0,s).toFixed(1)}s`;if(s<300){const i=Math.floor(s/60),c=Math.floor(s%60);return`${i}m ${String(c).padStart(2,"0")}s`}if(s<3600)return`${Math.ceil(s/60)}m`;const o=s/60,a=Math.floor(o/60),r=Math.round(o%60),l=[];return a>0&&l.push(`${a}h`),r>0&&l.push(`${r}m`),l.join(" ")},Nr=(e,t)=>{const s=t==="early"||t==="pending"||t==="due"||t==="missed",o=Date.now(),a=(e.getTime()-o)/1e3;let r=bo;t!=="missed"&&(a<60&&a>-60?r=Xa:a<300&&(r=Za));const l=W(r);if(!s)return"";if(t==="missed"){const i=(l-e.getTime())/1e3,c=Math.floor(i/60),d=Math.floor(c/60),f=c%60;if(c<1)return"Overdue";const u=[];return d>0&&u.push(`${d}h`),f>0&&u.push(`${f}m`),`Overdue ${u.join(" ")}`}return kr(e,l)},Rr=["pulse-basic","pulse-gradient","magma-flow","border-pulse","hazard-fade","card-pulse-basic","card-pulse-gradient","indicator-pulse","badge-pulse","glass-tint-pulse","pulseRingExpand","shimmerOpacity"];function mn(e,t){const{isEnabled:s,animationNames:o=Rr}=t,a=T.useRef(!1);typeof window<"u"&&(a.current=window.matchMedia("(prefers-reduced-motion: reduce)").matches),T.useLayoutEffect(()=>{if(!s||!e.current||a.current)return;const r=e.current,l=d=>{if("animationName"in d){const f=d.animationName;o.some(u=>f.includes(u))&&(d.startTime=0,console.log(`[useWaapiSync] Synced '${f}' to startTime=0`))}};r.getAnimations({subtree:!0}).forEach(l);const c=d=>{if(o.some(f=>d.animationName.includes(f))){const u=r.getAnimations({subtree:!0}).find(m=>m.animationName===d.animationName);u&&l(u)}};return r.addEventListener("animationstart",c),()=>{r.removeEventListener("animationstart",c)}},[s,e,o])}const Er="_badge_sy3c1_5",Ar="_badgeIcon_sy3c1_37",Or="_badgePulse_sy3c1_161",Mr="_badgeInvert_sy3c1_197",Br="_badgeInvertForCard_sy3c1_219",Qt={badge:Er,badgeIcon:Ar,badgePulse:Or,badgeInvert:Mr,badgeInvertForCard:Br},Hr=e=>{switch(e){case"due":return{label:"Due",icon:"schedule"};case"missed":return{label:"Missed",icon:"notifications_active"};case"completing":return{label:"Completed",icon:"check_circle"};case"complete":return{label:"Completed",icon:"check_circle"};case"queued":return{label:"Queued",icon:"cloud_off"};default:return{label:"",icon:null}}},Lr=(e,t)=>{const s=new Date(e).getTime(),o=(t-s)/(60*1e3),a=Math.max(1,Math.ceil(o/15));return a===1?"Missed":`${a} Missed`},zr=({status:e,type:t,dueDate:s})=>{const o=W(bo),{feat_badge_mode:a,feat_invert_badge:r,feat_invert_card:l}=W(Ft),i=j.useRef(null),c=a==="pulse"&&e==="missed";if(mn(i,{isEnabled:c}),e==="pending"||e==="early")return null;const d=Hr(e);let f=d.label,u=e;t==="supplemental"&&(f="Supplemental",u="supplemental"),e==="missed"&&s&&(f=Lr(s,o));const m=e==="missed"&&r&&!l,g=e==="missed"&&l,C=[Qt.badge,c?Qt.badgePulse:"",m?Qt.badgeInvert:"",g?Qt.badgeInvertForCard:""].filter(Boolean).join(" ");return n.jsxs("div",{className:C,"data-status":u,ref:i,children:[d.icon&&n.jsx("span",{className:`material-symbols-rounded ${Qt.badgeIcon}`,children:d.icon}),f]})},Dr="_checkCard_1jx0x_117",Pr="_statusIndicator_1jx0x_273",$r="_mainContent_1jx0x_353",Wr="_topRow_1jx0x_369",Fr="_bottomRow_1jx0x_383",Vr="_locationInfo_1jx0x_397",Gr="_locationText_1jx0x_411",qr="_residentList_1jx0x_429",Ur="_residentListItem_1jx0x_453",Yr="_warningIcon_1jx0x_475",Kr="_timeDisplay_1jx0x_487",Xr="_cardGradient_1jx0x_561",Zr="_cardBorder_1jx0x_643",Qr="_cardHazard_1jx0x_683",Jr="_cardPulseBasic_1jx0x_749",ei="_cardInvert_1jx0x_949",Ae={checkCard:Dr,statusIndicator:Pr,mainContent:$r,topRow:Wr,bottomRow:Fr,locationInfo:Vr,locationText:Gr,residentList:qr,residentListItem:Ur,warningIcon:Yr,timeDisplay:Kr,cardGradient:Xr,cardBorder:Zr,cardHazard:Qr,cardPulseBasic:Jr,cardInvert:ei},ti=({resident:e,check:t})=>{const s=t.specialClassifications?.some(o=>o.residentId===e.id);return n.jsxs("li",{className:Ae.residentListItem,children:[s&&n.jsx("span",{className:`material-symbols-rounded ${Ae.warningIcon}`,children:"warning"}),e.name]})},ni=({check:e,transition:t})=>{const s=ne(xt),o=W(Co),{showStatusIndicators:a}=W(We),{feat_card_pulse:r,feat_card_gradient:l,feat_card_border:i,feat_hazard_texture:c,feat_invert_card:d}=W(Ft),f=o===e.id,u=e.status==="missed",m=T.useRef(null);mn(m,{isEnabled:u&&(r!=="none"||l||i||c)});const C=T.useMemo(()=>new Date(e.dueDate),[e.dueDate]),w=Nr(C,e.status),v=!["complete","supplemental","completing","queued"].includes(e.status),h=()=>{v&&s({view:"form",type:"scheduled",method:"manual",checkId:e.id,roomName:e.residents[0].location,residents:e.residents,specialClassifications:e.specialClassifications})},{residents:p}=e,S=p[0]?.location||"N/A",_=!["complete","supplemental","completing","queued"].includes(e.status),y=u&&r==="basic"?Ae.cardPulseBasic:u&&r==="gradient"?Ae.cardGradient:"",x=u&&r==="none"&&l?Ae.cardGradient:"",b=[Ae.checkCard,f?Ae.isCompleting:"",y,x,u&&i?Ae.cardBorder:"",u&&c?Ae.cardHazard:"",u&&d?Ae.cardInvert:""].filter(Boolean).join(" ");return n.jsx(X.div,{initial:{height:"auto",marginBottom:"var(--space-3)"},animate:{height:"auto",marginBottom:"var(--space-3)"},exit:{height:0,marginBottom:0,overflow:"hidden",transition:{delay:.1,duration:.2,ease:"linear"}},children:n.jsxs(X.div,{ref:m,transition:t,initial:{opacity:0,x:0},animate:{opacity:1,x:0},exit:{x:"100%",opacity:0,transition:{x:{duration:.2,ease:[.25,1,.5,1]},opacity:{duration:.2,ease:"easeOut"}}},className:b,"data-status":e.status,"data-check-id":e.id,"data-indicators-visible":a,onClick:h,"aria-disabled":!v,whileTap:v?{scale:.98}:{},children:[a&&_&&n.jsx("div",{className:Ae.statusIndicator,"data-status":e.status}),n.jsxs("div",{className:Ae.mainContent,children:[n.jsxs("div",{className:Ae.topRow,children:[n.jsx("div",{className:Ae.locationInfo,children:n.jsx("span",{className:Ae.locationText,children:S})}),n.jsx(zr,{status:e.status,type:e.type,dueDate:e.dueDate})]}),n.jsxs("div",{className:Ae.bottomRow,children:[n.jsx("ul",{className:Ae.residentList,children:p.map(I=>n.jsx(ti,{resident:I,check:e},I.id))}),n.jsx("div",{className:Ae.timeDisplay,children:v?w:null})]})]})]})})},si="_shimmer_1m0k7_23",oi="_cardWrapper_1m0k7_49",ai="_indicator_1m0k7_89",ri="_mainContent_1m0k7_109",ii="_topRow_1m0k7_123",li="_bottomRow_1m0k7_125",ci="_location_1m0k7_153",ui="_badge_1m0k7_155",di="_resident_1m0k7_157",mi="_residentShort_1m0k7_159",pt={shimmer:si,cardWrapper:oi,indicator:ai,mainContent:ri,topRow:ii,bottomRow:li,location:ci,badge:ui,resident:di,residentShort:mi},fi=()=>n.jsxs("div",{className:pt.cardWrapper,children:[n.jsx("div",{className:pt.shimmer}),n.jsx("div",{className:pt.indicator}),n.jsxs("div",{className:pt.mainContent,children:[n.jsxs("div",{className:pt.topRow,children:[n.jsx("div",{className:pt.location}),n.jsx("div",{className:pt.badge})]}),n.jsxs("div",{className:pt.bottomRow,children:[n.jsx("div",{className:pt.resident}),n.jsx("div",{className:pt.residentShort})]})]})]}),hi="_emptyStateContainer_11y9y_3",pi="_emptyStateMessage_11y9y_47",Tn={emptyStateContainer:hi,emptyStateMessage:pi},as=({icon:e="search_off",title:t,message:s,action:o})=>n.jsxs("div",{className:Tn.emptyStateContainer,children:[n.jsx("span",{className:"material-symbols-rounded large-feature-icon",children:e}),n.jsx("h3",{className:Tn.emptyStateTitle,children:t}),s&&n.jsx("p",{className:Tn.emptyStateMessage,children:s}),o&&n.jsx("div",{className:Tn.actionContainer,children:o})]}),gi="_chipContainer_5af65_5",vi="_chipContent_5af65_19",xi="_chipText_5af65_43",yi="_clearButton_5af65_63",jn={chipContainer:gi,chipContent:vi,chipText:xi,clearButton:yi},wi=({filterLabel:e,onClear:t})=>n.jsx(X.div,{layout:!0,className:jn.chipContainer,initial:{y:-20,opacity:0,height:0},animate:{y:0,opacity:1,height:"auto"},exit:{y:-20,opacity:0,height:0},transition:{type:"tween",duration:.25,ease:"easeInOut"},children:n.jsxs("div",{className:jn.chipContent,children:[n.jsxs("span",{className:jn.chipText,children:["Showing: ",n.jsx("strong",{children:e})]}),n.jsx(me,{variant:"quaternary",size:"xs",iconOnly:!0,onClick:t,"aria-label":"Clear filter",className:jn.clearButton,children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})}),bi="_emptyStateContainer_1yck0_3",In={emptyStateContainer:bi},Ci=({filterLabel:e,onClear:t})=>n.jsxs("div",{className:In.emptyStateContainer,children:[n.jsx("div",{className:In.iconWrapper,children:n.jsx("span",{className:"material-symbols-rounded",children:"filter_list_off"})}),n.jsxs("h3",{className:In.title,children:['No "',e,'" checks']}),n.jsx("p",{className:In.message,children:"There are no checks that match the current filter. Try clearing the filter to see all upcoming checks."}),n.jsx(me,{variant:"secondary",size:"m",onClick:t,children:"Clear Filter"})]}),_i="_scrollContainer_1khaw_5",Si="_headerWrapper_1khaw_49",Ti="_priorityGroupHeader_1khaw_57",Jt={scrollContainer:_i,headerWrapper:Si,priorityGroupHeader:Ti},Vs={type:"tween",duration:.25,ease:[.25,1,.5,1]},ji=8,Gs={missed:"Missed",due:"Due",queued:"Queued"},Ii=e=>{const t={Missed:[],Due:[],Upcoming:[]};return e.forEach(s=>{if(["complete","supplemental","queued"].includes(s.status))return;let o=s.status;if(s.status==="completing"){const a=s.baseInterval*60*1e3,l=new Date(s.dueDate).getTime()-a,c=(Date.now()-l)/(60*1e3);c<13?o="pending":c<15?o="due":o="missed"}switch(o){case"missed":t.Missed.push(s);break;case"due":t.Due.push(s);break;case"early":case"pending":default:t.Upcoming.push(s);break}}),Object.entries(t).map(([s,o])=>({title:s,checks:o})).filter(s=>s.checks.length>0)},ki=e=>{const t=e.filter(o=>!["complete","supplemental","missed","queued"].includes(o.status)),s=[];return t.length>0&&s.push({title:"Walking Order",checks:t}),s},Ni=({viewType:e})=>{const t=W(e==="time"?ps:Qa),{isSlowLoadEnabled:s}=W(We),[o,a]=oe(_o),r=W(Ws),l=W(Ja),[i,c]=oe(er),d=ne(Ws);T.useEffect(()=>{if(o){const C=setTimeout(()=>a(!1),s?3e3:750);return()=>clearTimeout(C)}},[o,a,s]);const f=()=>{d(!0),c("all"),setTimeout(()=>d(!1),500)},u=o,m=i!=="all",g=()=>{if(u)return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:Jt.headerWrapper,children:n.jsx("div",{className:Jt.priorityGroupHeader,style:{width:"100px",height:"1.5rem",backgroundColor:"transparent",marginBottom:"var(--spacing-2)"},children:n.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"var(--surface-bg-tertiary)",borderRadius:"var(--radius-sm)",opacity:.3}})})}),Array.from({length:ji}).map((w,v)=>n.jsx(fi,{},v))]});if(t.length===0)return l?n.jsx(as,{title:"No Results Found",message:`Your search for "${l}" did not return any results.`}):m?n.jsx(Ci,{filterLabel:Gs[i],onClear:f}):n.jsx(as,{title:"All Checks Complete",message:"There are no checks due at this time."});const C=e==="time"?Ii(t):ki(t);return n.jsxs(n.Fragment,{children:[n.jsx(st,{children:C.flatMap(w=>[n.jsx(X.div,{className:Jt.headerWrapper,layout:!0,transition:Vs,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n.jsx("h2",{className:Jt.priorityGroupHeader,children:w.title})},w.title),...w.checks.map(v=>n.jsx(ni,{check:v,transition:Vs},v.id))])}),n.jsx("div",{style:{height:"calc(var(--footer-height, 96px) + var(--spacing-4))"}})]})};return n.jsxs("div",{className:Jt.scrollContainer,"data-refreshing":r,children:[n.jsx("div",{style:{height:"var(--header-height)"}}),n.jsx(st,{mode:"wait",children:m&&n.jsx(wi,{filterLabel:Gs[i],onClear:f},i)}),g()]})},Ri="_container_r0gas_5",Ei={container:Ri},Ai=()=>n.jsx("div",{className:Ei.container,children:n.jsx(Ni,{viewType:"time"})}),_s=()=>{const{audioEnabled:e}=W(We),t=W(vr);return{play:T.useCallback((o,a)=>{!e||!t||t(o,a)},[e,t])}},Oi=(e,t=7,s=3e3)=>{const o=T.useRef(0),a=T.useRef(0),r=T.useRef(e);return r.current=e,{onTap:T.useCallback(()=>{const i=Date.now();i-a.current>s&&(o.current=0,a.current=i),o.current+=1,o.current===1&&(a.current=i),o.current>=t&&(o.current=0,r.current())},[t,s]),currentCount:o.current}},Mi="_contextCard_17t6w_5",Bi="_stackedContainer_17t6w_43",Hi="_stackItem_17t6w_57",Li="_label_17t6w_69",zi="_value_17t6w_85",Di="_actionIcon_17t6w_97",wt={contextCard:Mi,stackedContainer:Bi,stackItem:Hi,label:Li,value:zi,actionIcon:Di},zo=({groupId:e,unitId:t,onClick:s})=>{const o=os.find(i=>i.id===e),a=o?.units.find(i=>i.id===t),r=o?.name||"Select Group",l=a?.name||"Select Unit";return n.jsxs("button",{className:wt.contextCard,onClick:s,type:"button",children:[n.jsxs("div",{className:wt.stackedContainer,children:[n.jsxs("div",{className:wt.stackItem,children:[n.jsx("span",{className:wt.label,children:"Group"}),n.jsx("span",{className:wt.value,children:r})]}),n.jsxs("div",{className:wt.stackItem,children:[n.jsx("span",{className:wt.label,children:"Unit"}),n.jsx("span",{className:wt.value,children:l})]})]}),n.jsx("div",{className:wt.actionIcon,children:n.jsx("span",{className:"material-symbols-rounded",children:"swap_horiz"})})]})},bt=({label:e,subLabel:t,leadingIcon:s,leadingElement:o,trailingIcon:a,trailingElement:r,isSelected:l,disabled:i,onClick:c,indent:d=!1,showChevron:f=!0})=>{let u=o;!u&&s?u=n.jsx("span",{className:"material-symbols-rounded",children:s}):!u&&l&&(u=n.jsx("span",{className:"material-symbols-rounded",children:"check"}));let m=r;return!m&&a?m=n.jsx("span",{className:"material-symbols-rounded",children:a}):!m&&c&&f&&!l&&(m=n.jsx("span",{className:"material-symbols-rounded",children:"chevron_right"})),n.jsxs("button",{className:"list-item-root",onClick:c,disabled:i,"aria-selected":l,"data-has-leading":!!u||d,type:"button",children:[(u||d)&&n.jsx("div",{className:"list-item-leading",children:u}),n.jsxs("div",{className:"list-item-content",children:[n.jsxs("div",{className:"list-item-text-group",children:[n.jsx("span",{className:"list-item-label",children:e}),t&&n.jsx("span",{className:"list-item-sublabel",children:t})]}),m&&n.jsx("div",{className:"list-item-trailing",children:m})]})]})},Pi="_sideMenu_k272g_5",$i="_header_k272g_29",Wi="_titleRow_k272g_49",Fi="_title_k272g_49",Vi="_envBanner_k272g_85",Gi="_version_k272g_113",qi="_headerSeparator_k272g_143",Ui="_content_k272g_155",Yi="_separator_k272g_173",Ki="_menuList_k272g_283",Xi="_footer_k272g_303",Zi="_userProfileCard_k272g_319",Qi="_userName_k272g_391",Pe={sideMenu:Pi,header:$i,titleRow:Wi,title:Fi,envBanner:Vi,version:Gi,headerSeparator:qi,content:Ui,separator:Yi,menuList:Ki,footer:Xi,userProfileCard:Zi,userName:Qi},Ji=()=>{const e=ne(So),t=ne(To),s=ne(jo),o=ne(xt),a=ne(gs),r=ne($t),l=W($t),i=W(vs),c=W(xs),d=W(We),{toggle:f,isUnlocked:u}=xr(),m=ne(ys),{trigger:g}=qe(),{play:C}=_s(),w=T.useCallback(()=>{const p=!u;f(),g(p?"success":"light"),p&&C("success"),m({message:p?"Future Ideas Unlocked":"Future Ideas Hidden",icon:p?"lightbulb":"lightbulb_outline",variant:"neutral"})},[f,u,m,g,C]),{onTap:v}=Oi(w,7,3e3),h=()=>{r({isAuthenticated:!1,user:null})};return n.jsxs("aside",{className:Pe.sideMenu,children:[n.jsxs("header",{className:Pe.header,children:[n.jsxs("div",{className:Pe.titleRow,children:[n.jsx("h1",{className:Pe.title,onClick:v,children:"Safeguard"}),n.jsx("span",{className:Pe.version,children:Tr})]}),d.showEnvironmentName&&n.jsx("div",{className:Pe.envBanner,children:d.environmentName||"https://vicbc-qa-symphony.logan-symphony.com"}),n.jsx("div",{className:Pe.headerSeparator})]}),n.jsxs("main",{className:Pe.content,children:[n.jsx(zo,{groupId:i,unitId:c,onClick:()=>a(!0)}),n.jsx("div",{className:Pe.separator}),n.jsxs("div",{className:Pe.menuList,children:[n.jsx(bt,{label:"Write NFC tags",leadingIcon:"nfc",onClick:()=>o({view:"provisioning"}),showChevron:!1}),n.jsx(bt,{label:"Developer tools",leadingIcon:"code",onClick:()=>t(!0),showChevron:!1}),u&&n.jsx(bt,{label:"Future Ideas",leadingIcon:"lightbulb",onClick:()=>s(!0),showChevron:!1})]})]}),n.jsxs("footer",{className:Pe.footer,children:[n.jsx("div",{className:Pe.menuList,children:n.jsx(bt,{label:"Log out",leadingIcon:"logout",onClick:h,showChevron:!1})}),n.jsx("div",{className:Pe.separator}),n.jsxs("button",{className:Pe.userProfileCard,onClick:()=>e(!0),"aria-label":"Settings",children:[n.jsx("span",{className:Pe.userName,children:l.user?.displayName||"Unknown User"}),n.jsx("span",{className:"material-symbols-rounded",children:"settings"})]})]})]})},el=e=>{const t=ne(e),s=T.useRef(null),o=T.useRef(0),a=T.useRef(0);return T.useLayoutEffect(()=>{const r=()=>{if(s.current){const i=s.current.offsetHeight;o.current!==i&&(cancelAnimationFrame(a.current),a.current=requestAnimationFrame(()=>{o.current=i,t(i)}))}};r();const l=new ResizeObserver(r);return s.current&&l.observe(s.current),()=>{l.disconnect(),cancelAnimationFrame(a.current)}},[t]),s},Do=({trigger:e,children:t,open:s,onOpenChange:o,variant:a="default"})=>{const r=a==="tooltip"?"popover-content-tooltip":"popover-content";return n.jsxs($a,{open:s,onOpenChange:o,children:[n.jsx(Wa,{asChild:!0,children:e}),n.jsx(Fa,{children:n.jsx(Va,{className:r,sideOffset:5,collisionPadding:8,children:t})})]})},tl="_statusBar_99qv7_7",nl="_contentContainer_99qv7_19",sl="_statusPill_99qv7_29",ol="_icon_99qv7_99",al="_count_99qv7_109",rl="_popoverContent_99qv7_123",Dt={statusBar:tl,contentContainer:nl,statusPill:sl,icon:ol,count:al,popoverContent:rl},qs=({count:e,icon:t,status:s,variant:o,tooltipContent:a})=>{const r=e===0,l=n.jsxs("div",{className:Dt.statusPill,"data-status":s,"data-variant":o,"data-active":"false","data-empty":r?"true":void 0,children:[n.jsx("span",{className:`material-symbols-rounded ${Dt.icon}`,children:t}),n.jsx("span",{className:Dt.count,children:e})]});return a?n.jsx(Do,{trigger:l,variant:"tooltip",children:a}):l},il=({variant:e="default"})=>{const t=W(tr),s=n.jsx("div",{className:Dt.popoverContent,children:n.jsxs("span",{children:[t.missed," Missed"]})}),o=n.jsx("div",{className:Dt.popoverContent,children:n.jsxs("span",{children:[t.due," Due"]})});return n.jsx(X.div,{className:Dt.statusBar,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",duration:.2,ease:[.32,.72,0,1]},"data-variant":e,children:n.jsxs("div",{className:Dt.contentContainer,"data-variant":e,children:[n.jsx(qs,{count:t.missed,icon:"notifications_active",status:"missed",variant:e,tooltipContent:s}),n.jsx(qs,{count:t.due,icon:"schedule",status:"due",variant:e,tooltipContent:o})]})})},ll="_avatar_pc746_5",cl="_popoverContent_pc746_67",Us={avatar:ll,popoverContent:cl},ul=({className:e})=>{const t=W($t),s=W(ws),o=W(Ft),a=ne(Io);if(!t.user)return null;const{initials:r,displayName:l,username:i}=t.user;let c;if(o.enableEnhancedAvatarDropdown){const u=s[i]?.avatarHue,m=u!==void 0?u:Cs(i);c=jr(m)}const d=n.jsx("div",{className:`${Us.avatar} ${e||""}`,"aria-label":`User: ${l}`,style:c?{backgroundColor:c}:void 0,onClick:o.enableEnhancedAvatarDropdown?()=>a(!0):void 0,role:o.enableEnhancedAvatarDropdown?"button":void 0,children:r});if(o.enableEnhancedAvatarDropdown)return d;const f=n.jsx("div",{className:Us.popoverContent,children:l});return n.jsx(Do,{trigger:d,variant:"tooltip",children:f})},dl="_header_1ti53_5",ml="_offlineBar_1ti53_295",fl="_spinning_1ti53_303",hl="_headerContent_1ti53_313",pl="_leftActions_1ti53_341",gl="_centerContent_1ti53_369",vl="_statusBadgesWrapper_1ti53_405",xl="_offlinePillWrapper_1ti53_419",yl="_rightActions_1ti53_435",wl="_offlineBarContent_1ti53_625",bl="_offlineContentRow_1ti53_649",Cl="_offlineTimer_1ti53_673",_l="_queuedText_1ti53_691",Sl="_divider_1ti53_735",Tl="_offlineAvatar_1ti53_745",jl="_offlineButton_1ti53_759",Se={header:dl,offlineBar:ml,spinning:fl,headerContent:hl,leftActions:pl,centerContent:gl,statusBadgesWrapper:vl,offlinePillWrapper:xl,rightActions:yl,offlineBarContent:wl,offlineContentRow:bl,offlineTimer:Cl,queuedText:_l,divider:Sl,offlineAvatar:Tl,offlineButton:jl},Il=e=>{const t=Math.floor(e/1e3),s=Math.floor(t/60),o=t%60;return`${s}:${o.toString().padStart(2,"0")}`},kl=()=>{const[e,t]=oe(bs),s=W(ko),[o,a]=oe(Dn),r=W(nr),l=W(sr),i=ne(Pn),{trigger:c}=qe(),d=W(We),[f,u]=T.useState("0:00"),m=el(yr),g=T.useRef(null),C=T.useCallback(p=>{m.current=p,g.current=p},[m]);mn(g,{isEnabled:s>0&&o==="online"}),T.useEffect(()=>{if(o!=="offline"||!r){u("0:00");return}const p=()=>{u(Il(Date.now()-r))};p();const S=setInterval(p,1e3);return()=>clearInterval(S)},[o,r]);const w=()=>{t(e==="sideMenu"?"dashboardTime":"sideMenu")},v=()=>{a("syncing"),c("medium"),setTimeout(()=>{i({type:"SYNC_QUEUED_CHECKS",payload:{syncTime:new Date().toISOString()}}),c("success"),a("connected"),setTimeout(()=>a("online"),1e3)},2e3)},h=o!=="online";return n.jsx("header",{className:Se.header,ref:C,"data-offline":h,"data-status":o,"data-header-style":d.headerStyle,"aria-live":"polite",children:n.jsxs("div",{className:Se.headerContent,children:[n.jsx("div",{className:Se.leftActions,children:n.jsx(_r,{content:"Open navigation",children:n.jsx(me,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:w,"aria-label":"Open navigation menu",className:h?Se.offlineButton:"",children:n.jsx("span",{className:"material-symbols-rounded",children:"menu"})})})}),n.jsxs("div",{className:Se.centerContent,children:[n.jsx(X.div,{className:Se.statusBadgesWrapper,animate:{y:h?-2:0},transition:{duration:.5,ease:[.16,1,.3,1]},children:n.jsx(il,{variant:h?"solid":"default"})}),n.jsx(st,{children:h&&n.jsx(X.div,{className:Se.offlinePillWrapper,initial:{y:12,opacity:0,height:0},animate:{y:-6,opacity:1,height:"auto"},exit:{y:12,opacity:0,height:0},transition:{duration:.5,ease:[.16,1,.3,1]},children:n.jsx("button",{className:Se.offlineBar,onClick:o==="offline"?v:void 0,"aria-label":o==="offline"?"Offline: Click to sync":"Back online","data-status":o,children:n.jsx("div",{className:Se.offlineBarContent,children:n.jsx(st,{mode:"wait",children:o==="syncing"?n.jsxs(X.div,{className:Se.offlineContentRow,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.4,ease:[.16,1,.3,1]}},exit:{opacity:0,transition:{duration:.05}},children:[n.jsx("span",{className:`material-symbols-rounded ${Se.spinning}`,style:{color:"var(--surface-fg-on-solid)",marginRight:"2px"},children:"sync"}),n.jsx("span",{className:Se.offlineTimer,children:"Connecting..."})]},"syncing"):o==="connected"?n.jsxs(X.div,{className:Se.offlineContentRow,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.4,ease:[.16,1,.3,1]}},exit:{opacity:0,transition:{duration:.05}},children:[n.jsx("span",{className:"material-symbols-rounded",style:{color:"var(--surface-fg-on-solid)",marginRight:"2px"},children:"check"}),n.jsx("span",{className:Se.offlineTimer,children:"Connected"})]},"connected"):n.jsxs(X.div,{className:Se.offlineContentRow,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.4,ease:[.16,1,.3,1]}},exit:{opacity:0,transition:{duration:.05}},children:[n.jsxs("span",{className:Se.offlineTimer,children:["Offline: ",f]}),n.jsx("svg",{width:"12",height:"1",viewBox:"0 0 12 1",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:Se.divider,children:n.jsx("rect",{width:"12",height:"1",fill:"currentColor"})}),n.jsxs("span",{className:Se.queuedText,children:[l," Queued"]})]},"offline-content")})})})},"offline-pill")})]}),n.jsx("div",{className:Se.rightActions,children:n.jsx(ul,{className:h?Se.offlineAvatar:""})})]})})},Ss=()=>{const e=ne(Pn),t=ne(Co),s=ne(No),o=W(Dn),a=W(We),{trigger:r}=qe(),{play:l}=_s();return{completeCheck:({checkId:c,statuses:d,notes:f,onSuccess:u})=>{const m=a.scanMode==="nfc"&&a.simpleSubmitEnabled;r("success"),l("success"),e({type:"CHECK_SET_COMPLETING",payload:{checkId:c}}),t(c);const g=m?0:1e3;a.scanMode==="nfc"&&!a.simpleSubmitEnabled&&s("scanning"),setTimeout(()=>{const C={checkId:c,statuses:d,notes:f,completionTime:new Date().toISOString()};e(o==="offline"?{type:"CHECK_SET_QUEUED",payload:C}:{type:"CHECK_COMPLETE",payload:C}),t(null),u?.()},g)}}},Ts=()=>{const[e,t]=oe(No),[s,o]=oe(or),a=W(We),r=W(Ro),l=W(ps),i=W(xt),c=ne(xt),{trigger:d}=qe(),{completeCheck:f}=Ss(),u=T.useRef(null);T.useEffect(()=>()=>{u.current&&clearTimeout(u.current)},[]),T.useEffect(()=>{r.nfcBlocked?e!=="blocked"&&(d("warning"),t("blocked"),u.current&&clearTimeout(u.current)):r.nfcTurnedOff?e!=="hardwareOff"&&(d("warning"),t("hardwareOff"),u.current&&clearTimeout(u.current)):(e==="blocked"||e==="hardwareOff")&&t("idle")},[r.nfcBlocked,r.nfcTurnedOff,e,t,d]);const m=T.useCallback(()=>{e!=="idle"&&(u.current&&(clearTimeout(u.current),u.current=null),d("light"),t("idle"),o(null))},[e,t,o,d]),g=T.useCallback(()=>{if(e!=="scanning")return;if(r.nfcFails){d("warning"),t("readError");return}const x=l.find(b=>b.status!=="complete"&&b.type!=="supplemental");if(x&&a.simpleSubmitEnabled){const b=x.residents.reduce((I,N)=>(I[N.id]="Awake",I),{});f({checkId:x.id,statuses:b,notes:"",onSuccess:()=>{}})}t("success"),o(null),d("success")},[e,r.nfcFails,t,o,d,l,a.simpleSubmitEnabled,f]),C=T.useCallback(()=>{if(!(e!=="idle"&&e!=="readError"&&e!=="timeout"&&e!=="blocked"&&e!=="hardwareOff"&&e!=="success")){if(r.nfcBlocked){d("warning"),t("blocked");return}if(r.nfcTurnedOff){d("warning"),t("hardwareOff");return}d("light"),t("scanning"),o(Date.now()),a.nfcTimeoutEnabled&&(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{t("timeout"),o(null),d("warning")},a.nfcScanTimeout))}},[e,r,a.nfcScanTimeout,a.nfcTimeoutEnabled,t,o,d]),w=T.useCallback(()=>{if(r.nfcBlocked){d("warning"),t("blocked");return}if(r.nfcTurnedOff){d("warning"),t("hardwareOff");return}d("light"),t("scanning"),o(Date.now()),a.nfcTimeoutEnabled&&(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{t("timeout"),o(null),d("warning")},a.nfcScanTimeout))},[r,a.nfcTimeoutEnabled,a.nfcScanTimeout,t,o,d]),v=T.useCallback(()=>{e==="timeout"&&t("idle")},[e,t]),h=T.useCallback(()=>{g()},[g]),p=T.useCallback(()=>{if(e==="formComplete"){w();return}if(e==="success")if(a.simpleSubmitEnabled)w();else{if(i.view==="form"){t("idle");return}const x=l.find(b=>b.status!=="complete"&&b.type!=="supplemental");t("idle"),x&&c({view:"form",type:"scheduled",method:"scan",checkId:x.id,roomName:x.residents[0].location,residents:x.residents,specialClassifications:x.specialClassifications})}},[e,a.simpleSubmitEnabled,t,w,l,c,i.view]),S=T.useCallback(()=>{if(!s||e!=="scanning")return a.nfcScanTimeout;const x=Date.now()-s;return Math.max(0,a.nfcScanTimeout-x)},[e,s,a.nfcScanTimeout]),y=l.find(x=>x.status!=="complete"&&x.type!=="supplemental")?.residents[0]?.location||"Room";return{scanState:e,startScan:C,stopScan:m,resetFromTimeout:v,simulateTagRead:h,finalizeSuccess:p,getRemainingTime:S,targetRoom:y,config:{timeout:a.nfcScanTimeout,timeoutEnabled:a.nfcTimeoutEnabled,showCountdown:a.nfcShowCountdown}}},rs={ringCount:15,conveyorDuration:40,minRadius:8,maxRadius:80,baseOpacity:.3,fadeInPercent:.2,fadeOutPercent:.3,baseStrokeWidth:2,shimmerPeriod:4,shimmerDuration:1,shimmerOpacityBoost:.55,shimmerStrokeBoost:1};function Nl(e){const{minRadius:t,maxRadius:s,baseOpacity:o,fadeInPercent:a,fadeOutPercent:r,baseStrokeWidth:l}=e,i=o*.3;return[{r:t,opacity:0,strokeWidth:l,offset:0},{r:t+(s-t)*a,opacity:o,strokeWidth:l,offset:a},{r:t+(s-t)*(1-r),opacity:i,strokeWidth:l,offset:1-r},{r:s,opacity:0,strokeWidth:l,offset:1}]}function Rl(e){return[{opacity:0,offset:0},{opacity:e,offset:.3},{opacity:0,offset:1}]}function El(e){return[{strokeWidth:0,offset:0},{strokeWidth:e,offset:.3},{strokeWidth:0,offset:1}]}function Al(e,t,s){const o=T.useRef([]),a=T.useRef(null),r=T.useRef(0),l=T.useCallback(()=>{if(!e.current)return;const i=e.current.querySelectorAll("circle.ring"),d=performance.now()-r.current,f=t.conveyorDuration*1e3;i.forEach((u,m)=>{const g=o.current[m];g?.shimmerOpacityAnim&&g.shimmerOpacityAnim.cancel(),g?.shimmerStrokeAnim&&g.shimmerStrokeAnim.cancel();const C=m/t.ringCount,w=(d/f+C)%1,v=w*t.shimmerDuration*1e3,h=1-t.fadeOutPercent;let p=1;w>h&&(p=1-(w-h)/t.fadeOutPercent),w<t.fadeInPercent&&(p=w/t.fadeInPercent);const S=t.shimmerOpacityBoost*p,_=t.shimmerStrokeBoost*p,y=u.animate(Rl(S),{duration:800,easing:"ease-in-out",delay:v,fill:"forwards",composite:"add"}),x=u.animate(El(_),{duration:800,easing:"ease-in-out",delay:v,fill:"forwards",composite:"add"});o.current[m]&&(o.current[m].shimmerOpacityAnim=y,o.current[m].shimmerStrokeAnim=x)}),console.log("[RingAnimation] Shimmer wave triggered at elapsed:",d)},[e,t]);T.useLayoutEffect(()=>{if(!e.current||!s)return;const c=e.current.querySelectorAll("circle.ring");return r.current=Number(document.timeline?.currentTime??performance.now()),console.log("[RingAnimation] Mount time:",r.current),o.current=[],c.forEach((d,f)=>{const u=f/t.ringCount,m=-u*t.conveyorDuration*1e3,g=d.animate(Nl(t),{duration:t.conveyorDuration*1e3,iterations:1/0,easing:"linear"});g.currentTime=-m,o.current.push({conveyorAnim:g,shimmerOpacityAnim:null,shimmerStrokeAnim:null}),console.log(`[RingAnimation] Ring ${f} conveyor started, phase offset: ${u}`)}),a.current=setInterval(()=>{l()},t.shimmerPeriod*1e3),l(),()=>{o.current.forEach(d=>{d.conveyorAnim?.cancel(),d.shimmerOpacityAnim?.cancel(),d.shimmerStrokeAnim?.cancel()}),o.current=[],a.current&&(clearInterval(a.current),a.current=null),console.log("[RingAnimation] Cleanup complete")}},[e,s,t,l])}function Ol(e){const t=[],{ringCount:s,minRadius:o,maxRadius:a}=e;for(let r=0;r<s;r++){const l=r/s;t.push(o+(a-o)*l)}return t}const Ml="_nfcWrapper_3qo7z_5",Bl="_buttonContainer_3qo7z_27",Hl="_startButton_3qo7z_49",Ll="_timeoutButton_3qo7z_51",zl="_visualizerWrapper_3qo7z_137",Dl="_visualizerContainer_3qo7z_179",Pl="_feedbackWrapper_3qo7z_195",$l="_feedbackBackground_3qo7z_217",Wl="_feedbackBackgroundSuccess_3qo7z_231",Fl="_feedbackBackgroundError_3qo7z_239",Vl="_errorToast_3qo7z_249",Gl="_errorToastIcon_3qo7z_275",ql="_errorToastContent_3qo7z_287",Ul="_errorToastPrimary_3qo7z_301",Yl="_errorToastSecondary_3qo7z_315",Kl="_feedbackTextContainer_3qo7z_333",Xl="_primaryText_3qo7z_351",Zl="_secondaryText_3qo7z_367",Ql="_ringsSvg_3qo7z_383",Jl="_scanningLabel_3qo7z_407",ec="_scanningLabelSmall_3qo7z_583",tc="_waveBarsContainer_3qo7z_591",nc="_waveTopContainer_3qo7z_593",sc="_waveBarsSvg_3qo7z_631",oc="_waveTopSvg_3qo7z_705",ac="_nfcIconContainer_3qo7z_777",rc="_nfcIconSvg_3qo7z_799",ic="_nfcIconLabel_3qo7z_817",lc="_nfcIconDot_3qo7z_849",ee={nfcWrapper:Ml,buttonContainer:Bl,startButton:Hl,timeoutButton:Ll,visualizerWrapper:zl,visualizerContainer:Dl,feedbackWrapper:Pl,feedbackBackground:$l,feedbackBackgroundSuccess:Wl,feedbackBackgroundError:Fl,errorToast:Vl,errorToastIcon:Gl,errorToastContent:ql,errorToastPrimary:Ul,errorToastSecondary:Yl,feedbackTextContainer:Kl,primaryText:Xl,secondaryText:Zl,ringsSvg:Ql,scanningLabel:Jl,scanningLabelSmall:ec,waveBarsContainer:tc,waveTopContainer:nc,waveBarsSvg:sc,waveTopSvg:oc,nfcIconContainer:ac,nfcIconSvg:rc,nfcIconLabel:ic,nfcIconDot:lc},Po=({isEnabled:e,params:t})=>{const s=T.useRef(null),o=T.useMemo(()=>({...rs,...t}),[t]),a=T.useMemo(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches,[]),r=Ol(o);Al(s,o,e&&!a);const l="var(--surface-border-info)";return n.jsx("svg",{ref:s,className:ee.ringsSvg,viewBox:"0 0 200 200",children:a?r.map((i,c)=>n.jsx("circle",{cx:"100",cy:"100",r:i,fill:"none",stroke:l,strokeWidth:o.baseStrokeWidth,opacity:o.baseOpacity,vectorEffect:"non-scaling-stroke"},`static-ring-${c}`)):Array.from({length:o.ringCount},(i,c)=>n.jsx("circle",{className:"ring",cx:"100",cy:"100",r:o.minRadius,fill:"none",stroke:l,strokeWidth:o.baseStrokeWidth,opacity:0,vectorEffect:"non-scaling-stroke"},`ring-${c}`))})},$n={pathCount:4,pulseInterval:2e3,pulseDuration:1400,pathStagger:300,restOpacity:.15,peakOpacity:.35};function cc(e,t){return[{opacity:e,offset:0},{opacity:t,offset:.3},{opacity:e,offset:1}]}function js(e,t=$n,s){const o=T.useRef([]),a=T.useRef(null),r=T.useCallback(()=>{if(!e.current)return;e.current.querySelectorAll("path.wave-path").forEach((i,c)=>{const f=c%t.pathCount*t.pathStagger,u=i.animate(cc(t.restOpacity,t.peakOpacity),{duration:t.pulseDuration,easing:"ease-out",delay:f,fill:"forwards"});o.current.push(u),u.onfinish=()=>{const m=o.current.indexOf(u);m>-1&&o.current.splice(m,1)}})},[e,t]);T.useLayoutEffect(()=>{if(!(!e.current||!s||window.matchMedia("(prefers-reduced-motion: reduce)").matches))return r(),a.current=setInterval(()=>{r()},t.pulseInterval),()=>{o.current.forEach(i=>i.cancel()),o.current=[],a.current&&(clearInterval(a.current),a.current=null)}},[e,s,t,r])}const uc=({isEnabled:e,params:t})=>{const s=T.useRef(null),o=T.useMemo(()=>({...$n,...t}),[t]);js(s,o,e);const a=["M22.4216 13.8162c-.6032-.6032-1.5936-.6091-2.0883.0857a9.2659 9.2659 0 0 0-1.0121 8.9185 9.267 9.267 0 0 0 1.0121 1.8278c.4947.6948 1.4851.6889 2.0883.0858.6031-.6032.5822-1.575.1471-2.3086a6.1749 6.1749 0 0 1-.3938-5.5137 6.1749 6.1749 0 0 1 .3938-.787c.4351-.7336.456-1.7054-.1471-2.3085Z","M18.0542 9.2707c-.603-.603-1.5875-.6074-2.1273.0528a15.4426 15.4426 0 0 0-3.487 9.7737 15.4403 15.4403 0 0 0 3.487 9.7736c.5398.6602 1.5243.6558 2.1273.0528.603-.603.5941-1.5755.071-2.249a12.3539 12.3539 0 0 1-2.5972-7.5774 12.3543 12.3543 0 0 1 2.5972-7.5775c.5231-.6735.532-1.646-.071-2.249Z","M13.6661 4.8835c-.5909-.591-1.5535-.5943-2.1017.0366a21.617 21.617 0 0 0 0 28.3579c.5482.6308 1.5108.6275 2.1017.0366.591-.5909.5856-1.5453.0447-2.1823A18.5902 18.5902 0 0 1 9.291 19.099a18.59 18.59 0 0 1 4.4198-12.0332c.5409-.637.5463-1.5914-.0447-2.1823Z","M9.2323.4496c-.603-.603-1.5842-.6058-2.1528.0298a27.7931 27.7931 0 0 0 0 37.0625c.5686.6355 1.5498.6328 2.1528.0298s.599-1.5776.0348-2.2171a24.7051 24.7051 0 0 1 0-32.688c.5642-.6394.5682-1.614-.0348-2.217Z"],r=l=>n.jsx("svg",{className:ee.waveBarsSvg,"data-side":l,viewBox:"0 0 23 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.map((i,c)=>n.jsx("path",{className:"wave-path",d:i,style:{opacity:o.restOpacity}},`${l}-path-${c}`))});return n.jsxs("div",{ref:s,className:ee.waveBarsContainer,children:[r("left"),r("right")]})},dc=({isEnabled:e,params:t})=>{const s=T.useRef(null),o=T.useMemo(()=>({...$n,...t}),[t]);js(s,o,e);const a=["M22.4216 13.8162c-.6032-.6032-1.5936-.6091-2.0883.0857a9.2659 9.2659 0 0 0-1.0121 8.9185 9.267 9.267 0 0 0 1.0121 1.8278c.4947.6948 1.4851.6889 2.0883.0858.6031-.6032.5822-1.575.1471-2.3086a6.1749 6.1749 0 0 1-.3938-5.5137 6.1749 6.1749 0 0 1 .3938-.787c.4351-.7336.456-1.7054-.1471-2.3085Z","M18.0542 9.2707c-.603-.603-1.5875-.6074-2.1273.0528a15.4426 15.4426 0 0 0-3.487 9.7737 15.4403 15.4403 0 0 0 3.487 9.7736c.5398.6602 1.5243.6558 2.1273.0528.603-.603.5941-1.5755.071-2.249a12.3539 12.3539 0 0 1-2.5972-7.5774 12.3543 12.3543 0 0 1 2.5972-7.5775c.5231-.6735.532-1.646-.071-2.249Z","M13.6661 4.8835c-.5909-.591-1.5535-.5943-2.1017.0366a21.617 21.617 0 0 0 0 28.3579c.5482.6308 1.5108.6275 2.1017.0366.591-.5909.5856-1.5453.0447-2.1823A18.5902 18.5902 0 0 1 9.291 19.099a18.59 18.59 0 0 1 4.4198-12.0332c.5409-.637.5463-1.5914-.0447-2.1823Z","M9.2323.4496c-.603-.603-1.5842-.6058-2.1528.0298a27.7931 27.7931 0 0 0 0 37.0625c.5686.6355 1.5498.6328 2.1528.0298s.599-1.5776.0348-2.2171a24.7051 24.7051 0 0 1 0-32.688c.5642-.6394.5682-1.614-.0348-2.217Z"];return n.jsxs("div",{ref:s,className:ee.waveTopContainer,children:[n.jsx("svg",{className:ee.waveTopSvg,viewBox:"0 0 23 39",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.map((r,l)=>n.jsx("path",{className:"wave-path",d:r,style:{opacity:o.restOpacity}},`top-path-${l}`))}),n.jsx(X.div,{className:ee.scanningLabelSmall,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},children:"Hold near Tag"})]})},mc=({isEnabled:e})=>{const t=T.useRef(null),s=T.useRef([]),o=T.useRef(null),a=T.useCallback(()=>{if(!t.current)return;const l=t.current.querySelector(".pulse-circle"),i=t.current.querySelectorAll(".pulse-inner"),c=t.current.querySelectorAll(".pulse-outer"),d=.67,f=1,u=800;if(l){const m=l.animate([{opacity:d},{opacity:f},{opacity:d}],{duration:u,easing:"ease-in-out",fill:"forwards"});s.current.push(m)}i.forEach(m=>{const g=m.animate([{opacity:d},{opacity:f},{opacity:d}],{duration:u,delay:u*.6,easing:"ease-in-out",fill:"forwards"});s.current.push(g)}),c.forEach(m=>{const g=m.animate([{opacity:d},{opacity:f},{opacity:d}],{duration:u,delay:u*1.2,easing:"ease-in-out",fill:"forwards"});s.current.push(g)})},[]);if(T.useLayoutEffect(()=>{if(!e||!t.current||window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;a();const l=2400;return o.current=setInterval(a,l),()=>{s.current.forEach(i=>i.cancel()),s.current=[],o.current&&(clearInterval(o.current),o.current=null)}},[e,a]),!e)return null;const r=.67;return n.jsxs("div",{ref:t,className:ee.nfcIconContainer,children:[n.jsxs("svg",{className:ee.nfcIconSvg,xmlns:"http://www.w3.org/2000/svg",width:"27",height:"18",viewBox:"0 0 27 18",fill:"none",children:[n.jsx("path",{className:"pulse-outer",fill:"currentColor",style:{opacity:r},d:"M2.433 8.9334c0 1.2888.2 2.5111.6 3.6666.4222 1.1333 1.0111 2.1556 1.7667 3.0667.2222.2889.3333.6.3333.9333 0 .3333-.1222.6222-.3667.8667-.2444.2444-.5444.3666-.9.3666-.3555-.0222-.6444-.1777-.8666-.4666-.9556-1.1556-1.7-2.4445-2.2334-3.8667-.511-1.4222-.7666-2.9444-.7666-4.5666 0-1.6223.2555-3.1445.7666-4.5667C1.2997 2.9222 2.0441 1.6334 2.9997.5c.2222-.2889.511-.4333.8666-.4333.3556-.0222.6556.0889.9.3333.2445.2445.3667.5333.3667.8667 0 .3333-.1111.6444-.3333.9333-.7556.9333-1.3445 1.9667-1.7667 3.1-.4 1.1334-.6 2.3445-.6 3.6334Z"}),n.jsx("path",{className:"pulse-inner",fill:"currentColor",style:{opacity:r},d:"M7.7663 8.9334c0 .5555.0778 1.0888.2334 1.5999.1555.4889.3777.9445.6666 1.3667.1778.2889.2556.6111.2334.9667 0 .3333-.1222.6222-.3667.8666-.2444.2445-.5333.3667-.8667.3667-.3333-.0222-.6-.1667-.8-.4333-.4889-.6667-.8666-1.4-1.1333-2.2a8.1612 8.1612 0 0 1-.4-2.5333c0-.889.1333-1.7334.4-2.5334.2667-.8.6444-1.5333 1.1333-2.2.2-.2667.4667-.4.8-.4.3556-.0222.6556.0889.9.3334.2445.2444.3667.5444.3667.9.0222.3333-.0667.6444-.2667.9333-.2889.4222-.511.8889-.6666 1.4-.1556.4889-.2334 1.011-.2334 1.5667Z"}),n.jsx("path",{className:"pulse-circle",fill:"currentColor",style:{opacity:r},d:"M13.333 11.6c-.7333 0-1.3667-.2555-1.9-.7667-.5111-.5333-.7667-1.1666-.7667-1.9 0-.7333.2556-1.3555.7667-1.8666.5333-.5333 1.1667-.8 1.9-.8.7333 0 1.3556.2667 1.8667.8.5333.511.8 1.1333.8 1.8667 0 .7333-.2667 1.3666-.8 1.8999-.5111.5112-1.1334.7667-1.8667.7667Z"}),n.jsx("path",{className:"pulse-inner",fill:"currentColor",style:{opacity:r},d:"M18.8997 8.9334c0-.5556-.0778-1.0778-.2334-1.5667-.1555-.5111-.3777-.9778-.6666-1.4-.1778-.289-.2667-.6-.2667-.9333.0222-.3556.1556-.6556.4-.9.2445-.2445.5333-.3556.8667-.3334.3333 0 .6.1334.8.4.4889.6667.8666 1.4 1.1333 2.2.2667.8.4 1.6445.4 2.5334a8.1603 8.1603 0 0 1-.4 2.5333c-.2667.8-.6444 1.5222-1.1333 2.1666-.2.2889-.4778.4334-.8334.4334-.3333 0-.6222-.1222-.8666-.3667-.2445-.2444-.3778-.5333-.4-.8667 0-.3333.1-.6444.3-.9333a5.196 5.196 0 0 0 .6666-1.3667c.1556-.5111.2334-1.0444.2334-1.6Z"}),n.jsx("path",{className:"pulse-outer",fill:"currentColor",style:{opacity:r},d:"M24.233 8.9334c0-1.289-.2111-2.5-.6333-3.6334-.4-1.1555-.9778-2.1889-1.7334-3.1-.2222-.2889-.3444-.6-.3666-.9333 0-.3556.1222-.6556.3666-.9.2445-.2445.5445-.3556.9-.3334.3778.0223.6778.1778.9.4667.9556 1.1334 1.6889 2.4222 2.2 3.8667.5334 1.4222.8 2.9444.8 4.5667 0 1.6222-.2666 3.1444-.8 4.5666-.5111 1.4222-1.2444 2.7111-2.2 3.8667-.2222.2889-.5111.4444-.8666.4666-.3556 0-.6556-.1222-.9-.3666-.2445-.2445-.3667-.5334-.3667-.8667 0-.3333.1111-.6444.3333-.9333a10.3843 10.3843 0 0 0 1.7334-3.1c.4222-1.1334.6333-2.3445.6333-3.6334Z"})]}),n.jsx(X.span,{className:ee.nfcIconLabel,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},children:"Hold near Tag"})]})},fc=({isEnabled:e,params:t})=>{const s=T.useRef(null),o=T.useMemo(()=>({...$n,pathCount:3,restOpacity:.5,peakOpacity:1,...t}),[t]);return js(s,o,e),e?n.jsxs("div",{ref:s,className:ee.nfcIconContainer,children:[n.jsxs("svg",{className:ee.nfcIconSvg,xmlns:"http://www.w3.org/2000/svg",width:"28",height:"17",viewBox:"-1.5 0 28 17",fill:"none",children:[n.jsxs("g",{transform:"translate(-1.5, 0)",children:[n.jsx("path",{className:"wave-path",fill:"currentColor",style:{opacity:o.restOpacity},d:"M9.8837 5.4232c-.369-.349-.9749-.3524-1.2775.0497a5.283 5.283 0 0 0-.6191 1.0575 5.1099 5.1099 0 0 0-.4314 2.0515 5.11 5.11 0 0 0 .4314 2.0514c.164.3744.3718.729.6191 1.0576.3026.402.9085.3986 1.2775.0496.3689-.349.3562-.9113.09-1.3358a3.498 3.498 0 0 1-.241-.4553 3.4063 3.4063 0 0 1-.2875-1.3675c0-.4693.0977-.934.2876-1.3675a3.5009 3.5009 0 0 1 .2409-.4554c.2662-.4245.2789-.9868-.09-1.3358Z"}),n.jsx("path",{className:"wave-path",fill:"currentColor",style:{opacity:o.restOpacity},d:"M7.212 2.7931c-.3689-.3489-.9711-.3514-1.3013.0306-.5833.6747-1.0602 1.428-1.4141 2.2362-.4747 1.084-.719 2.2458-.719 3.419 0 1.1733.2443 2.3351.719 3.4191.354.8082.8308 1.5614 1.414 2.2362.3303.382.9325.3794 1.3014.0305.3689-.3489.3635-.9116.0434-1.3013a7.0672 7.0672 0 0 1-1.0135-1.6492c-.3798-.8672-.5752-1.7966-.5752-2.7353 0-.9386.1954-1.868.5752-2.7352a7.0666 7.0666 0 0 1 1.0135-1.6493c.32-.3897.3255-.9524-.0434-1.3013Z"}),n.jsx("path",{className:"wave-path",fill:"currentColor",style:{opacity:o.restOpacity},d:"M4.5277.2546c-.3615-.342-.9503-.3439-1.2857.0211C2.3083 1.2921 1.553 2.446 1.0066 3.6934.342 5.2109 0 6.8374 0 8.48c0 1.6426.342 3.2691 1.0066 4.7867.5463 1.2475 1.3017 2.4013 2.2354 3.4176.3354.365.9242.3631 1.2857.0212.3615-.342.3582-.8942.0273-1.2628-.7641-.8512-1.3848-1.8112-1.838-2.8462-.5715-1.3051-.8657-2.7039-.8657-4.1165 0-1.4126.2942-2.8114.8657-4.1165.4532-1.035 1.0739-1.995 1.838-2.8462.331-.3686.3342-.9208-.0273-1.2627Z"})]}),n.jsx("circle",{cx:"12.168",cy:"8.429",r:"2",fill:"currentColor",className:ee.nfcIconDot}),n.jsxs("g",{transform:"translate(1.5, 0)",children:[n.jsx("path",{className:"wave-path",fill:"currentColor",style:{opacity:o.restOpacity},d:"M14.4513 5.4232c.3689-.349.9748-.3524 1.2774.0497.2473.3285.4552.6832.6192 1.0575a5.11 5.11 0 0 1 .4314 2.0515c0 .704-.1466 1.401-.4314 2.0514a5.2863 5.2863 0 0 1-.6192 1.0576c-.3026.402-.9085.3986-1.2774.0496-.3689-.349-.3562-.9113-.09-1.3358.0914-.1458.172-.298.2409-.4553a3.4055 3.4055 0 0 0 .2876-1.3675c0-.4693-.0977-.934-.2876-1.3675a3.5055 3.5055 0 0 0-.2409-.4554c-.2662-.4245-.2789-.9868.09-1.3358Z"}),n.jsx("path",{className:"wave-path",fill:"currentColor",style:{opacity:o.restOpacity},d:"M17.1229 2.7931c.3689-.3489.9712-.3514 1.3014.0306.5833.6747 1.0601 1.428 1.4141 2.2362.4747 1.084.719 2.2458.719 3.419 0 1.1733-.2443 2.3351-.719 3.4191-.354.8082-.8308 1.5614-1.4141 2.2362-.3302.382-.9325.3794-1.3014.0305-.3688-.3489-.3634-.9116-.0434-1.3013a7.0677 7.0677 0 0 0 1.0136-1.6492c.3797-.8672.5752-1.7966.5752-2.7353 0-.9386-.1955-1.868-.5752-2.7352a7.0668 7.0668 0 0 0-1.0136-1.6493c-.32-.3897-.3254-.9524.0434-1.3013Z"}),n.jsx("path",{className:"wave-path",fill:"currentColor",style:{opacity:o.restOpacity},d:"M19.8073.2546c.3615-.342.9503-.3439 1.2856.0211.9337 1.0164 1.6892 2.1702 2.2355 3.4177.6645 1.5175 1.0066 3.144 1.0066 4.7866 0 1.6426-.3421 3.2691-1.0066 4.7867-.5463 1.2475-1.3018 2.4013-2.2355 3.4176-.3353.365-.9241.3631-1.2856.0212-.3615-.342-.3583-.8942-.0274-1.2628.7642-.8512 1.3848-1.8112 1.8381-2.8462.5715-1.3051.8656-2.7039.8656-4.1165 0-1.4126-.2941-2.8114-.8656-4.1165-.4533-1.035-1.0739-1.995-1.8381-2.8462-.3309-.3686-.3341-.9208.0274-1.2627Z"})]})]}),n.jsx(X.span,{className:ee.nfcIconLabel,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},children:"Hold near Tag"})]}):null},hc=({onClick:e})=>n.jsxs("button",{className:ee.startButton,onClick:e,children:[n.jsx("span",{className:"material-symbols-rounded",children:"sensors"}),n.jsx("span",{children:"Start Scan"})]}),pc=({type:e})=>{const t={success:"var(--surface-fg-success-primary)",alert:"var(--surface-fg-alert-primary)",warning:"var(--surface-fg-warning-primary)",info:"var(--surface-fg-info-primary)"}[e],s={success:"M 97 100 L 99 102 L 103 98",alert:"M 100 96.9 L 100 100.1 M 100 103 L 100 103.1",warning:"M 100 96.9 L 100 100.1 M 100 103 L 100 103.1",info:"M 100 104 L 100 99 M 100 96 L 100 96.1"}[e];return n.jsx("svg",{className:ee.ringsSvg,viewBox:"0 0 200 200",children:n.jsxs(X.g,{children:[n.jsx(X.circle,{cx:"100",cy:"100",initial:{r:20,stroke:"var(--surface-border-primary)",opacity:.5},animate:{r:5.5,stroke:t,opacity:1,strokeWidth:3},transition:{duration:.4,ease:[.16,1,.3,1]},fill:"none",style:{vectorEffect:"non-scaling-stroke"}}),n.jsx(X.path,{d:s,fill:"none",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:.4,delay:.1,ease:"easeOut"}})]})})},Ys=({primary:e,secondary:t})=>n.jsxs("div",{className:ee.feedbackTextContainer,children:[n.jsx(X.div,{className:ee.primaryText,initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.25,delay:.7},children:e}),t&&n.jsx(X.div,{className:ee.secondaryText,initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{duration:.25,delay:.7},children:t})]}),gc=()=>{const{scanState:e,finalizeSuccess:t,targetRoom:s,startScan:o}=Ts(),a=W(Ft),r=W(We),l=T.useRef(s);T.useEffect(()=>{e==="success"&&(l.current=s)},[e,s]);const i=!r.simpleSubmitEnabled,c=T.useRef(t);T.useEffect(()=>{c.current=t},[t]),T.useEffect(()=>{if(e==="success"){const y=setTimeout(()=>c.current(),i?800:2e3);return()=>clearTimeout(y)}if(e==="formComplete"){const _=setTimeout(()=>c.current(),1700);return()=>clearTimeout(_)}},[e]);const d=e==="scanning",u=W(wr)?a.feat_scan_animation:"E",m=u==="B"&&d,g=u==="C"&&d,C=u==="D"&&d,w=u==="E"&&d,v=u==="F"&&d,h=(_,y,x="success")=>{const b=x==="success"?ee.feedbackBackgroundSuccess:ee.feedbackBackgroundError;return n.jsxs(X.div,{className:ee.feedbackWrapper,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.98,y:-4,transition:{duration:i?0:.2,ease:"easeIn"}},children:[n.jsx("div",{className:`${ee.feedbackBackground} ${b}`}),n.jsx(X.div,{animate:i&&!_?{opacity:1}:{opacity:[1,1,0]},transition:i&&!_?{}:{times:[0,.6,1],duration:1,ease:"easeInOut"},children:n.jsx(pc,{type:x})}),n.jsx(Ys,{primary:_,secondary:y})]},`feedback-${x}`)},p=()=>n.jsxs(X.div,{className:ee.feedbackWrapper,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,scale:.98,y:-4,transition:{duration:.2,ease:"easeIn"}},children:[n.jsx("div",{className:`${ee.feedbackBackground} ${ee.feedbackBackgroundSuccess}`}),n.jsx(Ys,{primary:`${l.current} Complete`})]},"formComplete"),S=(_,y,x)=>n.jsxs(X.div,{className:ee.errorToast,initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-4,transition:{duration:.2,ease:"easeIn"}},children:[n.jsx("span",{className:`material-symbols-rounded ${ee.errorToastIcon}`,children:_}),n.jsxs("div",{className:ee.errorToastContent,children:[n.jsx("span",{className:ee.errorToastPrimary,children:y}),n.jsx("span",{className:ee.errorToastSecondary,children:x})]})]},`errorToast-${_}`);return n.jsxs("div",{className:ee.visualizerContainer,onClick:e==="readError"?o:void 0,style:{cursor:e==="readError"?"pointer":"default"},children:[m&&n.jsx(Po,{isEnabled:!0}),g&&n.jsx(uc,{isEnabled:!0}),C&&n.jsx(dc,{isEnabled:!0}),w&&n.jsx(mc,{isEnabled:!0}),v&&n.jsx(fc,{isEnabled:!0}),n.jsxs(st,{mode:"wait",children:[e==="scanning"&&!C&&!w&&!v&&n.jsx(X.div,{className:ee.scanningLabel,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.15},children:"Hold near Tag"},"scanning"),e==="success"&&h(i?"":`${l.current} Complete`,void 0,"success"),e==="formComplete"&&p(),e==="readError"&&h("Tag not read","Tap to retry","alert"),e==="blocked"&&S("block","NFC Blocked","Allow in app settings"),e==="hardwareOff"&&S("sensors_off","NFC is turned off","Open NFC Settings to turn on")]})]})},vc=()=>{const{scanState:e,startScan:t,stopScan:s,simulateTagRead:o}=Ts();return n.jsx("div",{className:ee.nfcWrapper,children:n.jsx(br,{transition:{type:"tween",ease:[.16,1,.3,1],duration:.4},children:n.jsxs(st,{mode:"wait",children:[e==="idle"&&n.jsx(X.div,{className:ee.buttonContainer,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:n.jsx(hc,{onClick:t})},"idle"),e!=="idle"&&e!=="timeout"&&n.jsx(X.div,{className:ee.visualizerWrapper,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e==="scanning"?o:void 0,style:{cursor:e==="scanning"?"pointer":"default",pointerEvents:"auto"},children:n.jsx(gc,{})},"visualizer"),e==="timeout"&&n.jsx(X.div,{className:ee.buttonContainer,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:n.jsxs("button",{className:ee.timeoutButton,onClick:()=>{s(),t()},children:[n.jsx("span",{className:"material-symbols-rounded",children:"timer_off"}),n.jsx("span",{children:"Timed out â€” Tap to retry"})]})},"timeout")]})})})},xc="_footer_1wnky_5",yc="_scanButton_1wnky_337",Ks={footer:xc,scanButton:yc},wc=()=>{const e=ne(xt),t=W(We),s=W(ko),o=T.useRef(null),{trigger:a}=qe();mn(o,{isEnabled:s>0}),T.useLayoutEffect(()=>{const l=()=>{if(o.current){const c=o.current.offsetHeight;document.documentElement.style.setProperty("--footer-height",`${c}px`)}};l();const i=new ResizeObserver(l);return o.current&&i.observe(o.current),()=>{i.disconnect(),document.documentElement.style.removeProperty("--footer-height")}},[t.scanMode]);const r=()=>{a("heavy"),e({view:"scanning",isManualSelectionOpen:!1})};return n.jsx("footer",{className:Ks.footer,ref:o,"data-footer-style":t.headerStyle,children:t.scanMode==="nfc"?n.jsx(vc,{}):n.jsxs(me,{variant:"primary",className:Ks.scanButton,onClick:r,children:[n.jsx("span",{className:"material-symbols-rounded",children:"qr_code_scanner"}),n.jsx("span",{children:"Scan"})]})})},bc="_fab_1h0bl_5",Cc={fab:bc},_c=()=>{const e=W(ar),[t,s]=oe(Dn),o=ne(Pn),{trigger:a}=qe(),r=()=>{a("selection"),t==="online"?s("offline"):(o({type:"SYNC_QUEUED_CHECKS",payload:{syncTime:new Date().toISOString()}}),a("success"),s("connected"),setTimeout(()=>s("online"),1e3))};return n.jsx(st,{children:e&&n.jsx(X.button,{className:Cc.fab,"data-status":t,onClick:r,initial:{scale:0,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:0,opacity:0,y:20},transition:{type:"spring",stiffness:400,damping:25},"aria-label":`Toggle connectivity: currently ${t}`,children:n.jsx("span",{className:"material-symbols-rounded",children:t==="online"?"cloud":"cloud_off"})})})},Sc="_scanView_ax5b5_65",Tc="_header_ax5b5_87",jc="_preScanAlert_ax5b5_127",Ic="_alertSeparator_ax5b5_197",kc="_cameraContainer_ax5b5_211",Nc="_viewfinder_ax5b5_233",Rc="_statusOverlay_ax5b5_291",Ec="_processingState_ax5b5_325",Ac="_spinner_ax5b5_333",Oc="_successState_ax5b5_345",Mc="_failState_ax5b5_353",Bc="_helperText_ax5b5_363",Hc="_footer_ax5b5_373",Lc="_devControlsContainer_ax5b5_421",zc="_devControlsHeader_ax5b5_441",Dc="_devControls_ax5b5_421",Te={scanView:Sc,header:Tc,preScanAlert:jc,alertSeparator:Ic,cameraContainer:kc,viewfinder:Nc,statusOverlay:Rc,processingState:Ec,spinner:Ac,successState:Oc,failState:Mc,helperText:Bc,footer:Hc,devControlsContainer:Lc,devControlsHeader:zc,devControls:Dc},Pc=()=>{const[e,t]=oe(xt),s=W(Eo),o=W(We),a=W(ps),r=W(Ro),l=ne(ys),{trigger:i}=qe(),{play:c}=_s(),{completeCheck:d}=Ss(),[f,u]=T.useState("scanning"),[m,g]=T.useState(null),C=T.useRef(null),w=T.useRef(0);T.useEffect(()=>{if(e.view==="scanning"&&u("scanning"),e.view==="scanning"&&e.targetCheckId){const I=s.find(N=>N.id===e.targetCheckId)?.specialClassifications?.[0];if(I){const N=Ao.find(O=>O.id===I.residentId);N&&g({residentName:N.name,classificationType:I.type})}}else g(null)},[e,s]);const v=T.useCallback(()=>{i("error"),c("error"),u("fail"),setTimeout(()=>{u("scanning")},1500)},[i,c]),h=b=>{f==="scanning"&&(C.current===b&&Date.now()-w.current<2e3||(C.current=b,w.current=Date.now(),u("processing"),setTimeout(()=>{const I=b.startsWith("room:")?b.split(":")[1]:b,N=s.find(O=>O.id===I&&O.status!=="complete");if(N){if(i("success"),c("success"),u("success"),o.simpleSubmitEnabled){const O=N.residents.reduce((E,P)=>(E[P.id]="Awake",E),{});t({view:"none"}),d({checkId:N.id,statuses:O,notes:"",onSuccess:()=>{l({message:"Check completed",icon:"check_circle",variant:"success"})}});return}setTimeout(()=>{t({view:"form",type:"scheduled",method:"scan",checkId:N.id,roomName:N.residents[0].location,residents:N.residents,specialClassifications:N.specialClassifications})},800)}else v()},300)))},p=b=>{b instanceof Error?console.log("QR Scanner Error:",b.message):console.log("An unknown QR scanner error occurred:",b)},S=()=>t({view:"none"}),_=()=>{if(e.view==="scanning"&&e.targetCheckId){h(e.targetCheckId);return}const b=a.find(I=>I.status!=="complete"&&I.type!=="supplemental");if(b)h(b.id);else{const I=s.find(N=>N.status!=="complete");I?h(I.id):l({message:"No incomplete checks found to simulate.",icon:"info",variant:"neutral"})}},y=()=>h("invalid-qr-code-id"),x=()=>{if(r.cameraFails)return n.jsxs("div",{className:`${Te.statusOverlay} ${Te.failState}`,children:[n.jsx("span",{className:"material-symbols-rounded",children:"no_photography"}),"Camera Error"]});switch(f){case"scanning":return n.jsx(Cr,{onScan:b=>{b&&b.length>0&&h(b[0].rawValue)},onError:p,constraints:{facingMode:"environment"},scanDelay:500});case"processing":return n.jsxs("div",{className:`${Te.statusOverlay} ${Te.processingState}`,children:[n.jsx("span",{className:`material-symbols-rounded ${Te.spinner}`,children:"progress_activity"}),"Processing..."]});case"success":return n.jsxs("div",{className:`${Te.statusOverlay} ${Te.successState}`,children:[n.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),"Success!"]});case"fail":return n.jsxs("div",{className:`${Te.statusOverlay} ${Te.failState}`,children:[n.jsx("span",{className:"material-symbols-rounded",children:"error"}),"Scan Failed"]});default:return null}};return n.jsxs(X.div,{className:Te.scanView,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsxs("header",{className:Te.header,children:[n.jsx("h3",{children:"Scan Room QR Code"}),n.jsx(me,{variant:"on-solid",size:"lg",iconOnly:!0,onClick:S,"aria-label":"Close scanner",children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),n.jsx(st,{children:m&&n.jsxs(X.div,{className:Te.preScanAlert,initial:{y:"-100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"-100%",opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.35},children:[n.jsx("span",{className:"material-symbols-rounded",children:"warning"}),n.jsxs("p",{children:[n.jsx("span",{children:m.residentName}),n.jsx("span",{className:Te.alertSeparator,children:"|"}),n.jsx("span",{children:m.classificationType})]})]})}),n.jsxs("main",{className:Te.cameraContainer,children:[n.jsx("div",{className:Te.viewfinder,"data-scan-state":f,children:x()}),n.jsx("p",{className:Te.helperText,children:r.cameraFails?"Camera hardware is not responding.":"Point your camera at the room's QR code"})]}),n.jsx("footer",{className:Te.footer,children:n.jsxs("div",{className:Te.devControlsContainer,children:[n.jsx("p",{className:Te.devControlsHeader,children:"Dev controls"}),n.jsxs("div",{className:Te.devControls,children:[n.jsxs(me,{variant:"on-solid",size:"s",onClick:_,disabled:r.cameraFails,children:[n.jsx("span",{className:"material-symbols-rounded",children:"check_circle"}),"Simulate success"]}),n.jsxs(me,{variant:"on-solid",size:"s",onClick:y,disabled:r.cameraFails,children:[n.jsx("span",{className:"material-symbols-rounded",children:"error"}),"Simulate fail"]})]})]})})]})},$c=(e,t)=>{T.useLayoutEffect(()=>{if(e){e.style.height="0px";const s=e.scrollHeight;e.style.height=s+"px"}},[e,t])},Wc="_container_tigow_5",Fc="_header_tigow_27",Vc="_residentName_tigow_39",Gc="_warningIcon_tigow_59",qc="_controlSection_tigow_69",Uc="_classificationDetails_tigow_99",Yc="_notesInput_tigow_125",Ht={container:Wc,header:Fc,residentName:Vc,warningIcon:Gc,controlSection:qc,classificationDetails:Uc,notesInput:Yc},Kc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"}],Xc=[{value:"Refused",label:"Refused"},{value:"Sleeping",label:"Sleeping"},{value:"Awake",label:"Awake"}],Zc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"}],Qc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"}],Jc=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"}],eu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"},{value:"Chilling",label:"Chilling"}],tu=({resident:e,status:t,notes:s,onStatusChange:o,onNotesChange:a,classification:r})=>{const l=!!r,i=T.useRef(null),{residentStatusSet:c,markMultipleLayout:d}=W(We);$c(i.current,s);let f;const u=d;switch(c){case"set-2":f=Kc;break;case"set-4":f=Zc;break;case"set-5":f=Qc;break;case"set-6":f=Jc;break;case"set-7":f=eu;break;case"set-3":default:f=Xc;break}return n.jsxs("div",{className:Ht.container,"data-classified":l,children:[n.jsx("div",{className:Ht.header,children:n.jsxs("h4",{className:Ht.residentName,children:[l&&n.jsx("span",{className:`material-symbols-rounded ${Ht.warningIcon}`,"aria-label":"Special Classification",children:"warning"}),e.name]})}),l&&n.jsx("div",{className:Ht.classificationDetails,children:n.jsxs("p",{children:[n.jsxs("strong",{children:[r.type,":"]})," ",r.details]})}),n.jsx("div",{className:Ht.controlSection,children:n.jsx(lt,{id:`status-group-${e.id}`,options:f,value:t,onValueChange:m=>o(e.id,m),layout:u})}),n.jsx("textarea",{ref:i,id:`notes-${e.id}`,value:s,onChange:m=>a(e.id,m.target.value),placeholder:"Enter optional notes","aria-label":`Notes for ${e.name}`,rows:1,className:Ht.notesInput})]})},nu="_overlay_2b95s_5",su="_content_2b95s_19",ou="_handleContainer_2b95s_51",au="_handle_2b95s_51",ru="_header_2b95s_81",iu="_headerTitle_2b95s_93",lu="_listContainer_2b95s_107",cu="_columnList_2b95s_125",uu="_rowContainer_2b95s_137",du="_gridButton_2b95s_153",mu="_gridContainer_2b95s_163",fu="_deadCell_2b95s_233",et={overlay:nu,content:su,handleContainer:ou,handle:au,header:ru,headerTitle:iu,listContainer:lu,columnList:cu,rowContainer:uu,gridButton:du,gridContainer:mu,deadCell:fu},hu=({isOpen:e,onClose:t,onSelect:s,options:o,layout:a})=>{const{trigger:r}=qe(),l=T.useRef(null),i=T.useRef(null),c=m=>{r("selection"),s(m),t()},d=()=>{t()};T.useEffect(()=>{if(e){const m=setTimeout(()=>{i.current?.focus()},50),g=C=>{C.key==="Escape"&&(C.preventDefault(),t())};return document.addEventListener("keydown",g),()=>{clearTimeout(m),document.removeEventListener("keydown",g)}}},[e,t]);const f=a==="grid"&&o.length%2!==0,u=()=>{switch(a){case"row":return et.rowContainer;case"column":return et.columnList;case"grid":return et.gridContainer}};return n.jsx(st,{children:e&&n.jsxs(n.Fragment,{children:[n.jsx(X.div,{className:et.overlay,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:d,"aria-hidden":"true"}),n.jsxs(X.div,{ref:l,className:et.content,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},role:"dialog","aria-modal":"true","aria-labelledby":"status-sheet-title",children:[n.jsx("div",{className:et.handleContainer,children:n.jsx("div",{className:et.handle})}),n.jsx("div",{className:et.header,children:n.jsx("h3",{id:"status-sheet-title",className:et.headerTitle,children:"Select Status"})}),n.jsx("div",{className:et.listContainer,children:a==="column"?n.jsx("div",{className:u(),children:o.map(m=>n.jsx(bt,{label:m.label,onClick:()=>c(m.value)},m.value))}):n.jsxs("div",{className:u(),children:[o.map((m,g)=>n.jsx("button",{ref:g===0?i:void 0,className:et.gridButton,onClick:()=>c(m.value),children:m.label},m.value)),f&&n.jsx("div",{className:et.deadCell})]})})]})]})})},pu="_checkFormView_tpp19_5",gu="_header_tpp19_27",vu="_headerTitle_tpp19_291",xu="_formContent_tpp19_319",yu="_roomHeader_tpp19_341",wu="_badgeWrapper_tpp19_371",bu="_statusLabel_tpp19_389",Cu="_warningBlock_tpp19_455",_u="_sectionHeader_tpp19_509",Su="_checkTypeSection_tpp19_527",Tu="_markMultipleContainer_tpp19_547",ju="_residentListContainer_tpp19_561",Iu="_footer_tpp19_691",Oe={checkFormView:pu,header:gu,headerTitle:vu,formContent:xu,roomHeader:yu,badgeWrapper:wu,statusLabel:bu,warningBlock:Cu,sectionHeader:_u,checkTypeSection:Su,markMultipleContainer:Tu,residentListContainer:ju,footer:Iu},ku=[{value:"Locked down",label:"Locked down"},{value:"Random",label:"Random"}],Nu=[{value:"Noise Complaint",label:"Noise Complaint"},{value:"Resident Request",label:"Resident Request"},{value:"Medical Alert",label:"Medical Alert"},{value:"Security Concern",label:"Security Concern"},{value:"Other",label:"Other"}],Ru=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"}],Eu=[{value:"Refused",label:"Refused"},{value:"Sleeping",label:"Sleeping"},{value:"Awake",label:"Awake"}],Au=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"}],Ou=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"}],Mu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"}],Bu=[{value:"Awake",label:"Awake"},{value:"Sleeping",label:"Sleeping"},{value:"Refused",label:"Refused"},{value:"Out",label:"Out"},{value:"Eating",label:"Eating"},{value:"Working",label:"Working"},{value:"Chilling",label:"Chilling"}],Hu=({checkData:e})=>{const t=ne(xt),s=ne(Pn),o=ne(ys),a=W(rr),r=ne(ir),l=ne(lr),i=W(Eo),c=W(Dn),{isCheckTypeEnabled:d,markMultipleEnabled:f,residentStatusSet:u,markMultipleLayout:m}=W(We),{trigger:g}=qe(),{completeCheck:C}=Ss(),{startScan:w}=Ts(),[v,h]=T.useState(!1);let p;switch(u){case"set-2":p=Ru;break;case"set-4":p=Au;break;case"set-5":p=Ou;break;case"set-6":p=Mu;break;case"set-7":p=Bu;break;case"set-3":default:p=Eu;break}const S=T.useRef(null),_=T.useRef(null),y=T.useRef(null),[x,b]=T.useState(!1);mn(y,{isEnabled:!0}),Ir({containerRef:_,footerOffsetVar:"--form-footer-height"});const I=e.type==="scheduled"?a[e.checkId]:void 0,[N,O]=T.useState(()=>I?.statuses||e.residents.reduce((k,L)=>({...k,[L.id]:""}),{})),[E,P]=T.useState(()=>I?.notes||e.residents.reduce((k,L)=>({...k,[L.id]:""}),{})),[M,B]=T.useState(I?.checkType||""),[$,F]=T.useState(""),K=e.type==="scheduled"&&e.method==="manual",te=e.type==="supplemental",ie=T.useMemo(()=>te?"supplemental":e.type==="scheduled"&&i.find(L=>L.id===e.checkId)?.status||"pending",[i,e,te]),le=T.useRef(!1);T.useEffect(()=>()=>{!le.current&&e.type==="scheduled"&&r({checkId:e.checkId,draft:{statuses:N,notes:E,checkType:M}})},[e,N,E,M,r]),T.useLayoutEffect(()=>{const k=S.current;if(k){const L=k.offsetHeight;document.documentElement.style.setProperty("--form-footer-height",`${L}px`)}return()=>{document.documentElement.style.removeProperty("--form-footer-height")}},[]),T.useLayoutEffect(()=>{const k=_.current;if(!k)return;const L=()=>{const{scrollTop:he,scrollHeight:de,clientHeight:Ye}=k,V=de-he<=Ye+1,ot=de>Ye;b(ot&&!V)},Q=new ResizeObserver(L);return Q.observe(k),k.addEventListener("scroll",L,{passive:!0}),L(),()=>{Q.disconnect(),k.removeEventListener("scroll",L)}},[]);const ke=()=>{e.type==="scheduled"&&e.method==="scan"&&w(),t({view:"none"})},Ze=(k,L)=>{O(Q=>({...Q,[k]:L}))},_e=(k,L)=>{P(Q=>({...Q,[k]:L}))},Qe=k=>{if(!k)return;const L={...N};e.residents.forEach(Q=>{L[Q.id]=k}),O(L)},Ue=T.useMemo(()=>!(!e.residents.every(L=>N[L.id])||d&&!M||te&&!$),[N,e.residents,d,M,te,$]),Be=()=>{if(!Ue)return;le.current=!0,e.type==="scheduled"&&l(e.checkId),g("success");const k=Object.values(E).filter(L=>L.trim()!=="").join(`
---
`);e.type==="scheduled"?(C({checkId:e.checkId,statuses:N,notes:k}),t({view:"none"})):e.type==="supplemental"&&(s({type:"CHECK_SUPPLEMENTAL_ADD",payload:{roomId:e.roomId,statuses:N,notes:k,incidentType:$}}),t({view:"none"}),c!=="offline"&&o({message:`Supplemental check for ${e.roomName} saved.`,icon:"task_alt",variant:"success"})),e.type==="scheduled"&&e.method==="scan"&&w()};return n.jsxs(X.div,{className:Oe.checkFormView,style:{height:"var(--visual-viewport-height, 100dvh)"},initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsxs("header",{className:Oe.header,ref:y,children:[n.jsx(me,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:ke,"aria-label":"Back",children:n.jsx("span",{className:"material-symbols-rounded",children:"arrow_back"})}),n.jsx("h3",{className:Oe.headerTitle,children:"Record Check"})]}),n.jsxs("main",{className:Oe.formContent,ref:_,children:[n.jsxs("h2",{className:Oe.roomHeader,children:[e.roomName,n.jsxs("div",{className:Oe.badgeWrapper,children:[K&&n.jsx("span",{className:Oe.statusLabel,"data-variant":"info",children:"Manual"}),te&&n.jsx("span",{className:Oe.statusLabel,"data-variant":"info",children:"Supplemental"})]})]}),!te&&ie==="early"&&n.jsxs("div",{className:Oe.warningBlock,role:"status",children:[n.jsx("span",{className:"material-symbols-rounded","aria-hidden":"true",children:"info"}),n.jsx("span",{children:"This room was checked recently. Are you sure you want to check now?"})]}),te&&n.jsxs("div",{className:Oe.incidentTypeSection,children:[n.jsx("label",{htmlFor:"incident-type-select",className:Oe.sectionLabel,children:"Reason for Check"}),n.jsxs("select",{id:"incident-type-select",className:Oe.selectInput,value:$,onChange:k=>F(k.target.value),children:[n.jsx("option",{value:"",disabled:!0,children:"Select a reason..."}),Nu.map(k=>n.jsx("option",{value:k.value,children:k.label},k.value))]})]}),d&&n.jsxs("div",{className:Oe.checkTypeSection,children:[n.jsx("label",{htmlFor:"check-type-control",className:Oe.sectionHeader,children:"Check type"}),n.jsx(lt,{id:"check-type-control",options:ku,value:M,onValueChange:B})]}),f&&e.residents.length>1&&n.jsx("div",{className:Oe.markMultipleContainer,children:n.jsx(me,{variant:"secondary",size:"m",onClick:()=>h(!0),children:"Mark all"})}),n.jsx(hu,{isOpen:v,onClose:()=>h(!1),onSelect:Qe,options:p,layout:m}),n.jsx("div",{className:Oe.residentListContainer,children:e.residents.map(k=>{const L=e.type==="scheduled"?e.specialClassifications?.find(Q=>Q.residentId===k.id):void 0;return n.jsx(tu,{resident:k,status:N[k.id],notes:E[k.id],onStatusChange:Ze,onNotesChange:_e,classification:L},k.id)})})]}),n.jsx("footer",{className:Oe.footer,ref:S,"data-scrolled":x,children:n.jsx(me,{variant:"primary",size:"m",onClick:Be,disabled:!Ue,children:"Save"})})]})},Wn=0,kt=1,Xt=2,$o=4;function Xs(e){return()=>e}function Lu(e){e()}function Wo(e,t){return s=>e(t(s))}function Zs(e,t){return()=>e(t)}function zu(e,t){return s=>e(t,s)}function Is(e){return e!==void 0}function Du(...e){return()=>{e.map(Lu)}}function Zt(){}function Fn(e,t){return t(e),e}function Pu(e,t){return t(e)}function ve(...e){return e}function ce(e,t){return e(kt,t)}function Z(e,t){e(Wn,t)}function ks(e){e(Xt)}function Ce(e){return e($o)}function D(e,t){return ce(e,zu(t,Wn))}function ct(e,t){const s=e(kt,o=>{s(),t(o)});return s}function Qs(e){let t,s;return o=>a=>{t=a,s&&clearTimeout(s),s=setTimeout(()=>{o(t)},e)}}function Fo(e,t){return e===t}function ge(e=Fo){let t;return s=>o=>{e(t,o)||(t=o,s(o))}}function U(e){return t=>s=>{e(s)&&t(s)}}function z(e){return t=>Wo(t,e)}function gt(e){return t=>()=>{t(e)}}function R(e,...t){const s=$u(...t);return(o,a)=>{switch(o){case Xt:ks(e);return;case kt:return ce(e,s(a))}}}function vt(e,t){return s=>o=>{s(t=e(t,o))}}function Wt(e){return t=>s=>{e>0?e--:t(s)}}function Ct(e){let t=null,s;return o=>a=>{t=a,!s&&(s=setTimeout(()=>{s=void 0,o(t)},e))}}function J(...e){const t=new Array(e.length);let s=0,o=null;const a=Math.pow(2,e.length)-1;return e.forEach((r,l)=>{const i=Math.pow(2,l);ce(r,c=>{const d=s;s=s|i,t[l]=c,d!==a&&s===a&&o&&(o(),o=null)})}),r=>l=>{const i=()=>{r([l].concat(t))};s===a?i():o=i}}function $u(...e){return t=>e.reduceRight(Pu,t)}function Wu(e){let t,s;const o=()=>t?.();return function(a,r){switch(a){case kt:return r?s===r?void 0:(o(),s=r,t=ce(e,r),t):(o(),Zt);case Xt:o(),s=null;return}}}function A(e){let t=e;const s=se();return(o,a)=>{switch(o){case Wn:t=a;break;case kt:{a(t);break}case $o:return t}return s(o,a)}}function ze(e,t){return Fn(A(t),s=>D(e,s))}function se(){const e=[];return(t,s)=>{switch(t){case Wn:e.slice().forEach(o=>{o(s)});return;case Xt:e.splice(0,e.length);return;case kt:return e.push(s),()=>{const o=e.indexOf(s);o>-1&&e.splice(o,1)}}}}function Xe(e){return Fn(se(),t=>D(e,t))}function re(e,t=[],{singleton:s}={singleton:!0}){return{constructor:e,dependencies:t,id:Fu(),singleton:s}}const Fu=()=>Symbol();function Vu(e){const t=new Map,s=({constructor:o,dependencies:a,id:r,singleton:l})=>{if(l&&t.has(r))return t.get(r);const i=o(a.map(c=>s(c)));return l&&t.set(r,i),i};return s(e)}function Ie(...e){const t=se(),s=new Array(e.length);let o=0;const a=Math.pow(2,e.length)-1;return e.forEach((r,l)=>{const i=Math.pow(2,l);ce(r,c=>{s[l]=c,o=o|i,o===a&&Z(t,s)})}),function(r,l){switch(r){case Xt:{ks(t);return}case kt:return o===a&&l(s),ce(t,l)}}}function G(e,t=Fo){return R(e,ge(t))}function is(...e){return function(t,s){switch(t){case Xt:return;case kt:return Du(...e.map(o=>ce(o,s)))}}}var Ge=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(Ge||{});const Gu={0:"debug",3:"error",1:"log",2:"warn"},qu=()=>typeof globalThis>"u"?window:globalThis,Nt=re(()=>{const e=A(3);return{log:A((t,s,o=1)=>{var a;const r=(a=qu().VIRTUOSO_LOG_LEVEL)!=null?a:Ce(e);o>=r&&console[Gu[o]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,s)}),logLevel:e}},[],{singleton:!0});function Vt(e,t,s){return Ns(e,t,s).callbackRef}function Ns(e,t,s){const o=j.useRef(null);let a=l=>{};const r=j.useMemo(()=>typeof ResizeObserver<"u"?new ResizeObserver(l=>{const i=()=>{const c=l[0].target;c.offsetParent!==null&&e(c)};s?i():requestAnimationFrame(i)}):null,[e,s]);return a=l=>{l&&t?(r?.observe(l),o.current=l):(o.current&&r?.unobserve(o.current),o.current=null)},{callbackRef:a,ref:o}}function Uu(e,t,s,o,a,r,l,i,c){const d=j.useCallback(f=>{const u=Yu(f.children,t,i?"offsetWidth":"offsetHeight",a);let m=f.parentElement;for(;!m.dataset.virtuosoScroller;)m=m.parentElement;const g=m.lastElementChild.dataset.viewportType==="window";let C;g&&(C=m.ownerDocument.defaultView);const w=l?i?l.scrollLeft:l.scrollTop:g?i?C.scrollX||C.document.documentElement.scrollLeft:C.scrollY||C.document.documentElement.scrollTop:i?m.scrollLeft:m.scrollTop,v=l?i?l.scrollWidth:l.scrollHeight:g?i?C.document.documentElement.scrollWidth:C.document.documentElement.scrollHeight:i?m.scrollWidth:m.scrollHeight,h=l?i?l.offsetWidth:l.offsetHeight:g?i?C.innerWidth:C.innerHeight:i?m.offsetWidth:m.offsetHeight;o({scrollHeight:v,scrollTop:Math.max(w,0),viewportHeight:h}),r?.(i?Js("column-gap",getComputedStyle(f).columnGap,a):Js("row-gap",getComputedStyle(f).rowGap,a)),u!==null&&e(u)},[e,t,a,r,l,o,i]);return Ns(d,s,c)}function Yu(e,t,s,o){const a=e.length;if(a===0)return null;const r=[];for(let l=0;l<a;l++){const i=e.item(l);if(i.dataset.index===void 0)continue;const c=parseInt(i.dataset.index),d=parseFloat(i.dataset.knownSize),f=t(i,s);if(f===0&&o("Zero-sized element, this should not happen",{child:i},Ge.ERROR),f===d)continue;const u=r[r.length-1];r.length===0||u.size!==f||u.endIndex!==c-1?r.push({endIndex:c,size:f,startIndex:c}):r[r.length-1].endIndex++}return r}function Js(e,t,s){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&s(`${e} was not resolved to pixel value correctly`,t,Ge.WARN),t==="normal"?0:parseInt(t??"0",10)}function Vo(e,t,s){const o=j.useRef(null),a=j.useCallback(c=>{if(!(c!=null&&c.offsetParent))return;const d=c.getBoundingClientRect(),f=d.width;let u,m;if(t){const g=t.getBoundingClientRect(),C=d.top-g.top;m=g.height-Math.max(0,C),u=C+t.scrollTop}else{const g=l.current.ownerDocument.defaultView;m=g.innerHeight-Math.max(0,d.top),u=d.top+g.scrollY}o.current={offsetTop:u,visibleHeight:m,visibleWidth:f},e(o.current)},[e,t]),{callbackRef:r,ref:l}=Ns(a,!0,s),i=j.useCallback(()=>{a(l.current)},[a,l]);return j.useEffect(()=>{var c;if(t){t.addEventListener("scroll",i);const d=new ResizeObserver(()=>{requestAnimationFrame(i)});return d.observe(t),()=>{t.removeEventListener("scroll",i),d.unobserve(t)}}else{const d=(c=l.current)==null?void 0:c.ownerDocument.defaultView;return d?.addEventListener("scroll",i),d?.addEventListener("resize",i),()=>{d?.removeEventListener("scroll",i),d?.removeEventListener("resize",i)}}},[i,t,l]),r}const Fe=re(()=>{const e=se(),t=se(),s=A(0),o=se(),a=A(0),r=se(),l=se(),i=A(0),c=A(0),d=A(0),f=A(0),u=se(),m=se(),g=A(!1),C=A(!1),w=A(!1);return D(R(e,z(({scrollTop:v})=>v)),t),D(R(e,z(({scrollHeight:v})=>v)),l),D(t,a),{deviation:s,fixedFooterHeight:d,fixedHeaderHeight:c,footerHeight:f,headerHeight:i,horizontalDirection:C,scrollBy:m,scrollContainerState:e,scrollHeight:l,scrollingInProgress:g,scrollTo:u,scrollTop:t,skipAnimationFrameInResizeObserver:w,smoothScrollTargetReached:o,statefulScrollTop:a,viewportHeight:r}},[],{singleton:!0}),rn={lvl:0};function Go(e,t){const s=e.length;if(s===0)return[];let{index:o,value:a}=t(e[0]);const r=[];for(let l=1;l<s;l++){const{index:i,value:c}=t(e[l]);r.push({end:i-1,start:o,value:a}),o=i,a=c}return r.push({end:1/0,start:o,value:a}),r}function fe(e){return e===rn}function ln(e,t){if(!fe(e))return t===e.k?e.v:t<e.k?ln(e.l,t):ln(e.r,t)}function ut(e,t,s="k"){if(fe(e))return[-1/0,void 0];if(Number(e[s])===t)return[e.k,e.v];if(Number(e[s])<t){const o=ut(e.r,t,s);return o[0]===-1/0?[e.k,e.v]:o}return ut(e.l,t,s)}function Ke(e,t,s){return fe(e)?Yo(t,s,1):t===e.k?Ee(e,{k:t,v:s}):t<e.k?eo(Ee(e,{l:Ke(e.l,t,s)})):eo(Ee(e,{r:Ke(e.r,t,s)}))}function Yt(){return rn}function Vn(e,t,s){if(fe(e))return[];const o=ut(e,t)[0];return Ku(cs(e,o,s))}function ls(e,t){if(fe(e))return rn;const{k:s,l:o,r:a}=e;if(t===s){if(fe(o))return a;if(fe(a))return o;{const[r,l]=Uo(o);return On(Ee(e,{k:r,l:qo(o),v:l}))}}else return t<s?On(Ee(e,{l:ls(o,t)})):On(Ee(e,{r:ls(a,t)}))}function Pt(e){return fe(e)?[]:[...Pt(e.l),{k:e.k,v:e.v},...Pt(e.r)]}function cs(e,t,s){if(fe(e))return[];const{k:o,l:a,r,v:l}=e;let i=[];return o>t&&(i=i.concat(cs(a,t,s))),o>=t&&o<=s&&i.push({k:o,v:l}),o<=s&&(i=i.concat(cs(r,t,s))),i}function On(e){const{l:t,lvl:s,r:o}=e;if(o.lvl>=s-1&&t.lvl>=s-1)return e;if(s>o.lvl+1){if(Yn(t))return Ko(Ee(e,{lvl:s-1}));if(!fe(t)&&!fe(t.r))return Ee(t.r,{l:Ee(t,{r:t.r.l}),lvl:s,r:Ee(e,{l:t.r.r,lvl:s-1})});throw new Error("Unexpected empty nodes")}else{if(Yn(e))return us(Ee(e,{lvl:s-1}));if(!fe(o)&&!fe(o.l)){const a=o.l,r=Yn(a)?o.lvl-1:o.lvl;return Ee(a,{l:Ee(e,{lvl:s-1,r:a.l}),lvl:a.lvl+1,r:us(Ee(o,{l:a.r,lvl:r}))})}else throw new Error("Unexpected empty nodes")}}function Ee(e,t){return Yo(t.k!==void 0?t.k:e.k,t.v!==void 0?t.v:e.v,t.lvl!==void 0?t.lvl:e.lvl,t.l!==void 0?t.l:e.l,t.r!==void 0?t.r:e.r)}function qo(e){return fe(e.r)?e.l:On(Ee(e,{r:qo(e.r)}))}function Yn(e){return fe(e)||e.lvl>e.r.lvl}function Uo(e){return fe(e.r)?[e.k,e.v]:Uo(e.r)}function Yo(e,t,s,o=rn,a=rn){return{k:e,l:o,lvl:s,r:a,v:t}}function eo(e){return us(Ko(e))}function Ko(e){const{l:t}=e;return!fe(t)&&t.lvl===e.lvl?Ee(t,{r:Ee(e,{l:t.r})}):e}function us(e){const{lvl:t,r:s}=e;return!fe(s)&&!fe(s.r)&&s.lvl===t&&s.r.lvl===t?Ee(s,{l:Ee(e,{r:s.l}),lvl:t+1}):e}function Ku(e){return Go(e,({k:t,v:s})=>({index:t,value:s}))}function Xo(e,t){return!!(e&&e.startIndex===t.startIndex&&e.endIndex===t.endIndex)}function cn(e,t){return!!(e&&e[0]===t[0]&&e[1]===t[1])}const Rs=re(()=>({recalcInProgress:A(!1)}),[],{singleton:!0});function Zo(e,t,s){return e[Bn(e,t,s)]}function Bn(e,t,s,o=0){let a=e.length-1;for(;o<=a;){const r=Math.floor((o+a)/2),l=e[r],i=s(l,t);if(i===0)return r;if(i===-1){if(a-o<2)return r-1;a=r-1}else{if(a===o)return r;o=r+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function Xu(e,t,s,o){const a=Bn(e,t,o),r=Bn(e,s,o,a);return e.slice(a,r+1)}function It(e,t){return Math.round(e.getBoundingClientRect()[t])}function Gn(e){return!fe(e.groupOffsetTree)}function Es({index:e},t){return t===e?0:t<e?-1:1}function Zu(){return{groupIndices:[],groupOffsetTree:Yt(),lastIndex:0,lastOffset:0,lastSize:0,offsetTree:[],sizeTree:Yt()}}function Qu(e,t){let s=fe(e)?0:1/0;for(const o of t){const{endIndex:a,size:r,startIndex:l}=o;if(s=Math.min(s,l),fe(e)){e=Ke(e,0,r);continue}const i=Vn(e,l-1,a+1);if(i.some(ad(o)))continue;let c=!1,d=!1;for(const{end:f,start:u,value:m}of i)c?(a>=u||r===m)&&(e=ls(e,u)):(d=m!==r,c=!0),f>a&&a>=u&&m!==r&&(e=Ke(e,a+1,m));d&&(e=Ke(e,l,r))}return[e,s]}function Ju(e){return typeof e.groupIndex<"u"}function ed({offset:e},t){return t===e?0:t<e?-1:1}function un(e,t,s){if(t.length===0)return 0;const{index:o,offset:a,size:r}=Zo(t,e,Es),l=e-o,i=r*l+(l-1)*s+a;return i>0?i+s:i}function Qo(e,t){if(!Gn(t))return e;let s=0;for(;t.groupIndices[s]<=e+s;)s++;return e+s}function Jo(e,t,s){if(Ju(e))return t.groupIndices[e.groupIndex]+1;{const o=e.index==="LAST"?s:e.index;let a=Qo(o,t);return a=Math.max(0,a,Math.min(s,a)),a}}function td(e,t,s,o=0){return o>0&&(t=Math.max(t,Zo(e,o,Es).offset)),Go(Xu(e,t,s,ed),od)}function nd(e,[t,s,o,a]){t.length>0&&o("received item sizes",t,Ge.DEBUG);const r=e.sizeTree;let l=r,i=0;if(s.length>0&&fe(r)&&t.length===2){const m=t[0].size,g=t[1].size;l=s.reduce((C,w)=>Ke(Ke(C,w,m),w+1,g),l)}else[l,i]=Qu(l,t);if(l===r)return e;const{lastIndex:c,lastOffset:d,lastSize:f,offsetTree:u}=ds(e.offsetTree,i,l,a);return{groupIndices:s,groupOffsetTree:s.reduce((m,g)=>Ke(m,g,un(g,u,a)),Yt()),lastIndex:c,lastOffset:d,lastSize:f,offsetTree:u,sizeTree:l}}function sd(e){return Pt(e).map(({k:t,v:s},o,a)=>{const r=a[o+1];return{endIndex:r?r.k-1:1/0,size:s,startIndex:t}})}function to(e,t){let s=0,o=0;for(;s<e;)s+=t[o+1]-t[o]-1,o++;return o-(s===e?0:1)}function ds(e,t,s,o){let a=e,r=0,l=0,i=0,c=0;if(t!==0){c=Bn(a,t-1,Es),i=a[c].offset;const d=ut(s,t-1);r=d[0],l=d[1],a.length&&a[c].size===ut(s,t)[1]&&(c-=1),a=a.slice(0,c+1)}else a=[];for(const{start:d,value:f}of Vn(s,t,1/0)){const u=d-r,m=u*l+i+u*o;a.push({index:d,offset:m,size:f}),r=d,i=m,l=f}return{lastIndex:r,lastOffset:i,lastSize:l,offsetTree:a}}function od(e){return{index:e.index,value:e}}function ad(e){const{endIndex:t,size:s,startIndex:o}=e;return a=>a.start===o&&(a.end===t||a.end===1/0)&&a.value===s}const rd={offsetHeight:"height",offsetWidth:"width"},yt=re(([{log:e},{recalcInProgress:t}])=>{const s=se(),o=se(),a=ze(o,0),r=se(),l=se(),i=A(0),c=A([]),d=A(void 0),f=A(void 0),u=A((y,x)=>It(y,rd[x])),m=A(void 0),g=A(0),C=Zu(),w=ze(R(s,J(c,e,g),vt(nd,C),ge()),C),v=ze(R(c,ge(),vt((y,x)=>({current:x,prev:y.current}),{current:[],prev:[]}),z(({prev:y})=>y)),[]);D(R(c,U(y=>y.length>0),J(w,g),z(([y,x,b])=>{const I=y.reduce((N,O,E)=>Ke(N,O,un(O,x.offsetTree,b)||E),Yt());return{...x,groupIndices:y,groupOffsetTree:I}})),w),D(R(o,J(w),U(([y,{lastIndex:x}])=>y<x),z(([y,{lastIndex:x,lastSize:b}])=>[{endIndex:x,size:b,startIndex:y}])),s),D(d,f);const h=ze(R(d,z(y=>y===void 0)),!0);D(R(f,U(y=>y!==void 0&&fe(Ce(w).sizeTree)),z(y=>[{endIndex:0,size:y,startIndex:0}])),s);const p=Xe(R(s,J(w),vt(({sizes:y},[x,b])=>({changed:b!==y,sizes:b}),{changed:!1,sizes:C}),z(y=>y.changed)));ce(R(i,vt((y,x)=>({diff:y.prev-x,prev:x}),{diff:0,prev:0}),z(y=>y.diff)),y=>{const{groupIndices:x}=Ce(w);if(y>0)Z(t,!0),Z(r,y+to(y,x));else if(y<0){const b=Ce(v);b.length>0&&(y-=to(-y,b)),Z(l,y)}}),ce(R(i,J(e)),([y,x])=>{y<0&&x("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:i},Ge.ERROR)});const S=Xe(r);D(R(r,J(w),z(([y,x])=>{const b=x.groupIndices.length>0,I=[],N=x.lastSize;if(b){const O=ln(x.sizeTree,0);let E=0,P=0;for(;E<y;){const B=x.groupIndices[P],$=x.groupIndices.length===P+1?1/0:x.groupIndices[P+1]-B-1;I.push({endIndex:B,size:O,startIndex:B}),I.push({endIndex:B+1+$-1,size:N,startIndex:B+1}),P++,E+=$+1}const M=Pt(x.sizeTree);return E!==y&&M.shift(),M.reduce((B,{k:$,v:F})=>{let K=B.ranges;return B.prevSize!==0&&(K=[...B.ranges,{endIndex:$+y-1,size:B.prevSize,startIndex:B.prevIndex}]),{prevIndex:$+y,prevSize:F,ranges:K}},{prevIndex:y,prevSize:0,ranges:I}).ranges}return Pt(x.sizeTree).reduce((O,{k:E,v:P})=>({prevIndex:E+y,prevSize:P,ranges:[...O.ranges,{endIndex:E+y-1,size:O.prevSize,startIndex:O.prevIndex}]}),{prevIndex:0,prevSize:N,ranges:[]}).ranges})),s);const _=Xe(R(l,J(w,g),z(([y,{offsetTree:x},b])=>{const I=-y;return un(I,x,b)})));return D(R(l,J(w,g),z(([y,x,b])=>{if(x.groupIndices.length>0){if(fe(x.sizeTree))return x;let I=Yt();const N=Ce(v);let O=0,E=0,P=0;for(;O<-y;){P=N[E];const M=N[E+1]-P-1;E++,O+=M+1}if(I=Pt(x.sizeTree).reduce((M,{k:B,v:$})=>Ke(M,Math.max(0,B+y),$),I),O!==-y){const M=ln(x.sizeTree,P);I=Ke(I,0,M);const B=ut(x.sizeTree,-y+1)[1];I=Ke(I,1,B)}return{...x,sizeTree:I,...ds(x.offsetTree,0,I,b)}}else{const I=Pt(x.sizeTree).reduce((N,{k:O,v:E})=>Ke(N,Math.max(0,O+y),E),Yt());return{...x,sizeTree:I,...ds(x.offsetTree,0,I,b)}}})),w),{beforeUnshiftWith:S,data:m,defaultItemSize:f,firstItemIndex:i,fixedItemSize:d,gap:g,groupIndices:c,itemSize:u,listRefresh:p,shiftWith:l,shiftWithOffset:_,sizeRanges:s,sizes:w,statefulTotalCount:a,totalCount:o,trackItemSizes:h,unshiftWith:r}},ve(Nt,Rs),{singleton:!0});function id(e){return e.reduce((t,s)=>(t.groupIndices.push(t.totalCount),t.totalCount+=s+1,t),{groupIndices:[],totalCount:0})}const ea=re(([{groupIndices:e,sizes:t,totalCount:s},{headerHeight:o,scrollTop:a}])=>{const r=se(),l=se(),i=Xe(R(r,z(id)));return D(R(i,z(c=>c.totalCount)),s),D(R(i,z(c=>c.groupIndices)),e),D(R(Ie(a,t,o),U(([c,d])=>Gn(d)),z(([c,d,f])=>ut(d.groupOffsetTree,Math.max(c-f,0),"v")[0]),ge(),z(c=>[c])),l),{groupCounts:r,topItemsIndexes:l}},ve(yt,Fe)),Rt=re(([{log:e}])=>{const t=A(!1),s=Xe(R(t,U(o=>o),ge()));return ce(t,o=>{o&&Ce(e)("props updated",{},Ge.DEBUG)}),{didMount:s,propsReady:t}},ve(Nt),{singleton:!0}),ld=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function ta(e){const t=typeof e=="number"?{index:e}:e;return t.align||(t.align="start"),(!t.behavior||!ld)&&(t.behavior="auto"),t.offset||(t.offset=0),t}const fn=re(([{gap:e,listRefresh:t,sizes:s,totalCount:o},{fixedFooterHeight:a,fixedHeaderHeight:r,footerHeight:l,headerHeight:i,scrollingInProgress:c,scrollTo:d,smoothScrollTargetReached:f,viewportHeight:u},{log:m}])=>{const g=se(),C=se(),w=A(0);let v=null,h=null,p=null;function S(){v&&(v(),v=null),p&&(p(),p=null),h&&(clearTimeout(h),h=null),Z(c,!1)}return D(R(g,J(s,u,o,w,i,l,m),J(e,r,a),z(([[_,y,x,b,I,N,O,E],P,M,B])=>{const $=ta(_),{align:F,behavior:K,offset:te}=$,ie=b-1,le=Jo($,y,ie);let ke=un(le,y.offsetTree,P)+N;F==="end"?(ke+=M+ut(y.sizeTree,le)[1]-x+B,le===ie&&(ke+=O)):F==="center"?ke+=(M+ut(y.sizeTree,le)[1]-x+B)/2:ke-=I,te&&(ke+=te);const Ze=_e=>{S(),_e?(E("retrying to scroll to",{location:_},Ge.DEBUG),Z(g,_)):(Z(C,!0),E("list did not change, scroll successful",{},Ge.DEBUG))};if(S(),K==="smooth"){let _e=!1;p=ce(t,Qe=>{_e=_e||Qe}),v=ct(f,()=>{Ze(_e)})}else v=ct(R(t,cd(150)),Ze);return h=setTimeout(()=>{S()},1200),Z(c,!0),E("scrolling from index to",{behavior:K,index:le,top:ke},Ge.DEBUG),{behavior:K,top:ke}})),d),{scrollTargetReached:C,scrollToIndex:g,topListHeight:w}},ve(yt,Fe,Nt),{singleton:!0});function cd(e){return t=>{const s=setTimeout(()=>{t(!1)},e);return o=>{o&&(t(!0),clearTimeout(s))}}}function As(e,t){e==0?t():requestAnimationFrame(()=>{As(e-1,t)})}function Os(e,t){const s=t-1;return typeof e=="number"?e:e.index==="LAST"?s:e.index}const hn=re(([{defaultItemSize:e,listRefresh:t,sizes:s},{scrollTop:o},{scrollTargetReached:a,scrollToIndex:r},{didMount:l}])=>{const i=A(!0),c=A(0),d=A(!0);return D(R(l,J(c),U(([f,u])=>!!u),gt(!1)),i),D(R(l,J(c),U(([f,u])=>!!u),gt(!1)),d),ce(R(Ie(t,l),J(i,s,e,d),U(([[,f],u,{sizeTree:m},g,C])=>f&&(!fe(m)||Is(g))&&!u&&!C),J(c)),([,f])=>{ct(a,()=>{Z(d,!0)}),As(4,()=>{ct(o,()=>{Z(i,!0)}),Z(r,f)})}),{initialItemFinalLocationReached:d,initialTopMostItemIndex:c,scrolledToInitialItem:i}},ve(yt,Fe,fn,Rt),{singleton:!0});function na(e,t){return Math.abs(e-t)<1.01}const dn="up",on="down",ud="none",dd={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollHeight:0,scrollTop:0,viewportHeight:0}},md=0,pn=re(([{footerHeight:e,headerHeight:t,scrollBy:s,scrollContainerState:o,scrollTop:a,viewportHeight:r}])=>{const l=A(!1),i=A(!0),c=se(),d=se(),f=A(4),u=A(md),m=ze(R(is(R(G(a),Wt(1),gt(!0)),R(G(a),Wt(1),gt(!1),Qs(100))),ge()),!1),g=ze(R(is(R(s,gt(!0)),R(s,gt(!1),Qs(200))),ge()),!1);D(R(Ie(G(a),G(u)),z(([p,S])=>p<=S),ge()),i),D(R(i,Ct(50)),d);const C=Xe(R(Ie(o,G(r),G(t),G(e),G(f)),vt((p,[{scrollHeight:S,scrollTop:_},y,x,b,I])=>{const N=_+y-S>-I,O={scrollHeight:S,scrollTop:_,viewportHeight:y};if(N){let P,M;return _>p.state.scrollTop?(P="SCROLLED_DOWN",M=p.state.scrollTop-_):(P="SIZE_DECREASED",M=p.state.scrollTop-_||p.scrollTopDelta),{atBottom:!0,atBottomBecause:P,scrollTopDelta:M,state:O}}let E;return O.scrollHeight>p.state.scrollHeight?E="SIZE_INCREASED":y<p.state.viewportHeight?E="VIEWPORT_HEIGHT_DECREASING":_<p.state.scrollTop?E="SCROLLING_UPWARDS":E="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:E,state:O}},dd),ge((p,S)=>p&&p.atBottom===S.atBottom))),w=ze(R(o,vt((p,{scrollHeight:S,scrollTop:_,viewportHeight:y})=>{if(na(p.scrollHeight,S))return{changed:!1,jump:0,scrollHeight:S,scrollTop:_};{const x=S-(_+y)<1;return p.scrollTop!==_&&x?{changed:!0,jump:p.scrollTop-_,scrollHeight:S,scrollTop:_}:{changed:!0,jump:0,scrollHeight:S,scrollTop:_}}},{changed:!1,jump:0,scrollHeight:0,scrollTop:0}),U(p=>p.changed),z(p=>p.jump)),0);D(R(C,z(p=>p.atBottom)),l),D(R(l,Ct(50)),c);const v=A(on);D(R(o,z(({scrollTop:p})=>p),ge(),vt((p,S)=>Ce(g)?{direction:p.direction,prevScrollTop:S}:{direction:S<p.prevScrollTop?dn:on,prevScrollTop:S},{direction:on,prevScrollTop:0}),z(p=>p.direction)),v),D(R(o,Ct(50),gt(ud)),v);const h=A(0);return D(R(m,U(p=>!p),gt(0)),h),D(R(a,Ct(100),J(m),U(([p,S])=>!!S),vt(([p,S],[_])=>[S,_],[0,0]),z(([p,S])=>S-p)),h),{atBottomState:C,atBottomStateChange:c,atBottomThreshold:f,atTopStateChange:d,atTopThreshold:u,isAtBottom:l,isAtTop:i,isScrolling:m,lastJumpDueToItemResize:w,scrollDirection:v,scrollVelocity:h}},ve(Fe)),Hn="top",Ln="bottom",no="none";function so(e,t,s){return typeof e=="number"?s===dn&&t===Hn||s===on&&t===Ln?e:0:s===dn?t===Hn?e.main:e.reverse:t===Ln?e.main:e.reverse}function oo(e,t){var s;return typeof e=="number"?e:(s=e[t])!=null?s:0}const Ms=re(([{deviation:e,fixedHeaderHeight:t,headerHeight:s,scrollTop:o,viewportHeight:a}])=>{const r=se(),l=A(0),i=A(0),c=A(0),d=ze(R(Ie(G(o),G(a),G(s),G(r,cn),G(c),G(l),G(t),G(e),G(i)),z(([f,u,m,[g,C],w,v,h,p,S])=>{const _=f-p,y=v+h,x=Math.max(m-_,0);let b=no;const I=oo(S,Hn),N=oo(S,Ln);return g-=p,g+=m+h,C+=m+h,C-=p,g>f+y-I&&(b=dn),C<f-x+u+N&&(b=on),b!==no?[Math.max(_-m-so(w,Hn,b)-I,0),_-x-h+u+so(w,Ln,b)+N]:null}),U(f=>f!=null),ge(cn)),[0,0]);return{increaseViewportBy:i,listBoundary:r,overscan:c,topListHeight:l,visibleRange:d}},ve(Fe),{singleton:!0});function fd(e,t,s){if(Gn(t)){const o=Qo(e,t);return[{index:ut(t.groupOffsetTree,o)[0],offset:0,size:0},{data:s?.[0],index:o,offset:0,size:0}]}return[{data:s?.[0],index:e,offset:0,size:0}]}const Kn={bottom:0,firstItemIndex:0,items:[],offsetBottom:0,offsetTop:0,top:0,topItems:[],topListHeight:0,totalCount:0};function Mn(e,t,s,o,a,r){const{lastIndex:l,lastOffset:i,lastSize:c}=a;let d=0,f=0;if(e.length>0){d=e[0].offset;const w=e[e.length-1];f=w.offset+w.size}const u=s-l,m=i+u*c+(u-1)*o,g=d,C=m-f;return{bottom:f,firstItemIndex:r,items:ao(e,a,r),offsetBottom:C,offsetTop:d,top:g,topItems:ao(t,a,r),topListHeight:t.reduce((w,v)=>v.size+w,0),totalCount:s}}function sa(e,t,s,o,a,r){let l=0;if(s.groupIndices.length>0)for(const f of s.groupIndices){if(f-l>=e)break;l++}const i=e+l,c=Os(t,i),d=Array.from({length:i}).map((f,u)=>({data:r[u+c],index:u+c,offset:0,size:0}));return Mn(d,[],i,a,s,o)}function ao(e,t,s){if(e.length===0)return[];if(!Gn(t))return e.map(d=>({...d,index:d.index+s,originalIndex:d.index}));const o=e[0].index,a=e[e.length-1].index,r=[],l=Vn(t.groupOffsetTree,o,a);let i,c=0;for(const d of e){(!i||i.end<d.index)&&(i=l.shift(),c=t.groupIndices.indexOf(i.start));let f;d.index===i.start?f={index:c,type:"group"}:f={groupIndex:c,index:d.index-(c+1)+s},r.push({...f,data:d.data,offset:d.offset,originalIndex:d.index,size:d.size})}return r}const Gt=re(([{data:e,firstItemIndex:t,gap:s,sizes:o,totalCount:a},r,{listBoundary:l,topListHeight:i,visibleRange:c},{initialTopMostItemIndex:d,scrolledToInitialItem:f},{topListHeight:u},m,{didMount:g},{recalcInProgress:C}])=>{const w=A([]),v=A(0),h=se();D(r.topItemsIndexes,w);const p=ze(R(Ie(g,C,G(c,cn),G(a),G(o),G(d),f,G(w),G(t),G(s),e),U(([x,b,,I,,,,,,,N])=>{const O=N&&N.length!==I;return x&&!b&&!O}),z(([,,[x,b],I,N,O,E,P,M,B,$])=>{const F=N,{offsetTree:K,sizeTree:te}=F,ie=Ce(v);if(I===0)return{...Kn,totalCount:I};if(x===0&&b===0)return ie===0?{...Kn,totalCount:I}:sa(ie,O,N,M,B,$||[]);if(fe(te))return ie>0?null:Mn(fd(Os(O,I),F,$),[],I,B,F,M);const le=[];if(P.length>0){const Ue=P[0],Be=P[P.length-1];let He=0;for(const k of Vn(te,Ue,Be)){const L=k.value,Q=Math.max(k.start,Ue),he=Math.min(k.end,Be);for(let de=Q;de<=he;de++)le.push({data:$?.[de],index:de,offset:He,size:L}),He+=L}}if(!E)return Mn([],le,I,B,F,M);const ke=P.length>0?P[P.length-1]+1:0,Ze=td(K,x,b,ke);if(Ze.length===0)return null;const _e=I-1,Qe=Fn([],Ue=>{for(const Be of Ze){const He=Be.value;let k=He.offset,L=Be.start;const Q=He.size;if(He.offset<x){L+=Math.floor((x-He.offset+B)/(Q+B));const de=L-Be.start;k+=de*Q+de*B}L<ke&&(k+=(ke-L)*Q,L=ke);const he=Math.min(Be.end,_e);for(let de=L;de<=he&&!(k>=b);de++)Ue.push({data:$?.[de],index:de,offset:k,size:Q}),k+=Q+B}});return Mn(Qe,le,I,B,F,M)}),U(x=>x!==null),ge()),Kn);D(R(e,U(Is),z(x=>x?.length)),a),D(R(p,z(x=>x.topListHeight)),u),D(u,i),D(R(p,z(x=>[x.top,x.bottom])),l),D(R(p,z(x=>x.items)),h);const S=Xe(R(p,U(({items:x})=>x.length>0),J(a,e),U(([{items:x},b])=>x[x.length-1].originalIndex===b-1),z(([,x,b])=>[x-1,b]),ge(cn),z(([x])=>x))),_=Xe(R(p,Ct(200),U(({items:x,topItems:b})=>x.length>0&&x[0].originalIndex===b.length),z(({items:x})=>x[0].index),ge())),y=Xe(R(p,U(({items:x})=>x.length>0),z(({items:x})=>{let b=0,I=x.length-1;for(;x[b].type==="group"&&b<I;)b++;for(;x[I].type==="group"&&I>b;)I--;return{endIndex:x[I].index,startIndex:x[b].index}}),ge(Xo)));return{endReached:S,initialItemCount:v,itemsRendered:h,listState:p,rangeChanged:y,startReached:_,topItemsIndexes:w,...m}},ve(yt,ea,Ms,hn,fn,pn,Rt,Rs),{singleton:!0}),oa=re(([{fixedFooterHeight:e,fixedHeaderHeight:t,footerHeight:s,headerHeight:o},{listState:a}])=>{const r=se(),l=ze(R(Ie(s,e,o,t,a),z(([i,c,d,f,u])=>i+c+d+f+u.offsetBottom+u.bottom)),0);return D(G(l),r),{totalListHeight:l,totalListHeightChanged:r}},ve(Fe,Gt),{singleton:!0}),hd=re(([{viewportHeight:e},{totalListHeight:t}])=>{const s=A(!1),o=ze(R(Ie(s,e,t),U(([a])=>a),z(([,a,r])=>Math.max(0,a-r)),Ct(0),ge()),0);return{alignToBottom:s,paddingTopAddition:o}},ve(Fe,oa),{singleton:!0}),aa=re(()=>({context:A(null)})),pd=({itemBottom:e,itemTop:t,locationParams:{align:s,behavior:o,...a},viewportBottom:r,viewportTop:l})=>t<l?{...a,align:s??"start",behavior:o}:e>r?{...a,align:s??"end",behavior:o}:null,ra=re(([{gap:e,sizes:t,totalCount:s},{fixedFooterHeight:o,fixedHeaderHeight:a,headerHeight:r,scrollingInProgress:l,scrollTop:i,viewportHeight:c},{scrollToIndex:d}])=>{const f=se();return D(R(f,J(t,c,s,r,a,o,i),J(e),z(([[u,m,g,C,w,v,h,p],S])=>{const{align:_,behavior:y,calculateViewLocation:x=pd,done:b,...I}=u,N=Jo(u,m,C-1),O=un(N,m.offsetTree,S)+w+v,E=O+ut(m.sizeTree,N)[1],P=p+v,M=p+g-h,B=x({itemBottom:E,itemTop:O,locationParams:{align:_,behavior:y,...I},viewportBottom:M,viewportTop:P});return B?b&&ct(R(l,U($=>!$),Wt(Ce(l)?1:2)),b):b&&b(),B}),U(u=>u!==null)),d),{scrollIntoView:f}},ve(yt,Fe,fn,Gt,Nt),{singleton:!0});function ro(e){return e?e==="smooth"?"smooth":"auto":!1}const gd=(e,t)=>typeof e=="function"?ro(e(t)):t&&ro(e),vd=re(([{listRefresh:e,totalCount:t,fixedItemSize:s,data:o},{atBottomState:a,isAtBottom:r},{scrollToIndex:l},{scrolledToInitialItem:i},{didMount:c,propsReady:d},{log:f},{scrollingInProgress:u},{context:m},{scrollIntoView:g}])=>{const C=A(!1),w=se();let v=null;function h(y){Z(l,{align:"end",behavior:y,index:"LAST"})}ce(R(Ie(R(G(t),Wt(1)),c),J(G(C),r,i,u),z(([[y,x],b,I,N,O])=>{let E=x&&N,P="auto";return E&&(P=gd(b,I||O),E=E&&!!P),{followOutputBehavior:P,shouldFollow:E,totalCount:y}}),U(({shouldFollow:y})=>y)),({followOutputBehavior:y,totalCount:x})=>{v&&(v(),v=null),Ce(s)?requestAnimationFrame(()=>{Ce(f)("following output to ",{totalCount:x},Ge.DEBUG),h(y)}):v=ct(e,()=>{Ce(f)("following output to ",{totalCount:x},Ge.DEBUG),h(y),v=null})});function p(y){const x=ct(a,b=>{y&&!b.atBottom&&b.notAtBottomBecause==="SIZE_INCREASED"&&!v&&(Ce(f)("scrolling to bottom due to increased size",{},Ge.DEBUG),h("auto"))});setTimeout(x,100)}ce(R(Ie(G(C),t,d),U(([y,,x])=>y&&x),vt(({value:y},[,x])=>({refreshed:y===x,value:x}),{refreshed:!1,value:0}),U(({refreshed:y})=>y),J(C,t)),([,y])=>{Ce(i)&&p(y!==!1)}),ce(w,()=>{p(Ce(C)!==!1)}),ce(Ie(G(C),a),([y,x])=>{y&&!x.atBottom&&x.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&h("auto")});const S=A(null),_=se();return D(is(R(G(o),z(y=>{var x;return(x=y?.length)!=null?x:0})),R(G(t))),_),ce(R(Ie(R(_,Wt(1)),c),J(G(S),i,u,m),z(([[y,x],b,I,N,O])=>x&&I&&b?.({context:O,totalCount:y,scrollingInProgress:N})),U(y=>!!y),Ct(0)),y=>{v&&(v(),v=null),Ce(s)?requestAnimationFrame(()=>{Ce(f)("scrolling into view",{}),Z(g,y)}):v=ct(e,()=>{Ce(f)("scrolling into view",{}),Z(g,y),v=null})}),{autoscrollToBottom:w,followOutput:C,scrollIntoViewOnChange:S}},ve(yt,pn,fn,hn,Rt,Nt,Fe,aa,ra)),xd=re(([{data:e,firstItemIndex:t,gap:s,sizes:o},{initialTopMostItemIndex:a},{initialItemCount:r,listState:l},{didMount:i}])=>(D(R(i,J(r),U(([,c])=>c!==0),J(a,o,t,s,e),z(([[,c],d,f,u,m,g=[]])=>sa(c,d,f,u,m,g))),l),{}),ve(yt,hn,Gt,Rt),{singleton:!0}),yd=re(([{didMount:e},{scrollTo:t},{listState:s}])=>{const o=A(0);return ce(R(e,J(o),U(([,a])=>a!==0),z(([,a])=>({top:a}))),a=>{ct(R(s,Wt(1),U(r=>r.items.length>1)),()=>{requestAnimationFrame(()=>{Z(t,a)})})}),{initialScrollTop:o}},ve(Rt,Fe,Gt),{singleton:!0}),ia=re(([{scrollVelocity:e}])=>{const t=A(!1),s=se(),o=A(!1);return D(R(e,J(o,t,s),U(([a,r])=>!!r),z(([a,r,l,i])=>{const{enter:c,exit:d}=r;if(l){if(d(a,i))return!1}else if(c(a,i))return!0;return l}),ge()),t),ce(R(Ie(t,e,s),J(o)),([[a,r,l],i])=>{a&&i&&i.change&&i.change(r,l)}),{isSeeking:t,scrollSeekConfiguration:o,scrollSeekRangeChanged:s,scrollVelocity:e}},ve(pn),{singleton:!0}),Bs=re(([{scrollContainerState:e,scrollTo:t}])=>{const s=se(),o=se(),a=se(),r=A(!1),l=A(void 0);return D(R(Ie(s,o),z(([{scrollHeight:i,scrollTop:c,viewportHeight:d},{offsetTop:f}])=>({scrollHeight:i,scrollTop:Math.max(0,c-f),viewportHeight:d}))),e),D(R(t,J(o),z(([i,{offsetTop:c}])=>({...i,top:i.top+c}))),a),{customScrollParent:l,useWindowScroll:r,windowScrollContainerState:s,windowScrollTo:a,windowViewportRect:o}},ve(Fe)),wd=re(([{sizeRanges:e,sizes:t},{headerHeight:s,scrollTop:o},{initialTopMostItemIndex:a},{didMount:r},{useWindowScroll:l,windowScrollContainerState:i,windowViewportRect:c}])=>{const d=se(),f=A(void 0),u=A(null),m=A(null);return D(i,u),D(c,m),ce(R(d,J(t,o,l,u,m,s)),([g,C,w,v,h,p,S])=>{const _=sd(C.sizeTree);v&&h!==null&&p!==null&&(w=h.scrollTop-p.offsetTop),w-=S,g({ranges:_,scrollTop:w})}),D(R(f,U(Is),z(bd)),a),D(R(r,J(f),U(([,g])=>g!==void 0),ge(),z(([,g])=>g.ranges)),e),{getState:d,restoreStateFrom:f}},ve(yt,Fe,hn,Rt,Bs));function bd(e){return{align:"start",index:0,offset:e.scrollTop}}const Cd=re(([{topItemsIndexes:e}])=>{const t=A(0);return D(R(t,U(s=>s>=0),z(s=>Array.from({length:s}).map((o,a)=>a))),e),{topItemCount:t}},ve(Gt));function la(e){let t=!1,s;return()=>(t||(t=!0,s=e()),s)}const _d=la(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),Sd=re(([{deviation:e,scrollBy:t,scrollingInProgress:s,scrollTop:o},{isAtBottom:a,isScrolling:r,lastJumpDueToItemResize:l,scrollDirection:i},{listState:c},{beforeUnshiftWith:d,gap:f,shiftWithOffset:u,sizes:m},{log:g},{recalcInProgress:C}])=>{const w=Xe(R(c,J(l),vt(([,h,p,S],[{bottom:_,items:y,offsetBottom:x,totalCount:b},I])=>{const N=_+x;let O=0;return p===b&&h.length>0&&y.length>0&&(y[0].originalIndex===0&&h[0].originalIndex===0||(O=N-S,O!==0&&(O+=I))),[O,y,b,N]},[0,[],0,0]),U(([h])=>h!==0),J(o,i,s,a,g,C),U(([,h,p,S,,,_])=>!_&&!S&&h!==0&&p===dn),z(([[h],,,,,p])=>(p("Upward scrolling compensation",{amount:h},Ge.DEBUG),h))));function v(h){h>0?(Z(t,{behavior:"auto",top:-h}),Z(e,0)):(Z(e,0),Z(t,{behavior:"auto",top:-h}))}return ce(R(w,J(e,r)),([h,p,S])=>{S&&_d()?Z(e,p-h):v(-h)}),ce(R(Ie(ze(r,!1),e,C),U(([h,p,S])=>!h&&!S&&p!==0),z(([h,p])=>p),Ct(1)),v),D(R(u,z(h=>({top:-h}))),t),ce(R(d,J(m,f),z(([h,{groupIndices:p,lastSize:S,sizeTree:_},y])=>{function x(b){return b*(S+y)}if(p.length===0)return x(h);{let b=0;const I=ln(_,0);let N=0,O=0;for(;N<h;){N++,b+=I;let E=p.length===O+1?1/0:p[O+1]-p[O]-1;N+E>h&&(b-=I,E=h-N+1),N+=E,b+=x(E),O++}return b}})),h=>{Z(e,h),requestAnimationFrame(()=>{Z(t,{top:h}),requestAnimationFrame(()=>{Z(e,0),Z(C,!1)})})}),{deviation:e}},ve(Fe,pn,Gt,yt,Nt,Rs)),Td=re(([e,t,s,o,a,r,l,i,c,d,f])=>({...e,...t,...s,...o,...a,...r,...l,...i,...c,...d,...f}),ve(Ms,xd,Rt,ia,oa,yd,hd,Bs,ra,Nt,aa)),ca=re(([{data:e,defaultItemSize:t,firstItemIndex:s,fixedItemSize:o,gap:a,groupIndices:r,itemSize:l,sizeRanges:i,sizes:c,statefulTotalCount:d,totalCount:f,trackItemSizes:u},{initialItemFinalLocationReached:m,initialTopMostItemIndex:g,scrolledToInitialItem:C},w,v,h,{listState:p,topItemsIndexes:S,..._},{scrollToIndex:y},x,{topItemCount:b},{groupCounts:I},N])=>(D(_.rangeChanged,N.scrollSeekRangeChanged),D(R(N.windowViewportRect,z(O=>O.visibleHeight)),w.viewportHeight),{data:e,defaultItemHeight:t,firstItemIndex:s,fixedItemHeight:o,gap:a,groupCounts:I,initialItemFinalLocationReached:m,initialTopMostItemIndex:g,scrolledToInitialItem:C,sizeRanges:i,topItemCount:b,topItemsIndexes:S,totalCount:f,...h,groupIndices:r,itemSize:l,listState:p,scrollToIndex:y,statefulTotalCount:d,trackItemSizes:u,..._,...N,...w,sizes:c,...v}),ve(yt,hn,Fe,wd,vd,Gt,fn,Sd,Cd,ea,Td));function jd(e,t){const s={},o={};let a=0;const r=e.length;for(;a<r;)o[e[a]]=1,a+=1;for(const l in t)Object.hasOwn(o,l)||(s[l]=t[l]);return s}const kn=typeof document<"u"?j.useLayoutEffect:j.useEffect;function ua(e,t,s){const o=Object.keys(t.required||{}),a=Object.keys(t.optional||{}),r=Object.keys(t.methods||{}),l=Object.keys(t.events||{}),i=j.createContext({});function c(v,h){v.propsReady&&Z(v.propsReady,!1);for(const p of o){const S=v[t.required[p]];Z(S,h[p])}for(const p of a)if(p in h){const S=v[t.optional[p]];Z(S,h[p])}v.propsReady&&Z(v.propsReady,!0)}function d(v){return r.reduce((h,p)=>(h[p]=S=>{const _=v[t.methods[p]];Z(_,S)},h),{})}function f(v){return l.reduce((h,p)=>(h[p]=Wu(v[t.events[p]]),h),{})}const u=j.forwardRef((v,h)=>{const{children:p,...S}=v,[_]=j.useState(()=>Fn(Vu(e),b=>{c(b,S)})),[y]=j.useState(Zs(f,_));kn(()=>{for(const b of l)b in S&&ce(y[b],S[b]);return()=>{Object.values(y).map(ks)}},[S,y,_]),kn(()=>{c(_,S)}),j.useImperativeHandle(h,Xs(d(_)));const x=s;return n.jsx(i.Provider,{value:_,children:s?n.jsx(x,{...jd([...o,...a,...l],S),children:p}):p})}),m=v=>{const h=j.useContext(i);return j.useCallback(p=>{Z(h[v],p)},[h,v])},g=v=>{const h=j.useContext(i)[v],p=j.useCallback(S=>ce(h,S),[h]);return j.useSyncExternalStore(p,()=>Ce(h),()=>Ce(h))},C=v=>{const h=j.useContext(i)[v],[p,S]=j.useState(Zs(Ce,h));return kn(()=>ce(h,_=>{_!==p&&S(Xs(_))}),[h,p]),p},w=j.version.startsWith("18")?g:C;return{Component:u,useEmitter:(v,h)=>{const p=j.useContext(i)[v];kn(()=>ce(p,h),[h,p])},useEmitterValue:w,usePublisher:m}}const da=j.createContext(void 0),ma=j.createContext(void 0),fa=typeof document<"u"?j.useLayoutEffect:j.useEffect;function Xn(e){return"self"in e}function Id(e){return"body"in e}function ha(e,t,s,o=Zt,a,r){const l=j.useRef(null),i=j.useRef(null),c=j.useRef(null),d=j.useCallback(m=>{let g,C,w;const v=m.target;if(Id(v)||Xn(v)){const p=Xn(v)?v:v.defaultView;w=r?p.scrollX:p.scrollY,g=r?p.document.documentElement.scrollWidth:p.document.documentElement.scrollHeight,C=r?p.innerWidth:p.innerHeight}else w=r?v.scrollLeft:v.scrollTop,g=r?v.scrollWidth:v.scrollHeight,C=r?v.offsetWidth:v.offsetHeight;const h=()=>{e({scrollHeight:g,scrollTop:Math.max(w,0),viewportHeight:C})};m.suppressFlushSync?h():Ga.flushSync(h),i.current!==null&&(w===i.current||w<=0||w===g-C)&&(i.current=null,t(!0),c.current&&(clearTimeout(c.current),c.current=null))},[e,t,r]);j.useEffect(()=>{const m=a||l.current;return o(a||l.current),d({suppressFlushSync:!0,target:m}),m.addEventListener("scroll",d,{passive:!0}),()=>{o(null),m.removeEventListener("scroll",d)}},[l,d,s,o,a]);function f(m){const g=l.current;if(!g||(r?"offsetWidth"in g&&g.offsetWidth===0:"offsetHeight"in g&&g.offsetHeight===0))return;const C=m.behavior==="smooth";let w,v,h;Xn(g)?(v=Math.max(It(g.document.documentElement,r?"width":"height"),r?g.document.documentElement.scrollWidth:g.document.documentElement.scrollHeight),w=r?g.innerWidth:g.innerHeight,h=r?window.scrollX:window.scrollY):(v=g[r?"scrollWidth":"scrollHeight"],w=It(g,r?"width":"height"),h=g[r?"scrollLeft":"scrollTop"]);const p=v-w;if(m.top=Math.ceil(Math.max(Math.min(p,m.top),0)),na(w,v)||m.top===h){e({scrollHeight:v,scrollTop:h,viewportHeight:w}),C&&t(!0);return}C?(i.current=m.top,c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{c.current=null,i.current=null,t(!0)},1e3)):i.current=null,r&&(m={behavior:m.behavior,left:m.top}),g.scrollTo(m)}function u(m){r&&(m={behavior:m.behavior,left:m.top}),l.current.scrollBy(m)}return{scrollByCallback:u,scrollerRef:l,scrollToCallback:f}}const Zn="-webkit-sticky",io="sticky",Hs=la(()=>{if(typeof document>"u")return io;const e=document.createElement("div");return e.style.position=Zn,e.style.position===Zn?Zn:io});function Ls(e){return e}const kd=re(()=>{const e=A(i=>`Item ${i}`),t=A(i=>`Group ${i}`),s=A({}),o=A(Ls),a=A("div"),r=A(Zt),l=(i,c=null)=>ze(R(s,z(d=>d[i]),ge()),c);return{components:s,computeItemKey:o,EmptyPlaceholder:l("EmptyPlaceholder"),FooterComponent:l("Footer"),GroupComponent:l("Group","div"),groupContent:t,HeaderComponent:l("Header"),HeaderFooterTag:a,ItemComponent:l("Item","div"),itemContent:e,ListComponent:l("List","div"),ScrollerComponent:l("Scroller","div"),scrollerRef:r,ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),TopItemListComponent:l("TopItemList")}}),Nd=re(([e,t])=>({...e,...t}),ve(ca,kd)),Rd=({height:e})=>n.jsx("div",{style:{height:e}}),Ed={overflowAnchor:"none",position:Hs(),zIndex:1},pa={overflowAnchor:"none"},Ad={...pa,display:"inline-block",height:"100%"},lo=j.memo(function({showTopList:e=!1}){const t=Y("listState"),s=tt("sizeRanges"),o=Y("useWindowScroll"),a=Y("customScrollParent"),r=tt("windowScrollContainerState"),l=tt("scrollContainerState"),i=a||o?r:l,c=Y("itemContent"),d=Y("context"),f=Y("groupContent"),u=Y("trackItemSizes"),m=Y("itemSize"),g=Y("log"),C=tt("gap"),w=Y("horizontalDirection"),{callbackRef:v}=Uu(s,m,u,e?Zt:i,g,C,a,w,Y("skipAnimationFrameInResizeObserver")),[h,p]=j.useState(0);zs("deviation",B=>{h!==B&&p(B)});const S=Y("EmptyPlaceholder"),_=Y("ScrollSeekPlaceholder")||Rd,y=Y("ListComponent"),x=Y("ItemComponent"),b=Y("GroupComponent"),I=Y("computeItemKey"),N=Y("isSeeking"),O=Y("groupIndices").length>0,E=Y("alignToBottom"),P=Y("initialItemFinalLocationReached"),M=e?{}:{boxSizing:"border-box",...w?{display:"inline-block",height:"100%",marginLeft:h!==0?h:E?"auto":0,paddingLeft:t.offsetTop,paddingRight:t.offsetBottom,whiteSpace:"nowrap"}:{marginTop:h!==0?h:E?"auto":0,paddingBottom:t.offsetBottom,paddingTop:t.offsetTop},...P?{}:{visibility:"hidden"}};return!e&&t.totalCount===0&&S?n.jsx(S,{...Le(S,d)}):n.jsx(y,{...Le(y,d),"data-testid":e?"virtuoso-top-item-list":"virtuoso-item-list",ref:v,style:M,children:(e?t.topItems:t.items).map(B=>{const $=B.originalIndex,F=I($+t.firstItemIndex,B.data,d);return N?T.createElement(_,{...Le(_,d),height:B.size,index:B.index,key:F,type:B.type||"item",...B.type==="group"?{}:{groupIndex:B.groupIndex}}):B.type==="group"?T.createElement(b,{...Le(b,d),"data-index":$,"data-item-index":B.index,"data-known-size":B.size,key:F,style:Ed},f(B.index,d)):T.createElement(x,{...Le(x,d),...Hd(x,B.data),"data-index":$,"data-item-group-index":B.groupIndex,"data-item-index":B.index,"data-known-size":B.size,key:F,style:w?Ad:pa},O?c(B.index,B.groupIndex,B.data,d):c(B.index,B.data,d))})})}),Od={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Md={outline:"none",overflowX:"auto",position:"relative"},qn=e=>({height:"100%",position:"absolute",top:0,width:"100%",...e?{display:"flex",flexDirection:"column"}:{}}),Bd={position:Hs(),top:0,width:"100%",zIndex:1};function Le(e,t){if(typeof e!="string")return{context:t}}function Hd(e,t){return{item:typeof e=="string"?void 0:t}}const Ld=j.memo(function(){const e=Y("HeaderComponent"),t=tt("headerHeight"),s=Y("HeaderFooterTag"),o=Vt(j.useMemo(()=>r=>{t(It(r,"height"))},[t]),!0,Y("skipAnimationFrameInResizeObserver")),a=Y("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...Le(e,a)})}):null}),zd=j.memo(function(){const e=Y("FooterComponent"),t=tt("footerHeight"),s=Y("HeaderFooterTag"),o=Vt(j.useMemo(()=>r=>{t(It(r,"height"))},[t]),!0,Y("skipAnimationFrameInResizeObserver")),a=Y("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...Le(e,a)})}):null});function ga({useEmitter:e,useEmitterValue:t,usePublisher:s}){return j.memo(function({children:o,style:a,context:r,...l}){const i=s("scrollContainerState"),c=t("ScrollerComponent"),d=s("smoothScrollTargetReached"),f=t("scrollerRef"),u=t("horizontalDirection")||!1,{scrollByCallback:m,scrollerRef:g,scrollToCallback:C}=ha(i,d,c,f,void 0,u);return e("scrollTo",C),e("scrollBy",m),n.jsx(c,{"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,ref:g,style:{...u?Md:Od,...a},tabIndex:0,...l,...Le(c,r),children:o})})}function va({useEmitter:e,useEmitterValue:t,usePublisher:s}){return j.memo(function({children:o,style:a,context:r,...l}){const i=s("windowScrollContainerState"),c=t("ScrollerComponent"),d=s("smoothScrollTargetReached"),f=t("totalListHeight"),u=t("deviation"),m=t("customScrollParent"),g=j.useRef(null),C=t("scrollerRef"),{scrollByCallback:w,scrollerRef:v,scrollToCallback:h}=ha(i,d,c,C,m);return fa(()=>{var p;return v.current=m||((p=g.current)==null?void 0:p.ownerDocument.defaultView),()=>{v.current=null}},[v,m]),e("windowScrollTo",h),e("scrollBy",w),n.jsx(c,{ref:g,"data-virtuoso-scroller":!0,style:{position:"relative",...a,...f!==0?{height:f+u}:{}},...l,...Le(c,r),children:o})})}const Dd=({children:e})=>{const t=j.useContext(da),s=tt("viewportHeight"),o=tt("fixedItemHeight"),a=Y("alignToBottom"),r=Y("horizontalDirection"),l=j.useMemo(()=>Wo(s,c=>It(c,r?"width":"height")),[s,r]),i=Vt(l,!0,Y("skipAnimationFrameInResizeObserver"));return j.useEffect(()=>{t&&(s(t.viewportHeight),o(t.itemHeight))},[t,s,o]),n.jsx("div",{"data-viewport-type":"element",ref:i,style:qn(a),children:e})},Pd=({children:e})=>{const t=j.useContext(da),s=tt("windowViewportRect"),o=tt("fixedItemHeight"),a=Y("customScrollParent"),r=Vo(s,a,Y("skipAnimationFrameInResizeObserver")),l=Y("alignToBottom");return j.useEffect(()=>{t&&(o(t.itemHeight),s({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:100}))},[t,s,o]),n.jsx("div",{"data-viewport-type":"window",ref:r,style:qn(l),children:e})},$d=({children:e})=>{const t=Y("TopItemListComponent")||"div",s=Y("headerHeight"),o={...Bd,marginTop:`${s}px`},a=Y("context");return n.jsx(t,{style:o,...Le(t,a),children:e})},Wd=j.memo(function(e){const t=Y("useWindowScroll"),s=Y("topItemsIndexes").length>0,o=Y("customScrollParent"),a=Y("context");return n.jsxs(o||t?Gd:Vd,{...e,context:a,children:[s&&n.jsx($d,{children:n.jsx(lo,{showTopList:!0})}),n.jsxs(o||t?Pd:Dd,{children:[n.jsx(Ld,{}),n.jsx(lo,{}),n.jsx(zd,{})]})]})}),{Component:Fd,useEmitter:zs,useEmitterValue:Y,usePublisher:tt}=ua(Nd,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",scrollIntoViewOnChange:"scrollIntoViewOnChange",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"HeaderFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",horizontalDirection:"horizontalDirection",skipAnimationFrameInResizeObserver:"skipAnimationFrameInResizeObserver"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Wd),Vd=ga({useEmitter:zs,useEmitterValue:Y,usePublisher:tt}),Gd=va({useEmitter:zs,useEmitterValue:Y,usePublisher:tt}),qd=Fd,Ud=re(()=>{const e=A(d=>n.jsxs("td",{children:["Item $",d]})),t=A(null),s=A(d=>n.jsxs("td",{colSpan:1e3,children:["Group ",d]})),o=A(null),a=A(null),r=A({}),l=A(Ls),i=A(Zt),c=(d,f=null)=>ze(R(r,z(u=>u[d]),ge()),f);return{components:r,computeItemKey:l,context:t,EmptyPlaceholder:c("EmptyPlaceholder"),FillerRow:c("FillerRow"),fixedFooterContent:a,fixedHeaderContent:o,itemContent:e,groupContent:s,ScrollerComponent:c("Scroller","div"),scrollerRef:i,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder"),TableBodyComponent:c("TableBody","tbody"),TableComponent:c("Table","table"),TableFooterComponent:c("TableFoot","tfoot"),TableHeadComponent:c("TableHead","thead"),TableRowComponent:c("TableRow","tr"),GroupComponent:c("Group","tr")}});ve(ca,Ud);Hs();const co={bottom:0,itemHeight:0,items:[],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},Yd={bottom:0,itemHeight:0,items:[{index:0}],itemWidth:0,offsetBottom:0,offsetTop:0,top:0},{ceil:uo,floor:zn,max:an,min:Qn,round:mo}=Math;function fo(e,t,s){return Array.from({length:t-e+1}).map((o,a)=>({data:s===null?null:s[a+e],index:a+e}))}function Kd(e){return{...Yd,items:e}}function Nn(e,t){return e&&e.width===t.width&&e.height===t.height}function Xd(e,t){return e&&e.column===t.column&&e.row===t.row}const Zd=re(([{increaseViewportBy:e,listBoundary:t,overscan:s,visibleRange:o},{footerHeight:a,headerHeight:r,scrollBy:l,scrollContainerState:i,scrollTo:c,scrollTop:d,smoothScrollTargetReached:f,viewportHeight:u},m,g,{didMount:C,propsReady:w},{customScrollParent:v,useWindowScroll:h,windowScrollContainerState:p,windowScrollTo:S,windowViewportRect:_},y])=>{const x=A(0),b=A(0),I=A(co),N=A({height:0,width:0}),O=A({height:0,width:0}),E=se(),P=se(),M=A(0),B=A(null),$=A({column:0,row:0}),F=se(),K=se(),te=A(!1),ie=A(0),le=A(!0),ke=A(!1),Ze=A(!1);ce(R(C,J(ie),U(([k,L])=>!!L)),()=>{Z(le,!1)}),ce(R(Ie(C,le,O,N,ie,ke),U(([k,L,Q,he,,de])=>k&&!L&&Q.height!==0&&he.height!==0&&!de)),([,,,,k])=>{Z(ke,!0),As(1,()=>{Z(E,k)}),ct(R(d),()=>{Z(t,[0,0]),Z(le,!0)})}),D(R(K,U(k=>k!=null&&k.scrollTop>0),gt(0)),b),ce(R(C,J(K),U(([,k])=>k!=null)),([,k])=>{k&&(Z(N,k.viewport),Z(O,k.item),Z($,k.gap),k.scrollTop>0&&(Z(te,!0),ct(R(d,Wt(1)),L=>{Z(te,!1)}),Z(c,{top:k.scrollTop})))}),D(R(N,z(({height:k})=>k)),u),D(R(Ie(G(N,Nn),G(O,Nn),G($,(k,L)=>k&&k.column===L.column&&k.row===L.row),G(d)),z(([k,L,Q,he])=>({gap:Q,item:L,scrollTop:he,viewport:k}))),F),D(R(Ie(G(x),o,G($,Xd),G(O,Nn),G(N,Nn),G(B),G(b),G(te),G(le),G(ie)),U(([,,,,,,,k])=>!k),z(([k,[L,Q],he,de,Ye,V,ot,,Et,Je])=>{const{column:dt,row:At}=he,{height:at,width:qt}=de,{width:vn}=Ye;if(ot===0&&(k===0||vn===0))return co;if(qt===0){const Cn=Os(Je,k),Mt=Cn+Math.max(ot-1,0);return Kd(fo(Cn,Mt,V))}const mt=xa(vn,qt,dt);let _t,ft;Et?L===0&&Q===0&&ot>0?(_t=0,ft=ot-1):(_t=mt*zn((L+At)/(at+At)),ft=mt*uo((Q+At)/(at+At))-1,ft=Qn(k-1,an(ft,mt-1)),_t=Qn(ft,an(0,_t))):(_t=0,ft=-1);const xn=fo(_t,ft,V),{bottom:yn,top:Ot}=ho(Ye,he,de,xn),wn=uo(k/mt),bn=wn*at+(wn-1)*At-yn;return{bottom:yn,itemHeight:at,items:xn,itemWidth:qt,offsetBottom:bn,offsetTop:Ot,top:Ot}})),I),D(R(B,U(k=>k!==null),z(k=>k.length)),x),D(R(Ie(N,O,I,$),U(([k,L,{items:Q}])=>Q.length>0&&L.height!==0&&k.height!==0),z(([k,L,{items:Q},he])=>{const{bottom:de,top:Ye}=ho(k,he,L,Q);return[Ye,de]}),ge(cn)),t);const _e=A(!1);D(R(d,J(_e),z(([k,L])=>L||k!==0)),_e);const Qe=Xe(R(Ie(I,x),U(([{items:k}])=>k.length>0),J(_e),U(([[k,L],Q])=>{const he=k.items[k.items.length-1].index===L-1;return(Q||k.bottom>0&&k.itemHeight>0&&k.offsetBottom===0&&k.items.length===L)&&he}),z(([[,k]])=>k-1),ge())),Ue=Xe(R(G(I),U(({items:k})=>k.length>0&&k[0].index===0),gt(0),ge())),Be=Xe(R(G(I),J(te),U(([{items:k},L])=>k.length>0&&!L),z(([{items:k}])=>({endIndex:k[k.length-1].index,startIndex:k[0].index})),ge(Xo),Ct(0)));D(Be,g.scrollSeekRangeChanged),D(R(E,J(N,O,x,$),z(([k,L,Q,he,de])=>{const Ye=ta(k),{align:V,behavior:ot,offset:Et}=Ye;let Je=Ye.index;Je==="LAST"&&(Je=he-1),Je=an(0,Je,Qn(he-1,Je));let dt=ms(L,de,Q,Je);return V==="end"?dt=mo(dt-L.height+Q.height):V==="center"&&(dt=mo(dt-L.height/2+Q.height/2)),Et&&(dt+=Et),{behavior:ot,top:dt}})),c);const He=ze(R(I,z(k=>k.offsetBottom+k.bottom)),0);return D(R(_,z(k=>({height:k.visibleHeight,width:k.visibleWidth}))),N),{customScrollParent:v,data:B,deviation:M,footerHeight:a,gap:$,headerHeight:r,increaseViewportBy:e,initialItemCount:b,itemDimensions:O,overscan:s,restoreStateFrom:K,scrollBy:l,scrollContainerState:i,scrollHeight:P,scrollTo:c,scrollToIndex:E,scrollTop:d,smoothScrollTargetReached:f,totalCount:x,useWindowScroll:h,viewportDimensions:N,windowScrollContainerState:p,windowScrollTo:S,windowViewportRect:_,...g,gridState:I,horizontalDirection:Ze,initialTopMostItemIndex:ie,totalListHeight:He,...m,endReached:Qe,propsReady:w,rangeChanged:Be,startReached:Ue,stateChanged:F,stateRestoreInProgress:te,...y}},ve(Ms,Fe,pn,ia,Rt,Bs,Nt));function xa(e,t,s){return an(1,zn((e+s)/(zn(t)+s)))}function ho(e,t,s,o){const{height:a}=s;if(a===void 0||o.length===0)return{bottom:0,top:0};const r=ms(e,t,s,o[0].index);return{bottom:ms(e,t,s,o[o.length-1].index)+a,top:r}}function ms(e,t,s,o){const a=xa(e.width,s.width,t.column),r=zn(o/a),l=r*s.height+an(0,r-1)*t.row;return l>0?l+t.row:l}const Qd=re(()=>{const e=A(u=>`Item ${u}`),t=A({}),s=A(null),o=A("virtuoso-grid-item"),a=A("virtuoso-grid-list"),r=A(Ls),l=A("div"),i=A(Zt),c=(u,m=null)=>ze(R(t,z(g=>g[u]),ge()),m),d=A(!1),f=A(!1);return D(G(f),d),{components:t,computeItemKey:r,context:s,FooterComponent:c("Footer"),HeaderComponent:c("Header"),headerFooterTag:l,itemClassName:o,ItemComponent:c("Item","div"),itemContent:e,listClassName:a,ListComponent:c("List","div"),readyStateChanged:d,reportReadyState:f,ScrollerComponent:c("Scroller","div"),scrollerRef:i,ScrollSeekPlaceholder:c("ScrollSeekPlaceholder","div")}}),Jd=re(([e,t])=>({...e,...t}),ve(Zd,Qd)),em=j.memo(function(){const e=xe("gridState"),t=xe("listClassName"),s=xe("itemClassName"),o=xe("itemContent"),a=xe("computeItemKey"),r=xe("isSeeking"),l=nt("scrollHeight"),i=xe("ItemComponent"),c=xe("ListComponent"),d=xe("ScrollSeekPlaceholder"),f=xe("context"),u=nt("itemDimensions"),m=nt("gap"),g=xe("log"),C=xe("stateRestoreInProgress"),w=nt("reportReadyState"),v=Vt(j.useMemo(()=>h=>{const p=h.parentElement.parentElement.scrollHeight;l(p);const S=h.firstChild;if(S){const{height:_,width:y}=S.getBoundingClientRect();u({height:_,width:y})}m({column:po("column-gap",getComputedStyle(h).columnGap,g),row:po("row-gap",getComputedStyle(h).rowGap,g)})},[l,u,m,g]),!0,!1);return fa(()=>{e.itemHeight>0&&e.itemWidth>0&&w(!0)},[e]),C?null:n.jsx(c,{className:t,ref:v,...Le(c,f),"data-testid":"virtuoso-item-list",style:{paddingBottom:e.offsetBottom,paddingTop:e.offsetTop},children:e.items.map(h=>{const p=a(h.index,h.data,f);return r?n.jsx(d,{...Le(d,f),height:e.itemHeight,index:h.index,width:e.itemWidth},p):T.createElement(i,{...Le(i,f),className:s,"data-index":h.index,key:p},o(h.index,h.data,f))})})}),tm=j.memo(function(){const e=xe("HeaderComponent"),t=nt("headerHeight"),s=xe("headerFooterTag"),o=Vt(j.useMemo(()=>r=>{t(It(r,"height"))},[t]),!0,!1),a=xe("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...Le(e,a)})}):null}),nm=j.memo(function(){const e=xe("FooterComponent"),t=nt("footerHeight"),s=xe("headerFooterTag"),o=Vt(j.useMemo(()=>r=>{t(It(r,"height"))},[t]),!0,!1),a=xe("context");return e?n.jsx(s,{ref:o,children:n.jsx(e,{...Le(e,a)})}):null}),sm=({children:e})=>{const t=j.useContext(ma),s=nt("itemDimensions"),o=nt("viewportDimensions"),a=Vt(j.useMemo(()=>r=>{o(r.getBoundingClientRect())},[o]),!0,!1);return j.useEffect(()=>{t&&(o({height:t.viewportHeight,width:t.viewportWidth}),s({height:t.itemHeight,width:t.itemWidth}))},[t,o,s]),n.jsx("div",{ref:a,style:qn(!1),children:e})},om=({children:e})=>{const t=j.useContext(ma),s=nt("windowViewportRect"),o=nt("itemDimensions"),a=xe("customScrollParent"),r=Vo(s,a,!1);return j.useEffect(()=>{t&&(o({height:t.itemHeight,width:t.itemWidth}),s({offsetTop:0,visibleHeight:t.viewportHeight,visibleWidth:t.viewportWidth}))},[t,s,o]),n.jsx("div",{ref:r,style:qn(!1),children:e})},am=j.memo(function({...e}){const t=xe("useWindowScroll"),s=xe("customScrollParent"),o=s||t?im:rm,a=s||t?om:sm,r=xe("context");return n.jsx(o,{...e,...Le(o,r),children:n.jsxs(a,{children:[n.jsx(tm,{}),n.jsx(em,{}),n.jsx(nm,{})]})})}),{useEmitter:ya,useEmitterValue:xe,usePublisher:nt}=ua(Jd,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex",increaseViewportBy:"increaseViewportBy"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged",readyStateChanged:"readyStateChanged"}},am),rm=ga({useEmitter:ya,useEmitterValue:xe,usePublisher:nt}),im=va({useEmitter:ya,useEmitterValue:xe,usePublisher:nt});function po(e,t,s){return t!=="normal"&&!(t!=null&&t.endsWith("px"))&&s(`${e} was not resolved to pixel value correctly`,t,Ge.WARN),t==="normal"?0:parseInt(t??"0",10)}const wa=Kt({status:"idle"}),lm=Kt("random"),ba=Kt(new Set),Ca=Kt(""),cm=Kt(()=>[...new Set(Ao.map(t=>t.location))].map(t=>({id:t,name:t})).sort((t,s)=>t.name.localeCompare(s.name))),um=(e,t)=>{if(!t)return e;const s=t.toLowerCase();return e.filter(o=>o.name.toLowerCase().includes(s))},dm=Kt(e=>{const t=e(Ca),s=e(cm),o=e(Oo),a=e(Mo);if(!o||!a)return[];const r=s.filter(l=>{const i=cr(l.name);return i?.groupId===a&&i?.unitId===o});return um(r,t)});function mm(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}const _a=j.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),gn=()=>{const e=j.useContext(_a);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};mm(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function fm(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function hm(){return Ds(/^Mac/)}function pm(){return Ds(/^iPhone/)}function go(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function gm(){return Ds(/^iPad/)||hm()&&navigator.maxTouchPoints>1}function Sa(){return pm()||gm()}function Ds(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const vm=24,xm=typeof window<"u"?T.useLayoutEffect:T.useEffect;function vo(...e){return(...t)=>{for(let s of e)typeof s=="function"&&s(...t)}}const Jn=typeof document<"u"&&window.visualViewport;function xo(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function Ta(e){for(xo(e)&&(e=e.parentElement);e&&!xo(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const ym=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Rn=0,es;function wm(e={}){let{isDisabled:t}=e;xm(()=>{if(!t)return Rn++,Rn===1&&Sa()&&(es=bm()),()=>{Rn--,Rn===0&&es?.()}},[t])}function bm(){let e,t=0,s=u=>{e=Ta(u.target),!(e===document.documentElement&&e===document.body)&&(t=u.changedTouches[0].pageY)},o=u=>{if(!e||e===document.documentElement||e===document.body){u.preventDefault();return}let m=u.changedTouches[0].pageY,g=e.scrollTop,C=e.scrollHeight-e.clientHeight;C!==0&&((g<=0&&m>t||g>=C&&m<t)&&u.preventDefault(),t=m)},a=u=>{let m=u.target;fs(m)&&m!==document.activeElement&&(u.preventDefault(),m.style.transform="translateY(-2000px)",m.focus(),requestAnimationFrame(()=>{m.style.transform=""}))},r=u=>{let m=u.target;fs(m)&&(m.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{m.style.transform="",Jn&&(Jn.height<window.innerHeight?requestAnimationFrame(()=>{yo(m)}):Jn.addEventListener("resize",()=>yo(m),{once:!0}))}))},l=()=>{window.scrollTo(0,0)},i=window.pageXOffset,c=window.pageYOffset,d=vo(Cm(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let f=vo(en(document,"touchstart",s,{passive:!1,capture:!0}),en(document,"touchmove",o,{passive:!1,capture:!0}),en(document,"touchend",a,{passive:!1,capture:!0}),en(document,"focus",r,!0),en(window,"scroll",l));return()=>{d(),f(),window.scrollTo(i,c)}}function Cm(e,t,s){let o=e.style[t];return e.style[t]=s,()=>{e.style[t]=o}}function en(e,t,s,o){return e.addEventListener(t,s,o),()=>{e.removeEventListener(t,s,o)}}function yo(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let s=Ta(e);if(s!==document.documentElement&&s!==document.body&&s!==e){let o=s.getBoundingClientRect().top,a=e.getBoundingClientRect().top,r=e.getBoundingClientRect().bottom;const l=s.getBoundingClientRect().bottom+vm;r>l&&(s.scrollTop+=a-o)}e=s.parentElement}}function fs(e){return e instanceof HTMLInputElement&&!ym.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function _m(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function Sm(...e){return t=>e.forEach(s=>_m(s,t))}function ja(...e){return T.useCallback(Sm(...e),e)}const Ia=new WeakMap;function Re(e,t,s=!1){if(!e||!(e instanceof HTMLElement))return;let o={};Object.entries(t).forEach(([a,r])=>{if(a.startsWith("--")){e.style.setProperty(a,r);return}o[a]=e.style[a],e.style[a]=r}),!s&&Ia.set(e,o)}function Tm(e,t){if(!e||!(e instanceof HTMLElement))return;let s=Ia.get(e);s&&(e.style[t]=s[t])}const je=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function En(e,t){if(!e)return null;const s=window.getComputedStyle(e),o=s.transform||s.webkitTransform||s.mozTransform;let a=o.match(/^matrix3d\((.+)\)$/);return a?parseFloat(a[1].split(", ")[je(t)?13:12]):(a=o.match(/^matrix\((.+)\)$/),a?parseFloat(a[1].split(", ")[je(t)?5:4]):null)}function jm(e){return 8*(Math.log(e+1)-2)}function ts(e,t){if(!e)return()=>{};const s=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=s}}function Im(...e){return(...t)=>{for(const s of e)typeof s=="function"&&s(...t)}}const ye={DURATION:.5,EASE:[.32,.72,0,1]},ka=.4,km=.25,Nm=100,Na=8,Lt=16,hs=26,ns="vaul-dragging";function Ra(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),j.useMemo(()=>(...s)=>t.current==null?void 0:t.current.call(t,...s),[])}function Rm({defaultProp:e,onChange:t}){const s=j.useState(e),[o]=s,a=j.useRef(o),r=Ra(t);return j.useEffect(()=>{a.current!==o&&(r(o),a.current=o)},[o,a,r]),s}function Ea({prop:e,defaultProp:t,onChange:s=()=>{}}){const[o,a]=Rm({defaultProp:t,onChange:s}),r=e!==void 0,l=r?e:o,i=Ra(s),c=j.useCallback(d=>{if(r){const u=typeof d=="function"?d(e):d;u!==e&&i(u)}else a(d)},[r,e,a,i]);return[l,c]}function Em({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:s,drawerRef:o,overlayRef:a,fadeFromIndex:r,onSnapPointChange:l,direction:i="bottom",container:c,snapToSequentialPoint:d}){const[f,u]=Ea({prop:e,defaultProp:s?.[0],onChange:t}),[m,g]=j.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);j.useEffect(()=>{function b(){g({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const C=j.useMemo(()=>f===s?.[s.length-1]||null,[s,f]),w=j.useMemo(()=>{var b;return(b=s?.findIndex(I=>I===f))!=null?b:null},[s,f]),v=s&&s.length>0&&(r||r===0)&&!Number.isNaN(r)&&s[r]===f||!s,h=j.useMemo(()=>{const b=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var I;return(I=s?.map(N=>{const O=typeof N=="string";let E=0;if(O&&(E=parseInt(N,10)),je(i)){const M=O?E:m?N*b.height:0;return m?i==="bottom"?b.height-M:-b.height+M:M}const P=O?E:m?N*b.width:0;return m?i==="right"?b.width-P:-b.width+P:P}))!=null?I:[]},[s,m,c]),p=j.useMemo(()=>w!==null?h?.[w]:null,[h,w]),S=j.useCallback(b=>{var I;const N=(I=h?.findIndex(O=>O===b))!=null?I:null;l(N),Re(o.current,{transition:`transform ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,transform:je(i)?`translate3d(0, ${b}px, 0)`:`translate3d(${b}px, 0, 0)`}),h&&N!==h.length-1&&r!==void 0&&N!==r&&N<r?Re(a.current,{transition:`opacity ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,opacity:"0"}):Re(a.current,{transition:`opacity ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,opacity:"1"}),u(s?.[Math.max(N,0)])},[o.current,s,h,r,a,u]);j.useEffect(()=>{if(f||e){var b;const I=(b=s?.findIndex(N=>N===e||N===f))!=null?b:-1;h&&I!==-1&&typeof h[I]=="number"&&S(h[I])}},[f,e,s,h,S]);function _({draggedDistance:b,closeDrawer:I,velocity:N,dismissible:O}){if(r===void 0)return;const E=i==="bottom"||i==="right"?(p??0)-b:(p??0)+b,P=w===r-1,M=w===0,B=b>0;if(P&&Re(a.current,{transition:`opacity ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`}),!d&&N>2&&!B){O?I():S(h[0]);return}if(!d&&N>2&&B&&h&&s){S(h[s.length-1]);return}const $=h?.reduce((K,te)=>typeof K!="number"||typeof te!="number"?K:Math.abs(te-E)<Math.abs(K-E)?te:K),F=je(i)?window.innerHeight:window.innerWidth;if(N>ka&&Math.abs(b)<F*.4){const K=B?1:-1;if(K>0&&C&&s){S(h[s.length-1]);return}if(M&&K<0&&O&&I(),w===null)return;S(h[w+K]);return}S($)}function y({draggedDistance:b}){if(p===null)return;const I=i==="bottom"||i==="right"?p-b:p+b;(i==="bottom"||i==="right")&&I<h[h.length-1]||(i==="top"||i==="left")&&I>h[h.length-1]||Re(o.current,{transform:je(i)?`translate3d(0, ${I}px, 0)`:`translate3d(${I}px, 0, 0)`})}function x(b,I){if(!s||typeof w!="number"||!h||r===void 0)return null;const N=w===r-1;if(w>=r&&I)return 0;if(N&&!I)return 1;if(!v&&!N)return null;const E=N?w+1:w-1,P=N?h[E]-h[E-1]:h[E+1]-h[E],M=b/Math.abs(P);return N?1-M:M}return{isLastSnapPoint:C,activeSnapPoint:f,shouldFade:v,getPercentageDragged:x,setActiveSnapPoint:u,activeSnapPointIndex:w,onRelease:_,onDrag:y,snapPointsOffset:h}}const Am=()=>()=>{};function Om(){const{direction:e,isOpen:t,shouldScaleBackground:s,setBackgroundColorOnScale:o,noBodyStyles:a}=gn(),r=j.useRef(null),l=T.useMemo(()=>document.body.style.backgroundColor,[]);function i(){return(window.innerWidth-hs)/window.innerWidth}j.useEffect(()=>{if(t&&s){r.current&&clearTimeout(r.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;Im(o&&!a?ts(document.body,{background:"black"}):Am,ts(c,{transformOrigin:je(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${ye.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ye.EASE.join(",")})`}));const d=ts(c,{borderRadius:`${Na}px`,overflow:"hidden",...je(e)?{transform:`scale(${i()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${i()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{d(),r.current=window.setTimeout(()=>{l?document.body.style.background=l:document.body.style.removeProperty("background")},ye.DURATION*1e3)}}},[t,s,l])}let tn=null;function Mm({isOpen:e,modal:t,nested:s,hasBeenOpened:o,preventScrollRestoration:a,noBodyStyles:r}){const[l,i]=j.useState(()=>typeof window<"u"?window.location.href:""),c=j.useRef(0),d=j.useCallback(()=>{if(go()&&tn===null&&e&&!r){tn={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:u,innerHeight:m}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-u}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const g=m-window.innerHeight;g&&c.current>=m&&(document.body.style.top=`${-(c.current+g)}px`)}),300)}},[e]),f=j.useCallback(()=>{if(go()&&tn!==null&&!r){const u=-parseInt(document.body.style.top,10),m=-parseInt(document.body.style.left,10);Object.assign(document.body.style,tn),window.requestAnimationFrame(()=>{if(a&&l!==window.location.href){i(window.location.href);return}window.scrollTo(m,u)}),tn=null}},[l]);return j.useEffect(()=>{function u(){c.current=window.scrollY}return u(),window.addEventListener("scroll",u),()=>{window.removeEventListener("scroll",u)}},[]),j.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||f()}},[t,f]),j.useEffect(()=>{s||!o||(e?(!window.matchMedia("(display-mode: standalone)").matches&&d(),t||window.setTimeout(()=>{f()},500)):f())},[e,o,l,t,s,d,f]),{restorePositionSetting:f}}function Bm({open:e,onOpenChange:t,children:s,onDrag:o,onRelease:a,snapPoints:r,shouldScaleBackground:l=!1,setBackgroundColorOnScale:i=!0,closeThreshold:c=km,scrollLockTimeout:d=Nm,dismissible:f=!0,handleOnly:u=!1,fadeFromIndex:m=r&&r.length-1,activeSnapPoint:g,setActiveSnapPoint:C,fixed:w,modal:v=!0,onClose:h,nested:p,noBodyStyles:S=!1,direction:_="bottom",defaultOpen:y=!1,disablePreventScroll:x=!0,snapToSequentialPoint:b=!1,preventScrollRestoration:I=!1,repositionInputs:N=!0,onAnimationEnd:O,container:E,autoFocus:P=!1}){var M,B;const[$=!1,F]=Ea({defaultProp:y,prop:e,onChange:q=>{t?.(q),!q&&!p&&yn(),setTimeout(()=>{O?.(q)},ye.DURATION*1e3),q&&!v&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),q||(document.body.style.pointerEvents="auto")}}),[K,te]=j.useState(!1),[ie,le]=j.useState(!1),[ke,Ze]=j.useState(!1),_e=j.useRef(null),Qe=j.useRef(null),Ue=j.useRef(null),Be=j.useRef(null),He=j.useRef(null),k=j.useRef(!1),L=j.useRef(null),Q=j.useRef(0),he=j.useRef(!1),de=j.useRef(!y),Ye=j.useRef(0),V=j.useRef(null),ot=j.useRef(((M=V.current)==null?void 0:M.getBoundingClientRect().height)||0),Et=j.useRef(((B=V.current)==null?void 0:B.getBoundingClientRect().width)||0),Je=j.useRef(0),dt=j.useCallback(q=>{r&&q===mt.length-1&&(Qe.current=new Date)},[]),{activeSnapPoint:At,activeSnapPointIndex:at,setActiveSnapPoint:qt,onRelease:vn,snapPointsOffset:mt,onDrag:_t,shouldFade:ft,getPercentageDragged:xn}=Em({snapPoints:r,activeSnapPointProp:g,setActiveSnapPointProp:C,drawerRef:V,fadeFromIndex:m,overlayRef:_e,onSnapPointChange:dt,direction:_,container:E,snapToSequentialPoint:b});wm({isDisabled:!$||ie||!v||ke||!K||!N||!x});const{restorePositionSetting:yn}=Mm({isOpen:$,modal:v,nested:p??!1,hasBeenOpened:K,preventScrollRestoration:I,noBodyStyles:S});function Ot(){return(window.innerWidth-hs)/window.innerWidth}function wn(q){var ue,pe;!f&&!r||V.current&&!V.current.contains(q.target)||(ot.current=((ue=V.current)==null?void 0:ue.getBoundingClientRect().height)||0,Et.current=((pe=V.current)==null?void 0:pe.getBoundingClientRect().width)||0,le(!0),Ue.current=new Date,Sa()&&window.addEventListener("touchend",()=>k.current=!1,{once:!0}),q.target.setPointerCapture(q.pointerId),Q.current=je(_)?q.pageY:q.pageX)}function bn(q,ue){var pe;let ae=q;const be=(pe=window.getSelection())==null?void 0:pe.toString(),Ve=V.current?En(V.current,_):null,De=new Date;if(ae.tagName==="SELECT"||ae.hasAttribute("data-vaul-no-drag")||ae.closest("[data-vaul-no-drag]"))return!1;if(_==="right"||_==="left")return!0;if(Qe.current&&De.getTime()-Qe.current.getTime()<500)return!1;if(Ve!==null&&(_==="bottom"?Ve>0:Ve<0))return!0;if(be&&be.length>0)return!1;if(He.current&&De.getTime()-He.current.getTime()<d&&Ve===0||ue)return He.current=De,!1;for(;ae;){if(ae.scrollHeight>ae.clientHeight){if(ae.scrollTop!==0)return He.current=new Date,!1;if(ae.getAttribute("role")==="dialog")return!0}ae=ae.parentNode}return!0}function Cn(q){if(V.current&&ie){const ue=_==="bottom"||_==="right"?1:-1,pe=(Q.current-(je(_)?q.pageY:q.pageX))*ue,ae=pe>0,be=r&&!f&&!ae;if(be&&at===0)return;const Ve=Math.abs(pe),De=document.querySelector("[data-vaul-drawer-wrapper]"),St=_==="bottom"||_==="top"?ot.current:Et.current;let rt=Ve/St;const Bt=xn(Ve,ae);if(Bt!==null&&(rt=Bt),be&&rt>=1||!k.current&&!bn(q.target,ae))return;if(V.current.classList.add(ns),k.current=!0,Re(V.current,{transition:"none"}),Re(_e.current,{transition:"none"}),r&&_t({draggedDistance:pe}),ae&&!r){const ht=jm(pe),_n=Math.min(ht*-1,0)*ue;Re(V.current,{transform:je(_)?`translate3d(0, ${_n}px, 0)`:`translate3d(${_n}px, 0, 0)`});return}const Tt=1-rt;if((ft||m&&at===m-1)&&(o?.(q,rt),Re(_e.current,{opacity:`${Tt}`,transition:"none"},!0)),De&&_e.current&&l){const ht=Math.min(Ot()+rt*(1-Ot()),1),_n=8-rt*8,$s=Math.max(0,14-rt*14);Re(De,{borderRadius:`${_n}px`,transform:je(_)?`scale(${ht}) translate3d(0, ${$s}px, 0)`:`scale(${ht}) translate3d(${$s}px, 0, 0)`,transition:"none"},!0)}if(!r){const ht=Ve*ue;Re(V.current,{transform:je(_)?`translate3d(0, ${ht}px, 0)`:`translate3d(${ht}px, 0, 0)`})}}}j.useEffect(()=>{window.requestAnimationFrame(()=>{de.current=!0})},[]),j.useEffect(()=>{var q;function ue(){if(!V.current||!N)return;const pe=document.activeElement;if(fs(pe)||he.current){var ae;const be=((ae=window.visualViewport)==null?void 0:ae.height)||0,Ve=window.innerHeight;let De=Ve-be;const St=V.current.getBoundingClientRect().height||0,rt=St>Ve*.8;Je.current||(Je.current=St);const Bt=V.current.getBoundingClientRect().top;if(Math.abs(Ye.current-De)>60&&(he.current=!he.current),r&&r.length>0&&mt&&at){const Tt=mt[at]||0;De+=Tt}if(Ye.current=De,St>be||he.current){const Tt=V.current.getBoundingClientRect().height;let ht=Tt;Tt>be&&(ht=be-(rt?Bt:hs)),w?V.current.style.height=`${Tt-Math.max(De,0)}px`:V.current.style.height=`${Math.max(ht,be-Bt)}px`}else fm()||(V.current.style.height=`${Je.current}px`);r&&r.length>0&&!he.current?V.current.style.bottom="0px":V.current.style.bottom=`${Math.max(De,0)}px`}}return(q=window.visualViewport)==null||q.addEventListener("resize",ue),()=>{var pe;return(pe=window.visualViewport)==null?void 0:pe.removeEventListener("resize",ue)}},[at,r,mt]);function Mt(q){Ha(),h?.(),q||F(!1),setTimeout(()=>{r&&qt(r[0])},ye.DURATION*1e3)}function Ps(){if(!V.current)return;const q=document.querySelector("[data-vaul-drawer-wrapper]"),ue=En(V.current,_);Re(V.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`}),Re(_e.current,{transition:`opacity ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,opacity:"1"}),l&&ue&&ue>0&&$&&Re(q,{borderRadius:`${Na}px`,overflow:"hidden",...je(_)?{transform:`scale(${Ot()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ot()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${ye.DURATION}s`,transitionTimingFunction:`cubic-bezier(${ye.EASE.join(",")})`},!0)}function Ha(){!ie||!V.current||(V.current.classList.remove(ns),k.current=!1,le(!1),Be.current=new Date)}function La(q){if(!ie||!V.current)return;V.current.classList.remove(ns),k.current=!1,le(!1),Be.current=new Date;const ue=En(V.current,_);if(!q||!bn(q.target,!1)||!ue||Number.isNaN(ue)||Ue.current===null)return;const pe=Be.current.getTime()-Ue.current.getTime(),ae=Q.current-(je(_)?q.pageY:q.pageX),be=Math.abs(ae)/pe;if(be>.05&&(Ze(!0),setTimeout(()=>{Ze(!1)},200)),r){vn({draggedDistance:ae*(_==="bottom"||_==="right"?1:-1),closeDrawer:Mt,velocity:be,dismissible:f}),a?.(q,!0);return}if(_==="bottom"||_==="right"?ae>0:ae<0){Ps(),a?.(q,!0);return}if(be>ka){Mt(),a?.(q,!1);return}var Ve;const De=Math.min((Ve=V.current.getBoundingClientRect().height)!=null?Ve:0,window.innerHeight);var St;const rt=Math.min((St=V.current.getBoundingClientRect().width)!=null?St:0,window.innerWidth),Bt=_==="left"||_==="right";if(Math.abs(ue)>=(Bt?rt:De)*c){Mt(),a?.(q,!1);return}a?.(q,!0),Ps()}j.useEffect(()=>($&&(Re(document.documentElement,{scrollBehavior:"auto"}),Qe.current=new Date),()=>{Tm(document.documentElement,"scrollBehavior")}),[$]);function za(q){const ue=q?(window.innerWidth-Lt)/window.innerWidth:1,pe=q?-Lt:0;L.current&&window.clearTimeout(L.current),Re(V.current,{transition:`transform ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,transform:je(_)?`scale(${ue}) translate3d(0, ${pe}px, 0)`:`scale(${ue}) translate3d(${pe}px, 0, 0)`}),!q&&V.current&&(L.current=setTimeout(()=>{const ae=En(V.current,_);Re(V.current,{transition:"none",transform:je(_)?`translate3d(0, ${ae}px, 0)`:`translate3d(${ae}px, 0, 0)`})},500))}function Da(q,ue){if(ue<0)return;const pe=(window.innerWidth-Lt)/window.innerWidth,ae=pe+ue*(1-pe),be=-Lt+ue*Lt;Re(V.current,{transform:je(_)?`scale(${ae}) translate3d(0, ${be}px, 0)`:`scale(${ae}) translate3d(${be}px, 0, 0)`,transition:"none"})}function Pa(q,ue){const pe=je(_)?window.innerHeight:window.innerWidth,ae=ue?(pe-Lt)/pe:1,be=ue?-Lt:0;ue&&Re(V.current,{transition:`transform ${ye.DURATION}s cubic-bezier(${ye.EASE.join(",")})`,transform:je(_)?`scale(${ae}) translate3d(0, ${be}px, 0)`:`scale(${ae}) translate3d(${be}px, 0, 0)`})}return j.useEffect(()=>{v||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[v]),j.createElement(qa,{defaultOpen:y,onOpenChange:q=>{!f&&!q||(q?te(!0):Mt(!0),F(q))},open:$},j.createElement(_a.Provider,{value:{activeSnapPoint:At,snapPoints:r,setActiveSnapPoint:qt,drawerRef:V,overlayRef:_e,onOpenChange:t,onPress:wn,onRelease:La,onDrag:Cn,dismissible:f,shouldAnimate:de,handleOnly:u,isOpen:$,isDragging:ie,shouldFade:ft,closeDrawer:Mt,onNestedDrag:Da,onNestedOpenChange:za,onNestedRelease:Pa,keyboardIsOpen:he,modal:v,snapPointsOffset:mt,activeSnapPointIndex:at,direction:_,shouldScaleBackground:l,setBackgroundColorOnScale:i,noBodyStyles:S,container:E,autoFocus:P}},s))}const Aa=j.forwardRef(function({...e},t){const{overlayRef:s,snapPoints:o,onRelease:a,shouldFade:r,isOpen:l,modal:i,shouldAnimate:c}=gn(),d=ja(t,s),f=o&&o.length>0;if(!i)return null;const u=j.useCallback(m=>a(m),[a]);return j.createElement(Ya,{onMouseUp:u,ref:d,"data-vaul-overlay":"","data-vaul-snap-points":l&&f?"true":"false","data-vaul-snap-points-overlay":l&&r?"true":"false","data-vaul-animate":c?.current?"true":"false",...e})});Aa.displayName="Drawer.Overlay";const Oa=j.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:s,...o},a){const{drawerRef:r,onPress:l,onRelease:i,onDrag:c,keyboardIsOpen:d,snapPointsOffset:f,activeSnapPointIndex:u,modal:m,isOpen:g,direction:C,snapPoints:w,container:v,handleOnly:h,shouldAnimate:p,autoFocus:S}=gn(),[_,y]=j.useState(!1),x=ja(a,r),b=j.useRef(null),I=j.useRef(null),N=j.useRef(!1),O=w&&w.length>0;Om();const E=(M,B,$=0)=>{if(N.current)return!0;const F=Math.abs(M.y),K=Math.abs(M.x),te=K>F,ie=["bottom","right"].includes(B)?1:-1;if(B==="left"||B==="right"){if(!(M.x*ie<0)&&K>=0&&K<=$)return te}else if(!(M.y*ie<0)&&F>=0&&F<=$)return!te;return N.current=!0,!0};j.useEffect(()=>{O&&window.requestAnimationFrame(()=>{y(!0)})},[]);function P(M){b.current=null,N.current=!1,i(M)}return j.createElement(Ka,{"data-vaul-drawer-direction":C,"data-vaul-drawer":"","data-vaul-delayed-snap-points":_?"true":"false","data-vaul-snap-points":g&&O?"true":"false","data-vaul-custom-container":v?"true":"false","data-vaul-animate":p?.current?"true":"false",...o,ref:x,style:f&&f.length>0?{"--snap-point-height":`${f[u??0]}px`,...t}:t,onPointerDown:M=>{h||(o.onPointerDown==null||o.onPointerDown.call(o,M),b.current={x:M.pageX,y:M.pageY},l(M))},onOpenAutoFocus:M=>{s?.(M),S||M.preventDefault()},onPointerDownOutside:M=>{if(e?.(M),!m||M.defaultPrevented){M.preventDefault();return}d.current&&(d.current=!1)},onFocusOutside:M=>{if(!m){M.preventDefault();return}},onPointerMove:M=>{if(I.current=M,h||(o.onPointerMove==null||o.onPointerMove.call(o,M),!b.current))return;const B=M.pageY-b.current.y,$=M.pageX-b.current.x,F=M.pointerType==="touch"?10:2;E({x:$,y:B},C,F)?c(M):(Math.abs($)>F||Math.abs(B)>F)&&(b.current=null)},onPointerUp:M=>{o.onPointerUp==null||o.onPointerUp.call(o,M),b.current=null,N.current=!1,i(M)},onPointerOut:M=>{o.onPointerOut==null||o.onPointerOut.call(o,M),P(I.current)},onContextMenu:M=>{o.onContextMenu==null||o.onContextMenu.call(o,M),I.current&&P(I.current)}})});Oa.displayName="Drawer.Content";const Hm=250,Lm=120,zm=j.forwardRef(function({preventCycle:e=!1,children:t,...s},o){const{closeDrawer:a,isDragging:r,snapPoints:l,activeSnapPoint:i,setActiveSnapPoint:c,dismissible:d,handleOnly:f,isOpen:u,onPress:m,onDrag:g}=gn(),C=j.useRef(null),w=j.useRef(!1);function v(){if(w.current){S();return}window.setTimeout(()=>{h()},Lm)}function h(){if(r||e||w.current){S();return}if(S(),!l||l.length===0){d||a();return}if(i===l[l.length-1]&&d){a();return}const y=l.findIndex(b=>b===i);if(y===-1)return;const x=l[y+1];c(x)}function p(){C.current=window.setTimeout(()=>{w.current=!0},Hm)}function S(){C.current&&window.clearTimeout(C.current),w.current=!1}return j.createElement("div",{onClick:v,onPointerCancel:S,onPointerDown:_=>{f&&m(_),p()},onPointerMove:_=>{f&&g(_)},ref:o,"data-vaul-drawer-visible":u?"true":"false","data-vaul-handle":"","aria-hidden":"true",...s},j.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});zm.displayName="Drawer.Handle";function Dm(e){const t=gn(),{container:s=t.container,...o}=e;return j.createElement(Ua,{container:s,...o})}const jt={Root:Bm,Content:Oa,Overlay:Aa,Portal:Dm},Pm="_overlay_tknpz_7",$m="_contentWrapper_tknpz_25",Wm="_content_tknpz_25",Fm="_handleContainer_tknpz_83",Vm="_handle_tknpz_83",Gm="_iconContainer_tknpz_115",qm="_nfcIcon_tknpz_133",Um="_title_tknpz_183",Ym="_description_tknpz_197",Km="_buttonGroup_tknpz_213",Xm="_cancelButton_tknpz_229",Zm="_actionButton_tknpz_239",Qm="_devToolsContainer_tknpz_249",Jm="_devToolsLabel_tknpz_269",ef="_devButtons_tknpz_287",Me={overlay:Pm,contentWrapper:$m,content:Wm,handleContainer:Fm,handle:Vm,iconContainer:Gm,nfcIcon:qm,title:Um,description:Ym,buttonGroup:Km,cancelButton:Xm,actionButton:Zm,devToolsContainer:Qm,devToolsLabel:Jm,devButtons:ef},tf=()=>{const[e,t]=oe(wa),s=ne(ba),[o]=oe(lm),{trigger:a}=qe(),[r,l]=T.useState(!1);T.useEffect(()=>{e.status!=="idle"&&e.status!=="selecting"?l(!0):l(!1)},[e.status]);const i=u=>{l(u),u||setTimeout(()=>{e.status!=="idle"&&t({status:"idle"})},300)},c=u=>{a("light"),t(m=>m.status==="ready"||m.status==="error"?{status:"writing",roomId:m.roomId,roomName:m.roomName}:m),setTimeout(()=>{if(u==="success"){if("roomId"in e){const{roomId:m,roomName:g}=e;t({status:"success",roomId:m,roomName:g}),s(C=>new Set(C).add(m)),a("success")}}else if(u==="net-error"){if("roomId"in e){const{roomId:m,roomName:g}=e;t({status:"error",roomId:m,roomName:g,error:{code:"WRITE_FAILED",message:"Network connection lost"}}),a("error")}}else if(u==="locked-error"&&"roomId"in e){const{roomId:m,roomName:g}=e;t({status:"error",roomId:m,roomName:g,error:{code:"TAG_LOCKED",message:"Tag is write-locked"}}),a("error")}},500)};if(T.useEffect(()=>{let u;return e.status==="writing"&&(u=setTimeout(()=>{const m=o==="forceSuccess"||o==="random"&&Math.random()>.2;if("roomId"in e){const{roomId:g,roomName:C}=e;m?(t({status:"success",roomId:g,roomName:C}),s(w=>new Set(w).add(g)),a("success")):(t({status:"error",roomId:g,roomName:C,error:{code:"WRITE_FAILED",message:"Tag connection lost"}}),a("error"))}},2e3)),e.status==="success"&&(u=setTimeout(()=>{l(!1),t({status:"idle"})},1500)),()=>clearTimeout(u)},[e,o,t,s,a]),e.status==="idle"||e.status==="selecting")return null;const f=(()=>{switch(e.status){case"ready":return{icon:"nfc",title:"Ready to Write",desc:`Hold device near tag to provision ${"roomName"in e?e.roomName:"room"}.`};case"writing":return{icon:"nfc",title:"Writing...",desc:"Keep device steady."};case"success":return{icon:"check_circle",title:"Success",desc:"Tag written successfully."};case"error":return{icon:"error",title:"Write Failed",desc:"error"in e?e.error.message:"Unknown error"};default:return{icon:"nfc",title:"",desc:""}}})();return n.jsx(jt.Root,{open:r,onOpenChange:i,dismissible:e.status!=="writing",children:n.jsxs(jt.Portal,{children:[n.jsx(jt.Overlay,{className:Me.overlay}),n.jsx(jt.Content,{className:Me.contentWrapper,children:n.jsxs("div",{className:Me.content,children:[n.jsx("div",{className:Me.handleContainer,children:n.jsx("div",{className:Me.handle})}),n.jsx("div",{className:Me.iconContainer,children:n.jsx("span",{className:`material-symbols-rounded ${Me.nfcIcon}`,"data-state":e.status,children:f.icon})}),n.jsx("h3",{className:Me.title,children:f.title}),n.jsx("p",{className:Me.description,children:f.desc}),e.status==="error"&&n.jsxs("div",{className:Me.buttonGroup,children:[n.jsx(me,{variant:"primary",onClick:()=>t({status:"writing",roomId:e.roomId,roomName:e.roomName}),className:Me.actionButton,children:"Retry"}),n.jsx(me,{variant:"secondary",onClick:()=>l(!1),className:Me.actionButton,children:"Cancel"})]}),e.status==="ready"&&n.jsx("div",{className:Me.buttonGroup,children:n.jsx(me,{variant:"secondary",onClick:()=>l(!1),className:Me.cancelButton,children:"Cancel"})}),e.status==="ready"&&n.jsxs("div",{className:Me.devToolsContainer,children:[n.jsx("span",{className:Me.devToolsLabel,children:"Developer Controls"}),n.jsxs("div",{className:Me.devButtons,children:[n.jsx(me,{variant:"tertiary",size:"s",onClick:()=>c("success"),children:"Success"}),n.jsx(me,{variant:"tertiary",size:"s",onClick:()=>c("net-error"),children:"Net Error"}),n.jsx(me,{variant:"tertiary",size:"s",onClick:()=>c("locked-error"),children:"Locked"})]})]})]})})]})})},nf="_viewContainer_9ldfb_5",sf="_header_9ldfb_29",of="_controlsHeader_9ldfb_75",af="_listContainer_9ldfb_103",An={viewContainer:nf,header:sf,controlsHeader:of,listContainer:af},rf=()=>{const e=ne(xt),t=ne(wa),s=ne(ba),o=ne(gs),[a,r]=oe(Ca),l=W(dm),i=W(vs),c=W(xs),[d,f]=oe(Mo),[u,m]=oe(Oo);T.useEffect(()=>{f(i),m(c)},[i,c,f,m]),T.useEffect(()=>()=>{r(""),s(new Set),f(null),m(null),t({status:"idle"})},[r,s,f,m,t]);const g=()=>{e({view:"none"})},C=(w,v)=>{t({status:"ready",roomId:w,roomName:v})};return n.jsxs(X.div,{className:An.viewContainer,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"tween",duration:.35,ease:[.16,1,.3,1]},children:[n.jsxs("header",{className:An.header,children:[n.jsx("h3",{children:"Write NFC tags"}),n.jsx(me,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:g,"aria-label":"Close",children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),n.jsxs("div",{className:An.controlsHeader,children:[n.jsx(zo,{groupId:d,unitId:u,onClick:()=>o(!0)}),n.jsx(Lo,{variant:"standalone",placeholder:"Search for a room...",value:a,onChange:r})]}),n.jsx("main",{className:An.listContainer,children:l.length>0?n.jsx(qd,{data:l,itemContent:(w,v)=>n.jsx(bt,{label:v.name,onClick:()=>C(v.id,v.name)},v.id)}):n.jsx(as,{title:"No Rooms Found",message:"Select a facility group and unit to see a list of rooms to provision."})}),n.jsx(tf,{})]})},lf="_overlay_1ea5i_5",cf="_contentWrapper_1ea5i_19",uf="_content_1ea5i_19",df="_handleContainer_1ea5i_67",mf="_handle_1ea5i_67",ff="_sheetHeader_1ea5i_105",hf="_sheetTitle_1ea5i_127",pf="_searchContainer_1ea5i_143",gf="_listContainer_1ea5i_163",vf="_listContent_1ea5i_177",xf="_sectionHeader_1ea5i_201",it={overlay:lf,contentWrapper:cf,content:uf,handleContainer:df,handle:mf,sheetHeader:ff,sheetTitle:hf,searchContainer:pf,listContainer:gf,listContent:vf,sectionHeader:xf},yf=()=>{const[e,t]=oe(ur),[s,o]=oe(dr),[a,r]=oe(mr),l=W(fr),i=W(hr),c=ne(xt),d=m=>{t(m),m||setTimeout(()=>{o(""),r(!1)},300)},f=m=>{t(!1),setTimeout(()=>{c({view:"form",type:"scheduled",method:"manual",checkId:m.id,roomName:m.residents[0]?.location||"Unknown Room",residents:m.residents,specialClassifications:m.specialClassifications})},300)},u=(m,g)=>{const C=new Set(g?.map(w=>w.residentId));return n.jsx("span",{style:{display:"flex",flexWrap:"wrap",gap:"var(--spacing-1)",alignItems:"center"},children:m.map((w,v)=>n.jsxs("span",{style:{display:"inline-flex",alignItems:"center",color:"inherit"},children:[C.has(w.id)&&n.jsx("span",{className:"material-symbols-rounded",style:{marginRight:"var(--spacing-0p5)",fontVariationSettings:"'FILL' 1",color:"var(--surface-fg-primary)"},children:"warning"}),w.name,v<m.length-1?",":""]},w.id))})};return n.jsx(jt.Root,{open:e,onOpenChange:d,children:n.jsxs(jt.Portal,{children:[n.jsx(jt.Overlay,{className:it.overlay}),n.jsx(jt.Content,{className:it.contentWrapper,children:n.jsxs("div",{className:it.content,children:[n.jsx("div",{className:it.handleContainer,children:n.jsx("div",{className:it.handle})}),n.jsxs("div",{className:it.sheetHeader,children:[n.jsx("h3",{className:it.sheetTitle,children:"Add Manual Check"}),n.jsx(me,{variant:"tertiary",size:"lg",iconOnly:!0,onClick:()=>t(!1),children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]}),n.jsx("div",{className:it.searchContainer,children:n.jsx(Lo,{placeholder:"Search room or resident...",value:s,onChange:o,variant:"standalone"})}),n.jsx("div",{className:it.listContainer,children:n.jsx("div",{className:it.listContent,children:l.length>0?n.jsxs(n.Fragment,{children:[s&&n.jsx("div",{className:it.sectionHeader,children:"Matching Results"}),l.map(m=>n.jsx(bt,{label:m.residents[0]?.location||"Unknown Room",subLabel:u(m.residents,m.specialClassifications),onClick:()=>f(m)},m.id))]}):n.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"var(--spacing-8) 0",textAlign:"center",color:"var(--surface-fg-secondary)"},children:[n.jsx("span",{className:"material-symbols-rounded",style:{marginBottom:"var(--spacing-2)",opacity:.5},children:"search_off"}),n.jsx("p",{children:"No rooms found."}),!a&&s&&n.jsx("div",{style:{marginTop:"var(--spacing-4)"},children:n.jsxs(me,{variant:"secondary",size:"s",onClick:()=>r(!0),children:["Search All Facilities (",i.count,")"]})})]})})})]})})]})})},wf="_container_993sg_5",bf="_label_993sg_19",Cf="_controlRow_993sg_31",_f="_trackWrapper_993sg_49",Sf="_trackGradient_993sg_75",Tf="_thumb_993sg_105",jf="_swatch_993sg_165",zt={container:wf,label:bf,controlRow:Cf,trackWrapper:_f,trackGradient:Sf,thumb:Tf,swatch:jf},Ma=({value:e,onChange:t,label:s,id:o})=>{const a=T.useId(),r=o||a,l=T.useRef(null),[i,c]=T.useState(!1),d=e/360*100,f=T.useCallback(v=>{if(!l.current)return;const h=l.current.getBoundingClientRect(),p=v-h.left,S=Math.max(0,Math.min(1,p/h.width)),_=Math.round(S*360);t(_)},[t]),u=v=>{c(!0),f(v);const h=S=>{const _="touches"in S?S.touches[0].clientX:S.clientX;f(_)},p=()=>{c(!1),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",p),document.removeEventListener("touchmove",h),document.removeEventListener("touchend",p)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",p),document.addEventListener("touchmove",h,{passive:!0}),document.addEventListener("touchend",p)},m=v=>{v.preventDefault(),u(v.clientX)},g=v=>{u(v.touches[0].clientX)},C=v=>{let h=e;switch(v.key){case"ArrowRight":case"ArrowUp":h=Math.min(360,e+5);break;case"ArrowLeft":case"ArrowDown":h=Math.max(0,e-5);break;case"Home":h=0;break;case"End":h=360;break;default:return}v.preventDefault(),t(h)},w=`oklch(0.65 0.18 ${e})`;return n.jsxs("div",{className:zt.container,children:[n.jsx("label",{htmlFor:r,className:zt.label,children:s}),n.jsxs("div",{className:zt.controlRow,children:[n.jsxs("div",{ref:l,className:zt.trackWrapper,onMouseDown:m,onTouchStart:g,children:[n.jsx("div",{className:zt.trackGradient}),n.jsx("div",{className:zt.thumb,style:{left:`${d}%`},role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":e,"aria-label":s,tabIndex:0,onKeyDown:C,"data-dragging":i})]}),n.jsx("div",{className:zt.swatch,style:{backgroundColor:w},"aria-hidden":"true"})]})]})},If="_settingsContainer_10x12_5",kf="_settingsSection_10x12_23",Nf="_sectionTitle_10x12_35",Rf="_settingsGroup_10x12_57",Ef="_settingsItem_10x12_79",Af="_itemLabel_10x12_145",Of="_logoutButton_10x12_195",Ne={settingsContainer:If,settingsSection:kf,sectionTitle:Nf,settingsGroup:Rf,settingsItem:Ef,itemLabel:Af,logoutButton:Of},Mf=[{value:"qr",label:"QR Code",icon:"qr_code_2"},{value:"nfc",label:"NFC",icon:"nfc"}],Bf=()=>{const[e,t]=oe(We),[s]=oe(Ft),[o,a]=oe(ws),r=W($t),l=ne($t),{trigger:i}=qe(),{theme:c,setTheme:d}=Ho(),f=r.user,u=w=>{i("light"),t(v=>({...v,hapticsEnabled:w}))},m=w=>{f&&a(v=>({...v,[f.username]:{...v[f.username],avatarHue:w}}))},g=()=>{l({isAuthenticated:!1,user:null})},C=f?o[f.username]?.avatarHue??Cs(f.username):0;return n.jsxs(X.div,{className:Ne.settingsContainer,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:Ne.settingsSection,children:[n.jsx("h3",{className:Ne.sectionTitle,children:"Preferences"}),n.jsxs("div",{className:Ne.settingsGroup,children:[n.jsxs("div",{className:Ne.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:Ne.itemLabel,children:"Scan Mode"}),n.jsx(lt,{id:"scan-mode-toggle",options:Mf,value:e.scanMode,onValueChange:w=>{i("selection"),t(v=>({...v,scanMode:w}))},itemDirection:"column"})]}),s.useHapticsEnabled&&n.jsxs("div",{className:Ne.settingsItem,children:[n.jsx("label",{htmlFor:"haptics-switch",className:Ne.itemLabel,children:"Haptic Feedback"}),n.jsx($e,{id:"haptics-switch",checked:e.hapticsEnabled,onCheckedChange:u})]}),s.useSoundEnabled&&n.jsxs("div",{className:Ne.settingsItem,children:[n.jsx("label",{htmlFor:"audio-switch",className:Ne.itemLabel,children:"Audio Feedback"}),n.jsx($e,{id:"audio-switch",checked:e.audioEnabled,onCheckedChange:w=>t(v=>({...v,audioEnabled:w}))})]}),s.enableDarkMode&&n.jsxs("div",{className:Ne.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:Ne.itemLabel,children:"Theme"}),n.jsx(lt,{id:"theme-toggle",options:[{value:"light",label:"Light"},{value:"dark-a",label:"Dark A"},{value:"dark-b",label:"Dark B"},{value:"dark-c",label:"Dark C"}],value:c,onValueChange:w=>{i("selection"),d(w)}})]})]})]}),s.enableEnhancedAvatarDropdown&&n.jsxs("div",{className:Ne.settingsSection,children:[n.jsx("h3",{className:Ne.sectionTitle,children:"Appearance"}),n.jsx("div",{className:Ne.settingsGroup,children:n.jsx("div",{className:Ne.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},"data-no-hover":"true",children:n.jsx(Ma,{label:"Avatar Color",value:C,onChange:m})})})]}),n.jsxs("div",{className:Ne.settingsSection,children:[n.jsx("h3",{className:Ne.sectionTitle,children:"Account"}),n.jsx(me,{variant:"secondary",onClick:g,className:Ne.logoutButton,children:"Log Out"})]})]})},Hf=()=>{const[e,t]=oe(Ft),[s,o]=oe(We),a=ne(Bo),{trigger:r}=qe(),l=i=>c=>{r("light"),i(c)};return n.jsx(X.div,{className:H.container,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:n.jsxs("div",{className:H.settingSection,children:[n.jsxs("div",{className:H.warningBlock,children:[n.jsx("strong",{children:"Experimental Features"}),n.jsx("br",{}),"These are just conceptual ideas for a potential future version.  Nothing here is expected for v1."]}),n.jsx("h3",{className:H.sectionHeader,children:"Scan Animation"}),n.jsx("div",{className:H.settingsGroup,children:n.jsxs("div",{className:H.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:H.itemLabel,children:"Animation Style"}),n.jsx(lt,{id:"scan-animation-style",options:[{value:"A",label:"A"},{value:"B",label:"B"},{value:"C",label:"C"},{value:"D",label:"D"},{value:"E",label:"E"},{value:"F",label:"F"}],value:e.feat_scan_animation,onValueChange:i=>{r("light"),t(c=>({...c,feat_scan_animation:i}))}})]})}),e.feat_scan_animation==="B"&&n.jsxs(me,{variant:"secondary",onClick:()=>{r("light"),a(!0)},children:[n.jsx("span",{className:"material-symbols-rounded",children:"animation"}),"Ring Animation Sandbox"]}),n.jsxs("div",{className:H.settingsGroup,children:[n.jsxs("div",{className:H.settingsItem,children:[n.jsx("label",{htmlFor:"use-sound-switch",className:H.itemLabel,children:"Use Sound"}),n.jsx($e,{id:"use-sound-switch",checked:e.useSoundEnabled,onCheckedChange:l(i=>t(c=>({...c,useSoundEnabled:i})))})]}),n.jsxs("div",{className:H.settingsItem,children:[n.jsx("label",{htmlFor:"use-haptics-switch",className:H.itemLabel,children:"Use Haptics"}),n.jsx($e,{id:"use-haptics-switch",checked:e.useHapticsEnabled,onCheckedChange:l(i=>t(c=>({...c,useHapticsEnabled:i})))})]}),e.useHapticsEnabled&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:H.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:H.itemLabel,children:"Success pattern"}),n.jsx(lt,{id:"haptic-success-toggle",options:[{value:"light",label:"Light"},{value:"medium",label:"Medium"},{value:"heavy",label:"Heavy"}],value:s.hapticPatternSuccess,onValueChange:i=>{o(c=>({...c,hapticPatternSuccess:i})),setTimeout(()=>{r("success")},50)}})]}),n.jsxs("div",{className:H.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:H.itemLabel,children:"Error pattern"}),n.jsx(lt,{id:"haptic-error-toggle",options:[{value:"simple",label:"Simple"},{value:"double",label:"Double"},{value:"grind",label:"Grind"},{value:"stutter",label:"Stutter"}],value:s.hapticPatternError,onValueChange:i=>{o(c=>({...c,hapticPatternError:i})),setTimeout(()=>{r("error")},50)}})]})]})]}),n.jsxs("div",{className:H.settingsGroup,children:[n.jsxs("div",{className:H.settingsItem,children:[n.jsx("label",{htmlFor:"enable-dark-mode-switch",className:H.itemLabel,children:"Enable Dark Mode"}),n.jsx($e,{id:"enable-dark-mode-switch",checked:e.enableDarkMode,onCheckedChange:l(i=>t(c=>({...c,enableDarkMode:i})))})]}),n.jsxs("div",{className:H.settingsItem,children:[n.jsx("label",{htmlFor:"enable-enhanced-avatar-switch",className:H.itemLabel,children:"Enhanced Avatar Dropdown"}),n.jsx($e,{id:"enable-enhanced-avatar-switch",checked:e.enableEnhancedAvatarDropdown,onCheckedChange:l(i=>t(c=>({...c,enableEnhancedAvatarDropdown:i})))})]})]}),n.jsx("h3",{className:H.sectionHeader,children:"Late Check Concepts"}),n.jsx("div",{className:H.settingsGroup,children:n.jsxs("div",{className:H.settingsItem,children:[n.jsx("label",{htmlFor:"feat-vignette-switch",className:H.itemLabel,children:"Active Vignette"}),n.jsx($e,{id:"feat-vignette-switch",checked:e.feat_vignette,onCheckedChange:l(i=>t(c=>({...c,feat_vignette:i})))})]})}),n.jsx("h4",{className:H.subsectionHeader,children:"Pulse Effects"}),n.jsxs("div",{className:H.settingsGroup,children:[n.jsxs("div",{className:H.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:H.itemLabel,children:"Glass Pulse Style"}),n.jsx(lt,{id:"glass-pulse-style",options:[{value:"none",label:"None"},{value:"basic",label:"Basic"},{value:"gradient",label:"Gradient"}],value:e.feat_glass_pulse,onValueChange:i=>{r("light"),t(c=>({...c,feat_glass_pulse:i}))}})]}),n.jsxs("div",{className:H.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:H.itemLabel,children:"Card Pulse Style"}),n.jsx(lt,{id:"card-pulse-style",options:[{value:"none",label:"None"},{value:"basic",label:"Basic"},{value:"gradient",label:"Gradient"}],value:e.feat_card_pulse,onValueChange:i=>{r("light"),t(c=>({...c,feat_card_pulse:i}))}})]})]}),n.jsx("h4",{className:H.subsectionHeader,children:"Other Card Effects"}),n.jsxs("div",{className:H.settingsGroup,children:[n.jsxs("div",{className:H.settingsItem,children:[n.jsx("label",{htmlFor:"feat-card-border-switch",className:H.itemLabel,children:"Fluid Borders"}),n.jsx($e,{id:"feat-card-border-switch",checked:e.feat_card_border,onCheckedChange:l(i=>t(c=>({...c,feat_card_border:i})))})]}),n.jsxs("div",{className:H.settingsItem,children:[n.jsx("label",{htmlFor:"feat-hazard-texture-switch",className:H.itemLabel,children:"Hazard Texture"}),n.jsx($e,{id:"feat-hazard-texture-switch",checked:e.feat_hazard_texture,onCheckedChange:l(i=>t(c=>({...c,feat_hazard_texture:i})))})]}),n.jsxs("div",{className:H.settingsItem,children:[n.jsx("label",{htmlFor:"feat-invert-card-switch",className:H.itemLabel,children:"Invert Card"}),n.jsx($e,{id:"feat-invert-card-switch",checked:e.feat_invert_card,onCheckedChange:l(i=>t(c=>({...c,feat_invert_card:i})))})]}),n.jsxs("div",{className:H.settingsItem,children:[n.jsx("label",{htmlFor:"feat-invert-badge-switch",className:H.itemLabel,children:"Invert Badge"}),n.jsx($e,{id:"feat-invert-badge-switch",checked:e.feat_invert_badge,onCheckedChange:l(i=>t(c=>({...c,feat_invert_badge:i})))})]})]}),n.jsx("div",{className:H.settingsGroup,children:n.jsxs("div",{className:H.settingsItem,children:[n.jsx("label",{htmlFor:"feat-badge-pulse-switch",className:H.itemLabel,children:"Badge Pulse"}),n.jsx($e,{id:"feat-badge-pulse-switch",checked:e.feat_badge_mode==="pulse",onCheckedChange:l(i=>t(c=>({...c,feat_badge_mode:i?"pulse":"none"})))})]})}),n.jsx("div",{className:H.settingsGroup,children:n.jsxs("div",{className:H.settingsItem,children:[n.jsx("label",{htmlFor:"feat-jump-fab-switch",className:H.itemLabel,children:"Jump FAB"}),n.jsx($e,{id:"feat-jump-fab-switch",checked:e.feat_jump_fab,onCheckedChange:l(i=>t(c=>({...c,feat_jump_fab:i})))})]})})]})})},Lf="_userSettingsContainer_1oi7l_5",zf="_profileHeader_1oi7l_25",Df="_avatarLarge_1oi7l_45",Pf="_userName_1oi7l_69",$f="_settingsSection_1oi7l_87",Wf="_sectionTitle_1oi7l_99",Ff="_settingsGroup_1oi7l_119",Vf="_settingsItem_1oi7l_137",Gf="_itemLabel_1oi7l_203",qf="_logoutButton_1oi7l_215",we={userSettingsContainer:Lf,profileHeader:zf,avatarLarge:Df,userName:Pf,settingsSection:$f,sectionTitle:Wf,settingsGroup:Ff,settingsItem:Vf,itemLabel:Gf,logoutButton:qf},Uf=()=>{const e=W($t),t=ne($t),[s,o]=oe(We),[a,r]=oe(ws),[l]=oe(Ft),{theme:i,setTheme:c}=Ho(),{trigger:d}=qe();if(!e.user)return null;const{username:f,initials:u,displayName:m}=e.user,g=a[f]?.avatarHue,C=g!==void 0?g:Cs(f),w=`oklch(0.65 0.18 ${C})`,v=()=>{t({isAuthenticated:!1,user:null})},h=_=>{d("light"),c(_)},p=_=>{d("light"),o(y=>({...y,scanMode:_}))},S=_=>{r(y=>({...y,[f]:{...y[f],avatarHue:_}}))};return n.jsxs(X.div,{className:we.userSettingsContainer,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:we.profileHeader,children:[n.jsx("div",{className:we.avatarLarge,style:{backgroundColor:w},children:u}),n.jsx("h2",{className:we.userName,children:m})]}),n.jsxs("div",{className:we.settingsSection,children:[n.jsx("h3",{className:we.sectionTitle,children:"Appearance"}),n.jsxs("div",{className:we.settingsGroup,children:[n.jsxs("div",{className:we.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:we.itemLabel,children:"Theme"}),n.jsx(lt,{id:"user-theme-toggle",options:[{value:"light",label:"Light"},{value:"dark-c",label:"Dark"}],value:i==="light"?"light":"dark-c",onValueChange:h,layout:"row"})]}),n.jsx("div",{className:we.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},"data-no-hover":"true",children:n.jsx(Ma,{label:"Avatar Color",value:C,onChange:S})})]})]}),n.jsxs("div",{className:we.settingsSection,children:[n.jsx("h3",{className:we.sectionTitle,children:"Preferences"}),n.jsxs("div",{className:we.settingsGroup,children:[n.jsxs("div",{className:we.settingsItem,style:{flexDirection:"column",alignItems:"stretch",gap:"var(--spacing-2)"},children:[n.jsx("label",{className:we.itemLabel,children:"Scan Mode"}),n.jsx(lt,{id:"user-scan-mode-toggle",options:[{value:"qr",label:"QR",icon:"qr_code_2"},{value:"nfc",label:"NFC",icon:"nfc"}],value:s.scanMode,onValueChange:p,itemDirection:"column"})]}),l.useHapticsEnabled&&n.jsxs("div",{className:we.settingsItem,children:[n.jsx("label",{htmlFor:"user-haptics-switch",className:we.itemLabel,children:"Haptic Feedback"}),n.jsx($e,{id:"user-haptics-switch",checked:s.hapticsEnabled,onCheckedChange:_=>{d("light"),o(y=>({...y,hapticsEnabled:_}))}})]}),l.useSoundEnabled&&n.jsxs("div",{className:we.settingsItem,children:[n.jsx("label",{htmlFor:"user-audio-switch",className:we.itemLabel,children:"Audio Feedback"}),n.jsx($e,{id:"user-audio-switch",checked:s.audioEnabled,onCheckedChange:_=>o(y=>({...y,audioEnabled:_}))})]})]})]}),n.jsxs("div",{className:we.settingsSection,children:[n.jsx("h3",{className:we.sectionTitle,children:"Account"}),n.jsxs(me,{variant:"secondary",onClick:v,className:we.logoutButton,children:[n.jsx("span",{className:"material-symbols-rounded",children:"logout"}),n.jsx("span",{children:"Log Out"})]})]})]})},Yf="_container_4z875_5",Kf="_contextBanner_4z875_25",Xf="_viewWrapper_4z875_61",Zf="_listContainer_4z875_87",Ut={container:Yf,contextBanner:Kf,viewWrapper:Xf,listContainer:Zf},wo={enter:e=>({x:e===0?0:e>0?"100%":"-100%",opacity:1}),center:{x:0,opacity:1},exit:e=>({x:e<0?"100%":"-100%",opacity:1})},Qf=()=>{const[e,t]=oe(pr),[s,o]=oe(gs),[a,r]=oe(vs),[l,i]=oe(xs),c=ne(gr),d=ne(bs),f=ne(_o),{trigger:u}=qe(),[m,g]=T.useState("group"),[C,w]=T.useState(0),[v,h]=T.useState(a),[p,S]=T.useState("right"),_=e||s;T.useEffect(()=>{_&&(g("group"),w(0),h(a),S("right"))},[_,a]);const y=()=>{if(m==="unit"){w(-1),g("group");return}S("right"),e?c():o(!1)},x=E=>{u("selection"),h(E),w(1),g("unit")},b=E=>{u("selection"),v&&(S("left"),(v!==a||E!==l)&&f(!0),r(v),i(E),d("dashboardTime"),e&&t(!1),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!1)})}))},I=os.find(E=>E.id===v),N=I?.units||[],O=()=>m==="group"?"Select Facility":"Select Unit";return n.jsx(sn,{isOpen:_,onClose:y,title:O(),transitionType:"slide-horizontal",exitDirection:p,children:n.jsx("div",{className:Ut.container,children:n.jsx(st,{initial:!1,custom:C,mode:"popLayout",children:m==="group"?n.jsx(X.div,{className:Ut.viewWrapper,custom:C,variants:wo,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:n.jsx("div",{className:Ut.listContainer,style:{borderTop:"none"},children:os.map(E=>n.jsx(bt,{label:E.name,leadingIcon:"domain",onClick:()=>x(E.id),showChevron:!0},E.id))})},"group-list"):n.jsxs(X.div,{className:Ut.viewWrapper,custom:C,variants:wo,initial:"enter",animate:"center",exit:"exit",transition:{type:"tween",duration:.3,ease:[.32,.72,0,1]},children:[n.jsxs("div",{className:Ut.contextBanner,children:[n.jsx("span",{className:"material-symbols-rounded",children:"domain"}),I?.name]}),n.jsx("div",{className:Ut.listContainer,children:N.map(E=>n.jsx(bt,{label:E.name,onClick:()=>b(E.id),showChevron:!0},E.id))})]},"unit-list")})})})},Jf=[{key:"ringCount",label:"Ring Count",min:5,max:15,step:1},{key:"conveyorDuration",label:"Conveyor Duration",min:20,max:120,step:5,unit:"s"},{key:"baseOpacity",label:"Base Opacity",min:.1,max:.6,step:.05},{key:"fadeInPercent",label:"Fade In %",min:.05,max:.3,step:.05},{key:"fadeOutPercent",label:"Fade Out %",min:.05,max:.3,step:.05},{key:"baseStrokeWidth",label:"Base Stroke",min:1,max:4,step:.5,unit:"px"},{key:"shimmerPeriod",label:"Shimmer Period",min:2,max:15,step:.5,unit:"s"},{key:"shimmerDuration",label:"Shimmer Duration",min:.5,max:5,step:.25,unit:"s"},{key:"shimmerOpacityBoost",label:"Shimmer Opacity+",min:.1,max:1,step:.05},{key:"shimmerStrokeBoost",label:"Shimmer Stroke+",min:.5,max:3,step:.25,unit:"px"}],eh=[{name:"Gentle Breath",description:"60s conveyor / 6s shimmer (10 cycles) - slow, meditative",params:{ringCount:10,conveyorDuration:60,shimmerPeriod:6,shimmerDuration:2,baseOpacity:.25,shimmerOpacityBoost:.4}},{name:"Heartbeat",description:"40s conveyor / 5s shimmer (8 cycles) - rhythmic pulse",params:{ringCount:8,conveyorDuration:40,shimmerPeriod:5,shimmerDuration:1.5,baseOpacity:.3,shimmerOpacityBoost:.5}},{name:"Radar Sweep",description:"30s conveyor / 3s shimmer (10 cycles) - quick, active",params:{ringCount:10,conveyorDuration:30,shimmerPeriod:3,shimmerDuration:1,baseOpacity:.2,shimmerOpacityBoost:.6,shimmerStrokeBoost:2}},{name:"Ocean Tide",description:"90s conveyor / 9s shimmer (10 cycles) - very slow, calming",params:{ringCount:12,conveyorDuration:90,shimmerPeriod:9,shimmerDuration:3,baseOpacity:.2,fadeInPercent:.2,fadeOutPercent:.2,shimmerOpacityBoost:.35}},{name:"Perfect Sync",description:"50s conveyor / 5s shimmer (10 cycles) - 10 rings, each shimmer = 1 ring",params:{ringCount:10,conveyorDuration:50,shimmerPeriod:5,shimmerDuration:2,baseOpacity:.3,shimmerOpacityBoost:.5}}],th=({params:e,mountKey:t})=>{const[s,o]=T.useState([]),a=T.useRef(0),r=T.useRef(0);return T.useEffect(()=>{a.current=performance.now(),r.current=performance.now();const l=()=>{const c=performance.now(),d=(c-a.current)/1e3;(c-r.current)/1e3>=e.shimmerPeriod&&(r.current=c);const u=Array.from({length:e.ringCount},(m,g)=>{const C=g/e.ringCount*e.conveyorDuration,w=(d+C)%e.conveyorDuration/e.conveyorDuration,v=g/e.ringCount*e.shimmerDuration,h=(c-r.current)/1e3,p=Math.max(0,Math.min(1,(h-v)/.8));return{conveyor:w,shimmer:p<1&&p>0?p:0}});o(u)},i=setInterval(l,100);return l(),()=>clearInterval(i)},[e,t]),n.jsxs("div",{className:H.phaseViz,children:[n.jsx("div",{className:H.phaseVizLabel,children:"Phase Alignment (Ring 0 = inner)"}),n.jsx("div",{className:H.phaseVizGrid,children:s.map((l,i)=>n.jsxs("div",{className:H.phaseVizRing,children:[n.jsx("span",{className:H.phaseVizIndex,children:i}),n.jsx("div",{className:H.phaseVizBar,children:n.jsx("div",{className:H.phaseVizConveyor,style:{width:`${l.conveyor*100}%`}})}),n.jsx("div",{className:H.phaseVizBar,children:n.jsx("div",{className:H.phaseVizShimmer,style:{width:l.shimmer>0?`${(1-Math.abs(l.shimmer-.5)*2)*100}%`:"0%",opacity:l.shimmer>0?1:.3}})})]},i))})]})},nh=({onClose:e})=>{const[t,s]=T.useState(rs),[o,a]=T.useState(0),[r,l]=T.useState(!0),i=T.useCallback((u,m)=>{s(g=>({...g,[u]:m}))},[]),c=T.useCallback(()=>{s(rs),a(u=>u+1)},[]),d=T.useCallback(()=>{a(u=>u+1)},[]),f=T.useCallback(()=>{const u=JSON.stringify(t,null,2);navigator.clipboard.writeText(u),console.log("[RingAnimationTest] Config copied:",u)},[t]);return n.jsxs(X.div,{className:H.ringTestContainer,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[n.jsxs("div",{className:H.ringTestPreview,children:[n.jsx(Po,{isEnabled:!0,params:t},o),n.jsx("div",{className:H.ringTestLabel,children:"Ring Animation Sandbox"})]}),n.jsxs("div",{className:H.ringTestControls,children:[n.jsxs("div",{className:H.ringTestHeader,children:[n.jsx("h3",{children:"Parameters"}),n.jsxs("div",{className:H.ringTestActions,children:[n.jsxs(me,{variant:"tertiary",size:"s",onClick:()=>l(u=>!u),children:[n.jsx("span",{className:"material-symbols-rounded",children:"monitoring"}),"Phase"]}),n.jsxs(me,{variant:"tertiary",size:"s",onClick:d,children:[n.jsx("span",{className:"material-symbols-rounded",children:"refresh"}),"Remount"]}),n.jsxs(me,{variant:"tertiary",size:"s",onClick:c,children:[n.jsx("span",{className:"material-symbols-rounded",children:"restart_alt"}),"Reset"]}),n.jsxs(me,{variant:"tertiary",size:"s",onClick:f,children:[n.jsx("span",{className:"material-symbols-rounded",children:"content_copy"}),"Copy"]}),n.jsx(me,{variant:"tertiary",size:"s",onClick:e,children:n.jsx("span",{className:"material-symbols-rounded",children:"close"})})]})]}),r&&n.jsx(th,{params:t,mountKey:o}),n.jsxs("div",{className:H.recipeSection,children:[n.jsx("div",{className:H.recipeLabel,children:"Sync Recipes"}),n.jsx("div",{className:H.recipeGrid,children:eh.map(u=>n.jsx("button",{className:H.recipeButton,onClick:()=>{s(m=>({...m,...u.params})),a(m=>m+1)},title:u.description,children:u.name},u.name))})]}),n.jsx("div",{className:H.ringTestSliders,children:Jf.map(u=>n.jsxs("div",{className:H.ringTestSlider,children:[n.jsxs("label",{children:[u.label,": ",t[u.key],u.unit||""]}),n.jsx("input",{type:"range",min:u.min,max:u.max,step:u.step,value:t[u.key],onChange:m=>i(u.key,parseFloat(m.target.value))})]},u.key))})]})]})},Ba=T.createContext(null),sh=()=>{const e=T.useContext(Ba);if(!e)throw new Error("useGestureContext must be used within a GestureProvider");return e},oh=({children:e})=>{const t=Fs(0),s=Fs(0);return n.jsx(Ba.Provider,{value:{filmStripProgress:t,sideMenuProgress:s},children:e})},ah=()=>{T.useEffect(()=>{if(!window.visualViewport)return;const e=()=>{requestAnimationFrame(()=>{const t=window.visualViewport?.height;t&&document.documentElement.style.setProperty("--visual-viewport-height",`${t}px`)})};return e(),window.visualViewport.addEventListener("resize",e),window.visualViewport.addEventListener("scroll",e),()=>{window.visualViewport?.removeEventListener("resize",e),window.visualViewport?.removeEventListener("scroll",e),document.documentElement.style.removeProperty("--visual-viewport-height")}},[])},rh="_appContainer_1q3pp_5",ih="_sideMenuContainer_1q3pp_25",lh="_mainViewWrapper_1q3pp_49",ch="_backdrop_1q3pp_71",uh="_chromeContainer_1q3pp_105",nn={appContainer:rh,sideMenuContainer:ih,mainViewWrapper:lh,backdrop:ch,chromeContainer:uh},ss={type:"spring",stiffness:400,damping:40,restDelta:.001},dh=()=>{const[e,t]=oe(bs),s=W(xt),[o,a]=oe(So),[r,l]=oe(To),[i,c]=oe(jo),[d,f]=oe(Io),[u,m]=oe(Bo),g=T.useCallback(()=>{c(!1)},[c]),[C,w]=T.useState(0),v=T.useRef(null),h=T.useRef(null),{filmStripProgress:p,sideMenuProgress:S}=sh(),_=T.useRef(!1),y=T.useRef(0),x=T.useRef(0),b=T.useRef(0);T.useEffect(()=>{v.current&&w(v.current.offsetWidth)},[]),T.useEffect(()=>{_.current||(e==="sideMenu"?Un(S,1,ss):Un(S,0,ss))},[e,S]),T.useEffect(()=>{s.view!=="none"&&(S.get()>0&&S.set(0),e==="sideMenu"&&t("dashboardTime"))},[s.view,S,e,t]),ah(),T.useEffect(()=>{s.view==="form"&&"residents"in s&&s.residents.length>0?document.title=`Safety Check - ${s.residents[0].location}`:document.title="Safety Check App"},[s]);const I=()=>{t("dashboardTime")},N=F=>{s.view==="none"&&(y.current=F.clientX,x.current=F.clientY,b.current=p.get(),_.current=!1)},O=F=>{if(s.view==="none"){if(_.current){const K=F.clientX-y.current,te=window.innerWidth,ie=K/te;if(e==="sideMenu"){const le=Math.max(0,Math.min(1,1+K/C));S.set(le);return}if(e==="dashboardTime"&&K>0){const le=Math.max(0,Math.min(1,K/C));S.set(le);return}if(S.get()===0){const le=Math.max(0,Math.min(1,b.current-ie));p.set(le)}return}if(F.buttons>0||F.pointerType==="touch"){const K=Math.abs(F.clientX-y.current),te=Math.abs(F.clientY-x.current);K>10&&K>te&&(_.current=!0,F.currentTarget.setPointerCapture(F.pointerId))}}},E=F=>{if(!_.current)return;_.current=!1,F.currentTarget.releasePointerCapture(F.pointerId);const K=F.clientX-y.current,te=S.get();let ie=!1;e==="sideMenu"?ie=!(te<.8||K<-50):ie=te>.2||K>50,Un(S,ie?1:0,ss),t(ie?"sideMenu":"dashboardTime")},P=Sn(S,[0,1],[0,C]),M=Sn(S,[0,1],[-C,0]),B=Sn(S,[0,1],[0,1]),$=Sn(S,F=>F>0?"auto":"none");return n.jsxs("div",{className:nn.appContainer,onPointerDown:N,onPointerMove:O,onPointerUp:E,onPointerCancel:E,onPointerLeave:E,style:{touchAction:"pan-y"},children:[n.jsx(X.div,{ref:v,className:nn.sideMenuContainer,style:{x:M},children:n.jsx(Ji,{})}),n.jsxs(X.div,{className:nn.mainViewWrapper,style:{x:P},children:[n.jsx(Ai,{}),n.jsx(X.div,{className:nn.backdrop,style:{opacity:B,pointerEvents:$},onClick:I}),n.jsxs("div",{ref:h,className:nn.chromeContainer,children:[n.jsx(_c,{}),n.jsx(kl,{})]}),n.jsx(wc,{})]}),n.jsxs(st,{children:[s.view==="scanning"&&n.jsx(Pc,{}),s.view==="form"&&n.jsx(Hu,{checkData:s}),s.view==="provisioning"&&n.jsx(rf,{})]}),n.jsx(yf,{}),n.jsx(Qf,{}),n.jsx(sn,{isOpen:o,onClose:()=>a(!1),title:"Settings",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(Bf,{})}),n.jsx(sn,{isOpen:r,onClose:()=>l(!1),title:"Developer Tools",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(Sr,{})}),n.jsx(sn,{isOpen:i,onClose:g,title:"Future Ideas",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(Hf,{})}),n.jsx(sn,{isOpen:d,onClose:()=>f(!1),title:"User Settings",transitionType:"slide-horizontal",actionType:"back",children:n.jsx(Uf,{})}),n.jsx(st,{children:u&&n.jsx(nh,{onClose:()=>m(!1)})})]})},wh=()=>n.jsx(oh,{children:n.jsx(dh,{})});export{wh as AppShell};
